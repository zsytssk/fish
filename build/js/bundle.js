(()=>{var e={63711:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.ComponentManager=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(73718)),f=i(n(25233)),d=i(n(91678));function h(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return v(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=function(){function e(){(0,f.default)(this,e),this.destroyed=!1,this.components=new c.default}return(0,d.default)(e,[{key:"addCom",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var a=r[i];this.components.add(a)}}},{key:"delCom",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var a=r[i];this.components.delete(a)}}},{key:"getCom",value:function(e){var t,n=h(this.components);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i instanceof e)return i}}catch(e){n.e(e)}finally{n.f()}}},{key:"destroy",value:function(){var e,t=h(this.components);try{for(t.s();!(e=t.n()).done;){var n=e.value;"function"==typeof n.destroy&&n.destroy()}}catch(e){t.e(e)}finally{t.f()}this.components.clear(),this.destroyed=!0}}]),e}();t.ComponentManager=p},4615:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.EventCom=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(29426)),f=i(n(84048)),d=i(n(73718)),h=i(n(1979)),v=i(n(25233)),p=i(n(91678));function y(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return g(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var m=function(){function e(){(0,v.default)(this,e),this.events=new h.default}return(0,p.default)(e,[{key:"on",value:function(e,t,n,i){var r,a=this;this.events.has(e)?r=this.events.get(e):(r=new d.default,this.events.set(e,r));var o,l=y(r);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(n===u.caller&&t===u.callback)return}}catch(e){l.e(e)}finally{l.f()}r.add({caller:n,callback:t,once:i,off:function(){a.off(e,t,n)}})}},{key:"once",value:function(e,t,n){return this.on(e,t,n,!0)}},{key:"getBind",value:function(e){return this.events.get(e)}},{key:"off",value:function(e,t,n){if(this.events.has(e))for(var i=this.events.get(e),r=0,a=(0,f.default)(i);r<a.length;r++){var o=a[r];if(o.callback===t&&o.caller===n){i.delete(o);break}}}},{key:"offAllCaller",value:function(e){var t,n,i=y((0,c.default)(t=this.events).call(t));try{for(i.s();!(n=i.n()).done;)for(var r=n.value,a=0,o=(0,f.default)(r);a<o.length;a++){var l=o[a];l.caller===e&&r.delete(l)}}catch(e){i.e(e)}finally{i.f()}}},{key:"emit",value:function(e){if(this.events.has(e)){for(var t=this.events.get(e),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0,o=(0,f.default)(t);a<o.length;a++){var l=o[a];if(t.has(l)){var u=l.callback,s=l.once,c=l.off;"function"==typeof u&&u.apply(void 0,i),s&&c()}}}}},{key:"destroy",value:function(){this.events.clear()}}]),e}();t.EventCom=m},88087:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=t.AnyStr=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(77433)),f=i(n(29426)),d=i(n(43142)),h=i(n(92765)),v=i(n(1979)),p=i(n(25233)),y=i(n(91678));function g(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return m(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _="*";t.AnyStr=_;var k=function(){function e(){(0,p.default)(this,e),this.events=new v.default}return(0,y.default)(e,[{key:"on",value:function(e){var t=this,n=e.event,i=e.callback,r=e.caller,a=e.once,o=e.unshift;if("object"!==(0,h.default)(n)){var l=[];this.events.has(n)?l=this.events.get(n):this.events.set(n,l);var u,s=g(l);try{for(s.s();!(u=s.n()).done;){var c=u.value;if(r===c.caller&&i===c.callback)return}}catch(e){s.e(e)}finally{s.f()}var f=function(){t.off({event:n,callback:i,caller:r})};o?l.unshift({caller:r,callback:i,once:a,off:f}):l.push({caller:r,callback:i,once:a,off:f})}else for(var d in r=i,n)n.hasOwnProperty(d)&&this.on({event:d,callback:n[d],caller:r})}},{key:"off",value:function(e){var t=e.event,n=e.callback,i=e.caller;if("object"!==(0,h.default)(t)){if(this.events.has(t))if(n||i){for(var r=this.events.get(t),a=r.length-1;a>=0;a--)if(r[a].callback===n&&r[a].caller===i){(0,d.default)(r).call(r,a,1);break}}else this.events.delete(t)}else for(var o in i=n,t)t.hasOwnProperty(o)&&this.off({event:o,callback:t[o],caller:i})}},{key:"offCaller",value:function(e){var t,n,i=g((0,f.default)(t=this.events).call(t));try{for(i.s();!(n=i.n()).done;)for(var r=n.value,a=r.length-1;a>=0;a--)r[a].caller===e&&(0,d.default)(r).call(r,a,1)}catch(e){i.e(e)}finally{i.f()}}},{key:"emit",value:function(e){for(var t=[_,e],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0,o=t;a<o.length;a++){var l=o[a];if(this.events.has(l)){var u,s=this.events.get(l),f=g((0,c.default)(s).call(s,[]));try{for(f.s();!(u=f.n()).done;){var d,h=u.value,v=void 0,p=h.callback,y=h.once,m=h.off;if("function"==typeof p&&(v=l===_?p.apply(void 0,(0,c.default)(d=[e]).call(d,i)):p.apply(void 0,i)),y&&m(),v)return v}}catch(e){f.e(e)}finally{f.f()}}}}},{key:"clear",value:function(){this.events=new v.default}}]),e}();t.default=k},20126:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.TimeoutCom=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(19289)),f=i(n(6113)),d=i(n(73718)),h=i(n(25233)),v=i(n(91678));function p(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return y(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g=function(){function e(){(0,h.default)(this,e),this.timeout_list=new d.default,this.interval_list=new d.default}return(0,v.default)(e,[{key:"createTimeout",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(0,f.default)((function(){e(),t.timeout_list.delete(i)}),n);return this.timeout_list.add(i),i}},{key:"createInterval",value:function(e,t){var n=this,i=(0,c.default)((function(){e(),n.interval_list.delete(i)}),t);return this.interval_list.add(i),i}},{key:"clear",value:function(e){var t=this.timeout_list,n=this.interval_list;t.has(e)&&(t.delete(e),clearTimeout(e)),n.has(e)&&(n.delete(e),clearInterval(e))}},{key:"destroy",value:function(){var e,t=this.timeout_list,n=this.interval_list,i=p(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;clearTimeout(r)}}catch(e){i.e(e)}finally{i.f()}var a,o=p(n);try{for(o.s();!(a=o.n()).done;){var l=a.value;clearInterval(l)}}catch(e){o.e(e)}finally{o.f()}t.clear(),n.clear()}}]),e}();t.TimeoutCom=g},53746:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41509)),a=i(n(68393)),o=i(n(82069)),l=n(25371),u=n(24561),s=n(73705),c=n(83922),f=n(15875),d=n(63585),h=n(49663),v=n(19669),p=n(55986),y=n(25887),g=n(1716),m=function(e,t,n,i){return new(n||(n=o.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},_=!1,k={name:"Honor",version:"1.0.0-beta",run:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m(this,void 0,void 0,r.default.mark((function n(){var i,u,k,b,w=this;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.Laya.Config.isAntialias=!0,c.Laya.Config.useRetinalCanvas=!0,c.Laya.init(e.width,e.height,v.WebGL),c.Laya.stage.frameRate=p.Stage.FRAME_SLOW,c.Laya.DebugPanel&&c.Laya.DebugPanel.enable(),g.URL.basePath=t.basePath||g.URL.basePath,c.Laya.stage.scaleMode=e.scaleMode,c.Laya.stage.screenMode=e.screenMode,c.Laya.stage.alignV=e.alignV,c.Laya.stage.alignH=e.alignH,g.URL.exportSceneToJson=e.exportSceneToJson,e.debug||"true"===y.Utils.getQueryString("debug")?(_=!0,c.Laya.enableDebugPanel()):_=!1,e.stat&&f.Stat.show(0,0),c.Laya.alertGlobalError(!1),i=(i=t.defaultVersion)||"0",g.URL.customFormat=function(e){var t=g.URL.version||{};if((0,a.default)(e).call(e,"data:image")<0&&(0,a.default)(e).call(e,"?")<0&&(0,a.default)(e).call(e,"?v=")<0){var n=t[e];!n&&i&&(n=i),e+="?v="+n}return e},u=[],k=new o.default((function(e,t){d.AtlasInfoManager.enable("fileconfig.json",h.Handler.create(null,(function(){return m(w,void 0,void 0,r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)})))})))})),u.push(k),(b=t.versionPath)&&u.push((0,s.loadRes)([b])),n.next=24,o.default.all(u);case 24:b&&(g.URL.version=c.loader.getRes(b)),(0,l.initState)();case 26:case"end":return n.stop()}}),n)})))},director:l.director,utils:u.utils,DEBUG_MODE:_};t.default=k},22229:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.WebSocketCtrl=void 0;var r=i(n(19289)),a=i(n(6113)),o=i(n(25233)),l=i(n(91678)),u=n(20096),s=function(){function e(t){var n=this;(0,o.default)(this,e),this.reconnect_count=0,this.reconnect_max=3,this.heartbeat_time=10,this.heartbeat_gap_time=3,this.onopen=function(){(0,u.log)("WebSocket:> 连接上了"),n.status="OPEN";var e=n.handlers,t=e.onInit,i=e.onReconnected;n.ping_pong_map&&n.startHeartBeat(),n.reconnect_count=0,"function"==typeof t?(t(),n.handlers.onInit=null):"function"==typeof i&&i()},this.onmessage=function(e){var t=n.handlers.onData,i=e.data;if(n.ping_pong_map){var r=n.ping_pong_map,a=r.ping,o=r.pong;switch(i){case a:n.sendPong();break;case o:n.startHeartBeat()}}"function"==typeof t&&t(i)},this.onError=function(){"function"==typeof n.handlers.onError&&n.handlers.onError()},this.onclose=function(){"function"==typeof n.handlers.onClose&&n.handlers.onClose(),n.reconnect()},this.url=t.url,this.handlers=t.handlers,this.ping_pong_map=t.ping_pong_map,this.connect()}return(0,l.default)(e,[{key:"connect",value:function(){if((0,u.log)("WebSocket:> 连接..."),!this.ws){var e=this.url;this.status="CONNECTING";var t=new WebSocket(e);t.onopen=this.onopen,t.onmessage=this.onmessage,t.onerror=this.onError,t.onclose=this.onclose,this.ws=t}}},{key:"send",value:function(e){var t=this.status,n=this.ws;if("OPEN"!==t)return console.error("socket is no connected!");n.send(e)}},{key:"reconnect",value:function(){var e=this;(0,u.log)("WebSocket:> 断线重连");var t=this.reconnect_count,n=this.reconnect_max,i=this.handlers;if(this.status="CONNECTING",t>n)this.end();else{"function"==typeof i.onReconnect&&0===t&&i.onReconnect(t),this.reset();var r=0===t?0:3e3;clearTimeout(this.reconnect_timeout),this.reconnect_timeout=(0,a.default)((function(){e.connect()}),r),this.reconnect_count++}}},{key:"startHeartBeat",value:function(){var e=this,t=this.heartbeat_time,n=this.heartbeat_gap_time;clearInterval(this.heartbeat_interval),clearTimeout(this.heartbeat_gap_timeout),this.heartbeat_interval=(0,r.default)((function(){e.heartbeat_gap_timeout=(0,a.default)((function(){e.reconnect()}),1e3*n),e.sendPing()}),1e3*t)}},{key:"clearHearBeatGapTimeout",value:function(){clearTimeout(this.heartbeat_gap_timeout)}},{key:"sendPing",value:function(){if(this.ping_pong_map){var e=this.ping_pong_map.ping;this.ws.send(e)}}},{key:"sendPong",value:function(){if(this.ping_pong_map){var e=this.ping_pong_map.pong;this.ws.send(e)}}},{key:"disconnect",value:function(){"CLOSED"!==this.status&&this.end()}},{key:"end",value:function(){(0,u.log)("WebSocket:> 断开连接"),this.reset(),this.status="CLOSED",this.handlers.onEnd&&this.handlers.onEnd(),this.handlers={}}},{key:"reset",value:function(){var e=this.ws;e&&(e.onopen=null,e.onmessage=null,e.onerror=null,e.onclose=null,e.close(),this.ws=null),clearInterval(this.heartbeat_interval),clearTimeout(this.heartbeat_gap_timeout)}}]),e}();t.WebSocketCtrl=s},25371:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.untilInit=function(){return new h.default((function(e,t){if(b)return e();k.push(e)}))},t.initState=function(){if(t.sceneManager=o=new p.SceneManagerCtor,t.loaderManager=a=new y.LoaderManagerCtor,t.dialogManager=r=new v.DialogManagerCtor,_.init(),k){var e,n=function(e){if(void 0===c.default||null==(0,s.default)(e)){if((0,u.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return m(e,t);var i=(0,d.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,f.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,a=!0,o=!1;return{s:function(){i=(0,l.default)(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(k);try{for(n.s();!(e=n.n()).done;)(0,e.value)()}catch(e){n.e(e)}finally{n.f()}b=!0,k=void 0}},t.director=t.sceneManager=t.loaderManager=t.dialogManager=void 0;var r,a,o,l=i(n(69129)),u=i(n(44790)),s=i(n(53632)),c=i(n(35847)),f=i(n(55846)),d=i(n(85323)),h=i(n(82069)),v=n(99604),p=n(78959),y=n(50932),g=n(978);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}t.dialogManager=r,t.loaderManager=a,t.sceneManager=o;var _=new g.DirectorCtor;t.director=_;var k=[],b=!1},50932:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.LoaderManagerCtor=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(41509)),f=i(n(1979)),d=i(n(73718)),h=i(n(25233)),v=i(n(91678)),p=i(n(82069)),y=n(73705),g=n(18019),m=n(57250),_=n(49663),k=n(21270),b=n(83922);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var S=function(e,t,n,i){return new(n||(n=p.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},x=function(){function e(){(0,h.default)(this,e),this.load_tasks=new d.default,this.load_map=new f.default}return(0,v.default)(e,[{key:"loadScene",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&"Scene"===e&&b.Laya.loader.clearUnLoaded();var r=new p.default((function(i,r){("Scene"===e?g.Scene:m.Dialog).load(t,_.Handler.create(n,(function(e){i(e)})),_.Handler.create(n,n.setLoadProgress,[e],!1))}));return i||this.addLoadTask(e,r),r}},{key:"preLoad",value:function(e,t){this.loadScene(e,t,!0)}},{key:"load",value:function(e,t){var n=this,i=new p.default((function(i,r){return S(n,void 0,void 0,c.default.mark((function n(){var r,a=this;return c.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&(r=function(e){a.setLoadProgress(t,e)}),n.next=3,(0,y.loadRes)(e,r);case 3:return n.abrupt("return",i());case 4:case"end":return n.stop()}}),n)})))}));return this.addLoadTask(t,i),i}},{key:"addLoadTask",value:function(e,t){var n=this;if(e){var i=this.load_tasks;this.setLoadViewVisible(e,!0);var c=p.default.all([t,(0,k.sleep)(1)]).then((function(){var t,f=!1,d=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return w(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?w(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(i);try{for(d.s();!(t=d.n()).done;){var h=t.value;h.task!==c?h.type===e&&(f=!0):i.delete(h)}}catch(e){d.e(e)}finally{d.f()}f||n.setLoadViewVisible(e,!1)}));this.load_tasks.add({task:c,type:e})}}},{key:"setLoadView",value:function(e,t){return S(this,void 0,void 0,c.default.mark((function n(){var i,r;return c.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i="Scene"===e?g.Scene:m.Dialog,n.next=3,new p.default((function(e,n){i.load(t,_.Handler.create(null,(function(t){e(t)})))}));case 3:r=n.sent,this.load_map.set(e,r);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"setLoadViewVisible",value:function(e,t){var n=this.load_map.get(e);n&&(t?n.onShow():n.onHide())}},{key:"setLoadProgress",value:function(e,t){var n=this.load_map.get(e);n&&n.onProgress(t)}}]),e}();t.LoaderManagerCtor=x},78959:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.SceneManagerCtor=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(41509)),f=i(n(1979)),d=i(n(25233)),h=i(n(91678)),v=i(n(82069)),p=n(25371),y=n(70600),g=n(18019),m=n(83922);function _(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return k(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var b=function(e,t,n,i){return new(n||(n=v.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},w=function(){function e(){(0,d.default)(this,e),this.sceneChangeBeforeListener=[],this.sceneChangeAfterListener=[],this.sceneClassMap={},this.scene_pool=new f.default}return(0,h.default)(e,[{key:"onResize",value:function(e,t){this.cur_scene&&(this.cur_scene.onResize?this.cur_scene.onResize(e,t):this.cur_scene.size(e,t))}},{key:"getCurScene",value:function(){return this.cur_scene}},{key:"switchScene",value:function(e,t){var n=this.scene_pool,i=m.Laya.stage,r=i.width,a=i.height,o=this.cur_scene,l=o?o.url:void 0;return this.cur_scene=t,t.open(!0),this.onResize(r,a),o&&!o.destroyed&&n.set(l,o),{cur:t.url,prev:l}}},{key:"callChangeListener",value:function(e){var t=[];"before"===e?t=this.sceneChangeBeforeListener:"after"===e&&(t=this.sceneChangeAfterListener);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a,o=_(t);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=l.apply(void 0,i);if(u)return u}}catch(e){o.e(e)}finally{o.f()}}},{key:"runScene",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return new v.default((function(n,r){return b(t,void 0,void 0,c.default.mark((function t(){var a,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callChangeListener("before",this.cur_scene&&this.cur_scene.url,e)){t.next=3;break}return t.abrupt("return",r("has callChangeListener interrupt open:> ".concat(e," ")));case 3:if(a=this.scene_pool.get(e)){t.next=18;break}if("string"!=typeof e){t.next=11;break}return t.next=8,p.loaderManager.loadScene("Scene",e);case 8:a=t.sent,t.next=18;break;case 11:if("function"!=typeof e){t.next=17;break}return a=new e,t.next=15,new v.default((function(t,n){(0,y.createScene)(e).then((function(e){return t(e)}))}));case 15:t.next=18;break;case 17:e instanceof g.Scene&&(a=e);case 18:(0,y.afterEnable)(a).then((function(){n(a)})),o=this.switchScene(i,a),this.callChangeListener("after",o.cur,o.prev);case 21:case"end":return t.stop()}}),t,this)})))}))}}]),e}();t.SceneManagerCtor=w},99604:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.DialogManagerCtor=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(92765)),f=i(n(69385)),d=i(n(43142)),h=i(n(41509)),v=i(n(33045)),p=i(n(88657)),y=i(n(1979)),g=i(n(25233)),m=i(n(91678)),_=i(n(82069)),k=n(16097),b=n(70600),w=n(25371),S=n(26789),x=n(52617),C=n(49663),I=n(57250),M=n(99218),E=n(71877),A=n(83922);function L(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return B(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var T=function(e,t,n,i){return new(n||(n=_.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},P=function(e){var t=this;e.HonorEffectTween&&e.HonorEffectTween.complete(),e.HonorEffectTween=S.Tween.from(e,{x:A.Laya.stage.width/2,y:A.Laya.stage.height/2,scaleX:.2,scaleY:.2,alpha:0},300,x.Ease.backOut,C.Handler.create(this,(function(){e.HonorEffectTween=void 0,e.scale(1,1),e.alpha=1,t.doOpen(e)})),0,!1,!1)},D=function(e){var t=this;e.HonorEffectTween&&e.HonorEffectTween.complete(),e.HonorEffectTween=S.Tween.to(e,{x:A.Laya.stage.width/2,y:A.Laya.stage.height/2,scaleX:0,scaleY:0,alpha:0},300,x.Ease.backIn,C.Handler.create(this,(function(){e.HonorEffectTween=void 0,e.scale(1,1),e.alpha=1,t.doClose(e)})),0,!1,!1)},F=function(){function e(){var t;(0,g.default)(this,e),this.wait_dialog_task=new y.default,this.open_dialog_list=[],this.dialog_pool_list=[],M.UIConfig.closeDialogOnSide=!1;var n=I.Dialog.manager;(0,b.injectAfter)(n,"doClose",(0,p.default)(t=this.injectDoCloseAfter).call(t,this)),n.popupEffectHandler=new C.Handler(n,P),n.closeEffectHandler=new C.Handler(n,D),this.dialog_manager=n}return(0,m.default)(e,[{key:"onResize",value:function(e,t){var n,i=L(this.open_dialog_list);try{for(i.s();!(n=i.n()).done;){var r=n.value.dialog;r.onResize&&r.onResize(e,t)}}catch(e){i.e(e)}finally{i.f()}}},{key:"openDialog",value:function(e,t){return T(this,void 0,void 0,h.default.mark((function n(){var i,r,a,o,l,u,s,c,f,d,p,y=this;return h.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e,e.dialog&&(i=(o=e).dialog,r=o.use_exist,a=o.use_exist),l=this.wait_dialog_task,u=this.open_dialog_list,!r){n.next=13;break}if(!(c=l.get(i))){n.next=11;break}return n.next=8,c.then((function(e){return e}));case 8:s=n.sent,n.next=13;break;case 11:(f=(0,v.default)(u).call(u,(function(e){return e.url===i})))&&(s=f.dialog);case 13:if(s){n.next=19;break}return d=this.createDialog(i),l.set(i,d.then((function(e){return l.delete(i),e}))),n.next=18,d;case 18:s=n.sent;case 19:return p=this.setDialogConfig(i,s,t),(0,b.afterActive)(s).then((function(){if(s.onResize){var e=A.Laya.stage,t=e.width,n=e.height;s.onResize(t,n)}var i=s.popupEffect;void 0!==a&&!1===a&&(s.popupEffect=null),p.beforeOpen&&p.beforeOpen(s),s.open(p.closeOther),i&&(s.popupEffect=i),y.afterOpen(s),y.checkMask()})),n.next=23,(0,b.afterEnable)(s);case 23:return n.abrupt("return",s);case 24:case"end":return n.stop()}}),n,this)})))}},{key:"createDialog",value:function(e){var t=this;return new _.default((function(n,i){return T(t,void 0,void 0,h.default.mark((function t(){var i,r,a,o,l;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this.dialog_pool_list,r=0;case 2:if(!(r<i.length)){t.next=11;break}if((a=i[r]).url!==e){t.next=8;break}return(0,d.default)(i).call(i,r,1),o=a.dialog,t.abrupt("return",n(o));case 8:r++,t.next=2;break;case 11:if("string"!=typeof e){t.next=17;break}return t.next=14,w.loaderManager.loadScene("Dialog",e);case 14:l=t.sent,t.next=24;break;case 17:if("function"!=typeof e){t.next=23;break}return t.next=20,(0,b.createScene)(e).then((function(e){return n(e)}));case 20:l=t.sent,t.next=24;break;case 23:e instanceof I.Dialog&&(l=e);case 24:n(l);case 25:case"end":return t.stop()}}),t,this)})))}))}},{key:"setDialogConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.open_dialog_list;n=(0,f.default)((0,f.default)((0,f.default)({},k.DEFAULT_CONFIG),t.config),n);var r=(0,v.default)(i).call(i,(function(e){return e.dialog===t}));return r?r.config=n:i.push({url:e,dialog:t,config:n}),n}},{key:"getDialogConfig",value:function(e){var t=this.open_dialog_list,n=(0,v.default)(t).call(t,(function(t){return t.dialog===e}));return n&&n.config}},{key:"injectDoCloseAfter",value:function(e,t,n){for(var i,r=this.open_dialog_list,a=this.dialog_pool_list,o=0;o<r.length;o++){var l=r[o];if(l.dialog===n){i=l,(0,d.default)(r).call(r,o,1);break}}this.checkMask(),i&&!n.destroyed&&a.push(i)}},{key:"afterOpen",value:function(e){var t=this.getDialogConfig(e);t&&t.autoClose&&A.Laya.timer.once(t.autoClose,e,e.close)}},{key:"checkMask",value:function(){for(var e=this,t=this.dialog_manager,n=t.maskLayer,i=function(i){var r=t.getChildAt(i);if(r&&r.isModal){var a=e.getDialogConfig(r);if(!a)return"continue";M.UIConfig.popupBgAlpha=a.shadowAlpha,M.UIConfig.popupBgColor=a.shadowColor,a.closeOnSide&&(n.offAllCaller(t),n.once(E.Event.CLICK,t,(function(){r.close()})));var o=n.width,l=n.height;return n.graphics.clear(!0),n.graphics.drawRect(0,0,o,l,M.UIConfig.popupBgColor),n.alpha=M.UIConfig.popupBgAlpha,{v:void 0}}},r=t.numChildren-1;r>-1;r--){var a=i(r);if("continue"!==a&&"object"===(0,c.default)(a))return a.v}}},{key:"closeAllDialogs",value:function(){this.dialog_manager.closeAll()}},{key:"getDialogsByGroup",value:function(e){this.dialog_manager.getDialogsByGroup(e)}},{key:"closeDialogsByGroup",value:function(e){this.dialog_manager.closeByGroup(e)}},{key:"getDialogByName",value:function(e){var t,n=L(this.open_dialog_list);try{for(n.s();!(t=n.n()).done;){var i=t.value.dialog;if(i.name===e)return i}}catch(e){n.e(e)}finally{n.f()}}},{key:"closeDialogByName",value:function(e){var t,n=L(this.open_dialog_list);try{for(n.s();!(t=n.n()).done;){var i=t.value.dialog;if(i.name===e)return i.close()}}catch(e){n.e(e)}finally{n.f()}}},{key:"hideMask",value:function(e){this.dialog_manager.maskLayer.visible=e}}]),e}();t.DialogManagerCtor=F},978:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.DirectorCtor=void 0;var r=i(n(24183)),a=i(n(41509)),o=i(n(25233)),l=i(n(91678)),u=i(n(82069)),s=i(n(53746)),c=n(25371),f=n(71877),d=n(83922),h=function(e,t,n,i){return new(n||(n=u.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},v=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"init",value:function(){d.Laya.stage.on(f.Event.RESIZE,this,this.onResize),this.onResize()}},{key:"onResize",value:function(){var e=d.Laya.stage,t=e.width,n=e.height;c.sceneManager.onResize(t,n),c.dialogManager.onResize(t,n)}},{key:"runScene",value:function(e){return c.sceneManager.runScene(e).catch((function(e){s.default.DEBUG_MODE&&console.error(e)}))}},{key:"openDialog",value:function(e,t){return c.dialogManager.openDialog(e,t)}},{key:"load",value:function(e,t){return c.loaderManager.load(e,t)}},{key:"getDialogByName",value:function(e){return c.dialogManager.getDialogByName(e)}},{key:"getDialogsByGroup",value:function(e){return c.dialogManager.getDialogsByGroup(e)}},{key:"closeDialogByName",value:function(e){c.dialogManager.closeDialogByName(e)}},{key:"closeDialogsByGroup",value:function(e){c.dialogManager.closeDialogsByGroup(e)}},{key:"closeAllDialogs",value:function(){c.dialogManager.closeAllDialogs()}},{key:"setLoadPageForScene",value:function(e){return c.loaderManager.setLoadView("Scene",e)}},{key:"setLoadPageForDialog",value:function(e){return c.loaderManager.setLoadView("Dialog",e)}},{key:"clearDialog",value:function(e){return h(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.untilInit)();case 2:c.sceneManager.sceneChangeAfterListener.push(e);case 3:case"end":return t.stop()}}),t)})))}},{key:"onSceneChangeBefore",value:function(e){return h(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.untilInit)();case 2:c.sceneManager.sceneChangeBeforeListener.push(e);case 3:case"end":return t.stop()}}),t)})))}},{key:"onSceneChangeAfter",value:function(e){return h(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.untilInit)();case 2:c.sceneManager.sceneChangeAfterListener.push(e);case 3:case"end":return t.stop()}}),t)})))}},{key:"clearListener",value:function(e){return h(this,void 0,void 0,a.default.mark((function t(){var n,i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.untilInit)();case 2:c.sceneManager.sceneChangeBeforeListener=(0,r.default)(n=c.sceneManager.sceneChangeBeforeListener).call(n,(function(t){return t!==e})),c.sceneManager.sceneChangeAfterListener=(0,r.default)(i=c.sceneManager.sceneChangeAfterListener).call(i,(function(t){return t!==e}));case 4:case"end":return t.stop()}}),t)})))}},{key:"hideDialog",value:function(e){c.dialogManager.hideMask(e)}},{key:"runningScene",get:function(){return c.sceneManager.getCurScene()}}]),e}();t.DirectorCtor=v},16097:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={closeOther:!1,closeOnSide:!0,closeByGroup:!1,closeByName:!1,shadowAlpha:.7,shadowColor:"#000000",autoClose:!1}},53815:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.createSkeleton=function(e,t,n){t=t||30,n=n||0;var i,r=o.loader.getRes(e+".png"),l=o.loader.getRes(e+".sk");if(r&&l){f[e]?i=f[e]:((i=new a.Templet).parseData(r,l,24),f[e]=i);var u=new a.Templet;return u.parseData(r,l,t),u.buildArmature(n)}},t.createAnimation=function(e){var t=new l.Animation;t.loadAtlas(e+".json"),t.interval=120,t.index=1,t.play();var n=t.getGraphicBounds();return t.pivot(n.width/2,n.height/2),t},t.createImg=function(e){var t=new u.Image;return t.loadImage(e+".png"),t.autoSize=!0,t},t.createSprite=function(e){return new r.default((function(t,n){var i=new s.Sprite;i.loadImage(e,c.Handler.create(null,(function(){i.autoSize=!0,t(i)})))}))};var r=i(n(82069)),a=n(81779),o=n(83922),l=n(27494),u=n(59717),s=n(15403),c=n(49663),f={}},77807:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.cutStr=function(e,t){var n=/[^\x00-\xff]/g;if((e+="").replace(n,"mm").length<=t)return e;for(var i=Math.floor(t/2);i<e.length;i++)if(e.substr(0,i).replace(n,"mm").length>=t)return e.substr(0,i)+"...";return e}},24812:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.formatTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["小时","分钟","秒"],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="",r=0,a=0,o=e%60;"string"==typeof t&&(t=[t,t,""]),e>=60&&(a=e/60|0),a>=60&&(r=a/60|0,a%=60);for(var l=[r,a,o],u=0,s=l.length;u<s;u++){var c=l[u];n&&!c||(n=!1,i+=v(c)+t[u])}return i},t.formatTimeLight=function(e){var t="",n=0,i=0,v=0;e>60&&(v=e/60|0),v>60&&(i=v/60|0,v%=60),i>24&&(n=i/24|0,i%=24);var p,y=[n,i,v,e%60],g=["天","小时","分","秒"],m=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return h(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}((0,d.default)(y).call(y));try{for(m.s();!(p=m.n()).done;){var _,k,b=(0,f.default)(p.value,2),w=b[0],S=b[1];S>0&&(t=(0,c.default)(_=(0,c.default)(k="".concat(t)).call(k,S)).call(_,g[w]))}}catch(e){m.e(e)}finally{m.f()}return t};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(77433)),f=i(n(35526)),d=i(n(12778));function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function v(e){return e>9?e+"":"0"+e}},66443:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.getStringLength=function(e){return(""+e.replace(/[^\x00-\xff]/gi,"ox")).length}},24561:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.utils=void 0;var i=n(53815),r=n(77807),a=n(66443),o=n(24812),l=n(73705),u=n(44610),s={createSkeleton:i.createSkeleton,cutStr:r.cutStr,getStringLength:a.getStringLength,formatTime:o.formatTime,formatTimeLight:o.formatTimeLight,loadRes:l.loadRes,registerFontSize:u.registerFontSize};t.utils=s},73705:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.loadRes=function(e,t){var n=this;return new a.default((function(i,a){var u;t&&(u=new l.Handler(null,(function(e){t(e)}),null,!1));var s=new l.Handler(n,(function(){(0,r.default)(i,0)}));o.loader.load(e,s,u)}))};var r=i(n(6113)),a=i(n(82069)),o=n(83922),l=n(49663)},44610:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.registerFontSize=function(e){var t,n=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return h(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,v=new c.BitmapFont,p=i.split("/"),y=p[p.length-1],g="".concat(i,".fnt"),m="".concat(i,".png");v.parseFont(f.loader.getRes(g),f.loader.getRes(m)),d.Text.registerBitmapFont(y,v)}}catch(e){n.e(e)}finally{n.f()}};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=n(60105),f=n(83922),d=n(22347);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},43366:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.tmpAsyncTask=function(e,t){return new d.default((function(n,i){e.push(t),t.then((function(){var i=(0,f.default)(e).call(e,t);-1!==i&&(0,c.default)(e).call(e,i,1),n(e.length)}))}))},t.runAsyncTask=function(e,t){var n,i=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return h(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(v);try{for(i.s();!(n=i.n()).done;){var f=n.value;if(f.dep===t)return f.task}}catch(e){i.e(e)}finally{i.f()}var d=e();return d.then((function(){for(var e=v.length-1;e>=0;e--){var t=v[e].task;if(d===t)return void(0,c.default)(v).call(v,e)}})),v.push({dep:t,task:d}),d};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(43142)),f=i(n(68393)),d=i(n(82069));function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var v=[]},70600:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.injectAfter=o,t.injectProto=function(e,t,n,i){var o=e.prototype[t];return e.prototype[t]=function(){for(var l,u=this,s=arguments.length,c=new Array(s),f=0;f<s;f++)c[f]=arguments[f];var d,h=o.apply(this,(0,a.default)(l=[]).call(l,c));return h instanceof r.default?h.then((function(){var e;n.apply(void 0,(0,a.default)(e=[u,h]).call(e,c))})):n.apply(void 0,(0,a.default)(d=[this,h]).call(d,c)),i&&(e.prototype[t]=o),h},function(){e.prototype[t]=o}},t.createScene=function(e){return new r.default((function(t,n){return t(new e)}))},t.afterActive=function(e){var t=this;return new r.default((function(n,i){if(e.active)return n();e.once("onViewCreated",t,(function(){return n()}))}))},t.afterEnable=function(e){return new r.default((function(t,n){if(e.active)return t();o(e,"onEnable",(function(){t()})),o(e,"onDestroy",(function(){n()}))}))};var r=i(n(82069)),a=i(n(77433));function o(e,t,n){var i=e[t];return e[t]=function(){for(var e,t=this,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];var s=i.apply(this,(0,a.default)(e=[]).call(e,o));return l(s,(function(){var e;n.apply(void 0,(0,a.default)(e=[t,s]).call(e,o))})),s},function(){e[t]=i}}function l(e,t){e instanceof r.default?e.then((function(e){l(e,t)})):t()}},86990:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(25233)),a=i(n(91678)),o=i(n(20118)),l=i(n(26387)),u=i(n(18773)),s=i(n(76023)),c=i(n(46984)),f=i(n(43157)),d=i(n(3359)),h=i(n(98623)),v=i(n(95385)),p=i(n(37811)),y=i(n(61661)),g=i(n(75242)),m=i(n(44014)),_=i(n(29678)),k=i(n(50473)),b=n(81779),w=n(91593),S=n(8216),x=n(59314),C=n(4749),I=function(){function e(){(0,r.default)(this,e)}return(0,a.default)(e,null,[{key:"init",value:function(){var e=x.ClassUtils.regClass;e("ui",C.ui),e("view/pop/alert.ts",o.default),e("view/pop/tip.ts",l.default),e("view/pop/topTip.ts",u.default),e("view/pop/voice.ts",s.default),e("ctrl/guide/guideDialog.ts",c.default),e("view/pop/help.ts",f.default),e("view/pop/lottery.ts",d.default),e("view/pop/record/gameRecord.ts",h.default),e("view/pop/record/itemRecord.ts",v.default),e("view/pop/shop.ts",p.default),e("view/scenes/game/gameView.ts",y.default),e("view/scenes/game/gunBoxView.ts",g.default),e("view/scenes/game/skillItemView.ts",m.default),e("view/scenes/hallView.ts",_.default),e("view/scenes/loadingView.ts",k.default),e("laya.ani.bone.Templet",b.Templet),e("laya.html.dom.HTMLDivElement",w.HTMLDivElement),e("laya.effect.GlowFilterSetter",S.GlowFilterSetter)}}]),e}();t.default=I,I.width=1920,I.height=750,I.scaleMode="fixedheight",I.screenMode="horizontal",I.alignV="top",I.alignH="left",I.startScene="scenes/hall/header.scene",I.sceneRoot="",I.debug=!1,I.stat=!1,I.physicsDebug=!0,I.exportSceneToJson=!0,I.init()},71882:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.AppCtrl=void 0;var r=i(n(77433)),a=i(n(84048)),o=i(n(41509)),l=i(n(25233)),u=i(n(91678)),s=i(n(82069)),c=n(97956),f=n(47228),d=i(n(86990)),h=i(n(53746)),v=n(47057),p=n(75561),y=n(31378),g=n(82619),m=n(91917),_=n(83560),k=n(21270),b=n(92268),w=n(1633),S=n(8360),x=function(e,t,n,i){return new(n||(n=s.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},C=function(){function e(){(0,l.default)(this,e),this.bg_monitor=new b.BgMonitor,this.startApp()}return(0,u.default)(e,[{key:"startApp",value:function(){return x(this,void 0,void 0,o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.ctrlState.app=this,t=new v.AppModel,this.model=t,t.init(),(0,_.onCreateSocket)(m.ServerName.Hall).subscribe((function(e){e.event.on(m.ServerEvent.UserAccount,(function(e){t.initUserInfo(e)}))})),e.next=7,this.startHonor();case 7:return this.keyboard_number=new w.KeyBoardNumber,e.next=10,(0,k.sleep)(.5).then((function(){platform.hideLoading()}));case 10:return e.next=12,g.HallCtrl.preEnter();case 12:S.AudioCtrl.init();case 13:case"end":return e.stop()}}),e,this)})))}},{key:"startHonor",value:function(){return x(this,void 0,void 0,o.default.mark((function e(){var t,n,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.run(d.default,{defaultVersion:c.Config.CdnVersion,versionPath:"./version.json?v=".concat(c.Config.CdnVersion),basePath:c.Config.cndUrl});case 2:return n=h.default.director.setLoadPageForScene("scenes/loading.scene"),i=h.default.director.load((0,r.default)(t=[]).call(t,(0,a.default)(f.res.common),(0,a.default)(f.res.font)),"Scene").then((function(){h.default.utils.registerFontSize(f.font_list)})),e.next=6,s.default.all([n,i]);case 6:case"end":return e.stop()}}),e)})))}},{key:"enterGame",value:function(e){var t=this.model.enterGame();return y.GameCtrl.preEnter(e,t)}}]),e}();t.AppCtrl=C},75561:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.ctrlState=void 0,t.ctrlState={}},8360:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.AudioCtrl=t.AudioEvent=void 0;var r=i(n(68393)),a=i(n(25233)),o=i(n(91678)),l=n(83922),u=n(49663),s=i(n(88087)),c={VoiceChange:"voice_change",MusicChange:"music_change"};t.AudioEvent=c;var f=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"init",value:function(){l.Laya.stage.on(l.Laya.Event.FOCUS,null,(function(){e.resumeBg()}))}},{key:"setVoice",value:function(e){var t=this.sound_manager;this.voice=e;var n=0===e;n!==t.soundMuted&&(t.soundMuted=n),t.setSoundVolume(e),this.event.emit(c.VoiceChange,e)}},{key:"setMusic",value:function(e){var t=this.sound_manager,n=0===e;n!==t.musicMuted&&(t.musicMuted=n,n||this.playBg(this.bg_url)),t.setMusicVolume(e),this.music=e,this.event.emit(c.MusicChange,e)}},{key:"play",value:function(e){var t=this,n=this.music||1,i=this.sound_manager,r=i.playSound;i.soundMuted||(this.sound_manager.setMusicVolume(.5*n),r(e,1,u.Handler.create(null,(function(){t.sound_manager.setMusicVolume(n)}))))}},{key:"playBg",value:function(e){var t=this.sound_manager,n=t.playMusic,i=t.musicMuted;this.bg_url=e,i||n(e)}},{key:"resumeBg",value:function(){this.sound_manager._musicChannel||this.playBg(this.bg_url)}},{key:"stop",value:function(e){var t=this.sound_manager.stopSound;if(!e)return!0;-1!==(0,r.default)(e).call(e,"bg")&&this.sound_manager.stopMusic(),t(e)}},{key:"stopAll",value:function(){this.sound_manager.stopAll()}}]),e}();t.AudioCtrl=f,f.event=new s.default,f.sound_manager=l.Laya.SoundManager},88057:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.BulletCtrl=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(88648),l=n(11857),u=n(87510),s=n(35716),c=n(11522),f=n(79079),d=n(24454),h=function(){function e(t,n){var i=this;(0,r.default)(this,e),this.view=t,this.model=n,this.syncPos=function(){var e=i.view,t=i.model,n=t.pos,r=t.velocity,a=(0,l.vectorToDegree)(r)+90;e.rotation=a,e.pos(n.x,n.y)},this.rage=function(){var e=i.view,t=i.model,n=t.pos,r=t.velocity,a=(0,l.vectorToDegree)(r)+90;e.rotation=a,e.pos(n.x,n.y)},this.init()}return(0,a.default)(e,[{key:"init",value:function(){this.initView(),this.initEvent()}},{key:"initView",value:function(){var e=this.view,t=this.model.skin_level;this.syncPos(),e.visible=!0,e.scale(.8,.8),(0,f.playSkeleton)(e,function(e){return Number(e)>3?0:e}(t),!0),e.zOrder=301}},{key:"initEvent",value:function(){var e=this,t=this.model.event;t.on(o.BulletEvent.Move,this.syncPos,this),t.on(o.BulletEvent.AddNet,(function(e){var t=(0,c.addNet)(e.skin);new u.NetCtrl(t,e)}),this),t.on(s.ModelEvent.Destroy,(function(){e.destroy()}),this)}},{key:"destroy",value:function(){var e,t;(0,d.recoverSkeletonPool)("bullet",this.model.skin,this.view),null===(t=null===(e=this.model)||void 0===e?void 0:e.event)||void 0===t||t.offAllCaller(this),this.model=void 0}}]),e}();t.BulletCtrl=h},59618:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.FishCtrl=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(6113)),d=i(n(41509)),h=i(n(25233)),v=i(n(91678)),p=i(n(47172)),y=i(n(97641)),g=i(n(89224)),m=i(n(77887)),_=i(n(18127)),k=i(n(82069)),b=n(63711),w=n(20126),S=n(77924),x=n(19881),C=n(65155),I=n(91917),M=n(79317);function E(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return A(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L=function(e){(0,g.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,_.default)(t);if(n){var r=(0,_.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,m.default)(this,e)});function r(e,t){var n;return(0,h.default)(this,r),(n=i.call(this)).view=e,n.model=t,n.onBomb=function(e){return t=(0,p.default)(n),i=void 0,r=void 0,a=d.default.mark((function t(){var n,i,r,a,o,l,u,s,c,f,h;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.model.id,i=e.pos,r=e.fish_list,a=e.player,o=a.need_emit,l=a.is_cur_player,o){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,(0,M.waitFishDestroy)(this.model);case 7:u=[],s=E(r);try{for(s.s();!(c=s.n()).done;)(f=c.value).destroyed||u.push(f.id)}catch(e){s.e(e)}finally{s.f()}h={bombPoint:i,eid:n,fishList:u},l||(h.robotId=a.user_id),(0,C.sendToGameSocket)(I.ServerEvent.FishBomb,h);case 13:case"end":return t.stop()}}),t,this)})),new(r||(r=k.default))((function(e,n){function o(e){try{u(a.next(e))}catch(e){n(e)}}function l(e){try{u(a.throw(e))}catch(e){n(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,l)}u((a=a.apply(t,i||[])).next())}));var t,i,r,a},n.setVisible=function(e){n.view.setVisible(e)},n.syncPos=function(){var e=(0,p.default)(n).view,t=n.model,i=t.pos,r=t.velocity,a=t.horizon_turn;t.visible,e.syncPos(i,r,a)},n.beCapture=function(e){(0,f.default)((function(){e()}),500)},n.init(),n}return(0,v.default)(r,[{key:"init",value:function(){this.addCom(new w.TimeoutCom),this.initEvent()}},{key:"initEvent",value:function(){var e=this,t=this.model.visible;this.setVisible(t);var n=this.model.event,i=this.view;n.on(x.FishBombEvent.FishBomb,this.onBomb,this),n.on(S.FishEvent.VisibleChange,this.setVisible,this),n.on(S.FishEvent.Move,this.syncPos),n.on(S.FishEvent.BeCast,(function(){i.beCastAni()}),this),n.on(S.FishEvent.BeCapture,this.beCapture,this),n.on(S.FishEvent.StatusChange,(function(e){e===S.FishStatus.Freezed?i.stopSwimAni():i.playSwimAni()}),this),n.on(S.FishEvent.Destroy,(function(){e.destroy()}),this)}},{key:"destroy",value:function(){var e,t,n=this.view;null===(t=null===(e=this.model)||void 0===e?void 0:e.event)||void 0===t||t.offAllCaller(this),n.destroy(),(0,y.default)((0,_.default)(r.prototype),"destroy",this).call(this),this.model=void 0}}]),r}(b.ComponentManager);t.FishCtrl=L},31378:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GameCtrl=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(41509)),f=i(n(77433)),d=i(n(84048)),h=i(n(35526)),v=i(n(35559)),p=i(n(73718)),y=i(n(25233)),g=i(n(91678)),m=i(n(82069)),_=n(75561),k=n(8360),b=n(82619),w=n(39594),S=n(86762),x=n(83560),C=n(62482),I=n(94643),M=n(47228),E=n(91917),A=i(n(53746)),L=n(43366),B=n(71877),T=n(70850),P=n(19773),D=n(55176),F=n(92268),N=n(20096),U=n(79079),z=i(n(20118)),R=i(n(43157)),O=i(n(3359)),G=i(n(37811)),V=i(n(76023)),H=i(n(94407)),j=n(31593),$=i(n(61661)),Y=n(59618),X=n(24856),K=n(65155),W=n(33305),Q=n(99723),q=n(78731),Z=n(65158);function J(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return ee(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ee(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var te=function(){function e(t,n){(0,y.default)(this,e),this.player_list=new p.default,this.view=t,this.model=n}return(0,g.default)(e,[{key:"init",value:function(e,t){var n=this;this.initEvent(),k.AudioCtrl.playBg(C.AudioRes.GameBg),this.view.showBubbleRefresh(t),(0,S.waitConnectGame)(e).then((function(){(0,K.onGameSocket)((0,x.getSocket)(E.ServerName.Game),n)}))}},{key:"initEvent",value:function(){var e=this.view,t=e.btn_help,n=e.btn_gift,i=e.btn_voice,r=e.btn_leave,a=e.btn_shop,o=B.Event.CLICK;this.onModel(),_.ctrlState.app.bg_monitor.event.on(F.BgMonitorEvent.VisibleChange,(function(e){e||(0,X.disableCurUserOperation)()}),this),t.on(o,this,(function(e){e.stopPropagation(),R.default.preEnter()})),n.on(o,this,(function(e){e.stopPropagation(),O.default.preEnter()})),i.on(o,this,(function(e){e.stopPropagation(),V.default.preEnter()})),a.on(o,this,(function(e){e.stopPropagation(),G.default.preEnter()})),r.on(o,this,(function(e){var t=(0,w.getLang)(),n=I.InternationalTip[t].leaveTip;e.stopPropagation(),z.default.alert(n).then((function(e){"confirm"===e&&(0,K.sendToGameSocket)(E.ServerEvent.RoomOut)}))}))}},{key:"onModel",value:function(){var e=this,t=this.model.event,n=this.view;t.on(P.GameEvent.AddFish,(function(e){var t=e.type,i=e.id,r=e.horizon_turn,a={type:t,currency:e.currency,id:i,horizon_turn:r},o=n.addFish(a);new Y.FishCtrl(o,e)}),this),t.on(P.GameEvent.AddPlayer,(function(t){var i=t.server_index;if(t.is_cur_player){i>1&&n.upSideDown();var r="left";1!==i&&2!==i||(r="right"),n.setBulletBoxPos(r)}var a=n.addGun(),o=new W.PlayerCtrl(a,t,e);e.player_list.add(o)}),this),t.on(T.FreezingComEvent.Freezing,(function(){k.AudioCtrl.play(C.AudioRes.Freeze),(0,j.activeFreeze)()}),this),t.on(T.FreezingComEvent.UnFreezing,(function(){(0,j.stopFreeze)()}),this),t.on(Q.ShoalEvent.PreAddShoal,(function(e){k.AudioCtrl.play(C.AudioRes.ShoalComing),(0,q.activeShoalWave)(e)}),this),t.on(P.GameEvent.Destroy,(function(){e.destroy()}),this)}},{key:"onEnterGame",value:function(e){var t=this.model,n=this.view,i=e.isTrial,r=e.fish,a=e.users,o=e.frozen,l=e.frozen_left,u=e.fish_list,s=e.exchange_rate,c=(0,D.getUserInfo)().cur_balance;this.isTrial=i,i&&n.setTrialStyle(),this.addPlayers(a),this.addFish(r),o&&t.freezing_com.freezing(l,u),n.setExchangeRate(s,c)}},{key:"calcClientIndex",value:function(e){return this.model.getCurPlayer().server_index<=1?e:3-e}},{key:"onShoot",value:function(e){var t=e.direction;(0,v.default)(t).length&&(e.robotId&&(e.userId=e.robotId),this.model.shoot(e))}},{key:"onHit",value:function(e){this.model.captureFish(e)}},{key:"shoalComingTip",value:function(e){this.model.shoalComingTip(e)}},{key:"activeSkill",value:function(e,t){this.model.activeSkill(e,t)}},{key:"disableSkill",value:function(e,t){this.model.disableSkill(e,t)}},{key:"resetSkill",value:function(e,t){this.model.resetSkill(e,t)}},{key:"addFish",value:function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.model.addFish(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"addPlayers",value:function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.model.addPlayer(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setPlayersEmit",value:function(e){var t,n=J(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=this.model.getPlayerById(i);r&&r.updateInfo({need_emit:!0})}}catch(e){n.e(e)}finally{n.f()}}},{key:"changeBulletCost",value:function(e){var t=e.userId,n=e.multiple;this.model.getPlayerById(t).updateInfo({bullet_cost:n})}},{key:"changeUserNumInfo",value:function(e){var t,n=e.userId,i=e.change_arr,r=this.model.getPlayerById(n),a=J(i);try{for(a.s();!(t=a.n()).done;){var o=t.value,l=o.type,u=o.num,s=o.id;"skill"===l?r.addSkillNum(s,u):r.updateInfo({bullet_num:r.bullet_num+u})}}catch(e){a.e(e)}finally{a.f()}}},{key:"changeSkin",value:function(e){var t=e.skinId,n=e.userId;t=t.charAt(t.length-1);var i=this.model.getPlayerById(n);(0,N.log)("接收到use skin",t),i.changeSkin(t)}},{key:"tableOut",value:function(e){var t=this,n=this.model,i=e.userId,r=e.isTimeOut;if((0,D.isCurUser)(i)){var a=(0,w.getLang)(),o=I.InternationalTip[a].kickedTip,l=I.InternationalTip[a][E.ServerErrCode.TrialTimeGame],u=r?l:o;(0,X.disableAllUserOperation)(),(0,K.offGameSocket)(this),(0,x.disconnectSocket)(E.ServerName.Game),z.default.alert(u,{hide_cancel:!0}).then((function(){t.roomOut({userId:i})}))}else{var s=n.getPlayerById(i);if(!s)return(0,N.error)("Game:>captureFish:> cant find player for userId=".concat(i,"!"));s.destroy()}}},{key:"roomOut",value:function(e){var t=this.model,n=e.userId;(0,D.isCurUser)(n)&&((0,K.offGameSocket)(this),(0,x.disconnectSocket)(E.ServerName.Game),t.destroy(),b.HallCtrl.preEnter())}},{key:"reset",value:function(){this.model.clear()}},{key:"destroy",value:function(){var t,n=_.ctrlState.app.bg_monitor;null===(t=this.model)||void 0===t||t.event.offAllCaller(this),n.event.offAllCaller(this),this.view=void 0,this.model=void 0,e.instance=void 0,A.default.director.closeAllDialogs(),(0,U.setProps)(_.ctrlState,{game:void 0})}}],[{key:"preEnter",value:function(t,n){return i=this,r=void 0,a=void 0,o=c.default.mark((function i(){var r=this;return c.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.instance){i.next=2;break}return i.abrupt("return",this.instance);case 2:return i.abrupt("return",(0,L.runAsyncTask)((function(){var i,a=$.default.preEnter(),o=r.genBgNum(),l=(0,h.default)(o,2),u=l[0],s=l[1],c=(0,f.default)(i=[s]).call(i,(0,d.default)(M.res.game)),v=A.default.director.load(c,"Scene");return m.default.all([a,v]).then((function(i){var a=new e((0,h.default)(i,1)[0],n);return r.instance=a,a.init(t,u),(0,U.setProps)(_.ctrlState,{game:a}),a}))}),this));case 3:case"end":return i.stop()}}),i,this)})),new(a||(a=m.default))((function(e,t){function n(e){try{u(o.next(e))}catch(e){t(e)}}function l(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,l)}u((o=o.apply(i,r||[])).next())}));var i,r,a,o}},{key:"genBgNum",value:function(){var e=(0,H.default)(1,3);return[e,{url:"image/game/normal_bg/bg".concat(e,".jpg"),type:Z.Loader.IMAGE}]}}]),e}();t.GameCtrl=te},24856:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.changeBulletNum=function(e){var t=c.modelState.app.user_info.user_id;f.ctrlState.game.changeUserNumInfo({userId:t,change_arr:[{num:e,type:"bullet"}]})},t.disableCurUserOperation=function(){var e=c.modelState.app.game.getCurPlayer();e&&(e.disableSkill(d.SkillMap.Auto),e.getSkill(d.SkillMap.LockFish).unLock())},t.disableAllUserOperation=function(){var e,t=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return h(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(c.modelState.app.game.getPlayers());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.need_emit&&(n.disableSkill(d.SkillMap.Auto),n.getSkill(d.SkillMap.LockFish).unLock())}}catch(e){t.e(e)}finally{t.f()}};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=n(55176),f=n(75561),d=n(97956);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},65155:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.onGameSocket=function(e,t){var n;r=e,(0,p.commonSocket)(e,t),(0,g.bindSocketEvent)(e,t,(n={},(0,d.default)(n,_.ServerEvent.EnterGame,(function(e,n){if(200!==n)return(0,p.errorHandler)(n);t.onEnterGame(S(e))})),(0,d.default)(n,_.ServerEvent.TableIn,(function(e){var n=function(e){var t=e.userId,n=e.index,i=e.multiple,r=e.turretSkin,o=C(a,!1);return{user_id:t,server_index:n-1,bullet_cost:i,gun_skin:"".concat(Number(r)-1e3),nickname:"",avatar:"",bullet_num:0,need_emit:!1,is_cur_player:!1,skills:o}}(e);t.addPlayers([n])})),(0,d.default)(n,_.ServerEvent.NeedEmitUser,(function(e){(0,k.isCurUser)(e.userId)&&t.setPlayersEmit(e.robotIds)})),(0,d.default)(n,_.ServerEvent.TableOut,(function(e,n){if(200!==n)return(0,p.errorHandler)(n);t.tableOut(e)})),(0,d.default)(n,_.ServerEvent.Shoot,(function(e){t.onShoot(e)})),(0,d.default)(n,_.ServerEvent.Hit,(function(e,n){if(200!==n)return(0,p.errorHandler)(n);t.onHit(e)})),(0,d.default)(n,_.ServerEvent.FishBomb,(function(e,n){200===n?t.activeSkill(m.SkillMap.Bomb,x(e)):t.resetSkill(m.SkillMap.Bomb,(0,k.getCurUserId)())})),(0,d.default)(n,_.ServerEvent.UseBomb,(function(e,n){if(200===n){var i=x(e);t.activeSkill(m.SkillMap.Bomb,(0,v.default)((0,v.default)({},i),{is_bomb_fish:!0}))}else t.resetSkill(m.SkillMap.Bomb,(0,k.getCurUserId)())})),(0,d.default)(n,_.ServerEvent.UseFreeze,(function(e,n){200===n?t.activeSkill(m.SkillMap.Freezing,function(e){var t=e.userId,n=e.count,i=e.duration;return{user_id:t,used_time:0,num:n,fish_list:e.frozenFishList,duration:i/1e3}}(e)):t.resetSkill(m.SkillMap.Freezing,(0,k.getCurUserId)())})),(0,d.default)(n,_.ServerEvent.autoShoot,(function(e){e.autoShoot?t.activeSkill(m.SkillMap.Auto,function(e){return{user_id:e.userId,autoShoot:e.autoShoot}}(e)):t.disableSkill(m.SkillMap.Auto,e.userId)})),(0,d.default)(n,_.ServerEvent.LockFish,(function(e,n){200===n?t.activeSkill(m.SkillMap.LockFish,function(e){var t=e.userId,n=e.eid,i=e.needActive,r=e.duration,a=e.count;return{user_id:t,fish:n,needActive:i,duration:r/1e3,used_time:0,num:Number(a)}}(e)):t.resetSkill(m.SkillMap.Freezing,(0,k.getCurUserId)())})),(0,d.default)(n,_.ServerEvent.AddFish,(function(e){t.addFish(e.fish)})),(0,d.default)(n,_.ServerEvent.FishShoal,(function(e){t.shoalComingTip((0,h.default)(e)),t.addFish(e.fish)})),(0,d.default)(n,_.ServerEvent.FishShoalWarn,(function(e){})),(0,d.default)(n,_.ServerEvent.RoomOut,(function(e){t.roomOut(e)})),(0,d.default)(n,_.ServerEvent.ChangeTurret,(function(e){t.changeBulletCost(e)})),(0,d.default)(n,_.ServerEvent.UseSkin,(function(e){t.changeSkin(e)})),(0,d.default)(n,_.ServerEvent.ExchangeBullet,(function(e,t){if(200!==t)return(0,p.errorHandler)(t);var n=(0,k.getCurPlayer)(),i=n.gun.getAllBulletCost();n.updateInfo({bullet_num:e.balance-i})})),(0,d.default)(n,y.SocketEvent.Reconnected,(function(){t.reset(),e.send(_.ServerEvent.EnterGame,{replay:!0})})),n))},t.offGameSocket=function(e){(0,p.offCommon)(r,e),r=void 0},t.sendToGameSocket=function(){var e;null==r||(e=r).send.apply(e,arguments)},t.convertEnterGame=S;var r,a,o=i(n(69129)),l=i(n(44790)),u=i(n(53632)),s=i(n(35847)),c=i(n(55846)),f=i(n(85323)),d=i(n(65549)),h=i(n(56530)),v=i(n(69385)),p=n(89945),y=n(98225),g=n(83560),m=n(97956),_=n(91917),k=n(55176);function b(e){if(void 0===s.default||null==(0,u.default)(e)){if((0,l.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return w(e,t);var i=(0,f.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,c.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?w(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,a=!0,d=!1;return{s:function(){i=(0,o.default)(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){d=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(d)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e){var t=e.isTrial,n=e.rate,i=e.users,r=e.items,o=e.fish,l=e.frozen,u=e.frozenLeft,s=[];a=r;var c,f=b(i);try{for(f.s();!(c=f.n()).done;){var d=c.value,h=d.userId,p=d.index,y=d.bulletNum,g=d.multiple,_=d.turretSkin,w=d.lockFish,S=d.lockLeft,x=d.needEmit,I=(0,k.isCurUser)(h),M=(0,k.isCurUser)(h)||x,E=C(r,I);w&&(E[m.SkillMap.LockFish]=(0,v.default)((0,v.default)({},E[m.SkillMap.LockFish]),{lock_fish:w,lock_left:S/1e3,needActive:!0}));var A={user_id:h,server_index:p-1,bullet_num:y,bullet_cost:g,gun_skin:"".concat(Number(_)-1e3),nickname:"",avatar:"",is_cur_player:I,skills:E,need_emit:M};I?s.unshift(A):s.push(A)}}catch(e){f.e(e)}finally{f.f()}var L=[];if(l){var B,T=b(o);try{for(T.s();!(B=T.n()).done;){var P=B.value;P.frozen&&L.push(P.eid)}}catch(e){T.e(e)}finally{T.f()}}return{isTrial:t,exchange_rate:n,fish:o,users:s,frozen:l,frozen_left:u/1e3,fish_list:L}}function x(e){return{user_id:e.userId,pos:e.bombPoint,num:e.count,used_time:0,fish_list:e.killedFish}}function C(e,t){var n,i={},r=b(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.itemId,l=a.count,u=a.usedTime,s=a.coolTime,c=a.duration;i[a.itemId]={item_id:o,num:t?Number(l):0,used_time:t?u/1e3:0,cool_time:s/1e3,duration:c/1e3}}}catch(e){r.e(e)}finally{r.f()}return i}},91178:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GameTestCtrl=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(41509)),f=i(n(35526)),d=i(n(73718)),h=i(n(25233)),v=i(n(91678)),p=i(n(82069)),y=n(47228),g=i(n(53746)),m=n(19773),_=n(55176),k=i(n(61661)),b=n(59618),w=n(33305),S=n(59485),x=n(65155),C=n(79079),I=n(75561);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var E=function(){function e(t,n){(0,h.default)(this,e),this.view=t,this.model=n,this.player_list=new d.default,this.onModel(),(0,S.genUserInfo)(this),_.modelState.app.game=n}return(0,v.default)(e,[{key:"onModel",value:function(){var e=this,t=this.model.event,n=this.view;t.on(m.GameEvent.AddFish,(function(t){var i=t.type,r=t.id,a=t.horizon_turn,o=t.currency,l=n.addFish({type:i,id:r,horizon_turn:a,currency:o});e.fish_view=l,new b.FishCtrl(l,t)}),this),t.on(m.GameEvent.AddPlayer,(function(t){var i=n.addGun(),r=new w.PlayerCtrl(i,t,e);e.player_list.add(r)}),this),t.on(m.GameEvent.Destroy,(function(){e.destroy()}),this)}},{key:"calcClientIndex",value:function(){return 1}},{key:"onShoot",value:function(e){this.model.shoot(e)}},{key:"onHit",value:function(e){this.model.captureFish(e)}},{key:"addFish",value:function(e){var t,n=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return M(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?M(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.model.addFish(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"removePlayerCtrl",value:function(e){this.player_list.delete(e)}},{key:"destroy",value:function(){var e,t;(0,x.offGameSocket)(this),null===(t=null===(e=this.model)||void 0===e?void 0:e.event)||void 0===t||t.offAllCaller(this),this.model=void 0,this.view=void 0,(0,C.setProps)(I.ctrlState,{game:void 0}),this.player_list=new d.default}}],[{key:"preEnter",value:function(){return t=this,n=void 0,i=void 0,r=c.default.mark((function t(){var n,i,r,a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=k.default.preEnter(),i=g.default.director.load(y.res.gameTutorial),r=(0,S.mockSocket)(),a=p.default.all([n,r,i]).then((function(t){var n=(0,f.default)(t,2),i=n[0],r=n[1],a=new e(i,new m.GameModel);return a.view.showBubbleRefresh(1),(0,x.onGameSocket)(r,a),a})),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})),new(i||(i=p.default))((function(e,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,l)}u((r=r.apply(t,n||[])).next())}));var t,n,i,r}}]),e}();t.GameTestCtrl=E},59485:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.genFishInfo=function(e){var t={eid:"001",fishId:"".concat(1),displaceType:"path",pathNo:"".concat(3),totalTime:12e8,usedTime:6e8};e.model.addFish(t)},t.genUserInfo=function(e){var t,n=e.model,i=l.modelState.app.user_info.user_id,r={user_id:i,server_index:0,bullet_cost:1,bullet_num:1,gun_skin:"1",nickname:i,avatar:"test",need_emit:!0,is_cur_player:!0,skills:(t={},(0,a.default)(t,d.SkillMap.Freezing,{item_id:d.SkillMap.Freezing,num:1,cool_time:10,used_time:0}),(0,a.default)(t,d.SkillMap.LockFish,{item_id:d.SkillMap.LockFish,num:20,cool_time:10,used_time:0}),(0,a.default)(t,d.SkillMap.Bomb,{item_id:d.SkillMap.Bomb,num:20,cool_time:10,used_time:0}),t)};n.addPlayer(r)},t.mockSocket=function(){return h(this,void 0,void 0,r.default.mark((function e(){var t,n,i,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.modelState.app.user_info.user_id,(0,u.mockSocketCtor)(s.MockWebSocket),e.next=4,(0,u.createSocket)({url:"",publicKey:"",code:"",name:"game",host:""});case 4:return n=e.sent,i=n.sendEvent,a=n.event,i.on(c.ServerEvent.Shoot,(function(e){(0,f.sleep)(.01).then((function(){a.emit(c.ServerEvent.Shoot,{userId:t,direction:e.direction},200)}))})),i.on(c.ServerEvent.Hit,(function(e){(0,f.sleep)(.1).then((function(){a.emit(c.ServerEvent.Hit,{userId:t,eid:e.eid,win:2},200)}))})),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))},t.mockShoot=function(){return h(this,void 0,void 0,r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.modelState.app.user_info.user_id,(0,u.getSocket)(c.ServerName.Game).event.emit(c.ServerEvent.Shoot,{userId:t,direction:{x:1.3,y:-1}}),e.abrupt("return",(0,f.sleep)(2));case 4:case"end":return e.stop()}}),e)})))},t.resetMockSocketCtor=function(e){if(e){var t=e.model;(0,u.disconnectSocket)(c.ServerName.Game),(0,u.mockSocketCtor)(void 0),t.destroy()}};var r=i(n(41509)),a=i(n(65549)),o=i(n(82069)),l=n(55176),u=n(83560),s=n(80040),c=n(91917),f=n(21270),d=n(97956),h=function(e,t,n,i){return new(n||(n=o.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))}},87510:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.NetCtrl=void 0;var r=i(n(6113)),a=i(n(25233)),o=i(n(91678)),l=n(35716),u=n(79079),s=n(11522),c=n(24454),f=function(){function e(t,n){(0,a.default)(this,e),this.view=t,this.model=n,this.init()}return(0,o.default)(e,[{key:"init",value:function(){var e=this.view,t=this.model,n=t.skin_level,i=s.viewState.game.upside_down,r=t.pos,a=r.x,o=r.y;e.pos(a,o),i&&(e.scaleY=-1),(0,u.playSkeleton)(e,n,!1),this.initEvent(),e.zOrder=301}},{key:"initEvent",value:function(){var e=this,t=(this.view,this.model.event);t.on(l.ModelEvent.Destroy,(function(){var n=e.model.skin;(0,r.default)((function(){(0,c.recoverSkeletonPool)("net",n,e.view)}),1e3),t.offAllCaller(e)}),this)}}]),e}();t.NetCtrl=f},33305:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.PlayerCtrl=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(77433)),f=i(n(68393)),d=i(n(35526)),h=i(n(25233)),v=i(n(91678)),p=n(8360),y=n(89945),g=n(62482),m=n(91917),_=n(83922),k=n(71877),b=n(34155),w=n(99524),S=n(82993),x=n(55176),C=i(n(75110)),I=n(20096),M=n(79079),E=n(42072),A=n(38472),L=n(45307),B=n(11522),T=n(88057),P=n(65155),D=n(14407),F=n(96148);function N(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return U(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?U(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var z=[1,2,3,4,5,10,15,20],R=function(){function e(t,n,i){(0,h.default)(this,e),this.view=t,this.model=n,this.game_ctrl=i,this.init()}return(0,v.default)(e,[{key:"init",value:function(){this.initGun(),this.initEvent()}},{key:"initGun",value:function(){var e=this.view,t=this.model,n=this.game_ctrl,i=t.server_index,r=t.gun,a=t.bullet_num,o=t.is_cur_player,l=r.pos;i>=2&&e.fixServerTopPos(),n.calcClientIndex(i)>=2&&e.fixClientTopPos(),e.setPos(l.x,l.y),o&&(0,B.setBulletNum)(a)}},{key:"initEvent",value:function(){var e=this,t=this.view,n=this.model,i=n.user_id,r=n.gun,a=n.is_cur_player,o=n.skill_map,l=n.event,u=r.event,s=r.direction,c=r.pos,f=t.btn_minus,h=t.btn_add;l.on(w.PlayerEvent.CaptureFish,(function(e){var t=e.pos,n=e.data,i=n.win,o=n.drop,l=e.resolve,u=r.pos;if(t||l(),a){if(o){var s=(0,x.getUserInfo)().cur_balance;(0,L.awardSkill)(t,u,o,s)}p.AudioCtrl.play(g.AudioRes.FlySkill)}i?a&&i>1e3?(0,E.showAwardCircle)(t,i,a).then(l):(0,A.showAwardCoin)(t,u,i,a).then(l):l()}),this),l.on(w.PlayerEvent.Destroy,(function(){e.destroy()}),this),u.on(b.GunEvent.AddBullet,(function(e){var n=e.bullet_group,o=e.velocity,l=r.rage;t.fire(o,i),a&&t.stopPosTip();var u,s=N(n.bullet_list);try{for(s.s();!(u=s.n()).done;){var c=u.value,f=t.addBullet(c.skin,l);new T.BulletCtrl(f,c)}}catch(e){s.e(e)}finally{s.f()}}),this),t.setDirection(s),u.on(b.GunEvent.DirectionChange,(function(e){t.setDirection(e)}),this),u.on(b.GunEvent.LevelChange,(function(n){a&&e.detectDisableChangeBulletCost(n.bullet_cost),t.setBulletCost(n)}),this),t.on(k.Event.CLICK,t,(function(e){e.stopPropagation()}));var v,_=0,I=N(o);try{for(I.s();!(v=I.n()).done;){var M=(0,d.default)(v.value,2)[1];if(M instanceof S.AutoShootModel){if(a){var F=(0,B.getAutoShootSkillItem)();this.handleAutoShoot(M,F)}}else{if(a){var U=(0,B.getSkillItemByIndex)(_);new D.SkillCtrl(M,this,U)}else new D.SkillCtrl(M,this);_++}}}catch(e){I.e(e)}finally{I.f()}u.on(b.GunEvent.WillAddBullet,(function(t){var n=e.model,i=n.need_emit,r=n.user_id,a=n.is_cur_player;if(i){var o=t.x,l=t.y;p.AudioCtrl.play(g.AudioRes.Fire,a?1:.3);var u={direction:{x:o,y:l},userId:r};a||(u.robotId=r,u.userId=(0,x.getCurPlayer)().user_id),(0,P.sendToGameSocket)(m.ServerEvent.Shoot,u)}}),this),u.on(b.GunEvent.CastFish,(function(t){var n=t.fish.id,i=t.level,r=e.model,a=r.user_id,o={eid:n,multiple:i};r.is_cur_player||(o.robotId=a),(0,P.sendToGameSocket)(m.ServerEvent.Hit,o)}),this),a&&(t.setMySelfStyle(),this.resetGetBulletCost(),l.on(w.PlayerEvent.UpdateInfo,(function(){var t=e.model.bullet_num;(0,B.setBulletNum)(t)}),this),u.on(b.GunEvent.NotEnoughBulletNum,(function(){e.game_ctrl.isTrial?(0,y.errorHandler)(m.ServerErrCode.TrialNotBullet):(0,y.errorHandler)(m.ServerErrCode.ReExchange)}),this),u.on(b.GunEvent.AutoShoot,(function(e){(0,B.setAutoShootLight)(e)}),this),(0,B.getGameView)().on(k.Event.CLICK,t,(function(e){var t=(0,B.getPoolMousePos)(),n=new C.default.Vector(t.x-c.x,t.y-c.y);r.preAddBullet(n)})),f.on(k.Event.CLICK,f,(function(t){t.stopPropagation(),e.sendChangeBulletCost("minus")})),h.on(k.Event.CLICK,h,(function(t){t.stopPropagation(),e.sendChangeBulletCost("add")})))}},{key:"handleAutoShoot",value:function(e,t){t.on(k.Event.CLICK,t,(function(t){t.stopPropagation(),(0,I.log)("auto shoot"),e.toggle()}))}},{key:"detectDisableChangeBulletCost",value:function(e){var t=this.view,n=t.btn_minus,i=t.btn_add,r=(0,f.default)(z).call(z,e);(0,M.unDarkNode)(n),(0,M.unDarkNode)(i),r<=0?(0,M.darkNode)(n):r>=z.length-1&&(0,M.darkNode)(i)}},{key:"resetGetBulletCost",value:function(){var e,t,n=this.game_ctrl.isTrial,i=(0,x.getUserInfo)(),r=i.cur_balance,a=i.user_id,o=(0,F.getItem)((0,c.default)(e=(0,c.default)(t="".concat(a,":")).call(t,r,":")).call(e,n));o&&(0,P.sendToGameSocket)(m.ServerEvent.ChangeTurret,{multiple:Number(o)})}},{key:"sendChangeBulletCost",value:function(e){var t,n,i=this.game_ctrl.isTrial,r=this.model.bullet_cost,a=(0,f.default)(z).call(z,r),o="add"===e?a+1:a-1;if(!(o<0||o>z.length-1)){p.AudioCtrl.play(g.AudioRes.Click);var l=z[o];this.detectDisableChangeBulletCost(l),(0,P.sendToGameSocket)(m.ServerEvent.ChangeTurret,{multiple:l});var u=(0,x.getUserInfo)(),s=u.cur_balance,d=u.user_id;(0,F.setItem)((0,c.default)(t=(0,c.default)(n="".concat(d,":")).call(n,s,":")).call(t,i),l+"")}}},{key:"destroy",value:function(){var e=this.view,t=this.model,n=t.gun.event,i=t.event;(0,B.getGameView)().offAllCaller(e),_.Laya.stage.offAllCaller(e),i.offAllCaller(this),n.offAllCaller(this),e.destroy(),this.view=void 0,this.game_ctrl=void 0,this.model=void 0}}]),e}();t.PlayerCtrl=R},14407:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.SkillCtrl=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(88481),l=n(23029),u=n(31861),s=n(64952),c=function(){function e(t,n,i){(0,r.default)(this,e),this.view=i,this.model=t,this.player=n,this.initEvent(),this.setInfo()}return(0,a.default)(e,[{key:"initEvent",value:function(){var e=this,t=this.view,n=this.model,i=this.player,r=n.skill_core.event;if(r.on(l.SkillEvent.ActiveSkill,(function(e){(0,u.skillActiveHandler)(n,e,i.model)}),this),t){r.on(l.SkillEvent.StatusChange,(function(e){e===l.SkillStatus.Active?t.highlight():e===l.SkillStatus.Disable||e===l.SkillStatus.Normal?(t.unHighlight(),t.clearCoolTime(),(0,u.skillDisableHandler)(n)):e===l.SkillStatus.PreActive&&(n instanceof o.BombModel||n instanceof s.LockFishModel)&&t.highlight()}),this),r.on(l.SkillEvent.UpdateInfo,(function(){e.setInfo()}),this);var a=0;r.on(l.SkillEvent.UpdateRadio,(function(e){a%3&&1!==e?a++:(a++,1===e&&(a=0),t.showCoolTime(e))}),this),r.on(l.SkillEvent.Destroy,(function(){e.destroy()}),this),this.bindTrigger=(0,u.onTrigger)(n,t).subscribe((function(){n.skill_core.status===l.SkillStatus.Normal?(0,u.skillPreActiveHandler)(n):n.skill_core.status===l.SkillStatus.PreActive&&(0,u.skillNormalActiveHandler)(n)}))}}},{key:"setInfo",value:function(){var e=this.view,t=this.model.skill_core,n=t.num,i=t.item_id;e&&(e.setId(i),e.setNum(n))}},{key:"destroy",value:function(){var e,t,n;null===(n=null===(t=null===(e=this.model)||void 0===e?void 0:e.skill_core)||void 0===t?void 0:t.event)||void 0===n||n.offAllCaller(this),this.bindTrigger.unsubscribe(),this.model=void 0}}]),e}();t.SkillCtrl=c},31861:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.skillNormalActiveHandler=function(e){if(e.skill_core.status===p.SkillStatus.PreActive&&(e.skill_core.setStatus(p.SkillStatus.Normal),e instanceof v.LockFishModel&&((0,S.offFishClick)(),k.default.hide(),(0,b.stopAim)("aim")),e instanceof d.BombModel)){var t=S.viewState.game.pool;k.default.hide(),(0,b.stopAim)("aim_big"),(0,S.offPoolClick)(),(0,g.offMouseMove)(t)}},t.skillPreActiveHandler=function(e){var t=(0,o.getLang)(),n=s.InternationalTip[t],i=n.buySkillTip,r=n.posBombTip,a=n.aimFish;if(e.skill_core.num<=0)m.default.alert(i).then((function(e){"confirm"===e&&_.default.preEnter()}));else if(e.skill_core.status===p.SkillStatus.Normal)if(e.skill_core.setStatus(p.SkillStatus.PreActive),e instanceof h.FreezeModel)(0,x.sendToGameSocket)(c.ServerEvent.UseFreeze);else if(e instanceof d.BombModel){k.default.tip(r,2);var l=S.viewState.game.pool,w=u.Config.PoolWidth,C=u.Config.PoolHeight;(0,b.activeAim)({x:w/2,y:C/2}),(0,g.onMouseMove)(l,(function(e){return(0,b.activeAim)(e)})),(0,S.onPoolClick)(!0).subscribe((function(e){(0,g.offMouseMove)(l),(0,b.stopAim)("aim_big");var t=(0,f.getBeBombFishIds)(e);(0,x.sendToGameSocket)(c.ServerEvent.UseBomb,{bombPoint:e,fishList:t})}))}else if(e instanceof v.LockFishModel){var I=e.skill_core.player,M=(I.user_id,I.is_cur_player),E=I.need_emit,A=(0,y.getAimFish)();if(!M&&E)return;var L=y.modelState.app.game.getCurPlayer();k.default.tip(a,2),(0,b.activeAimFish)(A,!1,L.gun.pos),(0,S.onFishClick)(!0).subscribe((function(e){(0,x.sendToGameSocket)(c.ServerEvent.LockFish,{eid:e,needActive:!0})}))}},t.skillActiveHandler=function(e,t,n){return new r.default((function(i,r){var u=(0,o.getLang)(),f=s.InternationalTip[u].aimFish;if(e instanceof v.LockFishModel){var h=t.fish,p=t.is_tip,y=t.gun_pos;if(!n.is_cur_player)return(0,E.debug)("lock:>skill:>skillActiveHandler",p),void(n.need_emit&&p&&(0,x.sendToGameSocket)(c.ServerEvent.LockFish,{robotId:n.user_id,eid:h.id}));p&&k.default.tip(f,2);var m=!p;(0,b.activeAimFish)(h,m,y),(0,S.onFishClick)().subscribe((function(e){(0,x.sendToGameSocket)(c.ServerEvent.LockFish,{eid:e})}))}else if(e instanceof d.BombModel){var _=S.viewState.game.pool;(0,w.activeExploding)(t),(0,g.offMouseMove)(_),a.AudioCtrl.play(l.AudioRes.Bomb),i()}}))},t.skillDisableHandler=function(e){return new r.default((function(t,n){e instanceof v.LockFishModel?((0,b.stopAim)("aim"),(0,S.offFishClick)()):e instanceof d.BombModel?(0,S.offPoolClick)():t()}))},t.getShortcut=function(e){return e instanceof v.LockFishModel?"F1":e instanceof h.FreezeModel?"F2":e instanceof d.BombModel?"F3":void 0},t.onTrigger=function(e,t){var n=112;e instanceof v.LockFishModel?n=112:e instanceof h.FreezeModel?n=113:e instanceof d.BombModel&&(n=114);var i=(0,C.onKeyBoardEvent)(n),r=(0,C.onNodeEvent)(t,I.Event.CLICK);return(0,M.merge)(i,r)};var r=i(n(82069)),a=n(8360),o=n(39594),l=n(62482),u=n(97956),s=n(94643),c=n(91917),f=n(79317),d=n(88481),h=n(38222),v=n(64952),p=n(23029),y=n(55176),g=n(89785),m=i(n(20118)),_=i(n(37811)),k=i(n(18773)),b=n(34340),w=n(66008),S=n(11522),x=n(65155),C=n(93069),I=n(71877),M=n(60399),E=n(20096)},1992:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getBoundsOfNode=_,t.getPromptByShape=k,t.triggerClick=function(e){e.event(f.Event.CLICK,{type:f.Event.CLICK})},t.awaitStageClick=function(){var e=this;return new s.default((function(t,n){c.Laya.stage.on(f.Event.CLICK,e,(function(){t()}))}))},t.showPromptByNode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"btn";return m(this,void 0,void 0,a.default.mark((function o(){var l,u,s,c,f,d,p,y,g;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u="rect",e.sprite?(l=e.sprite,u=e.shape):l=e,s=v.guide_state.guide_dialog,c=_(l,s),f=c.x,d=c.y,p=c.width,y=c.height,g="rect"===u?new h.Rectangle(f,d,p,y):{x:f+p/2,y:d+y/2,radius:Math.max(p,y)},a.next=7,w(g,t,n,i,r);case 7:case"end":return a.stop()}}),o)})))},t.showPromptByShape=w,t.extraShape=S;var r=i(n(69385)),a=i(n(41509)),o=i(n(5605)),l=i(n(74850)),u=i(n(68393)),s=i(n(82069)),c=n(83922),f=n(71877),d=n(68031),h=n(28569),v=n(15313),p=n(66443),y=n(21270),g=n(20096),m=function(e,t,n,i){return new(n||(n=s.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=n/2,r=e.localToGlobal(new d.Point(-i,-i));r=t.globalToLocal(r,!0);var a=e.localToGlobal(new d.Point(e.width+i,e.height+i));a=t.globalToLocal(a,!0);var o=r,l=o.x,u=o.y,s=a.x-l,c=a.y-u;return s<0&&(l=a.x,u=a.y,s=r.x-l,c=r.y-u),{x:l,y:u,width:s,height:c}}function k(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=v.guide_state.prompt,a=r.getSize();if(e instanceof h.Rectangle){var o=e.x,l=e.y,u=e.width,s=e.height;switch(t){case"top":n={x:o,y:l-a.height-i};break;case"right":n={x:o+u+i,y:l};break;case"bottom":n={x:o,y:l+s+i};break;case"left":n={x:o-a.width-i,y:l}}}else{var c=e.x,f=e.y,d=e.radius;switch(t){case"top":n={x:c-d,y:f-d-a.height-i};break;case"right":n={x:c+d+i,y:f-d};break;case"bottom":n={x:c-d,y:f+d+i};break;case"left":n={x:c-d-a.width-i,y:f-d}}}return n}function b(e){return m(this,void 0,void 0,a.default.mark((function t(){var n,i,r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.guide_state.prompt,i=n.getSize(),r=(0,o.default)(e).call(e,(function(e,t){var n=t.split("<br/>").length;return 1===n&&(n=Math.ceil((0,p.getStringLength)(t)/50)),n>e&&(e=n),e}),0),n.setSize(i.width,35*r),(0,g.log)("test:>",r),t.next=7,(0,y.sleep)(.5);case 7:case"end":return t.stop()}}),t)})))}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"btn";return m(this,void 0,void 0,a.default.mark((function o(){var l,u,s,c;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=v.guide_state.guide_dialog,u=v.guide_state.prompt,v.guide_state.btn_next,e=S(e,20),a.next=5,b(t);case 5:return s=k(e,n),c=u.prompt({pos:s,dir:n},t,!1),a.next=9,l.drawBlankWaitClick(e,i,r,c);case 9:return a.next=11,u.hide();case 11:l.clearBlank();case 12:case"end":return a.stop()}}),o)})))}function S(e,t){if(e instanceof h.Rectangle){var n=e.x,i=e.y,a=e.width,o=e.height;return new h.Rectangle(n-t/2,i-t/2,a+t,o+t)}var s=e.radius,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,u.default)(t).call(t,i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof l.default){var r=0;for(i=(0,l.default)(e);r<i.length;r++)(0,u.default)(t).call(t,i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["radius"]);return(0,r.default)((0,r.default)({},c),{radius:s+t/2})}},62340:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.PointerGuide=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(21270),l=function(){function e(t){(0,r.default)(this,e),this.name="pointer",this.view=t}return(0,a.default)(e,[{key:"moveToTarget",value:function(e,t){var n=this;t&&(this.target=t);var i=this.target;if(i){var r=this.view;this.showPointer("static"),(0,o.move)(r,e,i,500).then((function(){n.showPointer("target")}))}}},{key:"show",value:function(e,t,n){var i=this.view;i.visible=!1,this.showPointer(t),i.pos(e.x,e.y),"target"===t&&(this.target={x:e.x,y:e.y}),(0,o.fade_in)(i,500).then(n)}},{key:"isShow",value:function(){return this.view.visible=!1}},{key:"showPointer",value:function(e){e=e||"static";var t=this.view,n=t.pointer_img,i=t.pointer_ani;this.resetView(),"static"===e?n.visible=!0:(i.visible=!0,i.play(0,!0))}},{key:"hidePointer",value:function(){this.resetView(),this.target=null,this.hide()}},{key:"resetView",value:function(){var e=this.view,t=this.view,n=t.pointer_img,i=t.pointer_ani;e.alpha=1,n.visible=!1,i.visible=!1,i.stop()}},{key:"hide",value:function(){var e=this.view;(0,o.stopAni)(e),e.visible=!1}}]),e}();t.PointerGuide=l},25436:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.PromptGuide=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(35526)),f=i(n(6113)),d=i(n(82069)),h=i(n(69385)),v=i(n(25233)),p=i(n(91678)),y=i(n(74850)),g=i(n(68393)),m=n(21270),_=n(79079),k=n(71877),b=n(83922);function w(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return S(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,g.default)(t).call(t,i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof y.default){var r=0;for(i=(0,y.default)(e);r<i.length;r++)(0,g.default)(t).call(t,i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},C={fontSize:25,color:"#ffe7a7"},I=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.default)(this,e),this.auto_hide=!0,this.step=-1,this.is_going=!1,this.name="prompt",this.view=t,this.style=(0,h.default)((0,h.default)({},C),n);var i=t.html_div;i.style.width=579}return(0,p.default)(e,[{key:"prompt",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new d.default((function(r,a){n.reset(),n.view.pos(e.pos.x,e.pos.y),"string"==typeof t||t[0].color?n.tip_msg=[t]:n.tip_msg=t,n.complete_resolve=r,n.auto_hide=i,n.is_going=!0,n.step_map=n.analysisTip(n.tip_msg),n.showTip(),b.Laya.stage.on(k.Event.CLICK,n,(function(){n.jumpLevelLastStep()})),n.show(e.dir)}))}},{key:"jumpLevelLastStep",value:function(){var e,t=this.step_map,n=this.step,i=0,r=0,a=w(t);try{for(a.s();!(e=a.n()).done&&!((r=(i+=e.value)-1)>n););}catch(e){a.e(e)}finally{a.f()}this.showTip(r)}},{key:"getStepInfo",value:function(e){for(var t=this.step_map,n=0,i=0,r=0,a=!1,o=!1,l=0;l<t.length;l++){var u=t[l];if(e<=(r+=u)-1){n=l,i=e-(r-u);break}}var s=t[n];return n>=t.length-1&&i>=s-1&&(a=!0),i>=s-1&&(o=!0),{level_index:n,level_step_index:i,is_level_last:o,is_last:a}}},{key:"showTip",value:function(e){var t=this,n=this.tip_msg;e=e||0,this.step=e;var i=this.getStepInfo(e),r=i.level_index,a=i.level_step_index,o=i.is_last,l=i.is_level_last,u=this.view.html_div,s=70,c=n[r];u.innerHTML=this.getTipByLen(c,a+1),clearTimeout(this.timeout),o?this.timeout=(0,f.default)((function(){t.complete()}),this.auto_hide?1e3:0):(l&&(s=1e3),this.timeout=(0,f.default)((function(){t.showTip(++e)}),s))}},{key:"getTipByLen",value:function(e,t){var n=[],i=this.style;if("string"==typeof e){var r,a=M(e,t),o=w((0,c.default)(a,1)[0]);try{for(o.s();!(r=o.n()).done;){var l=r.value;n.push((0,h.default)((0,h.default)({},i),{msg:l}))}}catch(e){o.e(e)}finally{o.f()}}else{var u,s=w(e);try{for(s.s();!(u=s.n()).done;){var f=u.value,d=f.msg,v=x(f,["msg"]),p=M(d,t),y=(0,c.default)(p,2),g=y[0];t=y[1],v=(0,h.default)((0,h.default)({},i),v);var m,_=w(g);try{for(_.s();!(m=_.n()).done;){var k=m.value;n.push((0,h.default)((0,h.default)({},v),{msg:k}))}}catch(e){_.e(e)}finally{_.f()}if(t<=0)break}}catch(e){s.e(e)}finally{s.f()}}return this.jsonToHtml(n)}},{key:"jsonToHtml",value:function(e){var t,n="",i=w(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a='<span style="font-size:{fontSize}px;color:{color};">{msg}</span>';for(var o in r)if(r.hasOwnProperty(o))if("<br/>"===r[o])a="<br/>";else{var l=new RegExp("{"+o+"}","g");a=a.replace(l,r[o])}n+=a}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"show",value:function(e){var t;switch(e){case"top":t=m.slide_down_in;break;case"right":t=m.slide_left_in;break;case"bottom":t=m.slide_up_in;break;case"left":default:t=m.slide_right_in}t(this.view,800)}},{key:"analysisTip",value:function(e){var t,n=[],i=w(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.length;if("string"!=typeof r){a=0;var o,l=w(r);try{for(l.s();!(o=l.n()).done;)a+=o.value.msg.length}catch(e){l.e(e)}finally{l.f()}}n.push(a)}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"showCompletedTip",value:function(){if(this.is_going){clearTimeout(this.timeout);var e=this.getCurTipCompleteStepInfo();e.is_complete?this.complete():e.in_wait?this.showTip(++e.step):this.showTip(e.step)}}},{key:"getCurTipCompleteStepInfo",value:function(){for(var e=this.step,t=this.step_map,n=0,i=!1,r=!1,a=0,o=t.length;a<o;a++){if(e<(n+=t[a])){e=n;break}if(e===n){i=!0,a===o-1&&(r=!0);break}}return{step:e,in_wait:i,is_complete:r}}},{key:"complete",value:function(){this.complete_resolve&&(0,_.callFunc)(this.complete_resolve),this.auto_hide&&this.hide(),this.reset()}},{key:"getSize",value:function(){var e=this.view;return{width:e.width,height:e.height}}},{key:"setSize",value:function(e,t){var n=this.view;n.width=e,n.height=t}},{key:"reset",value:function(){this.tip_msg=null,this.complete_resolve=null,this.auto_hide=!0,this.step=-1,this.step_map=null,this.is_going=!1,b.Laya.stage.offAllCaller(this)}},{key:"hide",value:function(){var e=this.view;e.html_div.innerHTML="",e.visible=!1}}]),e}();function M(e,t){var n=e.split("<br/>"),i=[];if(1===e.length)i.push((0,s.default)(e).call(e,0,t)),t=0;else for(var r=0;r<n.length;r++){var a=n[r],o=(t-=a.length)>0?a:(0,s.default)(a).call(a,0,a.length+t);if(i.push(o),r!==n.length-1&&t>0&&(i.push("<br/>"),t--),t<=0)break}return[i,t]}t.PromptGuide=I,window.spliceStr=M},12216:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.gotoGuide=h,t.guide_arr=void 0;var r,a=i(n(41509)),o=i(n(82069)),l=n(16198),u=n(16347),s=n(96148),c=function(e,t,n,i){return new(n||(n=o.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},f=[];t.guide_arr=f;var d=!1;function h(e,t){return c(this,void 0,void 0,a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f.push({group_id:e,functionId:t}),d){n.next=5;break}return d=!0,n.next=5,v();case 5:case"end":return n.stop()}}),n)})))}function v(){return c(this,void 0,void 0,a.default.mark((function e(){var t,n,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=new l.GuideMain),e.next=3,r.start();case 3:if(!(f.length>0)){e.next=11;break}return t=f.shift(),n=t.group_id,i=t.functionId,o=p[n],e.next=8,o();case 8:r.onGuideUpdate(n,i),e.next=3;break;case 11:d=!1,r.end();case 13:case"end":return e.stop()}}),e)})))}window.gotoGuide=h;var p={1:function(){return c(void 0,void 0,void 0,a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u.NewUserGuide,e.next=3,t.start("1");case 3:(0,s.setItem)("guide","end");case 4:case"end":return e.stop()}}),e)})))}}},46984:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(83544)),a=i(n(41509)),o=i(n(88657)),l=i(n(25233)),u=i(n(91678)),s=i(n(97641)),c=i(n(89224)),f=i(n(77887)),d=i(n(18127)),h=i(n(82069)),v=i(n(53746)),p=n(4749),y=n(15313),g=n(83922),m=n(57162),_=n(71877),k=n(28569),b=n(79079),w=n(21270),S=n(39594),x=n(94643),C=n(89785);var I=function(e){(0,c.default)(p,e);var t,n,i=(t=p,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.default)(t);if(n){var a=(0,d.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,f.default)(this,e)});function p(){var e;return(0,l.default)(this,p),(e=i.call(this)).config={},e.zOrder=99,e.isShowEffect=void 0,e.config={shadowAlpha:0},e}return(0,u.default)(p,[{key:"onAwake",value:function(){var e=this;this.init(),(0,S.onLangChange)(this,(function(t){e.initLang(t)}))}},{key:"initLang",value:function(e){var t=x.InternationalTip[e],n=t.tourSkip,i=t.tourStart,r=this.start_label;this.skip_label.text=n,r.text=i}},{key:"onResize",value:function(){var e=g.Laya.stage,t=e.width,n=e.height,i=this.mask_area,r=this.mask_wrap,a=this.inner;if(i){var o=t>1920?1920:t;i.width=o,i.height=n,i.x=(this.width-i.width)/2,i.y=(this.height-r.height)/2,i.graphics.clear(),i.graphics.drawRect(0,0,i.width,n,"#000000"),this.x=(t-this.width)/2,this.y=(n-this.height)/2,a.width=t>1920?1920:t}}},{key:"init",value:function(){this.initDom(),this.initEvent()}},{key:"initDom",value:function(){var e=this.mask_wrap;this.cacheAs="bitmap";var t=new g.Laya.Sprite;e.addChild(t),t.alpha=.8,t.mouseEnabled=!0,this.mask_area=t;var n=new g.Laya.Sprite;e.addChild(n),n.blendMode="destination-out",this.blank_area=n,n.mouseEnabled=!0;var i=new m.HitArea;n.hitArea=i,this.blank_area=n,t&&this.onResize()}},{key:"setBtnNextDir",value:function(e){var t=this.btn_next;"left"===e?(t.right=NaN,t.rotation=180,t.left=30):(t.left=NaN,t.right=30,t.rotation=0)}},{key:"initEvent",value:function(){var e,t=this,n=this.btn_skip,i=this.mask_area;g.Laya.stage.on(_.Event.RESIZE,this,(0,o.default)(e=this.onResize).call(e,this)),i.on(_.Event.CLICK,this,(function(e){var n=t.force,i=y.guide_state.pointer,r=t.getMousePoint(),a=r.x,o=r.y;if(!n)return i.hide(),t.forceNext();i.isShow()&&(i.show({x:a,y:o}),i.moveToTarget({x:a,y:o},t.click_center))})),n.on(_.Event.CLICK,this,(function(e){t.forceSkip()}))}},{key:"forceNext",value:function(){var e=this.handler;e&&((0,b.callFunc)(e.next),this.handler=void 0)}},{key:"forceSkip",value:function(){var e=this.handler;e&&((0,b.callFunc)(e.skip,"skip"),this.handler=void 0)}},{key:"showNextHandler",value:function(e,t){var n=this,i=this.btn_next,r=this.btn_start,a=this.blank_area,o=y.guide_state.pointer;t.then((function(){"btn"===e?((0,w.fade_in)(i),i.once(_.Event.CLICK,i,(function(){n.forceNext(),i.offAll(),(0,w.fade_out)(i)}))):"point"===e?(a.once(_.Event.CLICK,n,(function(e){a.offAll(),e.stopPropagation(),o.hide(),n.forceNext()})),o.show(n.click_center,"target")):"start"===e&&((0,w.fade_in)(r),r.once(_.Event.CLICK,r,(function(){n.forceNext(),r.offAll(),(0,w.fade_out)(r)})))}))}},{key:"drawBlankWaitClick",value:function(e,t,n,i){var r=this;return new h.default((function(a,o){var l=r.blank_area,u=l.hitArea.hit;if(r.blank_shape=e,r.handler={next:a,skip:o},r.force=t,r.click_center=function(e){return e instanceof k.Rectangle?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:e.x,y:e.y}}(e),r.showBlank(),l.graphics.clear(),r.showNextHandler(n,i),e instanceof k.Rectangle){var s=(0,C.getRectRadiusPath)(e.x,e.y,e.width,e.height,10);l.graphics.drawPath(0,0,s,{fillStyle:"#00ffff"}),u.drawRect(e.x,e.y,e.width,e.height,{fillStyle:"#FFFFFF"})}else l.graphics.drawCircle(e.x,e.y,e.radius,"#000000"),u.drawCircle(e.x,e.y,e.radius,"#000000")}))}},{key:"showBlank",value:function(){var e=this.mask_area;e.graphics.clear(),e.graphics.drawRect(0,0,e.width,e.height,"#000000")}},{key:"clearBlank",value:function(){var e=this.blank_area,t=this.mask_area;this.blank_shape=void 0;var n=e.hitArea.hit;e.graphics.clear(),t.graphics.clear(),n.clear(),this.handler=void 0,this.click_center=void 0}},{key:"hide",value:function(){this.clearBlank(),this.close()}},{key:"destroy",value:function(){(0,S.offLangChange)(this),(0,s.default)((0,d.default)(p.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){return e=this,t=void 0,n=void 0,i=a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.director.openDialog("pop/guide/GuideDialog.scene");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})),new(n||(n=h.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}));var e,t,n,i}}]),p}(p.ui.pop.guide.GuideDialogUI);t.default=I},16347:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.NewUserGuide=void 0;var r=i(n(84048)),a=i(n(41509)),o=i(n(25233)),l=i(n(91678)),u=i(n(82069)),s=n(82619),c=n(1992),f=n(21270),d=n(15313),h=n(83560),v=n(91917),p=n(91178),y=n(59485),g=n(39594),m=n(94643),_=i(n(53746)),k=n(20096),b=function(e,t,n,i){return new(n||(n=u.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},w=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"start",value:function(e){return b(this,void 0,void 0,a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showStartPrompt();case 2:if(!e.sent){e.next=6;break}return e.next=6,this.next();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"showStartPrompt",value:function(){return b(this,void 0,void 0,a.default.mark((function e(){var t,n,i,o,l,u,b,w,S,x,C,I,M,E,A,L,B,T,P,D;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,g.getLang)(),n=m.InternationalTip[t],i=n.tour1,o=n.tour2,l=n.tour3,u=n.tour4,b=n.tour5,w=n.tour6,e.prev=2,x=d.guide_state.guide_dialog,C=s.HallCtrl.instance){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,h.waitCreateSocket)(v.ServerName.Hall);case 9:return I=C.view,M=I.header.btn_coin_select,E=I.guide2,e.next=12,(0,c.showPromptByNode)(M,[i],"bottom",!0);case 12:return e.next=14,(0,c.showPromptByNode)(E,[o],"top",!0);case 14:return C.destroy(),e.next=17,p.GameTestCtrl.preEnter();case 17:return S=e.sent,_.default.director.openDialog(x),A=S.view.bullet_box,e.next=22,(0,f.sleep)(1);case 22:return L=(0,r.default)(S.player_list)[0],B=L.view,T=A.x>667?"left":"right",x.setBtnNextDir(T),B.stopPosTip(),e.next=29,(0,c.showPromptByNode)(A,[l],T,!0);case 29:return B.setMySelfStyle(),e.next=32,(0,f.sleep)(1);case 32:return e.next=34,(0,c.showPromptByNode)(B,[u],"top",!0);case 34:return(0,f.sleep)(2),(0,y.genFishInfo)(S),P=S.fish_view,e.next=39,(0,c.showPromptByNode)({sprite:P,shape:"circle"},[b],"top",!0,"point");case 39:return e.next=41,(0,y.mockShoot)();case 41:return e.next=43,(0,f.sleep)(1);case 43:return D=S.view.skill_box,x.setBtnNextDir("right"),e.next=47,(0,c.showPromptByNode)(D,[w],"top",!0,"start");case 47:return(0,y.resetMockSocketCtor)(S),e.abrupt("return",!0);case 51:if(e.prev=51,e.t0=e.catch(2),"skip"!==e.t0){e.next=58;break}return(0,y.resetMockSocketCtor)(S),e.abrupt("return",!0);case 58:(0,k.error)(e.t0);case 59:case"end":return e.stop()}}),e,null,[[2,51]])})))}},{key:"next",value:function(){return b(this,void 0,void 0,a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.HallCtrl.instance){e.next=5;break}return s.HallCtrl.instance.destroy(),s.HallCtrl.leave(),e.next=5,(0,f.sleep)(.1);case 5:return e.next=7,s.HallCtrl.preEnter();case 7:case"end":return e.stop()}}),e)})))}}]),e}();t.NewUserGuide=w},16198:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GuideMain=void 0;var r=i(n(41509)),a=i(n(25233)),o=i(n(91678)),l=i(n(82069)),u=i(n(53746)),s=n(21270),c=i(n(46984)),f=n(15313),d=n(62340),h=n(25436),v=function(e,t,n,i){return new(n||(n=l.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},p=function(){function e(){(0,a.default)(this,e),this.name="guide_main"}return(0,o.default)(e,[{key:"start",value:function(){return v(this,void 0,void 0,r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"onGuideUpdate",value:function(e,t){}},{key:"init",value:function(){return v(this,void 0,void 0,r.default.mark((function e(){var t,n,i,a,o,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.guide_dialog){e.next=4;break}return e.next=3,u.default.director.openDialog(this.guide_dialog);case 3:return e.abrupt("return");case 4:return e.next=6,c.default.preEnter();case 6:t=e.sent,n=t.prompt_ui,i=t.pointer_ui,a=t.btn_next,o=new h.PromptGuide(n,{fontSize:25,color:"#ffe7a7"}),l=new d.PointerGuide(i),this.guide_dialog=t,this.prompt=o,this.pointer=l,(0,s.setStyle)(f.guide_state,{guide_dialog:t,prompt:o,pointer:l,btn_next:a});case 14:case"end":return e.stop()}}),e,this)})))}},{key:"end",value:function(){return v(this,void 0,void 0,r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.guide_state.guide_dialog,n=f.guide_state.prompt,e.next=3,n.hide();case 3:t.hide();case 4:case"end":return e.stop()}}),e)})))}}]),e}();t.GuideMain=p},15313:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.guide_state=void 0,t.guide_state={}},89945:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.commonSocket=function(e,t){var n,i=f.ServerEvent.ErrCode;(0,s.bindSocketEvent)(e,t,(n={},(0,r.default)(n,i,(function(t){var n=(0,p.getLang)(),i=c.InternationalTip[n].logoutTip,r=c.InternationalTip[n].OtherLogin;t.code===f.ServerErrCode.TokenExpire?((0,g.removeItem)("local_token"),(0,s.disconnectSocket)(e.config.name),h.default.alert(i,{hide_cancel:!0}).then((function(e){location.reload()}))):t.code===f.ServerErrCode.OtherLogin&&((0,s.disconnectSocket)(e.config.name),h.default.alert(r,{hide_cancel:!0}).then((function(){location.reload()})))})),(0,r.default)(n,u.SocketEvent.Reconnecting,(function(e){var t=(0,p.getLang)();if(0===e){var n=c.InternationalTip[t].NetError;v.default.tip(n,{count:20,show_count:!0,auto_hide:!1,click_through:!1})}})),(0,r.default)(n,u.SocketEvent.Reconnected,(function(){m()})),(0,r.default)(n,u.SocketEvent.End,(function(){var e=(0,p.getLang)(),t=c.InternationalTip[e].logoutTip;h.default.alert(t,{hide_cancel:!0}).then((function(e){location.reload()}))})),n)),a.ctrlState.app.bg_monitor.event.on(d.BgMonitorEvent.VisibleChange,(function(t){t&&("OPEN"===e.status?m():e.reconnect())}),t)},t.offCommon=function(e,t){null==e||e.event.offAllCaller(t),a.ctrlState.app.bg_monitor.event.offAllCaller(t)},t.errorHandler=function(e){var t=(0,p.getLang)(),n=c.InternationalTip[t][e];return c.InternationalTip[t].noMoneyConfirm,e===f.ServerErrCode.ReExchange?((0,o.disableCurUserOperation)(),(0,y.asyncOnly)(n,(function(){return h.default.alert(n).then((function(e){if("confirm"===e)return(0,l.sendToGameSocket)(f.ServerEvent.ExchangeBullet);(0,l.sendToGameSocket)(f.ServerEvent.RoomOut)}))}))):e===f.ServerErrCode.NoMoney?h.default.alert(n).then((function(e){"confirm"===e&&(0,p.recharge)(),(0,l.sendToGameSocket)(f.ServerEvent.RoomOut)})):e===f.ServerErrCode.NeedLogin?platform.login():e===f.ServerErrCode.TrialTimeGame||e===f.ServerErrCode.TrialNotBullet?h.default.alert(c.InternationalTip[t][e],{hide_cancel:!0}).then((function(){(0,s.getSocket)(f.ServerName.Game).send(f.ServerEvent.RoomOut)})):e===f.ServerErrCode.TrialTimeHall?v.default.tip(c.InternationalTip[t][f.ServerErrCode.TrialTimeGame]):e===f.ServerErrCode.TrialClose?v.default.tip(c.InternationalTip[t][f.ServerErrCode.TrialClose]):e===f.ServerErrCode.NetError||e===f.ServerErrCode.EnterGameError?h.default.alert(c.InternationalTip[t][f.ServerErrCode.NetError],{hide_cancel:!0}).then((function(){location.reload()})):void(n&&v.default.tip(n))},t.tipComeBack=m,t.tipCount=function(e,t){v.default.tip(e,{count:t,show_count:!0,auto_hide:!1,click_through:!1})};var r=i(n(65549)),a=n(75561),o=n(24856),l=n(65155),u=n(98225),s=n(83560),c=n(94643),f=n(91917),d=n(92268),h=i(n(20118)),v=i(n(26387)),p=n(39594),y=n(98870),g=n(96148);function m(){var e=(0,p.getLang)(),t=c.InternationalTip[e].NetComeBack;v.default.tip(t)}},82619:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.HallCtrl=void 0;var r=i(n(41509)),a=i(n(25233)),o=i(n(91678)),l=i(n(82069)),u=n(8360),s=n(83560),c=n(62482),f=n(91917),d=n(55176),h=i(n(29678)),v=n(39594),p=n(44116),y=n(52527),g=n(75561),m=n(43366),_=n(96148),k=i(n(53746)),b=n(12216),w=function(e,t,n,i){return new(n||(n=l.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},S=function(){function e(t){var n=this;(0,a.default)(this,e),this.selectCoin=function(e){if(-1!==e){var t=n.view,i=t.header.coin_menu.list,r=d.modelState.app.user_info,a=i.array[e].coin_name;r.setCurBalance(a),t.toggleCoinMenu(!1)}},this.selectFlag=function(e){if(-1!==e){var t=n.view,i=t.header.flag_menu.list,r=d.modelState.app.user_info,a=i.array[e].flag_type;r.setLang(a),t.toggleFlagMenu(!1)}},this.view=t,this.init()}return(0,o.default)(e,[{key:"enterGame",value:function(e){return this.destroy(),g.ctrlState.app.enterGame(e)}},{key:"roomIn",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0,p.roomIn)(n[0],this).then((function(t){return(0,y.setRoomInData)(n[0]),e.enterGame(t)}))}},{key:"init",value:function(){return w(this,void 0,void 0,r.default.mark((function e(){var t=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.onHallSocket)(this).then((function(e){return w(t,void 0,void 0,r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return t.abrupt("return",this.destroy());case 4:u.AudioCtrl.playBg(c.AudioRes.HallBg);case 5:if(this.initModelEvent(),"end"===(0,_.getItem)("guide")){t.next=8;break}return t.abrupt("return",(0,b.gotoGuide)("1","1"));case 8:(0,y.hallViewEvent)(this);case 9:case"end":return t.stop()}}),t,this)})))}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"initModelEvent",value:function(){var e=this.view,t=d.modelState.app.user_info;(0,v.onCurBalanceChange)(this,(function(n){var i=t.account_map.get(n),r=i.num,a=i.icon,o=i.hide;e.setCurBalance(n,a,r),e.setRechargeBtnVisible(Boolean(!o))})),(0,v.onLangChange)(this,(function(t){e.setFlag(t)})),(0,v.onAccountChange)(this,(function(t){e.setCoinData(t)})),(0,v.onNicknameChange)(this,(function(t){e.setNickname(t)})),e.setFlagData((0,v.getAllLangList)())}},{key:"onUserAccount",value:function(){this.view.onResize()}},{key:"destroy",value:function(){u.AudioCtrl.stop(c.AudioRes.HallBg),(0,v.offBindEvent)(this),(0,v.offLangChange)(this),(0,p.offHallSocket)(this),(0,s.disconnectSocket)(f.ServerName.Hall),k.default.director.closeAllDialogs(),e.leave()}}],[{key:"preEnter",value:function(){return w(this,void 0,void 0,r.default.mark((function t(){var n=this;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.instance){t.next=2;break}return t.abrupt("return",this.instance);case 2:return t.abrupt("return",(0,m.runAsyncTask)((function(){return h.default.preEnter().then((function(t){var i=new e(t);return n.instance=i,i}))}),this));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"leave",value:function(){this.instance=void 0}}]),e}();t.HallCtrl=S},39594:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.onLangChange=function(e,t){var n=o.modelState.app.user_info,i=n.event,a=n.lang;i.on(l.UserInfoEvent.LangChange,t,e),(0,r.default)((function(){a&&t(a)}))},t.getLang=u,t.offLangChange=function(e){o.modelState.app.user_info.event.offAllCaller(e)},t.onCurBalanceChange=function(e,t){var n=o.modelState.app.user_info,i=n.cur_balance;n.event.on(l.UserInfoEvent.CurBalanceChange,t,e),(0,r.default)((function(){i&&t(i)}))},t.onNicknameChange=function(e,t){var n=o.modelState.app.user_info,i=n.event,s=n.nickname;i.on(l.UserInfoEvent.NicknameChange,t,e),(0,r.default)((function(){var e=u(),n=a.InternationalTip[e].guest;s||(s=n),t(s)}))},t.onAccountChange=function(e,t){var n=o.modelState.app.user_info,i=n.event,a=n.account_map;i.on(l.UserInfoEvent.AccountChange,t,e),(0,r.default)((function(){a&&t(a)}))},t.offBindEvent=function(e){var t=o.modelState.app,n=t.user_info,i=t.setting,r=n.event,a=i.event;r.offAllCaller(e),a.offAllCaller(e)},t.getAllLangList=function(){var e=[];for(var t in a.Lang)a.Lang.hasOwnProperty(t)&&e.push(a.Lang[t]);return e},t.recharge=function(){var e,t,n=o.modelState.app.user_info,i=n.account_map,r=n.cur_balance;i.get(r).hide||null===(e=window)||void 0===e||e.paladin.pay.recharge({data:{currency:r,gameNo:null===(t=window)||void 0===t?void 0:t.paladin.sys.config.gameId,isHorizontal:!0}})};var r=i(n(6113)),a=n(94643),o=n(55176),l=n(64386);function u(){return o.modelState.app.user_info.lang}},44116:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.onHallSocket=function(e){return g(this,void 0,void 0,l.default.mark((function t(){var n,i,a,o;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.initHallSocket)();case 2:return t.next=4,new s.default((function(t,n){_(r=(0,f.getSocket)(h.ServerName.Hall),e),r.event.once(h.ServerEvent.UserAccount,(function(){e.onUserAccount(),t()}),e),m(h.ServerEvent.UserAccount,{domain:d.Config.Host})}));case 4:return t.next=6,k(e);case 6:if(n=t.sent,i=(0,u.default)(n,2),a=i[0],o=i[1],!a){t.next=13;break}return e.enterGame(o),t.abrupt("return",!0);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})))},t.sendToHallSocket=m,t.offHallSocket=function(e){(0,f.offSocketEvent)(r,e),(0,p.offCommon)(r,e)},t.checkReplay=k,t.roomIn=function(e,t){var n=this;return new s.default((function(i,r){var o=(0,f.getSocket)(h.ServerName.Hall);o.event.once(h.ServerEvent.RoomIn,(function(e,r,a){return g(n,void 0,void 0,l.default.mark((function n(){var a,o,s,c;return l.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r!==h.ServerErrCode.AlreadyInRoom){n.next=11;break}return n.next=3,k(t);case 3:return a=n.sent,o=(0,u.default)(a,2),s=o[0],c=o[1],s&&i(c),n.abrupt("return");case 11:if(200===r){n.next=13;break}return n.abrupt("return",(0,p.errorHandler)(r));case 13:i(e.socketUrl);case 14:case"end":return n.stop()}}),n)})))}),t);var s=v.modelState.app.user_info.cur_balance;o.send(h.ServerEvent.RoomIn,(0,a.default)((0,a.default)({},e),{currency:s,domain:""}))}))};var r,a=i(n(69385)),o=i(n(65549)),l=i(n(41509)),u=i(n(35526)),s=i(n(82069)),c=n(98225),f=n(83560),d=n(97956),h=n(91917),v=n(55176),p=n(89945),y=n(86762),g=function(e,t,n,i){return new(n||(n=s.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function m(){var e;(e=r).send.apply(e,arguments)}function _(e,t){(0,p.commonSocket)(e,t),(0,f.bindSocketEvent)(e,t,(0,o.default)({},c.SocketEvent.Reconnected,(function(){m(h.ServerEvent.UserAccount)})))}function k(e){return g(this,void 0,void 0,l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new s.default((function(t,n){var i=(0,f.getSocket)(h.ServerName.Hall);i.event.once(h.ServerEvent.CheckReplay,(function(e){var n=e.isReplay,i=e.socketUrl;t([n,i])}),e),i.send(h.ServerEvent.CheckReplay)})));case 1:case"end":return t.stop()}}),t)})))}},52527:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.hallViewEvent=function(e){var t=this,n=e.view,i=n.normal_box,r=n.match_box,p=n.header,w=n.btn_play_now,S=p.coin_menu.list,x=p.flag_menu.list,C=p.btn_coin_select,I=p.btn_get,M=p.btn_charge,E=p.btn_home,A=p.btn_app,L=p.btn_leave,B=p.btn_voice,T=p.flag_box,P=p.btn_login,D=p.coin_menu,F=p.flag_menu,N=p.btn_game_record,U=p.btn_item_record,z=p.btn_recharge;S.selectHandler=new c.Handler(S,e.selectCoin,void 0,!1),x.selectHandler=new c.Handler(S,e.selectFlag,void 0,!1);var R=s.Event.CLICK,O=i.getChildByName("ani"),G=i.getChildByName("btn_try"),V=i.getChildByName("btn_play"),H=(r.getChildByName("ani"),r.getChildByName("btn_try")),j=r.getChildByName("btn_play");(0,d.onNode)(V,R,(function(n){return k(t,void 0,void 0,a.default.mark((function t(){var n,i,r,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.AudioCtrl.play(u.AudioRes.Click),n=(0,g.getLang)(),i=V.getChildByName("ani"),r=(0,y.playSkeletonOnce)(O,"active_".concat(n)),s=(0,y.playSkeletonOnce)(i,"active_".concat(n)),o.default.all([s,r]).then((function(){e.roomIn({roomId:1,isTrial:0},e),(0,y.playSkeleton)(i,"standby_".concat(n),!0)}));case 6:case"end":return t.stop()}}),t)})))})),(0,d.onNode)(G,R,(function(){return k(t,void 0,void 0,a.default.mark((function t(){var n,i,r,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.AudioCtrl.play(u.AudioRes.Click),n=(0,g.getLang)(),i=G.getChildByName("ani"),r=(0,y.playSkeletonOnce)(i,"active_".concat(n)),s=(0,y.playSkeletonOnce)(O,"active_".concat(n)),o.default.all([r,s]).then((function(){e.roomIn({roomId:1,isTrial:1},e),(0,y.playSkeleton)(i,"standby_".concat(n),!0)}));case 6:case"end":return t.stop()}}),t)})))})),(0,d.onNode)(j,R,(function(){return k(t,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.AudioCtrl.play(u.AudioRes.Click),e.roomIn({roomId:2,isTrial:0},e);case 2:case"end":return t.stop()}}),t)})))})),(0,d.onNode)(z,R,(function(){return k(t,void 0,void 0,a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.AudioCtrl.play(u.AudioRes.Click),(0,g.recharge)();case 2:case"end":return e.stop()}}),e)})))})),(0,d.onNode)(H,R,(function(){return k(t,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.AudioCtrl.play(u.AudioRes.Click),e.roomIn({roomId:2,isTrial:1},e);case 2:case"end":return t.stop()}}),t)})))})),(0,d.onNode)(w,R,(function(){return k(t,void 0,void 0,a.default.mark((function t(){var n,i,r,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,g.getLang)(),i=w.getChildByName("ani"),l.AudioCtrl.play(u.AudioRes.Click),r=(0,y.playSkeletonOnce)(O,"active_".concat(n)),s=(0,y.playSkeletonOnce)(i,"active_".concat(n)),o.default.all([s,r]).then((function(){e.roomIn(b(),e),(0,y.playSkeleton)(i,"standby_".concat(n),!0)}));case 6:case"end":return t.stop()}}),t)})))})),C.on(R,e,(function(e){l.AudioCtrl.play(u.AudioRes.Click),(0,d.isClosest)(e.target,D)||n.toggleCoinMenu(!D.visible)})),T.on(R,e,(function(e){l.AudioCtrl.play(u.AudioRes.Click),n.toggleFlagMenu(!F.visible)})),(0,d.onNode)(I,R,(function(){var e=(0,f.getUserInfo)();e.cur_balance,e.lang,l.AudioCtrl.play(u.AudioRes.Click)})),(0,d.onNode)(M,R,(function(){var e=(0,f.getUserInfo)();e.cur_balance,e.lang,l.AudioCtrl.play(u.AudioRes.Click)})),(0,d.onNode)(E,R,(function(){l.AudioCtrl.play(u.AudioRes.Click)})),(0,d.onNode)(A,R,(function(){l.AudioCtrl.play(u.AudioRes.Click)})),(0,d.onNode)(P,R,(function(){(0,v.login)(),l.AudioCtrl.play(u.AudioRes.Click)})),(0,d.onNode)(L,R,(function(){l.AudioCtrl.play(u.AudioRes.Click),(0,v.logout)()})),(0,d.onNode)(B,R,(function(){l.AudioCtrl.play(u.AudioRes.Click),h.default.preEnter()})),(0,d.onNode)(N,R,(function(){l.AudioCtrl.play(u.AudioRes.Click),m.default.preEnter()})),(0,d.onNode)(U,R,(function(){l.AudioCtrl.play(u.AudioRes.Click),_.default.preEnter()}))},t.getRoomInData=b,t.setRoomInData=function(e){(0,p.setItem)("roomIn",(0,r.default)(e))};var r=i(n(33482)),a=i(n(41509)),o=i(n(82069)),l=n(8360),u=n(62482),s=n(71877),c=n(49663),f=n(55176),d=n(89785),h=i(n(76023)),v=n(86762),p=n(96148),y=n(79079),g=n(39594),m=i(n(98623)),_=i(n(95385)),k=function(e,t,n,i){return new(n||(n=o.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function b(){var e=(0,p.getItem)("roomIn");return e?JSON.parse(e):{roomId:1,isTrial:1}}},86762:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.initHallSocket=function(){return d(this,void 0,void 0,r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.getSocket)(l.ServerName.Hall)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,p(v());case 5:return e.sent,e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))},t.login=function(){platform.login(),(0,c.disconnectSocket)(l.ServerName.Hall)},t.logout=function(){platform.logout(),(0,c.disconnectSocket)(l.ServerName.Hall)},t.waitConnectGame=function(e){return d(this,void 0,void 0,r.default.mark((function t(){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=(0,c.getSocket)(l.ServerName.Game))){t.next=3;break}return t.abrupt("return",n);case 3:return t.next=5,h(e||o.Config.SocketUrl);case 5:(n=t.sent).send(l.ServerEvent.EnterGame);case 7:case"end":return t.stop()}}),t)})))},t.enterGame=h,t.leaveGame=function(){(0,c.disconnectSocket)(l.ServerName.Game)},t.getHallSocketInfo=v,t.connectSocket=p,t.onSocketCreate=function(e){},t.getGuestToken=y;var r=i(n(41509)),a=i(n(82069)),o=n(97956),l=n(91917),u=n(96148),s=n(20096),c=n(83560),f=n(79079),d=function(e,t,n,i){return new(n||(n=a.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function h(e){return d(this,void 0,void 0,r.default.mark((function t(){var n,i,a;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.ServerName.Game,i=o.Config.PublicKey,a=o.Config.Host,t.next=4,p({url:e,publicKey:i,name:n,host:a});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))}function v(){var e=o.Config.code,t=l.ServerName.Hall;return{url:o.Config.SocketUrl,name:t,publicKey:o.Config.PublicKey,code:e,host:o.Config.Host}}function p(e){var t=this;return new a.default((function(n,i){return d(t,void 0,void 0,r.default.mark((function t(){var i,a;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.createSocket)(e);case 2:if(i=t.sent,!(a=o.Config.token)){t.next=8;break}return i.setParams({jwt:a,userId:(0,f.getParams)("userId")}),n(i),t.abrupt("return");case 8:if(a=(0,u.getItem)("local_token")){t.next=14;break}return t.next=12,y(i);case 12:a=t.sent,(0,u.setItem)("local_token",a,7);case 14:i.setParams({jwt:a,userId:(0,f.getParams)("userId")}),o.Config.token=a,(0,s.log)("我自己的token:",a),n(i);case 18:case"end":return t.stop()}}),t)})))}))}function y(e){return new a.default((function(t,n){e.event.once(l.ServerEvent.GetGuestToken,(function(e){t(e.jwt)})),e.send(l.ServerEvent.GetGuestToken)}))}},80040:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.MockWebSocket=void 0;var r=i(n(6113)),a=i(n(25233)),o=i(n(91678)),l=n(98225),u=n(4615),s=n(20096),c=function(){function e(t){var n=this;(0,a.default)(this,e),this.event=new u.EventCom,this.sendEvent=new u.EventCom,this.status="OPEN",this.config=t,(0,r.default)((function(){n.event.emit(l.SocketEvent.Init)}))}return(0,o.default)(e,[{key:"reconnect",value:function(){}},{key:"setParams",value:function(e){(0,s.log)(e)}},{key:"send",value:function(e,t){this.sendEvent.emit(e,t),(0,s.log)("mockWebSocket:>",e,t)}},{key:"disconnect",value:function(){this.event.destroy(),this.sendEvent.destroy(),(0,s.log)("disconnect")}}]),e}();t.MockWebSocket=c},98225:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.WebSocketWrapCtrl=t.SocketEvent=void 0;var r,a=i(n(83544)),o=i(n(33482)),l=i(n(69385)),u=i(n(25233)),s=i(n(91678)),c=i(n(89224)),f=i(n(77887)),d=i(n(18127)),h=n(63711),v=n(4615),p=n(22229),y=n(83560),g=n(20096);!function(e){e.OnData="0",e.PingTimeOut="1",e.Ping="2",e.Pong="3",e.Error="4",e.MsgAck="5"}(r||(r={}));var m={ping:"2",pong:"3"},_={Init:"init",Connect:"connect",Reconnecting:"reconnecting",Reconnected:"reconnected",Close:"close",Error:"error",End:"end",CheckError:"CheckError"};t.SocketEvent=_;var k=function(e){(0,c.default)(h,e);var t,n,i=(t=h,n=function(){if("undefined"==typeof Reflect||!a.default)return!1;if(a.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,a.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.default)(t);if(n){var r=(0,d.default)(this).constructor;e=(0,a.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,f.default)(this,e)});function h(e){var t;return(0,u.default)(this,h),(t=i.call(this)).params={},t.onInit=function(){t.event.emit(_.Init)},t.onData=function(e){var n,i=t.config.name,a=e.substring(1);switch(e.charAt(0)){case r.OnData:if(!(n=(0,y.decrypt)(i,a)))return;(0,g.log)("".concat(i,":>接收:>"),n);var o=n,l=o.cmd,u=o.res,s=o.code,c=o.msg;t.event.emit(l,u,s,c);break;case r.Error:case r.MsgAck:}},t.onClose=function(){t.event.emit(_.Close)},t.onEnd=function(){t.event.emit(_.End)},t.onReconnect=function(e){t.event.emit(_.Reconnecting,e)},t.onReconnected=function(){t.event.emit(_.Reconnected)},t.config=e,t.init(),t}return(0,s.default)(h,[{key:"init",value:function(){var e=new v.EventCom;this.addCom(e),this.event=e,this.connect()}},{key:"connect",value:function(){var e=(0,y.genUrl)(this.config),t=new p.WebSocketCtrl({url:e,handlers:{onInit:this.onInit,onData:this.onData,onClose:this.onClose,onEnd:this.onEnd,onReconnect:this.onReconnect,onReconnected:this.onReconnected},ping_pong_map:m});this.ws=t}},{key:"setParams",value:function(e){this.params=(0,l.default)((0,l.default)({},this.params),e)}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.ws,i=this.params,r=this.config.name;(0,g.log)("".concat(r,":>发送:>"),e,t);var a={cmd:e,params:(0,l.default)((0,l.default)({},i),t)},u="0"+(0,y.encrypt)(r,(0,o.default)(a));n.send(u)}},{key:"disconnect",value:function(){this.event.destroy(),this.ws.disconnect(),this.ws=void 0}},{key:"reconnect",value:function(){var e=this.ws;if(!e)return(0,g.error)("WebSocketWrapCtrl:> is disconnected!");"CLOSED"===e.status&&this.ws.reconnect()}},{key:"emitEvent",value:function(e,t,n,i){}},{key:"status",get:function(){return this.ws?this.ws.status:"CLOSED"}}]),h}(h.ComponentManager);t.WebSocketWrapCtrl=k},83560:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.createSocket=function(e){return new o.default((function(t,n){var i=e.name,a=new(r||c.WebSocketWrapCtrl)(e);a.event.once(c.SocketEvent.Init,(function(){y.emit(g,i,a),p.set(i,a),t(a)}))}))},t.waitCreateSocket=function(e){return new o.default((function(t,n){var i=p.get(e);if(i)return t(i);y.once(g,(function(n,i){n===e&&t(i)}))}))},t.onCreateSocket=function(e,t){return new d.Observable((function(n){var i=function(i,r){i===e&&(n.next(r),t&&n.complete())};y.on(g,i,null),n.add((function(){y.off(g,null,i)}));var r=p.get(e);r&&i(e,r)}))},t.mockSocketCtor=function(e){r=e},t.getSocket=function(e){return p.get(e)},t.disconnectSocket=function(e){var t=p.get(e);t&&(t.disconnect(),p.delete(e))},t.createComKey=m,t.genUrl=function(e){var t,n=e.url,i=e.publicKey,r=e.code,o=(e.host,e.name),l=(0,a.default)(t="".concat(n,"/gws?auth=")).call(t,_(o,i));return r&&(l+="&code=".concat(r)),l},t.getAuth=_,t.decrypt=function(e,t){try{var n=v.get(e),i=u.default.AES.decrypt(t,u.default.enc.Utf8.parse(n),{mode:u.default.mode.ECB,padding:u.default.pad.Pkcs7}).toString(u.default.enc.Utf8);return JSON.parse(i)}catch(e){return(0,h.error)("cant decrypt data"),""}},t.encrypt=function(e,t){var n=v.get(e);return u.default.AES.encrypt(t,u.default.enc.Utf8.parse(n),{mode:u.default.mode.ECB,padding:u.default.pad.Pkcs7}).toString()},t.bindSocketEvent=function(e,t,n){var i=e.event;for(var r in n)n.hasOwnProperty(r)&&i.on(r,n[r],t)},t.offSocketEvent=function(e,t){e.event.offAllCaller(t)};var r,a=i(n(77433)),o=i(n(82069)),l=i(n(1979)),u=i(n(8634)),s=n(24312),c=n(98225),f=n(4615),d=n(60399),h=n(20096),v=new l.default,p=new l.default,y=new f.EventCom,g="create";function m(e){var t=(new Date).toString(),n=Date.parse(t).toString()+Date.parse(t).toString()+Date.parse(t).toString().substring(0,6);return v.set(e,n),n}function _(e,t){var n=m(e),i=new s.JSEncrypt;return i.setPublicKey(t),i.encrypt(n)}},62482:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.AudioRes=void 0,t.AudioRes={Click:"sound/click.mp3",HallBg:"sound/hall_bg.mp3",GameBg:"sound/game_bg.mp3",Fire:"sound/fire.mp3",Bomb:"sound/bomb.mp3",Freeze:"sound/freezing.mp3",ShoalComing:"sound/shoal_coming.mp3",CoinFew:"sound/coin_few.mp3",CoinShow:"sound/coin_show.mp3",CoinLot:"sound/coin_lot.mp3",LeaveGame:"sound/leave_game.mp3",PopShow:"sound/pop_show.mp3",FlySkill:"sound/pop_show.mp3",CoinCircle:"sound/pop_show.mp3"}},97956:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.isSkill=function(e){},t.ItemMap=t.SkillNameMap=t.SkillMap=t.Config=void 0;var r,a,o=i(n(65549)),l={Env:"PROD",PublicKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDMUws+7NKknmImMYUsSr4DOKYVrs1s7BQzGBgkkTptjGiektUmxm3BNZq34ugF6Vob9V0vU5r0S7vfyuOTC87uFeGe+rBJf7si4kE5wsJiEBlLNZjrz0T30xHGJlf+eizYVKPkpo3012rKvHN0obBlN7iBsdiGpLGP3sPAgO2tFQIDAQAB",SocketUrl:"",code:"",token:"",lang:"en",isLogin:!1,Host:"",CdnVersion:window.CDN_VERSION,cndUrl:"",BulletSpeed:25,PoolWidth:1920,PoolHeight:750,BulletZoneWidth:1334,ShootTimeSpace:200,BombRadius:150,ClearFishTime:2.5};t.Config=l,t.SkillMap=a,function(e){e.LockFish="2001",e.Freezing="2002",e.Bomb="2003",e.Auto="A2004",e.Super="A2004"}(a||(t.SkillMap=a={}));var u=(r={},(0,o.default)(r,a.Freezing,"freeze"),(0,o.default)(r,a.Bomb,"bomb"),(0,o.default)(r,a.LockFish,"aim"),(0,o.default)(r,a.Auto,"auto"),(0,o.default)(r,a.Super,"super"),r);t.SkillNameMap=u,t.ItemMap={3001:"BTC",3002:"ETH",3003:"XRP"}},31506:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.Coordinates=void 0,t.Coordinates={gun_global_pos:{0:{x:670,y:696},1:{x:1250,y:696},2:{x:1250,y:54},3:{x:670,y:54}},guns_inside_pos:{start_point:{x:74.5,y:20},origin_point:{x:74.5,y:74.5}},bullet_offset:{11:[0],12:[15,-15],13:[15,-15],21:[0],22:[10,-10],23:[10,-10],31:[0],32:[10,-10],33:[10,-10],41:[0],42:[20,-20],43:[20,-20],51:[0],52:[0],53:[0]},guns_inbox_pos:{x:104,y:78},shadowPos:{default:{x:0,y:80},1:{x:0,y:60,scaleX:.35,scaleY:.35},2:{x:0,y:70,scaleX:.49,scaleY:.49},3:{x:0,y:70,scaleX:.5,scaleY:.5},4:{x:0,y:100,scaleX:.8,scaleY:1.2},5:{x:0,y:80,scaleY:.8,scaleX:.84},6:{x:0,y:70,scaleX:.43,scaleY:.43},7:{x:0,y:80,scaleX:.5,scaleY:.5},8:{x:0,y:120,scaleX:.6,scaleY:1},9:{x:0,y:120,scaleX:.7,scaleY:1.1},10:{x:0,y:80,scaleX:.9,scaleY:1.4},11:{x:0,y:150},12:{x:0,y:150,scaleX:1.8},13:{x:0,y:150,scaleX:2.2,scaleY:1.5},14:{x:0,y:150,scaleX:2.5,scaleY:1.2},15:{x:0,y:200,scaleX:3,scaleY:2},16:{x:0,y:60,scaleX:2},17:{x:0,y:150,scaleX:1.2,scaleY:1.8},18:{x:0,y:100},19:{x:0,y:120,scaleX:1.4,scaleY:1.4},20:{x:0,y:120,scaleX:2}}}},67651:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.GunInfo=void 0,t.GunInfo={LevelUp:[3,10],HoleNum:[1,2,2]}},94643:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.InternationalTipOther=t.InternationalTip=t.International=t.InternationalRes=t.Lang=void 0;var r,a,o,l,u,s,c,f,d=i(n(65549)),h=n(91917);t.Lang=f,function(e){e.Zh="zh",e.Zh_HK="hk",e.Kor="kor",e.En="en",e.Jp="jp"}(f||(t.Lang=f={})),t.InternationalRes={};var v=(s={},(0,d.default)(s,f.En,(r={deposit:"Deposit",withdrawal:"Withdrawal",balance:"Balance",bullet:"Bullet",automaticFiring:"Automatic firing",buyBullet:"Purchase Bullet",casualMode:"Casual Mode",tournamentMode:"Tournament Mode",trialField:"Trial Field",realField:"Real Field",stayTuned:"Stay Tuned",quickStart:"Quick Start",NumBullet:"Bullet",guest:"Guest",volumeSetting:"Volume Setting",music:"Music",soundEffects:"Sound",tips:"Tips",cancel:"Cancel",confirm:"Confirm",luckyDraw:"Lucky Draw",redemption:"Redemption",buySuccess:"Purchase successfully",luckyDrawTip2:"Congrats! You’ve got ",Num:"Bullet",shop:"Shop",skin:"Skin",lock:"Lock",freeze:"Freeze",bomb:"Bomb",voucher:"Voucher",use:"Use",inUse:"In Use",item:"Item",youAreHere:"You are here",purchase:"Purchase",buyBulletCost:"Need to spend",leaveTip:"Confirm to leave the game?",reEnter:"You are in the game now, do you want to re-enter?",kickedTip:"You have been kicked, refresh to re-enter the room?",buyBulletTip:"Insufficient bullet, proceed to purchase?",buySkillTip:"You don’t have this skill, proceed to purchase?",logoutTip:"Login disconnected, refresh current page?",posBombTip:"Please select a location on the screen to place the bomb",aimFish:"Please select the fish you want to attack",help:"Help",times:"times",help1:"Fish Point: Different fishes have different value, the number of bullets obtained after capturing a fish equals to the multiple of the cannon currently used multiplied by the Fish Point. For instance, a fish with 50 fish point is captured by a 10x cannon, the number of bullets obtained is 50x10=500. Fishes with different Fish Point:",help2:"2. Skill instruction: Players can apply below skills in the game.",help2Super:"Super Skill: Passive skill, it will be automatically triggered after certain number of fish are captured by player. It increases bullet power and doubles the rate of fire.",help2Freeze:"Frozen Skill: Active skill, it can be obtained by killing certain types of fish, or can be purchased. It can freeze most of the fishes on the current screen.",help2Lock:"Lock Skill: Active skill, it can be obtained by killing certain types of fish, or can be purchased. It can automatically lock the fish with the highest Fish Point on the current screen, or players can also click to select a fish to lock.",help2Bomb:"Bomb: Active skill, can be purchased. it will randomly kill a group of fish on the screen.",help3:"3. Available multiple of cannon:",help31:"1,2,3,4,5,10,15,20",help4:"4. Other instructions",help41:"Redemption: Player can get some Fish Vouchers after capturing certain type of fish. The Fish Vouchers can be used for redeem rewards. ",help42:"Lucky draw: Player will qualify 1 lucky draw after capturing 10 fishes with 100 Fish Point at least, the rewards includes bullet and currency.",help43:"Purchase: Player can purchase bullets inside the hall, and purchase cannon skin or bullet effect by clicking the cannon in the game.",tourSkip:"Exit",tourStart:"Start",tour1:"Click the drop-down button to select the coin",tour2:"Game room will change accordingly <br/>based on coin selection",tour3:"You only can experience the game in Trial Field, <br/>you can earn coins in the Real Field",tour4:"System will automatically convert your coins into<br/> bullets after entering Real Field; All your balance<br/> bullet will be converted back to coins after you <br/> leave the room.",tour5:"Control your cannon, click and capture <br/>fishes to gain more bullets",tour6:"Use items to assist you to capture more <br/> and bigger fishes",noData:"No data",NetError:"Internet connection error, reconnecting",NetComeBack:"Welcome back!",OtherLogin:"Login error, please refresh and try again.",InputEmptyWarn:"Blank MUST be filled in",Delete:"Delete",buyItemTip:"Confirm cost $1 $2,purchase $3 $4.",buySkinTip:"Confirm cost $1 个 $2,purchase $3.",beyondBulletNum:"Ammunition limit exceeded",itemListTitle:"Item capacity",itemList1:"Items",itemList2:"Sum of purchase",itemList3:"Sum of prizes",search:"Inquire",gameNo:"Sessions",remainingNum:"Amount remaining",gameListTitle:"Game data",cost:"Use up",prize:"Earnings"},(0,d.default)(r,h.ServerErrCode.NoMoney,"Insufficient funds, please add funds or change to another currency."),(0,d.default)(r,"noMoneyConfirm","Add funds"),(0,d.default)(r,h.ServerErrCode.ReExchange,"Insufficient ammunition. Would you like to continue to exchange?"),(0,d.default)(r,h.ServerErrCode.TrialTimeGame,"The trial time has ended, please go to the official game to continue playing."),(0,d.default)(r,h.ServerErrCode.TrialNotBullet,"Out of ammo, please reload the game or go the official game to continue."),(0,d.default)(r,h.ServerErrCode.NetError,"Network error, please reload the game "),(0,d.default)(r,h.ServerErrCode.TrialClose,"Demo mode is off."),r)),(0,d.default)(s,f.Kor,(a={deposit:"충전",withdrawal:"출금",balance:"잔액",bullet:"총알",automaticFiring:"자동 발사",buyBullet:"총알 구매",casualMode:"레저 모드",tournamentMode:"경기 모드",trialField:"시연장",realField:"게임장",stayTuned:"준비 중",quickStart:"시작",NumBullet:"잔여 총알",guest:"관전",volumeSetting:"음량 설정",music:"음악",soundEffects:"음향",tips:"주의",cancel:"취소",confirm:"확인",luckyDraw:"추첨",redemption:"교환",buySuccess:"구매 완료",luckyDrawTip2:"축하드립니다",Num:"잔금",shop:"상점",skin:"장비",lock:"목표 지정",freeze:"얼음",bomb:"폭탄",voucher:"쿠폰",use:"사용",inUse:"사용중",item:"도구",youAreHere:"현 위치",purchase:"구매",buyBulletCost:"비용 수요",leaveTip:"나가시겠습니까?",reEnter:"게임 진행 중입니다. 다시 진입 하시겠습니까?",kickedTip:"방에서 탈퇴 당하셨습니다. 다시 진입 하시겠습니까?",buyBulletTip:"총알 수량이 부족합니다. 구입 하시겠습니까?",buySkillTip:"해당 기능이 없습니다. 구입 하시겠습니까?",logoutTip:"로그인이 끊겼습니다. 페이지 새로 고침 하시겠습니까?",posBombTip:"위치를 선택하여 폭탄을 배치하세요.",aimFish:"공격하실 물고기를 선택하세요.",help:"도움",times:"배",help1:"1. 물고기 점수 설명: 물고기에 따라 점수가 다릅니다. 한 마리를 잡고 받을 수 있는 총알의 수량는 현재 사용 중인 포좌의 배수에 이 물고기의 점수를 곱한 것과 같습니다. 예를 들어 50배의 물고기 한 마리를 잡았을 때 10배의 포좌를 사용하였으면 받을 수 있는 총알 수량은 50X10=500입니다.각 물고기의 점수는 아래와 같습니다.",help2:"2. 기능 사용 설명: 게임 진행중 플레이어는 다음과 같은 기능을 사용할 수 있습니다.",help2Super:"슈퍼기능: 자동 기능, 플레이어가 일정량의 물고기를 포획한 후 자동으로 발사 됩니다.",help2Freeze:"얼음 기능:수동 기능, 일정한 량의 물고기를 포획하면 받을 수 있 구매도 가능합니다. 해당 기능을 사용하면 게임중 대부분의 물고기들은 움직이지 않습니다.",help2Lock:"목표 지정 기능: 수동 기능, 일정한 량의 물고기를 포획하면 받 을 수 있고 구매도 가능합니다.  해당 기능을 사용하면 게임중의 가장  점수가 높은 물고기에 목표 지정이 됩니다. 또한 플레이어는 수동으로 한마리를 지정할 수 있습니다.",help2Bomb:"폭탄: 수동 기능, 구매하여야 합니다. 사용후 랜덤으로 한 무리의 물고기를 폭격할 수 있습니다.",help3:"3. 선택 가능한 포좌의 배수는 아래와 같습니다.",help31:"1,2,3,4,5,10,15,20",help4:"4. 기타 설명",help41:"환전: 플레이어가 지정된 물고기를 포획할 때, 물고기 쿠폰을 받게 되고, 쿠폰을 모으면 경품을 교환할 수 있게 됩니다.",help42:"추첨: 플레이어는 100점 이상의 물고기를 10마리 잡은 후, 추첨 기회가 한번 주어집니다. 추첨 보상은 총알이나 코인입니다.",help43:"구매: 플레이어는 첫 페이지에서 ‘구매’를 클릭하여 총알을 구입할 수도 있고, 게임 내에서 ‘포좌’를 클릭하여 포좌 종류 또한 특수 기능 총알을 구입할 수도 있습니다. 기능의 수가 0일 때 이 기능 아이콘을 클릭하여 기능을 구입할 수 있습니다.",tourSkip:"Exit",tourStart:"Start",tour1:"내리기 버튼을 클릭하여 코인 종류를 선택합니다.",tour2:"코인 종류에 따라 게임방이 다를 수 있습니다.",tour3:"시연장에서 유저는 체험만 가능하고 기엠장에서는 디지털 화폐를 획득할 수 있습니다",tour4:"게임이 본격적으로 시작되면 시스템이 자동으로 디지털 화폐를 총알로 바꿔드립니다. 게임방을 떠난 후, 남은 모든 총알은 다시 디지털 화폐로 교환됩니다.",tour5:"포좌를 컨트롤하고 물고기 포획을 클릭하면 더 <br/> 많은 총알을 받을 수 있습니다.",tour6:"도구를 사용하여 더 많고 더 큰 물고기를 <br/> 포획할 수 있습니다.",noData:"데이터 없음",NetError:"네트워크 오류, 다시 연결 중",NetComeBack:"돌아오신 걸 환영합니다!",OtherLogin:"다른 곳에서 로그인 시도, 새로고침해 주세요",InputEmptyWarn:"빈칸을 입력해주세요!",Delete:"삭제",buyItemTip:"$1개의 $2를 소비하여, $3개의 $4를 구매",buySkinTip:"$1개의 $2를 소비하여, $3 구매",beyondBulletNum:"현재 총알 수량 초과",itemListTitle:"아이템 보관량",itemList1:"아이템",itemList2:"총 구매 수량",itemList3:"총 게임 보너스",search:"조회",gameNo:"횟수",remainingNum:"남은 수량",gameListTitle:"게임 기록",cost:"소비",prize:"수익"},(0,d.default)(a,h.ServerErrCode.NoMoney,"현재 보유 중인 화폐 수량이 부족합니다. 입금 또는 다른 화폐를 환전해주세요."),(0,d.default)(a,"noMoneyConfirm","충전하기"),(0,d.default)(a,h.ServerErrCode.ReExchange,"총알 부족, 계속 교환 하시겠습니까?"),(0,d.default)(a,h.ServerErrCode.TrialTimeGame,"무료 플레이 종료. 정식 버전을 이용해주세요"),(0,d.default)(a,h.ServerErrCode.TrialNotBullet,"총알 부족, 다시 입장하거나 정식 버전을 이용해 주세요."),(0,d.default)(a,h.ServerErrCode.NetError,"네트워크 오류. 새로고침 후 다시 시도해 주세요."),(0,d.default)(a,h.ServerErrCode.TrialClose,"체험모드 종료"),a)),(0,d.default)(s,f.Jp,(o={deposit:"⼊⾦",withdrawal:"送⾦",balance:"殘⾼",bullet:"弾薬",automaticFiring:"⾃動攻撃",buyBullet:"弾薬購⼊",casualMode:"レジャーモード",tournamentMode:"競技モード",trialField:"體験 ゲームルーム",realField:"本番ゲームルーム",stayTuned:"未開放",quickStart:"即開始",NumBullet:"弾薬",guest:"ゲスト",volumeSetting:"⾳量設定",music:"⾳楽",soundEffects:"⾳聲効果",tips:"注意",cancel:"キャンセル",confirm:"確認",luckyDraw:"抽選",redemption:"交換",buySuccess:"購⼊完了",luckyDrawTip2:"恭喜你獲得",Num:"殘り",shop:"ショップ",skin:"スタイル",lock:"ロック",freeze:"冷凍",bomb:"爆弾",voucher:"賞券",use:"使⽤",inUse:"使⽤中",item:"スキル",youAreHere:"ここにいる",purchase:"購⼊",buyBulletCost:"消費必要",leaveTip:"ゲーム終了しますか。",reEnter:"　現在ゲーム中ですが、再び開始しますか？",kickedTip:"プレールームから出てました。もう⼀度⼊場します か？",buyBulletTip:"弾薬殘數が不⾜になり、ご購⼊しますか。",buySkillTip:"スキルまだない、ご購⼊しますか。",logoutTip:"ログイン接続できません。ページを再読み込みしますか。",posBombTip:"畫⾯中、爆弾を置く場所を選択してください。",aimFish:"攻撃したい⿂を選択してください。",help:"ヘルプ",times:"倍",help1:"⿂ポイント説明：それぞれの⿂ポイントの數値は異なります。１つの⿂を捕獲すること により、獲得弾薬は現在使⽤中の砲臺の倍數をかける⿂ポイントの數値となります。 例えば、50倍の⿂を捕獲する場合は、10倍で撃ちまして、獲得弾薬は50X10=500となり ます。それぞれのポイントは以下のようです。",help2:"スキル使⽤説明：プレーヤーはゲーム中で以下のスキルで使⽤可能です。",help2Super:"スーパースキル：受動スキル、プレーヤーが捕獲した⿂におけて、⼀定の數量に達 すると、弾薬の威⼒が増加し、攻撃スピードが加速となります。",help2Freeze:"冷凍スキル：主動スキル、特定な⿂を攻撃することによって獲得し、もしくは購⼊ もできます。使⽤後、畫⾯內の多數な⿂を凍結されます。",help2Lock:"ロックスキル：主動スキル、特定な⿂を攻撃することによって獲得し、もしくは購 ⼊もできます。使⽤後、畫⾯內の⾼の⿂ポイントに⾃動的に的中し、プレーヤー が⾃由選択もできます。",help2Bomb:"爆弾：主動スキル、購⼊で獲得できます。使⽤後、畫⾯內のランダムで１つ群の⿂ に攻撃します。",help3:"選択可能の倍數は以下のようです。",help31:"1,2,3,4,5,10,15,20",help4:"その他説明：",help41:"交換：プレーヤーは、特定な⿂を捕獲することにより、⿂券が獲得できます。その ⼀定の數量の⿂券を収集すると、景品と交換可能です",help42:"抽選：プレーヤーは、10匹100ポイント以上の⿂を捕獲すると、1回の抽選に參加可 能です。景品は弾薬と通貨を含みます。",help43:"購⼊：プレーヤーは、ホームで購⼊ボタンをクリックし、弾薬を購⼊できます。ま た、ゲーム中で砲臺ボタンをクリックし、砲臺スタイルと弾薬特効を購⼊できま す。スキルの數は0の時、スキルボタンを押して購⼊できます。",tourSkip:"Exit",tourStart:"Start",tour1:"ボタンで通貨タイプを選択",tour2:"通貨タイプが異なることにより、ゲーム <br/> ルームが切替されます。",tour3:"體験ルームプレーはゲームの體験のみ可能です。本番プレールームで仮想通貨が獲得 可能です。",tour4:"本番ゲームルームに⼊場の際、システムは⾃動的に仮想通貨を弾薬に交換されます。 また、お客様は退場の際、殘りの弾薬が⾃動的に仮想通貨に交換されます。ご安⼼くだ さい。",tour5:"砲臺をコントロールし、クリックかつ⿂<br/>の捕獲、もっと弾薬が獲得可能",tour6:"スキルの使⽤で、もっと⼤きくて多い⿂を<br/>捕獲可能です。",noData:"データなし",NetError:"異常なネットワーク、再接続",NetComeBack:"お帰りなさい！",OtherLogin:"サイト外でログオフし、更新して再試行してください",InputEmptyWarn:"入力した値は空にできません...！",Delete:"削除する",buyItemTip:"費用$1$2、購入$3$4を確認します。",buySkinTip:"确认花费$1个$2, 购买$3.",beyondBulletNum:"費用$1$2、購入$3を確認します。",itemListTitle:"アイテムの在庫",itemList1:"道具",itemList2:"合計購入金額",itemList3:"ゲームギフトの合計",search:"問い合わせ",gameNo:"セッション",remainingNum:"残高",gameListTitle:"ゲーム記録",cost:"消費する",prize:"収益"},(0,d.default)(o,h.ServerErrCode.NoMoney,"現在の通貨残高が不足しています。再チャージするか、他の通貨に切り替えてください。"),(0,d.default)(o,"noMoneyConfirm","チャージ"),(0,d.default)(o,h.ServerErrCode.ReExchange,"弾丸が不十分な場合は、引き換えてください！"),(0,d.default)(o,h.ServerErrCode.TrialTimeGame,"体験期間が過ぎました。会場でご利用ください。"),(0,d.default)(o,h.ServerErrCode.TrialNotBullet,"弾丸が足りません。再入力するか、公式会場でプレイしてください。"),(0,d.default)(o,h.ServerErrCode.NetError,"ネットワークが異常です。更新してもう一度お試しください。"),(0,d.default)(o,h.ServerErrCode.TrialClose,"デモモードオフ"),o)),(0,d.default)(s,f.Zh,(l={deposit:"充值",withdrawal:"提币",balance:"余额",bullet:"子弹",automaticFiring:"自动开炮",buyBullet:"购买子弹",casualMode:"休闲模式",tournamentMode:"竞技模式",trialField:"试玩场",realField:"正式场",stayTuned:"敬请期待",quickStart:"快速开始",NumBullet:"剩余子弹",guest:"游客",volumeSetting:"音量设置",music:"音乐",soundEffects:"音效",tips:"提示",cancel:"取消",confirm:"确定",luckyDraw:"抽奖",redemption:"兑换",buySuccess:"购买成功",luckyDrawTip2:"恭喜你获得",Num:"剩余",shop:"商店",skin:"皮肤",lock:"锁定",freeze:"冰冻",bomb:"炸弹",voucher:"奖券",use:"使用",inUse:"使用中",item:"道具",youAreHere:"您在此处",purchase:"购买",buyBulletCost:"需要花费",leaveTip:"确定要离开游戏吗?",reEnter:"你当前在游戏中是否重新进入?",kickedTip:"你被踢出房间, 刷新重新进入?",buyBulletTip:"子弹数目不够, 是否购买?",buySkillTip:"你还没有当前技能, 是否购买!",logoutTip:"登陆断开, 是否刷新页面!",posBombTip:"请选择屏幕中的位置放置炸弹",aimFish:"请选中你要攻击的鱼",help:"帮助",times:"倍",help1:"1.\t鱼分说明：不同的鱼有不同的分值，捕获一条鱼得的子弹数等于当前使用的炮台倍数乘以这条鱼的分数。比如捕获一条50倍的鱼，用的10倍的炮，获得的子弹数量就是50X10=500。 不同鱼的鱼分如下",help2:"2.\t技能使用说明：玩家在游戏过程中可以使用下列技能。",help2Super:"超级技能：被动技能，玩家捕获一定数量的鱼后自动触发，子弹威力加强、射速加倍。",help2Freeze:"冰冻技能：主动技能，可以通过打死某些鱼获得，也可购买，使用后冻住 当前屏幕内的大部分鱼。",help2Lock:"锁定技能：主动技能，可以通过打死某些鱼获得，也可购买，使用后会 自动锁定当前屏幕内鱼分最高的那条鱼，玩家也可以自己点击选择某一条鱼。",help2Bomb:"炸弹：主动技能，购买获得，使用后会随机炸死屏幕内的一群鱼。",help3:"3. 可选的炮倍数如下：",help31:"1,2,3,4,5,10,15,20",help4:"4. 其他说明",help41:"兑换：玩家捕获某些鱼时，会得到一些鱼券，收集一定数量的鱼券可以兑换奖品。",help42:"抽奖：玩家捕获10条鱼分100以上的鱼后，可以抽一次，奖品包括子弹和货币。",help43:"购买：玩家可以在大厅点击购买来购买子弹，也可以在游戏内点击炮台购买炮台皮肤或子弹特效。当技能的数量是0时，可以点击此技能图标来购买技能。",tourSkip:"退出引导",tourStart:"开始游戏",tour1:"点击下拉按钮选择币种",tour2:"选择币种不同，<br/>游戏房间也会随之切换",tour3:"在试玩场您只能体验游戏，<br/>在正式场才能赢得数字货币",tour4:"进入正式场后，系统会自动将您的数字货币兑换成子弹；请放心，在您离开房间后，所有剩余子弹将会再兑换成您的数字货币",tour5:"控制您的炮台，点击并捕捉鱼群，<br/>获得更多子弹",tour6:"可以使用道具，帮助您捕获<br/>更多更大的鱼",noData:"暂无数据",NetError:"网络异常, 正在重新连接",NetComeBack:"欢迎回来!",OtherLogin:"异地登录，请刷新重试",InputEmptyWarn:"输入的值不能为空...!",Delete:"删除",buyItemTip:"确认花费$1个$2, 购买$3个$4.",buySkinTip:"确认花费$1个$2, 购买$3.",beyondBulletNum:"超出当前的子弹数目",itemListTitle:"道具存量",itemList1:"道具类型",itemList2:"购买数量总和",itemList3:"游戏赠送总和",search:"查询",gameNo:"场次",remainingNum:"剩余数量",gameListTitle:"游戏记录",cost:"消耗",prize:"收益"},(0,d.default)(l,h.ServerErrCode.NoMoney,"当前货币余额不足，请去充值或切换其他货币."),(0,d.default)(l,"noMoneyConfirm","去充值"),(0,d.default)(l,h.ServerErrCode.ReExchange,"子弹不足是否继续兑换!"),(0,d.default)(l,h.ServerErrCode.TrialTimeGame,"已超出试玩时长，请去正式场进行游戏"),(0,d.default)(l,h.ServerErrCode.TrialNotBullet,"子弹不足，请重新进入或去正式场进行游戏"),(0,d.default)(l,h.ServerErrCode.NetError,"网络异常, 请刷新重试"),(0,d.default)(l,h.ServerErrCode.TrialClose,"试玩模式关闭"),l)),(0,d.default)(s,f.Zh_HK,(u={deposit:"充值",withdrawal:"提幣",balance:"餘額",bullet:"子彈",automaticFiring:"自動開炮",buyBullet:"購買子彈",casualMode:"休閒模式",tournamentMode:"競技模式",trialField:"試玩場",realField:"正式場",stayTuned:"敬請期待",quickStart:"快速開始",NumBullet:"剩餘子彈",guest:"遊客",volumeSetting:"音量設定",music:"音樂",soundEffects:"音效",tips:"提示",cancel:"取消",confirm:"確定",luckyDraw:"抽獎",redemption:"兌換",buySuccess:"購買成功",luckyDrawTip2:"恭喜你獲得",Num:"弾薬",shop:"商店",skin:"皮膚",lock:"鎖定",freeze:"冰凍",bomb:"炸彈",voucher:"獎券",use:"使用",inUse:"使用中",item:"道具",youAreHere:"您在此處",purchase:"購買",buyBulletCost:"需要花費",leaveTip:"確定要離開遊戲嗎?",reEnter:"你當前在遊戲中是否重新進入?",kickedTip:"你被踢出房間, 刷新重新進入?",buyBulletTip:"子彈數目不夠, 是否購買?",buySkillTip:"你還冇有當前技能, 是否購買!",logoutTip:"登陸斷開, 收否刷新頁麵!",posBombTip:"請選擇屏幕中的位置放置炸彈",aimFish:"請選中你要攻擊的魚",help:"幫助",times:"倍",help1:"1.\t魚分說明：不同的魚有不同的分值，捕獲一條魚得的子彈數等於當前使用的炮臺倍數乘以這條魚的分數。比如捕獲一條50倍的魚，用的10倍的炮，獲得的子彈數量就是50X10=500。 不同魚的魚分如下",help2:"2.\t技能使用說明：玩家在遊戲過程中可以使用下列技能。",help2Super:"超級技能：被動技能，玩家捕獲一定數量的魚後自動觸發，子彈威力加強、射速加倍。",help2Freeze:"冰凍技能：主動技能，可以通過打死某些魚獲得，也可購買，使用後凍住 當前屏幕內的大部分魚。",help2Lock:"鎖定技能：主動技能，可以通過打死某些魚獲得，也可購買，使用後會 自動鎖定當前屏幕內魚分最高的那條魚，玩家也可以自己點擊選擇某一條魚。",help2Bomb:"炸彈：主動技能，購買獲得，使用後會隨機炸死屏幕內的一群魚。",help3:"3. 可選的炮倍數如下：",help31:"1,2,3,4,5,10,15,20",help4:"4.\t其他說明",help41:"兌換：玩家捕獲某些魚時，會得到一些魚券，收集一定數量的魚券可以兌換獎品。",help42:"抽獎：玩家捕獲10條魚分100以上的魚後，可以抽一次，獎品包括子彈和貨幣。",help43:"購買：玩家可以在大廳點擊購買來購買子彈，也可以在遊戲內點擊炮臺購買炮臺皮膚或子彈特效。當技能的數量是0時，可以點擊此技能圖標來購買技能。",tourSkip:"退出引導",tourStart:"開始遊戲",tour1:"點擊下拉按鈕選擇幣種",tour2:"選擇幣種不同，<br/>遊戲房間也會隨之切換",tour3:"在試玩場您隻能體驗遊戲，<br/>在正式場才能贏得數字貨幣",tour4:"進入正式場後，係統會自動將您的數字貨幣兌換成子彈；請放心，在您離開房間後，所有剩餘子彈將會再兌換成您的數字貨幣",tour5:"控製您的炮臺，點擊並捕捉魚群，<br/>獲得更多子彈",tour6:"可以使用道具，幫助您捕獲<br/>更多更大的魚",noData:"暫無數據",NetError:"網絡異常, 正在重新連接",NetComeBack:"歡迎回來!",OtherLogin:"異地登錄，請刷新重試",InputEmptyWarn:"輸入的值不能為空...!",Delete:"刪除",buyItemTip:"確認花費$1個$2, 購買$3個$4.",buySkinTip:"確認花費$1個$2, 購買$3.",beyondBulletNum:"超出當前的子彈數目",itemListTitle:"道具存量",itemList1:"道具類型",itemList2:"購買數量總和",itemList3:"遊戲贈送總和",search:"查詢",gameNo:"場次",remainingNum:"剩餘數量",gameListTitle:"遊戲記錄",cost:"消耗",prize:"收益"},(0,d.default)(u,h.ServerErrCode.NoMoney,"當前貨幣餘額不足，請去充值或切換其他貨幣."),(0,d.default)(u,"noMoneyConfirm","去充值"),(0,d.default)(u,h.ServerErrCode.ReExchange,"子彈不足是否繼續兌換!"),(0,d.default)(u,h.ServerErrCode.TrialTimeGame,"已超出試玩時長，請去正式場進行遊戲"),(0,d.default)(u,h.ServerErrCode.TrialNotBullet,"子彈不足，請重新進入或去正式場進行遊戲"),(0,d.default)(u,h.ServerErrCode.NetError,"網絡異常, 請刷新重試"),(0,d.default)(u,h.ServerErrCode.TrialClose,"試玩模式關閉"),u)),s);t.International=v;var p=v;t.InternationalTip=p;var y=(c={},(0,d.default)(c,f.Kor,{}),(0,d.default)(c,f.Jp,{}),(0,d.default)(c,f.Zh,{}),(0,d.default)(c,f.Zh_HK,{}),(0,d.default)(c,f.En,{}),c);t.InternationalTipOther=y},26501:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.PATH=void 0,t.PATH={1:[[1465,757,1583,400,1304,143,1008,-6]],2:[[790,753,1404,321,444,475,1046,-6]],3:[[1384,755,1412,380,578,547,774,-7]],4:[[473,754,157,324,884,-7]],5:[[955,758,1158,474,1561,476,915,-8]],6:[[1466,753,1397,532,372,486,755,-6]],7:[[381,759,587,465,1083,260],[1083,260,1242,172,1014,-4]],8:[[1087,756,860,636,747,377],[747,377,682,209,684,100,810,-6]],9:[[100,753,106,214,651,508],[651,508,1094,697,1033,111,988,-8]],10:[[1831,754,1765,593,1280,509],[1280,509,1002,478,970,99,943,-8]],11:[[1686,-5,1753,284,1231,415],[1231,415,937,484,494,521,502,759]],12:[[1550,-8,1344,285,848,491],[848,491,689,579,917,754]],13:[[584,-4,389,477,690,546],[690,546,991,616,1011,753]],14:[[1384,-2,1464,178,1087,511],[1087,511,988,600,1018,751]],15:[[547,-4,519,371,1353,204,1157,757]],16:[[976,-8,773,277,370,274,1015,759]],17:[[465,-2,534,219,1559,265,1176,756]],18:[[1531,755,1726,274,1425,204],[1425,204,1124,135,1104,-3]],19:[[1810,-2,1804,536,1260,242],[1260,242,817,54,878,639,923,759]],20:[[100,-3,166,158,651,242],[651,242,929,273,961,652,988,758]],21:[[1934,697,1883,265,1390,332],[1390,332,593,415,97,-4]],22:[[1932,486,1084,905,793,600],[793,600,466,235,1079,173,1028,-7]],23:[[1932,375,1586,585,1157,488],[1157,488,799,408,617,172,575,-8]],24:[[1932,537,1435,746,1005,650],[1005,650,648,570,465,172,424,-8]],25:[[1932,133,1802,132,1528,550],[1528,550,1320,858,830,240,594,-10]],26:[[1932,610,1802,611,1528,193],[1528,193,1320,-115,830,503,594,753]],27:[[1933,203,1615,677,1229,395],[1229,395,903,181,485,252,274,751]],28:[[1934,697,1710,448,1390,332],[1390,332,969,206,360,754]],29:[[-12,261,837,-158,1127,148],[1127,148,1455,512,841,574,892,754]],30:[[-12,372,334,163,764,259],[764,259,1121,339,1304,575,1345,755]],31:[[-12,210,486,1,915,97],[915,97,1273,177,1455,575,1497,755]],32:[[-12,614,118,615,393,197],[393,197,600,-110,1090,507,1326,757]],33:[[-12,137,118,136,393,554],[393,554,600,862,1090,244,1326,-6]],34:[[-13,544,306,70,691,352],[691,352,1017,566,1436,495,1647,-3]],35:[[-13,50,211,299,531,415],[531,415,952,541,1561,-7]],36:[[-11,359,162,129,601,122],[601,122,1144,120,1932,429]],37:[[-9,306,289,715,650,706],[650,706,1010,696,1930,36]],38:[[-13,285,725,697,1178,713],[1178,713,1630,729,1929,522]],39:[[-11,418,348,181,590,176],[590,176,832,172,944,333,1267,389],[1267,389,1496,404,1628,400,1933,242]],40:[[-10,291,1051,295,1410,254],[1410,254,1770,213,1930,73]],41:[[230,753,147,389,282,197],[282,197,314,151,366,118,468,113],[468,113,1024,82,1680,140,1931,235]],42:[[-12,31,967,636,1440,495],[1440,495,1855,338,1932,160]],43:[[-12,370,322,598,827,598],[827,598,1331,598,1263,388,1931,440]],44:[[-9,494,998,805,1350,670],[1350,670,1755,471,1929,343]],45:[[-12,165,749,554,1225,428],[1225,428,1627,325,1932,27]],46:[[-10,658,719,311,1028,287],[1028,287,1479,231,1931,383]],47:[[-11,608,975,727,1328,613],[1328,613,1681,498,1930,-3]],48:[[-13,204,867,12,1257,9],[1257,9,1646,6,1766,132,1933,135]],49:[[-11,38,1182,19,1431,104],[1431,104,1680,189,1932,458]],50:[[-12,494,1140,869,1701,524],[1701,524,1871,415,1930,318]],51:[[-12,165,476,55,927,98],[927,98,1377,140,1566,417,1695,416],[1695,416,1823,415,1908,320,1933,304]],52:[[-8,705,1291,19,1621,52],[1621,52,1676,52,1720,75,1746,94],[1746,94,1770,112,1835,151,1934,284]],53:[[169,-18,166,315,497,360],[497,360,828,405,1930,291]],54:[[-9,517,525,164,1046,167],[1046,167,1567,169,1932,256]],55:[[-11,-6,634,776,1107,704],[1107,704,1404,660,1929,326]],56:[[-9,333,80,586,340,602],[340,602,601,618,1920,493,1931,493]],57:[[-12,263,98,104,203,61],[203,61,391,-23,1872,694,1929,749]],58:[[-11,463,200,610,566,525],[566,525,854,456,1285,112,1929,126]],59:[[-8,287,641,28,838,125],[838,125,1035,223,944,693,1932,734]],60:[[-13,752,333,510,632,327],[632,327,1143,47,1201,508,1624,504],[1624,504,1821,486,1918,352,1929,349]],61:[[-12,340,160,194,392,170],[392,170,625,145,854,530,999,606],[999,606,1407,849,1768,318,1932,164]],62:[[-10,621,692,896,734,544],[734,544,781,-24,1054,281,1420,238],[1420,238,1792,179,1933,18]],63:[[-12,693,228,404,412,384],[412,384,597,364,729,551,839,583],[839,583,1140,702,1200,303,1933,305]],64:[[103,756,22,202,515,244],[515,244,715,242,931,527,1188,519],[1188,519,1719,500,1933,678]],65:[[-8,128,379,27,570,516],[570,516,733,957,1075,143,1365,131],[1365,131,1590,109,1763,482,1933,511]],66:[[-13,400,550,37,546,339],[546,339,563,1015,1689,686,1305,323],[1305,323,984,52,1744,-8,1934,18]],67:[[-12,5,449,148,516,344],[516,344,642,717,1154,146,1931,250]],68:[[35,-7,66,570,528,665],[528,665,887,734,868,245,1033,147],[1033,147,1315,-37,1783,218,1931,110]],69:[[-11,629,647,348,908,385],[908,385,1170,422,1191,691,1416,657],[1416,657,1641,622,1906,370,1933,345]],70:[[50,-7,255,726,792,138,1942,588]],71:[[-10,97,220,584,676,563],[676,563,934,546,1080,427,1270,380],[1270,380,1672,280,1727,416,1931,324]],72:[[1934,409,1762,555,1530,579],[1530,579,1297,604,1068,219,923,143],[923,143,515,-100,154,431,-10,585]],73:[[1932,128,1230,-147,1188,205],[1188,205,1141,773,868,468,502,511],[502,511,130,570,-11,731]],74:[[1934,56,1694,345,1510,365],[1510,365,1325,385,1193,198,1083,166],[1083,166,782,47,722,446,-11,444]],75:[[1819,-7,1900,546,1407,505],[1407,505,1207,507,991,222,734,230],[734,230,203,249,-11,71]],76:[[1930,621,1543,722,1352,233],[1352,233,1189,-208,847,606,557,618],[557,618,332,640,159,267,-11,238]],77:[[1935,349,1372,712,1376,410],[1376,410,1359,-266,233,63,617,426],[617,426,938,697,178,757,-12,731]],78:[[1933,744,1473,601,1406,405],[1406,405,1280,32,768,603,-9,499]],79:[[1887,755,1856,179,1394,84],[1394,84,1035,15,1054,504,889,602],[889,602,607,785,139,531,-9,639]],80:[[1872,756,1667,23,1130,611,-20,161]],81:[[-9,5,394,792,2128,442,913,61],[913,61,267,-96,330,754,1085,683],[1085,683,1402,652,1447,273,1929,166]],82:[[-13,702,962,925,1964,-151,391,81],[391,81,52,123,131,754,885,683],[885,683,1203,652,1936,595,1527,-6]],83:[[1933,701,958,924,21,210,1425,61],[1425,61,2036,-5,1594,753,840,682],[840,682,522,651,309,238,642,-6]],84:[[1932,37,-164,61,-551,535,1273,686],[1273,686,2065,753,1492,-16,513,57],[513,57,101,88,260,599,374,754]],85:[[1933,378,527,963,-428,215,1228,61],[1228,61,2076,-5,1462,753,414,682],[414,682,-27,651,-65,238,398,-6]],86:[[-9,47,966,-176,3121,590,516,668],[516,668,64,679,135,96,890,167],[890,167,1900,328,1329,510,996,755]],87:[[-13,702,962,925,3128,25,340,233],[340,233,-518,356,1093,909,1052,521],[1052,521,848,-205,1556,230,1588,-6]],88:[[-9,672,1124,776,1903,180,499,31],[499,31,-111,-35,542,985,1085,653],[1085,653,1379,438,309,192,1929,135]],89:[[-13,398,1442,689,1990,-4,340,130],[340,130,3,165,518,973,724,599],[724,599,1158,-351,1277,722,1931,670]],90:[[-9,369,966,591,2128,442,913,61],[913,61,267,-96,88,754,842,683],[842,683,1227,621,803,37,1929,166]],91:[[1929,744,1527,-43,-207,307,1007,688],[1007,688,1654,845,1590,-5,836,66],[836,66,519,97,473,476,-8,583]],92:[[1933,47,959,-176,-44,900,1529,667],[1529,667,1868,626,1789,-5,1035,66],[1035,66,718,97,-15,154,393,755]],93:[[-13,48,962,-175,1900,539,495,688],[495,688,-115,754,327,-4,1081,67],[1081,67,1398,98,1611,511,1278,755]],94:[[-12,712,2084,687,2471,214,648,63],[648,63,-145,-4,429,764,1408,692],[1408,692,1820,660,1661,150,1546,-5]],95:[[-13,371,1394,-214,2348,533,693,688],[693,688,-155,754,458,-4,1507,67],[1507,67,1947,98,1985,510,1523,755]],96:[[1929,702,955,924,-1200,159,1404,81],[1404,81,1857,70,1785,653,1031,581],[1031,581,21,421,592,238,925,-6]],97:[[1933,47,959,-176,-1207,724,1580,516],[1580,516,2439,393,828,-160,868,228],[868,228,1072,954,365,519,333,755]],98:[[1929,77,797,-27,17,569,1421,718],[1421,718,2032,784,1378,-236,836,96],[836,96,542,311,1611,557,-8,613]],99:[[1933,351,478,60,-70,752,1580,619],[1580,619,1917,584,1402,-224,1197,150],[1197,150,763,1099,644,27,-11,79]],100:[[1929,380,955,158,-207,307,1007,688],[1007,688,1654,845,1833,-5,1078,66],[1078,66,694,128,1117,712,-8,583]]}},47228:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.font_list=t.res=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(68393)),f=i(n(77433)),d=i(n(35526)),h=n(46483),v=n(76542),p=n(62482),y=n(65158),g=n(20118);function m(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return _(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var k={font:[],audio:[],common:[],game:[{url:"res/image/game.png",type:y.Loader.IMAGE}],gameTutorial:[{url:"res/image/game.png",type:y.Loader.IMAGE}]};t.res=k;var b=["1","pos_tip","coin","award_light"];for(var w in h.SPRITE)if(h.SPRITE.hasOwnProperty(w)){var S=h.SPRITE[w];if("gun"!==w){for(var x in S)if(S.hasOwnProperty(x)){var C=S[x];if("DragonBone"===C.type){var I,M,E=C.path,A=[{url:"".concat(E,".sk"),type:y.Loader.BUFFER},{url:"".concat(E,".png"),type:y.Loader.IMAGE}];-1!==(0,c.default)(b).call(b,x)&&(M=k.gameTutorial).push.apply(M,A),(I=k.game).push.apply(I,A)}}}else for(var L in S)if(S.hasOwnProperty(L))for(var B=1;B<=3;B++){var T,P=m((0,v.getGunSkinMap)("".concat(L),"".concat(B)));try{for(P.s();!(T=P.n()).done;){var D,F,N,U=(0,d.default)(T.value,2),z=U[0],R=U[1],O=(0,f.default)(D="".concat(z)).call(D,R),G=[{url:"ani/gun/".concat(O,".sk"),type:y.Loader.BUFFER},{url:"ani/gun/".concat(O,".png"),type:y.Loader.IMAGE}];(F=k.game).push.apply(F,G),-1!==(0,c.default)(b).call(b,L)&&(N=k.gameTutorial).push.apply(N,G)}}catch(e){P.e(e)}finally{P.f()}}}var V=["font/score_num","font/numYellow40","font/lottery","font/numWhite40","font/alphabet"];t.font_list=V;for(var H=0,j=V;H<j.length;H++){var $=j[H];k.font.push({url:"".concat($,".fnt"),type:y.Loader.XML},{url:"".concat($,".png"),type:y.Loader.IMAGE})}for(var Y in p.AudioRes)if(p.AudioRes.hasOwnProperty(Y)){var X=p.AudioRes[Y];k.audio.push({url:X,type:y.Loader.SOUND})}for(var K in g.AlertRes)if(g.AlertRes.hasOwnProperty(K)){var W=g.AlertRes[K];k.common.push(W)}},91917:(e,t,n)=>{"use strict";var i;n(63656)(t,"__esModule",{value:!0}),t.ServerEvent=t.ServerErrCode=t.ServerName=void 0,t.ServerName={Game:"game",Hall:"hall"},t.ServerErrCode=i,function(e){e[e.TokenExpire=1002]="TokenExpire",e[e.OtherLogin=1003]="OtherLogin",e[e.AlreadyInRoom=109]="AlreadyInRoom",e[e.NoMoney=101]="NoMoney",e[e.ReExchange=112]="ReExchange",e[e.NeedLogin=114]="NeedLogin",e[e.TrialTimeGame=117]="TrialTimeGame",e[e.TrialNotBullet=116]="TrialNotBullet",e[e.TrialTimeHall=507]="TrialTimeHall",e[e.TrialClose=509]="TrialClose",e[e.EnterGameError=505]="EnterGameError",e[e.NetError=511]="NetError"}(i||(t.ServerErrCode=i={})),t.ServerEvent={RoomIn:"roomIn",RoomOut:"roomOut",CheckReplay:"checkReplay",TableIn:"tableIn",TableOut:"tableOut",EnterGame:"enterGame",Shoot:"shoot",Hit:"hit",RobotHit:"robotHit",ChangeTurret:"changeTurret",AddFish:"addFish",FishShoalWarn:"fishShoalWarn",FishShoal:"fishShoal",UseLock:"useLock",LockFish:"lockFish",UseBomb:"useBomb",FishBomb:"fishBomb",PowerUp:"powerUp",autoShoot:"autoShoot",SetRobotReport:"setRobotReport",UseFreeze:"useFreeze",FreezeOver:"freezeOver",ExchangeBullet:"exchangeBullet",GetItemList:"getItemList",GetBulletList:"getBulletList",GetRecentBullet:"getRecentBullet",ErrCode:"conn::error",UserAccount:"userAccount",GetDomain:"getDomain",Lottery:"lottery",LotteryList:"lotteryList",ExchangeList:"exchangeList",TicketExchange:"ticketExchange",NeedEmitUser:"needEmitUser",ShopList:"shopList",UseSkin:"useSkin",Buy:"buy",GetGuestToken:"getRequestId",GetUserInfo:"getUserInfo"}},52182:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.SHAPE=void 0,t.SHAPE={bullet:{shape_list:[{type:"Circle",radius:20}]},net:{shape_list:[{type:"Circle",radius:67}]},fish:{1:{shape_list:[{type:"Circle",radius:25}]},2:{shape_list:[{type:"Box",width:30,height:60,position:{x:0,y:-15}}]},3:{shape_list:[{type:"Circle",radius:30}]},4:{shape_list:[{type:"Circle",radius:45}]},5:{shape_list:[{type:"Box",width:50,height:100,position:{x:0,y:-50}}]},6:{shape_list:[{type:"Circle",radius:25}]},7:{shape_list:[{type:"Circle",radius:30,position:{x:-10,y:0}}]},8:{shape_list:[{type:"Box",width:40,height:80,position:{x:0,y:0}},{type:"Box",width:100,height:40,position:{x:0,y:0}}]},9:{shape_list:[{type:"Circle",radius:59}]},10:{shape_list:[{type:"Box",width:40,height:100},{type:"Circle",radius:20,position:{x:-50,y:-40}},{type:"Circle",radius:20,position:{x:55,y:-45}}]},11:{shape_list:[{type:"Box",width:60,height:50,position:{x:0,y:30}},{type:"Circle",radius:40,position:{x:0,y:-35}}]},12:{shape_list:[{type:"Box",width:70,height:150}]},13:{shape_list:[{type:"Box",width:70,height:220,position:{x:0,y:25}},{type:"Box",width:90,height:30,position:{x:0,y:160}}]},14:{shape_list:[{type:"Box",width:50,height:230,position:{x:0,y:30}},{type:"Box",width:160,height:30,position:{x:0,y:-100}}]},15:{shape_list:[{type:"Box",width:110,height:300,position:{x:0,y:-10}},{type:"Box",width:30,height:80,position:{x:0,y:180}},{type:"Box",width:100,height:30,position:{x:0,y:230}}]},16:{shape_list:[{type:"Circle",radius:80,position:{x:0,y:10}}]},17:{shape_list:[{type:"Circle",radius:70}]},18:{shape_list:[{type:"Box",width:100,height:200,position:{x:0,y:-20}}]},19:{shape_list:[{type:"Box",width:90,height:210}]},20:{shape_list:[{type:"Box",width:220,height:80}]}}}},46483:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.SPRITE=void 0,t.SPRITE={gun:{1:["base","light","gun"],2:["light","gun"],3:["light","gun"],4:["light","gun"],5:["body","gun"]},bullet:{1:{type:"DragonBone",path:"ani/gun/bullet1"},2:{type:"DragonBone",path:"ani/gun/bullet2"},3:{type:"DragonBone",path:"ani/gun/bullet3"},4:{type:"DragonBone",path:"ani/gun/bullet4"},5:{type:"DragonBone",path:"ani/gun/bullet5"}},net:{1:{type:"DragonBone",path:"ani/gun/net1"},2:{type:"DragonBone",path:"ani/gun/net2"},3:{type:"DragonBone",path:"ani/gun/net3"},4:{type:"DragonBone",path:"ani/gun/net4"},5:{type:"DragonBone",path:"ani/gun/net5"}},fish_shadow:{1:{type:"Img",path:"images/game/fish_shadow1"}},fish:{1:{type:"DragonBone",offset:[50,41,33,43],path:"ani/fish/fish1",ani_type:"horizon_turn",scale:.7},2:{type:"DragonBone",offset:[63,50,62,50],path:"ani/fish/fish2",scale:.7},3:{type:"DragonBone",offset:[47,67,38,58],path:"ani/fish/fish3",ani_type:"horizon_turn",scale:.7},4:{type:"DragonBone",offset:[82,90,86,91],path:"ani/fish/fish4",scale:.8},5:{type:"DragonBone",offset:[137,43,168,43],path:"ani/fish/fish5",scale:.7},6:{type:"DragonBone",offset:[49,47,36,44],path:"ani/fish/fish6",ani_type:"horizon_turn",scale:.7},7:{type:"DragonBone",offset:[47,56,38,55],path:"ani/fish/fish7",ani_type:"horizon_turn",scale:.7},8:{type:"DragonBone",offset:[44,79,120,80],path:"ani/fish/fish8",scale:.8},9:{type:"DragonBone",offset:[85,93,88,86],path:"ani/fish/fish9",scale:.8},10:{type:"DragonBone",offset:[84,91,87,88],path:"ani/fish/fish10",scale:.8},11:{type:"DragonBone",offset:[86,72,150,68],path:"ani/fish/fish11",ani_type:"horizon_turn",scale:.8},12:{type:"DragonBone",offset:[176,74,175,75],path:"ani/fish/fish12",scale:.8},13:{type:"DragonBone",offset:[162,103,201,102],path:"ani/fish/fish13",scale:.9},14:{type:"DragonBone",offset:[148,99,311,99],path:"ani/fish/fish14",scale:.9},15:{type:"DragonBone",offset:[229,157,290,156],path:"ani/fish/fish15",scale:.9},16:{type:"DragonBone",offset:[157,130,68,131],path:"ani/fish/fish16",ani_type:"horizon_turn",turn_ani:!0,coin_flag:!0,coin_color:"#ffd52c",scale:.9},17:{type:"DragonBone",offset:[122,92,150,92],path:"ani/fish/fish17",coin_flag:!0,coin_color:"#af5200",scale:.9},18:{type:"DragonBone",offset:[141,183,188,183],path:"ani/fish/fish18",coin_flag:!0,coin_color:"#412770",scale:.9},19:{type:"DragonBone",offset:[147,140,133,156],path:"ani/fish/fish19",ani_type:"horizon_turn",turn_ani:!0,coin_flag:!0,coin_color:"#ffde00",scale:.9},20:{type:"DragonBone",offset:[110,183,54,138],path:"ani/fish/fish20",ani_type:"horizon_turn",turn_ani:!0,coin_flag:!0,coin_color:"#7a3f04",scale:.9,coin_pos:{x:50,y:-30}},G1:{group:[{type:"2",pos:{x:20.5,y:49.5}},{type:"2",pos:{x:20,y:-51.5}}],offset:[101.5,83.5,98.5,0]},G2:{group:[{type:"1",pos:{x:3.5,y:49}},{type:"1",pos:{x:3.5,y:-71}},{type:"1",pos:{x:-76.5,y:-11}}],offset:[108.5,47.5,93.5,0]},G3:{group:[{type:"6",pos:{x:365,y:-15}},{type:"6",pos:{x:205,y:-15}},{type:"6",pos:{x:285,y:55}},{type:"6",pos:{x:285,y:-75}}],offset:[118.5,410.5,98.5,0]},G4:{group:[{type:"3",pos:{x:88,y:98.5}},{type:"3",pos:{x:77,y:-119.5}},{type:"3",pos:{x:-85,y:69.5}},{type:"3",pos:{x:-85,y:-77.5}},{type:"3",pos:{x:15,y:-5.5}}],offset:[164.5,154.5,143.5,0]}},fish_icon:{1:{type:"Img",path:"images/game/normal/icon_fish1"},2:{type:"Img",path:"images/game/normal/icon_fish2"}},other:{freezing:{type:"DragonBone",path:"ani/other/freezing"},exploding:{type:"DragonBone",path:"ani/other/exploding"},shoal_wave:{type:"DragonBone",path:"ani/other/shoal_wave"},pos_tip:{type:"DragonBone",path:"ani/other/pos_tip"},aim_big:{type:"DragonBone",path:"ani/other/aim_big"},aim:{type:"DragonBone",path:"ani/other/aim"},energy_light:{type:"DragonBone",path:"ani/other/energy_light"},award_circle:{type:"DragonBone",path:"ani/other/award_circle"},award_light:{type:"DragonBone",path:"ani/other/award_light"},coin:{type:"DragonBone",path:"ani/other/coin"},coin_light:{type:"DragonBone",path:"ani/other/coin_light"},skill_border_light:{type:"DragonBone",path:"ani/other/skill_border_light"}}}},95144:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.init=o,t.covertLang=l;var i=n(97956),r=n(94643),a=n(71882);function o(){var e=platform.getInfo();i.Config.SocketUrl=e.socket_url,i.Config.token=e.token,i.Config.isLogin=e.isLogin,i.Config.cndUrl=e.cdn,i.Config.lang=l(e.lang)}function l(e){var t=e,n=r.Lang.En;return"en"===t?n="en":"zh-Hant"===t?n="hk":"zh-Hans"===t?n="zh":"ja"===t?n="jp":"ko"===t&&(n="kor"),n}n(84746),o(),new a.AppCtrl},47057:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.AppModel=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(47172)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=n(19773),d=n(55176),h=n(74815),v=n(63711),p=n(4615),y=n(64386);var g=function(e){(0,u.default)(v,e);var t,n,i=(t=v,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,s.default)(this,e)});function v(){var e;return(0,a.default)(this,v),e=i.call(this),d.modelState.app=(0,l.default)(e),e.setting=new h.SettingModel,e.user_info=new y.UserInfoModel,e.addCom(new p.EventCom),e}return(0,o.default)(v,[{key:"init",value:function(){this.user_info.init()}},{key:"initUserInfo",value:function(e){this.user_info.initUserInfo(e),this.setting.initUserInfo(e)}},{key:"enterGame",value:function(){var e=this.game;return e&&!e.destroyed||(e=new f.GameModel),this.game=e,e}}]),v}(v.ComponentManager);t.AppModel=g},94316:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.BodyCom=void 0;var a=r(n(69129)),o=r(n(44790)),l=r(n(53632)),u=r(n(35847)),s=r(n(55846)),c=r(n(85323)),f=r(n(25233)),d=r(n(91678)),h=i(n(75110)),v=n(12517);function p(e){if(void 0===u.default||null==(0,l.default)(e)){if((0,o.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return y(e,t);var i=(0,c.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,s.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,f=!0,d=!1;return{s:function(){i=(0,a.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,r=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,f.default)(this,e),this.angle=0,this.pos={x:0,y:0},this.shapes=t,this.horizon_turn=n}return(0,d.default)(e,[{key:"update",value:function(e,t){t&&this.setAngle(t),this.setPos(e)}},{key:"setPos",value:function(e){var t=e.x,n=e.y,i=this.pos,r=i.x,a=i.y;if(t!==r||n!==a){var o,l=p(this.shapes);try{for(l.s();!(o=l.n()).done;){var u=o.value,s=u.shape,c=u.pos,f=this.angle;if(this.horizon_turn){var d=c.x,v=c.y;s.pos=new h.Vector(t+d,n+v)}else{var y=c.clone().rotate(f),g=y.x,m=y.y;s.pos=new h.Vector(t+g,n+m)}}}catch(e){l.e(e)}finally{l.f()}this.pos={x:t,y:n}}}},{key:"setAngle",value:function(e){var t=Math.atan2(e.y,e.x),n=this.shapes;if(t+=Math.PI/2,this.horizon_turn)this.angle*t<0&&(this.shapes=(0,v.scaleXShapeInfos)(this.shapes));else{var i,r=p(n);try{for(r.s();!(i=r.n()).done;){var a=i.value.shape;a instanceof h.Polygon&&a.setAngle(t)}}catch(e){r.e(e)}finally{r.f()}}this.angle=t}},{key:"destroy",value:function(){this.shapes=void 0,this.angle=0,this.pos={x:0,y:0}}}]),e}();t.BodyCom=g},12517:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getShapes=function(e,t){var n,i=[];"fish"===e?(n=h.SHAPE.fish[t]).as&&(n=h.SHAPE.fish[n.as]):n="bullet"===e?h.SHAPE.bullet:h.SHAPE.net;var r,a=p(n.shape_list);try{for(a.s();!(r=a.n()).done;){var o=r.value,l={},u=o.position||{x:0,y:0};if(l.pos=new d.Vector(u.x,u.y),"Circle"===o.type)l.shape=new d.Circle(new d.Vector(0,0),o.radius);else if("Box"===o.type){var s=new d.Box(new d.Vector(0,0),o.width,o.height);l.shape=s.toPolygon(),o.pivot?l.shape.translate(-o.pivot.x,-o.pivot.y):l.shape.translate(-o.width/2,-o.height/2)}else{for(var c=[],f=o.pivot,v=0;v<o.points.length;v+=2){var y=o.points[v],g=o.points[v+1];c.push(new d.Vector(y,g))}l.shape=new d.Polygon(new d.Vector(0,0),c),f&&l.shape.translate(-f.x,-f.y)}i.push(l)}}catch(e){a.e(e)}finally{a.f()}return i},t.cloneShapeInfos=function(e){var t,n=[],i=p(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.pos,o=g(r.shape);n.push({pos:a.clone(),shape:o})}}catch(e){i.e(e)}finally{i.f()}return n},t.cloneShape=g,t.scaleXShapeInfos=function(e){var t,n=[],i=p(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.pos,o=r.shape,l=new d.Vector(-a.x,a.y),u=void 0;if(o instanceof d.Circle)u=g(o);else{var s,c=[],h=p(o.points);try{for(h.s();!(s=h.n()).done;){var v=s.value;c.push(new d.Vector(-v.x,v.y))}}catch(e){h.e(e)}finally{h.f()}u=new d.Polygon(c[0],(0,f.default)(c).call(c))}n.push({pos:l,shape:u})}}catch(e){i.e(e)}finally{i.f()}return n},t.detectCollision=function(e,t){var n,i=e.shapes,r=t.shapes,a=p(i);try{for(a.s();!(n=a.n()).done;){var o,l=n.value.shape,u=p(r);try{for(u.s();!(o=u.n()).done;){var s=o.value.shape,c=new d.Response,f=!1;if(l instanceof d.Polygon&&s instanceof d.Polygon&&(f=d.testPolygonPolygon(l,s,c)),l instanceof d.Circle&&s instanceof d.Polygon&&(f=d.testCirclePolygon(l,s,c)),l instanceof d.Polygon&&s instanceof d.Circle&&(f=d.testCirclePolygon(s,l,c)),l instanceof d.Circle&&s instanceof d.Circle&&(f=d.testCircleCircle(s,l,c)),f)return!0}}catch(e){u.e(e)}finally{u.f()}return!1}}catch(e){a.e(e)}finally{a.f()}},t.getFishViewShape=function(e){var t=v.SPRITE.fish[e].offset,n=t[1]+t[3],i=t[0]+t[2],r={x:t[3],y:t[0]},a=new d.Box(new d.Vector(0,0),n,i).toPolygon();return r&&a.translate(-r.x,-r.y),[{shape:a,pos:new d.Vector(0,0)}]};var a=r(n(69129)),o=r(n(44790)),l=r(n(53632)),u=r(n(35847)),s=r(n(55846)),c=r(n(85323)),f=r(n(56530)),d=i(n(75110)),h=n(52182),v=n(46483);function p(e){if(void 0===u.default||null==(0,l.default)(e)){if((0,o.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return y(e,t);var i=(0,c.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,s.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,f=!0,d=!1;return{s:function(){i=(0,a.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,r=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e){if(e instanceof d.Polygon){var t,n=[],i=p(e.points);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.push(new d.Vector(r.x,r.y))}}catch(e){i.e(e)}finally{i.f()}return new d.Polygon(n[0],n)}if(e instanceof d.Circle)return new d.Circle(e.pos.clone(),e.r)}},70850:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GameFreezeCom=t.FreezingComEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(25233)),d=i(n(91678)),h=i(n(89224)),v=i(n(77887)),p=i(n(18127)),y=n(77924),g=n(63711),m=n(20126);function _(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return k(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var b={Freezing:"freezing",UnFreezing:"un_freezing"};t.FreezingComEvent=b;var w=function(e){(0,h.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,p.default)(t);if(n){var r=(0,p.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,v.default)(this,e)});function r(e){var t;return(0,f.default)(this,r),(t=i.call(this)).game=e,t.addCom(new m.TimeoutCom),t}return(0,d.default)(r,[{key:"freezing",value:function(e,t){var n=this,i=this.game,r=this.freezing_timeout,a=i.event,o=this.getCom(m.TimeoutCom);r&&o.clear(r),this.freezing_timeout=o.createTimeout((function(){n.unFreezing()}),1e3*e);var l,u=_(t);try{for(u.s();!(l=u.n()).done;){var s=l.value,c=i.getFishById(s);c&&c.setStatus(y.FishStatus.Freezed)}}catch(e){u.e(e)}finally{u.f()}a.emit(b.Freezing)}},{key:"unFreezing",value:function(){var e=this.game,t=this.freezing_timeout,n=e.fish_list,i=e.event,r=this.getCom(m.TimeoutCom);t&&r.clear(t);var a,o=_(n);try{for(o.s();!(a=o.n()).done;)a.value.setStatus(y.FishStatus.Normal)}catch(e){o.e(e)}finally{o.f()}i.emit(b.UnFreezing)}}]),r}(g.ComponentManager);t.GameFreezeCom=w},31106:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GunAutoShootCom=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(89224)),u=i(n(77887)),s=i(n(18127)),c=n(63711),f=n(34155);var d=function(e){(0,l.default)(c,e);var t,n,i=(t=c,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,s.default)(t);if(n){var a=(0,s.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,u.default)(this,e)});function c(e){var t;return(0,a.default)(this,c),(t=i.call(this)).gun=e,t}return(0,o.default)(c,[{key:"active",value:function(){var e=this.gun;e.event.on(f.GunEvent.SwitchOn,(function(){e.preAddBullet(e.direction,!0)}),this),e.setStatus(f.GunStatus.AutoShoot),e.preAddBullet(e.direction,!0),e.event.emit(f.GunEvent.AutoShoot,!0)}},{key:"clear",value:function(){var e=this.gun,t=e.event;e.setStatus(f.GunStatus.Normal),t.offAllCaller(this),e.event.emit(f.GunEvent.AutoShoot,!1)}},{key:"destroy",value:function(){this.clear(),this.gun.delCom(this),this.gun=void 0}}]),c}(c.ComponentManager);t.GunAutoShootCom=d},94864:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.DisplaceMoveCom=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(65665),l=function(){function e(t){var n=this;(0,r.default)(this,e),this.is_stop=!1,this.onTick=function(e){var t=n.is_stop,i=n.update_fn;t||i(n.displace.update(e))},this.displace=t}return(0,a.default)(e,[{key:"onUpdate",value:function(e){this.update_fn=e}},{key:"start",value:function(){this.tick_index?this.is_stop=!1:(this.is_stop=!1,this.tick_index=(0,o.createTick)(this.onTick),this.onTick(0))}},{key:"stop",value:function(){this.is_stop=!0}},{key:"getRadio",value:function(){return this.displace.radio}},{key:"destroy",value:function(){(0,o.clearTick)(this.tick_index),this.displace=void 0,this.update_fn=void 0,this.is_stop=!1,this.tick_index=0}}]),e}();t.DisplaceMoveCom=l},81903:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.LockMoveCom=void 0;var a=r(n(88657)),o=r(n(69385)),l=r(n(25233)),u=r(n(91678)),s=i(n(75110)),c=n(65665),f=function(){function e(t,n,i,r){var a=this;(0,l.default)(this,e),this.is_stop=!1,this.update=function(e){var t=a.target,n=a.pos,i=a.is_stop,r=a.velocity_size;if(!i&&t.pos){var l=n.x,u=n.y,c=t.pos,f=c.x,d=c.y,h=new s.Vector(f-l,d-u).normalize().scale(r);n.x+=h.x*e,n.y+=h.y*e,a.detectOnHit()?(a.update_fn({pos:(0,o.default)({},t.pos),velocity:h}),a.on_hit(t)):a.update_fn({pos:(0,o.default)({},a.pos),velocity:h})}},this.target=i,this.pos=(0,o.default)({},t),this.start_pos=(0,o.default)({},t),this.velocity_size=n.len(),this.on_hit=r}return(0,u.default)(e,[{key:"start",value:function(){var e;this.tick_index?this.is_stop=!1:(this.is_stop=!1,this.tick_index=(0,c.createTick)((0,a.default)(e=this.update).call(e,this)),this.update(0))}},{key:"stop",value:function(){this.is_stop=!0}},{key:"onUpdate",value:function(e){this.update_fn=e}},{key:"detectOnHit",value:function(){var e=this.pos,t=this.start_pos,n=this.target.pos,i=new s.Vector(n.x-t.x,n.y-t.y).normalize();return!(new s.Vector(n.x-e.x,n.y-e.y).normalize().dot(i)>0||(this.pos=n,0))}},{key:"destroy",value:function(){(0,c.clearTick)(this.tick_index),this.tick_index=0,this.target=void 0,this.on_hit=void 0,this.pos=void 0,this.start_pos=void 0,this.velocity_size=0,this.update_fn=void 0,this.is_stop=!1}}]),e}();t.LockMoveCom=f},11635:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.VelocityMoveCom=void 0;var r=i(n(88657)),a=i(n(25233)),o=i(n(91678)),l=i(n(75110)),u=n(65665),s=n(97956),c=function(){function e(t,n){(0,a.default)(this,e),this.is_stop=!1,this.pos=t,this.velocity=n}return(0,o.default)(e,[{key:"start",value:function(){var e;this.tick_index?this.is_stop=!1:(this.is_stop=!1,this.tick_index=(0,u.createTick)((0,r.default)(e=this.update).call(e,this)),this.update(0))}},{key:"stop",value:function(){this.is_stop=!0}},{key:"update",value:function(e){var t=this.pos,n=this.velocity;this.is_stop||(t.x+=n.x*e,t.y+=n.y*e,this.detectHitWall(),this.update_fn({pos:t,velocity:n}))}},{key:"onUpdate",value:function(e){this.update_fn=e}},{key:"detectHitWall",value:function(){var e=s.Config.PoolHeight,t=s.Config.PoolWidth,n=s.Config.BulletZoneWidth,i=this.velocity,r=this.pos,a=i.x,o=i.y,u=(t-n)/2,c=u+n;r.x>c&&(r.x=c-(r.x-c),a=-Math.abs(i.x)),r.x<u&&(r.x=u+(u-r.x),a=Math.abs(i.x)),r.y>e&&(r.y=e-(r.y-e),o=-Math.abs(i.y)),r.y<0&&(r.y=-r.y,o=Math.abs(i.y)),this.velocity=new l.default.Vector(a,o),this.pos=r}},{key:"destroy",value:function(){(0,u.clearTick)(this.tick_index),this.tick_index=0,this.velocity=void 0,this.update_fn=void 0,this.is_stop=!1}}]),e}();t.VelocityMoveCom=c},99723:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.quickLeaveFish=I,t.ShoalCom=t.ShoalEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(1979)),d=i(n(25233)),h=i(n(91678)),v=i(n(89224)),p=i(n(77887)),y=i(n(18127)),g=n(63711),m=n(97956),_=n(92898),k=n(15118),b=n(63375),w=n(94864);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x={PreAddShoal:"pre_add_shoal"};t.ShoalEvent=x;var C=function(e){(0,v.default)(g,e);var t,n,i=(t=g,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,y.default)(t);if(n){var r=(0,y.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,p.default)(this,e)});function g(e){var t;return(0,d.default)(this,g),(t=i.call(this)).shoal_map=new f.default,t.game=e,t}return(0,h.default)(g,[{key:"preAddShoal",value:function(e){var t=this.game,n=t.event,i=t.fish_list;n.emit(x.PreAddShoal,e);var c,f=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return S(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(i);try{for(f.s();!(c=f.n()).done;)I(c.value,e)}catch(e){f.e(e)}finally{f.f()}}},{key:"addShoal",value:function(e){}},{key:"removeShoal",value:function(e){this.shoal_map.delete(e)}},{key:"genFish",value:function(){}},{key:"destroy",value:function(){}}]),g}(g.ComponentManager);function I(e,t){var n=e.pos;if(!e.visible)return e.destroy();var i,r=m.Config.ClearFishTime,a=m.Config.PoolWidth,o=(0,_.calcNormalLen)("after",e.type),l={y:n.y};t?(i=a-n.x+o,l.x=a+o):(l.x=-o,i=n.x+o);var u=[{curve:new k.Line(n,l),length:i,radio:1}],s=new b.Displace(r,0,u,!1),c=new w.DisplaceMoveCom(s);e.setMoveCom(c),e.init()}t.ShoalCom=C},19881:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.FishBombCom=t.FishBombEvent=void 0;var r=i(n(24183)),a=i(n(25233)),o=i(n(91678)),l=n(79317),u={FishBomb:"fish_bomb"};t.FishBombEvent=u;var s=function(){function e(t){(0,a.default)(this,e),this.fish=t}return(0,o.default)(e,[{key:"active",value:function(e){var t,n=this.fish,i=n.pos,a=n.id,o={pos:i,player:e};e.need_emit&&(o.fish_list=(0,r.default)(t=(0,l.getBeBombFish)(i)).call(t,(function(e){return e.id!==a}))),n.event.emit(u.FishBomb,o)}},{key:"destroy",value:function(){var e;null===(e=this.fish.event)||void 0===e||e.offAllCaller(this),this.fish=void 0}}]),e}();t.FishBombCom=s},77924:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.FishModel=t.FishStatus=t.FishEvent=void 0;var r=i(n(83544)),a=i(n(82069)),o=i(n(25233)),l=i(n(91678)),u=i(n(47172)),s=i(n(97641)),c=i(n(89224)),f=i(n(77887)),d=i(n(18127)),h=n(94316),v=n(12517),p=n(35716),y=n(79079),g=n(63711),m=n(4615),_=n(76542);var k,b={Destroy:p.ModelEvent.Destroy,Move:"move",BeCast:"be_cast",BeCapture:"be_capture",StatusChange:"status_change",VisibleChange:"visible_change"};t.FishEvent=b,t.FishStatus=k,function(e){e[e.Normal=0]="Normal",e[e.QuickLeave=1]="QuickLeave",e[e.Freezed=2]="Freezed",e[e.Dead=3]="Dead"}(k||(t.FishStatus=k={}));var w=function(e){(0,c.default)(p,e);var t,n,i=(t=p,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.default)(t);if(n){var a=(0,d.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,f.default)(this,e)});function p(e,t){var n;return(0,o.default)(this,p),(n=i.call(this)).status=k.Normal,n.horizon_turn=!1,n.visible=!1,n.onMoveChange=function(e){var t=(0,u.default)(n).body,i=e.pos,r=e.velocity,a=e.is_complete,o=e.visible;if(a)return n.destroy();n.setVisible(o),o&&(n.pos=i,n.velocity=r,t.update(i,r),n.event.emit(b.Move,{pos:i,velocity:r}))},n.game=t,n.initCom(e),n}return(0,l.default)(p,[{key:"initCom",value:function(e){var t=e.type,n=e.id,i=e.score,r=e.currency;(0,y.setProps)(this,{type:t,id:n,score:i||0,currency:r});var a=!1;"horizon_turn"===(0,_.getSpriteInfo)("fish",t).ani_type&&(a=!0);var o=(0,v.getShapes)("fish",Number(t)),l=new h.BodyCom(o,a),u=new m.EventCom;this.event=u,this.body=l,this.horizon_turn=a,this.addCom(new m.EventCom,l)}},{key:"init",value:function(){this.move_com.start()}},{key:"setMoveCom",value:function(e){var t=this.move_com;t&&(t.destroy(),this.delCom(t)),e.onUpdate(this.onMoveChange),this.move_com=e,this.addCom(e)}},{key:"setStatus",value:function(e){e!==this.status&&(this.status=e,this.event.emit(b.StatusChange,e),e===k.Freezed?this.move_com.stop():this.move_com.start())}},{key:"setVisible",value:function(e){e!==this.visible&&(this.visible=e,this.event.emit(b.VisibleChange,e))}},{key:"beCast",value:function(){this.event&&this.event.emit(b.BeCast)}},{key:"beCapture",value:function(){var e=this;return new a.default((function(t,n){if(e.event){var i=e.pos;e.event.emit(b.BeCapture,(function(){t(i),e.destroy()}))}else n(),e.destroy()}))}},{key:"destroy",value:function(){this.destroyed||(this.event.emit(b.Destroy),this.setStatus(k.Dead),this.game.removeFish(this),this.game=void 0,this.id=void 0,this.type=void 0,this.pos=void 0,this.velocity=void 0,this.visible=!1,this.horizon_turn=!1,this.move_com=void 0,this.event=void 0,this.body=void 0,(0,s.default)((0,d.default)(p.prototype),"destroy",this).call(this))}}]),p}(g.ComponentManager);t.FishModel=w},79317:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.createFish=function(e,t){var n=e.eid,i=e.fishId,r=e.score,a=e.currencyFish,o=(0,C.createFishDisplace)(e);if(o){var l=new M.DisplaceMoveCom(o),u={id:n,type:i,score:r,currency:a},s=new A.FishModel(u,t);return s.setMoveCom(l),(0,x.isBombFish)(s)&&s.addCom(new E.FishBombCom(s)),s}},t.createFishGroup=function(e,t){var n=e.fishId,i=e.group,r=e.score,a=e.currencyFish,o=[],l=(0,x.getSpriteInfo)("fish",n).group;if(!l)return o;var u=(0,C.createFishDisplace)(e),s=new M.DisplaceMoveCom(u),c=new g.default;s.onUpdate((function(e){var t,n=B(c);try{for(n.s();!(t=n.n()).done;)(0,t.value.update_fn)(e)}catch(e){n.e(e)}finally{n.f()}}));for(var f=function(e){var n,u,f=l[e],d=f.type,g=f.pos,m=i[e].eid,_=(n=function(e){var t=e.pos,n=D(e,["pos"]),i=(0,h.default)({},n);return t&&(i.pos={x:t.x+g.x,y:t.y+g.y}),i},u=e,[function(e){c.add({update_fn:function(t){var i=n(t);e(i)},id:u,isStop:!1})},function(){var e,t=B(c);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.id===u&&(c.delete(n),0===c.size&&s.destroy())}}catch(e){t.e(e)}finally{t.f()}},function(){var e,t,n=B(c);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.id===u&&(i.isStop=!1)}}catch(e){n.e(e)}finally{n.f()}(0,y.default)(e=(0,p.default)(c)).call(e,(function(e){return!0===e.isStop}))||s.start()},function(){var e,t,n=B(c);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.id===u&&(i.isStop=!0)}}catch(e){n.e(e)}finally{n.f()}(0,y.default)(e=(0,p.default)(c)).call(e,(function(e){return!1===e.isStop}))||s.stop()}]),k=(0,v.default)(_,4),b=k[0],w=k[1],S={start:k[2],stop:k[3],onUpdate:b,destroy:w},C={id:m,type:d,score:r,currency:a},I=new A.FishModel(C,t);I.setMoveCom(S),(0,x.isBombFish)(I)&&I.addCom(new E.FishBombCom(I)),o.push(I)},d=0;d<i.length;d++)f(d);return o},t.getBeBombFishIds=function(e){var t;return(0,d.default)(t=F(e)).call(t,(function(e){return e.id}))},t.getBeBombFish=F,t.createBombBody=N,t.playerCaptureFish=function(e,t,n){return P(this,void 0,void 0,f.default.mark((function i(){var r,a,o;return f.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(0,x.isBombFish)(t)&&t.getCom(E.FishBombCom).active(e),i.next=3,t.beCapture();case 3:r=i.sent,a=n.drop,o=n.win,r||(0,L.error)("cant find fish pos"),e.captureFish(r,{win:o,drop:a});case 7:case"end":return i.stop()}}),i)})))},t.waitFishDestroy=function(e){var t=this,n=e.event;return new k.default((function(i,r){if(e.destroyed)return(0,c.default)(i);n.once(A.FishEvent.Destroy,(function(){(0,c.default)(i)}),t)}))};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(6113)),f=i(n(41509)),d=i(n(24823)),h=i(n(69385)),v=i(n(35526)),p=i(n(84048)),y=i(n(33045)),g=i(n(73718)),m=i(n(74850)),_=i(n(68393)),k=i(n(82069)),b=n(97956),w=i(n(75110)),S=n(55176),x=n(76542),C=n(92898),I=n(94316),M=n(94864),E=n(19881),A=n(77924),L=n(20096);function B(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return T(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?T(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e,t,n,i){return new(n||(n=k.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},D=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,_.default)(t).call(t,i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof m.default){var r=0;for(i=(0,m.default)(e);r<i.length;r++)(0,_.default)(t).call(t,i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function F(e){var t=N();t.update(e);var n=(0,S.getCollisionAllFish)(t);return t.destroy(),n}function N(){var e={shape:new w.default.Circle(new w.default.Vector(0,0),b.Config.BombRadius),pos:new w.default.Vector(0,0)};return new I.BodyCom([e],!1)}},19773:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GameModel=t.GameEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(84048)),d=i(n(73718)),h=i(n(25233)),v=i(n(91678)),p=i(n(97641)),y=i(n(89224)),g=i(n(77887)),m=i(n(18127)),_=n(70850),k=n(99723),b=n(99524),w=n(63711),S=n(20126),x=n(4615),C=n(79317),I=n(35716),M=n(20096);function E(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return A(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L={AddFish:"add_fish",AddPlayer:"add_player",Freezing:"freezing",Destroy:I.ModelEvent.Destroy};t.GameEvent=L;var B=function(e){(0,y.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,m.default)(t);if(n){var r=(0,m.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,g.default)(this,e)});function r(){var e;return(0,h.default)(this,r),(e=i.call(this)).fish_list=new d.default,e.player_list=new d.default,e.initCom(),e}return(0,v.default)(r,[{key:"initCom",value:function(){this.addCom(new x.EventCom,new S.TimeoutCom)}},{key:"addFish",value:function(e){if(e.group){var t,n=(0,C.createFishGroup)(e,this),i=E(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;this.fish_list.add(r),this.event.emit(L.AddFish,r),r.init()}}catch(e){i.e(e)}finally{i.f()}return n}var a=(0,C.createFish)(e,this);if(a)return this.fish_list.add(a),this.event.emit(L.AddFish,a),a.init(),a}},{key:"removeFish",value:function(e){this.fish_list.delete(e)}},{key:"getFishById",value:function(e){var t,n=E(this.fish_list);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.id===e)return i}}catch(e){n.e(e)}finally{n.f()}}},{key:"getAllFish",value:function(){var e=this.fish_list;return(0,f.default)(e)}},{key:"captureFish",value:function(e){var t=e.userId,n=e.eid,i=e.backAmount,r=this.getPlayerById(t),a=this.getFishById(n);r?(i&&r.updateInfo({bullet_num:r.bullet_num+i}),a?(0,C.playerCaptureFish)(r,a,e):(0,M.error)("Game:>captureFish:> cant find fish for ".concat(n))):(0,M.error)("Game:>captureFish:> cant find player for ".concat(t))}},{key:"addPlayer",value:function(e){var t=new b.PlayerModel(e,this);return this.player_list.add(t),this.event.emit(L.AddPlayer,t),t.init(),t}},{key:"getCurPlayer",value:function(){var e,t=E(this.player_list);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.is_cur_player)return n}}catch(e){t.e(e)}finally{t.f()}}},{key:"getPlayers",value:function(){return this.player_list}},{key:"getPlayerById",value:function(e){var t,n=E(this.player_list);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.user_id===e)return i}}catch(e){n.e(e)}finally{n.f()}}},{key:"removePlayer",value:function(e){this.player_list.delete(e)}},{key:"activeSkill",value:function(e,t){var n=this.getPlayerById(t.user_id);n?n.activeSkill(e,t):(0,M.error)("Game:>activeSkill:> cant find player:>".concat(t.user_id))}},{key:"disableSkill",value:function(e,t){var n=this.getPlayerById(t);n?n.disableSkill(e):(0,M.error)("Game:>resetSkill:> cant find player:>".concat(t))}},{key:"resetSkill",value:function(e,t){var n=this.getPlayerById(t);n?n.resetSkill(e):(0,M.error)("Game:>resetSkill:> cant find player:>".concat(t))}},{key:"shoot",value:function(e){var t=this.getPlayerById(e.userId);t?t.gun.addBullet(e.direction,!t.is_cur_player):(0,M.error)("Game:>resetSkill:> cant find player:>".concat(e.userId))}},{key:"shoalComingTip",value:function(e){this.shoal_com.preAddShoal(e)}},{key:"clear",value:function(){var e,t=this.fish_list,n=E(this.player_list);try{for(n.s();!(e=n.n()).done;)e.value.destroy()}catch(e){n.e(e)}finally{n.f()}var i,r=E(t);try{for(r.s();!(i=r.n()).done;)i.value.destroy()}catch(e){r.e(e)}finally{r.f()}this.fish_list.clear(),this.player_list.clear()}},{key:"destroy",value:function(){this.event.emit(L.Destroy),this.clear(),(0,p.default)((0,m.default)(r.prototype),"destroy",this).call(this)}},{key:"event",get:function(){return this.getCom(x.EventCom)}},{key:"freezing_com",get:function(){var e=this.getCom(_.GameFreezeCom);return e||(e=new _.GameFreezeCom(this),this.addCom(e)),e}},{key:"shoal_com",get:function(){var e=this.getCom(k.ShoalCom);return e||(e=new k.ShoalCom(this),this.addCom(e)),e}}]),r}(w.ComponentManager);t.GameModel=B},55412:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.BulletGroup=t.BulletGroupEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(73718)),d=i(n(25233)),h=i(n(91678)),v=i(n(47172)),p=i(n(97641)),y=i(n(89224)),g=i(n(77887)),m=i(n(18127)),_=n(88648),k=n(63711),b=n(4615);function w(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return S(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x={Destroy:n(35716).ModelEvent.Destroy};t.BulletGroupEvent=x;var C=function(e){(0,y.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,m.default)(t);if(n){var r=(0,m.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,g.default)(this,e)});function r(e,t){var n;(0,d.default)(this,r),(n=i.call(this)).bullet_list=new f.default,n.casted=!1,n.castFn=function(e){var t=(0,v.default)(n),i=t.gun,r=t.casted,a=t.bullet_list,o=t.bullet_cost;if(!r){var l=i.player,u=l.is_cur_player,s=l.need_emit;n.casted=!0,s&&i.castFish(e,o),i.removeBullet((0,v.default)(n)),n.gun=void 0;var c,f=w(a);try{for(f.s();!(c=f.n()).done;)c.value.addNet(u)}catch(e){f.e(e)}finally{f.f()}a.clear(),n.destroy()}},n.bullet_cost=t.bullet_cost,n.gun=t;var a=new b.EventCom;return n.event=a,n.addCom(a),n.initBullet(e),n}return(0,h.default)(r,[{key:"init",value:function(){var e,t=w(this.bullet_list);try{for(t.s();!(e=t.n()).done;)e.value.init()}catch(e){t.e(e)}finally{t.f()}}},{key:"initBullet",value:function(e){var t,n=e.bullets_pos,i=e.lock,r=e.velocity,a=this.gun,o=a.skin,l=a.bullet_cost,u=a.skin_level,s=w(n);try{for(s.s();!(t=s.n()).done;){var c={skin:o,pos:t.value,bullet_cost:l,lock:i,skin_level:u,velocity:r.clone(),cast_fn:this.castFn},f=new _.BulletModel(c);this.bullet_list.add(f)}}catch(e){s.e(e)}finally{s.f()}}},{key:"destroy",value:function(){var e,t=this.bullet_list,n=w(t);try{for(n.s();!(e=n.n()).done;)e.value.destroy()}catch(e){n.e(e)}finally{n.f()}t.clear(),this.event.emit(x.Destroy),this.event=void 0,this.gun=void 0,this.bullet_cost=0,(0,p.default)((0,m.default)(r.prototype),"destroy",this).call(this)}}]),r}(k.ComponentManager);t.BulletGroup=C},88648:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.BulletModel=t.BulletEvent=void 0;var r=i(n(83544)),a=i(n(69385)),o=i(n(25233)),l=i(n(91678)),u=i(n(47172)),s=i(n(97641)),c=i(n(89224)),f=i(n(77887)),d=i(n(18127)),h=n(63711),v=n(4615),p=n(97956),y=n(94316),g=n(12517),m=n(81903),_=n(11635),k=n(35716),b=n(55176),w=n(72847),S=n(79079),x=n(20126);var C={Move:"move",AddNet:"add_net"};t.BulletEvent=C;var I=function(e){(0,c.default)(h,e);var t,n,i=(t=h,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.default)(t);if(n){var a=(0,d.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,f.default)(this,e)});function h(e){var t;return(0,o.default)(this,h),(t=i.call(this)).onMoveChange=function(e){var n=e.pos,i=e.velocity,r=t.body;r.update(n,i),t.pos=n,t.velocity=i,t.event.emit(C.Move,{pos:n,velocity:i});var a=(0,b.getCollisionFish)(r);a&&t.onHit(a)},t.onLockMoveChange=function(e){var n=e.pos,i=e.velocity;t.pos=(0,a.default)({},e.pos),t.velocity=i,t.event.emit(C.Move,{pos:n,velocity:i})},t.onHit=function(e){var n=(0,u.default)(t),i=n.cast_fn,r=n.move_com;r.destroy(),t.delCom(r),t.move_com=void 0,t.getCom(x.TimeoutCom).createTimeout((function(){i(e)}))},t.addNet=function(e){var n=(0,u.default)(t).pos,i=new w.NetModel({pos:n,show_cast:e},(0,u.default)(t));t.event.emit(C.AddNet,i),t.destroy()},(0,S.setProps)((0,u.default)(t),(0,a.default)((0,a.default)({},e),{velocity:e.velocity.scale(p.Config.BulletSpeed)})),t.initCom(),t}return(0,l.default)(h,[{key:"initCom",value:function(){var e,t=this.pos,n=this.velocity,i=this.lock,r=new v.EventCom,a=[r];if(i)e=new m.LockMoveCom(t,n,i,this.onHit),a.push(e),e.onUpdate(this.onLockMoveChange);else{var o=(0,g.getShapes)("bullet"),l=new y.BodyCom(o);e=new _.VelocityMoveCom(t,n),a.push(e,l),e.onUpdate(this.onMoveChange),this.body=l}a.push(new x.TimeoutCom),this.move_com=e,this.event=r,this.addCom.apply(this,a)}},{key:"init",value:function(){this.move_com.start()}},{key:"destroy",value:function(){this.event.emit(k.ModelEvent.Destroy),this.cast_fn=void 0,this.event=void 0,this.body=void 0,(0,s.default)((0,d.default)(h.prototype),"destroy",this).call(this)}}]),h}(h.ComponentManager);t.BulletModel=I},34155:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.GunModel=t.GunStatus=t.GunEvent=void 0;var a=r(n(69129)),o=r(n(44790)),l=r(n(53632)),u=r(n(35847)),s=r(n(55846)),c=r(n(85323)),f=r(n(83544)),d=r(n(77433)),h=r(n(73718)),v=r(n(25233)),p=r(n(91678)),y=r(n(97641)),g=r(n(89224)),m=r(n(77887)),_=r(n(18127)),k=n(63711),b=n(4615),w=n(20126),S=n(97956),x=i(n(75110)),C=n(76542),I=n(31106),M=n(55412);function E(e){if(void 0===u.default||null==(0,l.default)(e)){if((0,o.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return A(e,t);var i=(0,c.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,s.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,f=!0,d=!1;return{s:function(){i=(0,a.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,r=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw r}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L,B={WillAddBullet:"will_add_bullet",AddBullet:"add_bullet",DirectionChange:"direction_change",SwitchOn:"switch_on",SpeedUpStatus:"speed_up_status",CastFish:"cast_fish",LevelChange:"level_change",AutoShoot:"auto_shoot",NotEnoughBulletNum:"not_enough_bullet_num"};t.GunEvent=B,t.GunStatus=L,function(e){e[e.Normal=0]="Normal",e[e.AutoShoot=1]="AutoShoot",e[e.LockFish=2]="LockFish"}(L||(t.GunStatus=L={}));var T=function(e){(0,g.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!f.default)return!1;if(f.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,f.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,_.default)(t);if(n){var r=(0,_.default)(this).constructor;e=(0,f.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,m.default)(this,e)});function r(e,t,n){var a;return(0,v.default)(this,r),(a=i.call(this)).direction=new x.Vector(0,-1),a.bullet_list=new h.default,a.status=L.Normal,a.is_speedup=!1,a.shoot_space=S.Config.ShootTimeSpace,a.is_on=!0,a.rage=!1,a.pos=e,a.skin=t,a.player=n,a.initCom(),a}return(0,p.default)(r,[{key:"initCom",value:function(){var e=new b.EventCom,t=new w.TimeoutCom;this.addCom(e,t),this.event=e,this.timeout=t}},{key:"init",value:function(){this.initDirection(),this.setBulletCost(this.player.bullet_cost)}},{key:"initDirection",value:function(){this.player.server_index<2?this.setDirection(new x.Vector(0,-1)):this.setDirection(new x.Vector(0,1))}},{key:"setDirection",value:function(e){var t=this;e!==this.direction&&(this.direction=e,this.getCom(w.TimeoutCom).createTimeout((function(){t.event.emit(B.DirectionChange,e)}),this.shoot_space))}},{key:"changeSkin",value:function(e){this.skin=e,this.setBulletCost(this.bullet_cost,!0)}},{key:"setBulletCost",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e!==this.bullet_cost||t){var n=this.skin,i=this.timeout,r=this.event,a=this.shoot_space,o=(0,C.getGunLevelSkinInfo)(e),l=o.level_skin,u=o.hole_num;this.bullet_cost=e,this.skin_level=l,this.hole_num=u,i.createTimeout((function(){r.emit(B.LevelChange,{bullet_cost:e,skin:n,level_skin:l,hole_num:u})}),a)}}},{key:"setStatus",value:function(e){e!==this.status&&(this.status=e)}},{key:"toggleSpeedUp",value:function(e){if(e!==this.is_speedup){var t=this.event;this.is_speedup=e,t.emit(B.SpeedUpStatus,e),this.shoot_space=!0===e?S.Config.ShootTimeSpace/2:S.Config.ShootTimeSpace}}},{key:"preAddBullet",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.status,r=this.is_on,a=this.event,o=this.shoot_space,l=this.player,u=this.bullet_cost;if(l.is_cur_player&&l.bullet_num-u<0)a.emit(B.NotEnoughBulletNum);else if((n||i!==L.LockFish)&&(e=e.clone().normalize(),this.setDirection(e),(n||i!==L.AutoShoot)&&r)){a.emit(B.WillAddBullet,e),this.is_on=!1;var s=this.getCom(w.TimeoutCom);s.createTimeout((function(){t.is_on=!0,a.emit(B.SwitchOn)}),o)}}},{key:"addBullet",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.bullet_cost,r=this.skin,a=this.skin_level,o=this.lock_fish,l=this.player,u=this.event,s=this.bullet_list,c=e.x,f=e.y,h=new x.Vector(c,f).normalize();if(!(l.bullet_num<i&&l.is_cur_player)){n&&this.setDirection(h);var v=(0,C.getBulletStartPos)(l.server_index,h.clone(),(0,d.default)(t="".concat(r)).call(t,a)),p={bullets_pos:v,velocity:h,lock:o},y=new M.BulletGroup(p,this);s.add(y),u.emit(B.AddBullet,{bullet_group:y,velocity:h,lock:o}),y.init(),l.updateInfo({bullet_num:l.bullet_num-i})}}},{key:"castFish",value:function(e,t){this.event.emit(B.CastFish,{fish:e,level:t})}},{key:"getAllBulletCost",value:function(){var e,t=0,n=E(this.bullet_list);try{for(n.s();!(e=n.n()).done;)t+=e.value.bullet_cost}catch(e){n.e(e)}finally{n.f()}return t}},{key:"removeBullet",value:function(e){this.bullet_list.delete(e)}},{key:"destroy",value:function(){var e,t=E(this.bullet_list);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}this.player=void 0,this.lock_fish=void 0,this.setStatus(L.Normal),this.toggleSpeedUp(!1),this.bullet_list.clear(),(0,y.default)((0,_.default)(r.prototype),"destroy",this).call(this)}},{key:"autoShoot",get:function(){var e=this.getCom(I.GunAutoShootCom);return e||(e=new I.GunAutoShootCom(this),this.addCom(e)),e}}]),r}(k.ComponentManager);t.GunModel=T},72847:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.NetModel=t.NetEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(25233)),d=i(n(91678)),h=i(n(97641)),v=i(n(89224)),p=i(n(77887)),y=i(n(18127)),g=n(63711),m=n(4615),_=n(20126),k=n(94316),b=n(12517),w=n(35716),S=n(55176);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var C={CastFish:"cast_fish"};t.NetEvent=C;var I=function(e){(0,v.default)(g,e);var t,n,i=(t=g,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,y.default)(t);if(n){var r=(0,y.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,p.default)(this,e)});function g(e,t){var n;(0,f.default)(this,g),n=i.call(this);var r=e.show_cast,a=e.pos;return n.bullet_cost=t.bullet_cost,n.skin=t.skin,n.skin_level=t.skin_level,n.show_cast=r,n.pos=a,n.init(),n}return(0,d.default)(g,[{key:"init",value:function(){var e=this,t=this.show_cast,n=(0,b.getShapes)("net"),i=new k.BodyCom(n);i.update(this.pos);var c=new _.TimeoutCom,f=new m.EventCom;this.addCom(f,c,i),this.event=f,t&&c.createTimeout((function(){var t,n=(0,S.getCollisionAllFish)(i),c=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return x(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?x(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(n);try{for(c.s();!(t=c.n()).done;)t.value.beCast()}catch(e){c.e(e)}finally{c.f()}e.event.emit(C.CastFish,n)}),0),c.createTimeout((function(){e.destroy()}),100)}},{key:"destroy",value:function(){this.event.emit(w.ModelEvent.Destroy),this.pos=void 0,this.bullet_cost=void 0,this.skin=void 0,this.skin_level=void 0,this.show_cast=!1,(0,h.default)((0,y.default)(g.prototype),"destroy",this).call(this)}},{key:"body",get:function(){return this.getCom(k.BodyCom)}}]),g}(g.ComponentManager);t.NetModel=I},99524:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.PlayerModel=t.PlayerEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(41509)),d=i(n(35526)),h=i(n(69385)),v=i(n(1979)),p=i(n(25233)),y=i(n(91678)),g=i(n(97641)),m=i(n(89224)),_=i(n(77887)),k=i(n(18127)),b=i(n(74850)),w=i(n(68393)),S=i(n(82069)),x=n(63711),C=n(4615),I=n(35716),M=n(76542),E=n(79079),A=n(77924),L=n(34155),B=n(16307),T=n(20096);function P(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return D(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var F={CaptureFish:A.FishEvent.BeCapture,UpdateInfo:"update_info",Destroy:I.ModelEvent.Destroy};t.PlayerEvent=F;var N=function(e){(0,m.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,k.default)(t);if(n){var r=(0,k.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,_.default)(this,e)});function r(e,t){var n;return(0,p.default)(this,r),(n=i.call(this)).skill_map=new v.default,n.game=t,n.addCom(new C.EventCom),n.createGun(e),n}return(0,y.default)(r,[{key:"createGun",value:function(e){var t=e.gun_skin,n=e.skills,i=e.server_index,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,w.default)(t).call(t,i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof b.default){var r=0;for(i=(0,b.default)(e);r<i.length;r++)(0,w.default)(t).call(t,i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["gun_skin","skills","server_index"]),a=(0,M.getGunInfo)(i).pos,o=new L.GunModel(a,t,this);this.gun=o,this.updateInfo((0,h.default)({server_index:i},r)),this.initSkill(n)}},{key:"init",value:function(){var e=this.skill_map;this.gun.init();var t,n=P(e);try{for(n.s();!(t=n.n()).done;)(0,d.default)(t.value,2)[1].init()}catch(e){n.e(e)}finally{n.f()}}},{key:"updateInfo",value:function(e){var t=e.bullet_cost;(0,E.setProps)(this,e),e.bullet_cost&&this.gun.setBulletCost(t),this.event.emit(F.UpdateInfo)}},{key:"initSkill",value:function(e){var t=this.skill_map;for(var n in B.SkillCtorMap)if(B.SkillCtorMap.hasOwnProperty(n)){var i=B.SkillCtorMap[n],r=e[n]||{},a=(0,h.default)({player:this},r);t.set(n,new i(a))}}},{key:"activeSkill",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.skill_map.get(e);n.active(t)}},{key:"disableSkill",value:function(e){this.skill_map.get(e).disable()}},{key:"resetSkill",value:function(e){this.skill_map.get(e).reset()}},{key:"getSkill",value:function(e){return this.skill_map.get(e)}},{key:"addSkillNum",value:function(e,t){var n=this.skill_map.get(e);n?(t=n.skill_core.num+t,n.skill_core.setNum(t)):(0,T.error)("cant find skill for ".concat(e))}},{key:"captureFish",value:function(e,t){return n=this,i=void 0,r=void 0,a=f.default.mark((function n(){var i,r,a,o,l,u,s=this;return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new S.default((function(n,i){s.event.emit(F.CaptureFish,{pos:e,data:t,resolve:n})}));case 2:if(i=t.win,r=t.drop,a=this.bullet_num,this.updateInfo({bullet_num:a+i}),r){o=P(r);try{for(o.s();!(l=o.n()).done;)u=l.value,this.addSkillNum(u.itemId,u.itemNum)}catch(e){o.e(e)}finally{o.f()}}case 6:case"end":return n.stop()}}),n,this)})),new(r||(r=S.default))((function(e,t){function o(e){try{u(a.next(e))}catch(e){t(e)}}function l(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,l)}u((a=a.apply(n,i||[])).next())}));var n,i,r,a}},{key:"changeSkin",value:function(e){this.gun.changeSkin(e)}},{key:"destroy",value:function(){var e,t=this.gun,n=this.skill_map,i=this.game,a=P(n);try{for(a.s();!(e=a.n()).done;)(0,d.default)(e.value,2)[1].destroy()}catch(e){a.e(e)}finally{a.f()}t.destroy(),i.removePlayer(this),this.event.emit(F.Destroy),this.skill_map.clear(),this.gun=void 0,(0,g.default)((0,k.default)(r.prototype),"destroy",this).call(this)}},{key:"event",get:function(){return this.getCom(C.EventCom)}}]),r}(x.ComponentManager);t.PlayerModel=N},82993:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.AutoShootModel=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(89224)),u=i(n(77887)),s=i(n(18127)),c=n(23029);var f=function(e){(0,l.default)(f,e);var t,n,i=(t=f,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,s.default)(t);if(n){var a=(0,s.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,u.default)(this,e)});function f(e){var t;return(0,a.default)(this,f),(t=i.call(this)).initCom(e),t}return(0,o.default)(f,[{key:"initCom",value:function(e){var t=new c.SkillCoreCom(e);this.addCom(t),this.skill_core=t}},{key:"toggle",value:function(){this.skill_core.status===c.SkillStatus.Normal?this.active():this.disable()}},{key:"init",value:function(){this.skill_core.init()}},{key:"reset",value:function(){var e=this.skill_core;e.player.gun.autoShoot.clear(),e.reset()}},{key:"active",value:function(){var e=this.skill_core;this.skill_core.player.gun.autoShoot.active(),e.active({used_time:0})}},{key:"disable",value:function(){this.skill_core.reset(),this.reset()}}]),f}(n(63711).ComponentManager);t.AutoShootModel=f},88481:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.BombModel=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(25233)),d=i(n(91678)),h=i(n(89224)),v=i(n(77887)),p=i(n(18127)),y=n(63711),g=n(55176),m=n(79317),_=n(23029);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var b=function(e){(0,h.default)(y,e);var t,n,i=(t=y,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,p.default)(t);if(n){var r=(0,p.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,v.default)(this,e)});function y(e){var t;return(0,f.default)(this,y),(t=i.call(this)).initCom(e),t}return(0,d.default)(y,[{key:"initCom",value:function(e){var t=new _.SkillCoreCom(e);this.addCom(t),this.skill_core=t}},{key:"init",value:function(){this.skill_core.init()}},{key:"active",value:function(e){var t,n=e.num,i=e.fish_list,c=e.pos,f=e.used_time,d=e.is_bomb_fish,h=this.skill_core,v=h.player,p=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return k(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(i);try{for(p.s();!(t=p.n()).done;){var y=t.value,_=y.eid,b=y.win,w=y.drop,S=(0,g.getFishById)(_);S?(0,m.playerCaptureFish)(v,S,{win:b,drop:w}):v.updateInfo({bullet_num:v.bullet_num+b})}}catch(e){p.e(e)}finally{p.f()}h.activeEvent(c),d&&h.active({num:n,used_time:f})}},{key:"reset",value:function(){this.skill_core.reset()}},{key:"disable",value:function(){this.skill_core.disable()}}]),y}(y.ComponentManager);t.BombModel=b},38222:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.FreezeModel=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(89224)),u=i(n(77887)),s=i(n(18127)),c=n(55176),f=n(23029);var d=function(e){(0,l.default)(d,e);var t,n,i=(t=d,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,s.default)(t);if(n){var a=(0,s.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,u.default)(this,e)});function d(e){var t;return(0,a.default)(this,d),(t=i.call(this)).initCom(e),t}return(0,o.default)(d,[{key:"initCom",value:function(e){var t=new f.SkillCoreCom(e);this.addCom(t),this.skill_core=t}},{key:"init",value:function(){this.skill_core.init()}},{key:"reset",value:function(){this.skill_core.reset()}},{key:"active",value:function(e){var t=this.skill_core,n=e.used_time,i=e.fish_list,r=e.duration;c.modelState.app.game.freezing_com.freezing(r-n,i),t.active(e)}},{key:"disable",value:function(){this.skill_core.disable()}}]),d}(n(63711).ComponentManager);t.FreezeModel=d},64952:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.LockFishModel=t.GunLockFishEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(6113)),d=i(n(69385)),h=i(n(73718)),v=i(n(25233)),p=i(n(91678)),y=i(n(47172)),g=i(n(97641)),m=i(n(89224)),_=i(n(77887)),k=i(n(18127)),b=i(n(74850)),w=i(n(68393)),S=n(63711),x=n(20126),C=n(77924),I=n(55176),M=i(n(75110)),E=n(20096),A=n(55412),L=n(34155),B=n(23029);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P={StartLock:"start_lock",StopLock:"stop_lock"};t.GunLockFishEvent=P;var D=function(e){(0,m.default)(S,e);var t,n,i=(t=S,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,k.default)(t);if(n){var r=(0,k.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,_.default)(this,e)});function S(e){var t;return(0,v.default)(this,S),(t=i.call(this)).bullet_list=new h.default,t.onLockMove=function(){var e=(0,y.default)(t),n=e.gun,i=e.fish,r=e.skill_core;if(null==i?void 0:i.visible){var a=i.pos,o=a.x,l=a.y,u=n.pos,s=u.x,c=u.y;n.setDirection(new M.default.Vector(o-s,l-c)),r.player.need_emit&&((0,I.detectInScreen)(i.pos)||(t.unLock(),t.tipLock()))}},t.unLock=function(){var e=(0,y.default)(t),n=e.fish,i=e.gun,c=e.bullet_list;if(n&&i){var f,d=i.player,h=0,v=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return T(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?T(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(c);try{for(v.s();!(f=v.n()).done;){var p=f.value;h+=p.bullet_cost,i.removeBullet(p),p.destroy()}}catch(e){v.e(e)}finally{v.f()}d.updateInfo({bullet_num:d.bullet_num+h}),c.clear(),i.event.emit(P.StopLock),i.setStatus(L.GunStatus.Normal),i.lock_fish=void 0,i.event.offAllCaller((0,y.default)(t)),n.event.offAllCaller((0,y.default)(t)),t.fish=null}},t.initCom(e),t}return(0,p.default)(S,[{key:"init",value:function(){var e=this,t=this.timeout,n=this.skill_core,i=this.init_info,r=i.lock_fish,a=i.lock_left,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,w.default)(t).call(t,i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof b.default){var r=0;for(i=(0,b.default)(e);r<i.length;r++)(0,w.default)(t).call(t,i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(i,["lock_fish","lock_left"]);a?t.createTimeout((function(){e.active((0,d.default)((0,d.default)({},o),{fish:r,duration:a+o.used_time,needActive:!0}))})):n.init(),this.gun=this.skill_core.player.gun}},{key:"reset",value:function(){this.skill_core.reset()}},{key:"initCom",value:function(e){var t=new B.SkillCoreCom(e),n=new x.TimeoutCom;this.addCom(t,n),this.skill_core=t,this.timeout=n,this.init_info=e}},{key:"active",value:function(e){var t=this,n=this.skill_core,i=e.fish,r=e.needActive;if(n.status===B.SkillStatus.Active||r){r&&n.active(e,(function(e){e===B.SkillStatus.Disable&&((0,E.log)("test:>lockFish:>disable"),t.unLock())}));var a=(0,I.getFishById)(i);if(!a)return(0,E.error)("cant find fish for eid=".concat(i));this.lock(a)}}},{key:"tipLock",value:function(){var e=this.gun,t=this.skill_core,n=(0,I.getAimFish)();n&&(0,E.log)("test:>tipLock",n,n.destroyed),t.activeEvent({fish:n,is_tip:!0,gun_pos:e.pos})}},{key:"lock",value:function(e){var t=this.gun,n=this.skill_core;this.unLock(),this.bindLockFish(e),n.activeEvent({fish:e,is_tip:!1,gun_pos:t.pos})}},{key:"bindLockFish",value:function(e){var t=this,n=this.gun,i=(this.skill_core,n.event),r=e.event;this.fish=e,n.lock_fish=e,this.onLockMove(),r.on(C.FishEvent.Move,this.onLockMove,this),r.on(C.FishEvent.Destroy,(function(){t.unLock(),(0,f.default)((function(){t.tipLock()}))}),this),n.setStatus(L.GunStatus.LockFish),n.preAddBullet(n.direction,!0),i.on(L.GunEvent.SwitchOn,(function(){n.preAddBullet(n.direction,!0)}),this),i.on(L.GunEvent.AddBullet,(function(e){if(e.lock){var n=e.bullet_group;t.bullet_list.add(n),n.event.on(A.BulletGroupEvent.Destroy,(function(){t.bullet_list.delete(n)}),t)}}),this)}},{key:"disable",value:function(){this.skill_core.disable()}},{key:"destroy",value:function(){var e,t=this.fish;null===(e=null==t?void 0:t.event)||void 0===e||e.offAllCaller(this),this.unLock(),this.fish=void 0,this.skill_core=void 0,this.gun=void 0,(0,g.default)((0,k.default)(S.prototype),"destroy",this).call(this)}}]),S}(S.ComponentManager);t.LockFishModel=D},23029:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.SkillCoreCom=t.SkillEvent=t.SkillStatus=void 0;var r,a=i(n(83544)),o=i(n(69385)),l=i(n(25233)),u=i(n(91678)),s=i(n(47172)),c=i(n(97641)),f=i(n(89224)),d=i(n(77887)),h=i(n(18127)),v=n(79079),p=n(31613),y=n(63711),g=n(4615),m=n(20096);t.SkillStatus=r,function(e){e.Normal="normal",e.PreActive="pre_active",e.Disable="disable",e.Active="active"}(r||(t.SkillStatus=r={}));var _={UpdateInfo:"update_info",StatusChange:"status_change",UpdateRadio:"update_radio",ActiveSkill:"active_skill",DisableSkill:"disable_skill",Destroy:"destroy"};t.SkillEvent=_;var k=function(e){(0,f.default)(y,e);var t,n,i=(t=y,n=function(){if("undefined"==typeof Reflect||!a.default)return!1;if(a.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,a.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,h.default)(t);if(n){var r=(0,h.default)(this).constructor;e=(0,a.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,d.default)(this,e)});function y(e){var t;return(0,l.default)(this,y),(t=i.call(this)).cool_time=10,t.used_time=0,t.status=r.Normal,(0,v.setProps)((0,s.default)(t),(0,o.default)({},e)),t.initCom(),t}return(0,u.default)(y,[{key:"initCom",value:function(){var e=new g.EventCom;this.addCom(e),this.event=e}},{key:"init",value:function(){var e=this.used_time,t=this.num;e&&(this.active({used_time:e,num:t}),(0,v.setProps)(this,{used_time:0})),this.event.emit(_.UpdateInfo)}},{key:"setNum",value:function(e){this.num=e,this.event.emit(_.UpdateInfo)}},{key:"setStatus",value:function(e){this.status!==e&&(this.status=e,this.event.emit(_.StatusChange,e))}},{key:"activeEvent",value:function(e){this.event.emit(_.ActiveSkill,e)}},{key:"active",value:function(e,t){var n=this;if(this.status===r.Active)return!1;var i=this.cool_time,a=this.event,o=e.used_time,l=e.num,u=e.duration||o,s=i-o,c=u-o;c>s&&(c=s),this.setNum(l),this.setStatus(r.Active),this.count_index=(0,p.startCount)(s,.05,(function(e){var o=(1-e)*s,l=e*(s/i);a.emit(_.UpdateRadio,l),o>=c&&n.status!==r.Disable&&(n.disable(),(0,v.callFunc)(t,n.status)),0===l&&(n.reset(),(0,v.callFunc)(t,n.status))}))}},{key:"reset",value:function(){this.status!==r.Active&&((0,m.debug)("SkillCoreCom:>reset:>"),this.setStatus(r.Normal),(0,p.clearCount)(this.count_index))}},{key:"disable",value:function(){this.setStatus(r.Disable)}},{key:"destroy",value:function(){this.event.emit(_.Destroy),this.setStatus(r.Normal),(0,p.clearCount)(this.count_index),(0,c.default)((0,h.default)(y.prototype),"destroy",this).call(this)}}]),y}(y.ComponentManager);t.SkillCoreCom=k},16307:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.SkillCtorMap=void 0;var r,a=i(n(65549)),o=n(97956),l=n(82993),u=n(88481),s=n(38222),c=n(64952),f=(r={},(0,a.default)(r,o.SkillMap.Freezing,s.FreezeModel),(0,a.default)(r,o.SkillMap.Bomb,u.BombModel),(0,a.default)(r,o.SkillMap.LockFish,c.LockFishModel),(0,a.default)(r,o.SkillMap.Auto,l.AutoShootModel),r);t.SkillCtorMap=f},35716:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.ModelEvent=void 0,t.ModelEvent={Destroy:"destroy"}},55176:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getUserInfo=function(){return m.app.user_info},t.getCurUserId=function(){return m.app.user_info.user_id},t.isCurUser=function(e){return e===m.app.user_info.user_id},t.getCurPlayer=function(){return m.app.game.getCurPlayer()},t.getPlayerById=function(e){return m.app.game.getPlayerById(e)},t.getFishById=function(e){return m.app.game.getFishById(e)},t.getAimFish=function(){var e=m.app.game.getAllFish();return e=(0,d.default)(e).call(e,(function(e){return e.visible&&_(e.pos)})),(e=(0,f.default)(e).call(e,(function(e,t){return t.score-e.score})))[0]},t.detectInScreen=_,t.getCollisionFish=function(e){var t,n=y(m.app.game.fish_list);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.body;if((0,h.detectCollision)(e,r))return i}}catch(e){n.e(e)}finally{n.f()}},t.getCollisionAllFish=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=m.app.game.fish_list,r=y(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(-1===(0,c.default)(n).call(n,a)){var o=a.body,l=a.visible;l&&(0,h.detectCollision)(e,o)&&n.push(a)}}}catch(e){r.e(e)}finally{r.f()}return n},t.modelState=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(68393)),f=i(n(38618)),d=i(n(24183)),h=n(12517),v=n(83922),p=n(97956);function y(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return g(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var m={};function _(e){var t=v.Laya.stage.width,n=(p.Config.PoolWidth-t)/2,i=n+t,r=e.x;return r>n&&r<i}t.modelState=m},74815:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.SettingModel=t.SettingEvent=void 0;var r=i(n(83544)),a=i(n(35526)),o=i(n(25233)),l=i(n(91678)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=n(63711),d=n(4615),h=n(17396);var v={VoiceChange:"voice_change",MusicChange:"music_change"};t.SettingEvent=v;var p=function(e){(0,u.default)(f,e);var t,n,i=(t=f,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,s.default)(this,e)});function f(){var e;return(0,o.default)(this,f),(e=i.call(this)).addCom(new d.EventCom),e}return(0,l.default)(f,[{key:"initUserInfo",value:function(e){var t=e.userId,n=(0,h.getAudio)(t),i=(0,a.default)(n,2),r=i[0],o=i[1];this.voice=r,this.music=o}},{key:"setVoice",value:function(e){e!==this.voice&&(this.voice=e,(0,h.setVoice)(e),this.event.emit(v.VoiceChange,e))}},{key:"setMusic",value:function(e){e!==this.music&&(this.music=e,(0,h.setMusic)(e),this.event.emit(v.MusicChange,e))}},{key:"event",get:function(){return this.getCom(d.EventCom)}}]),f}(f.ComponentManager);t.SettingModel=p},64386:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.UserInfoModel=t.UserInfoEvent=void 0;var r=i(n(83544)),a=i(n(1979)),o=i(n(25233)),l=i(n(91678)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=n(63711),d=n(4615),h=n(17396),v=n(97956),p=n(96148);var y={CurBalanceChange:"cur_balance_change",LangChange:"lang_change",AccountChange:"account_change",NicknameChange:"nick_name_change"};t.UserInfoEvent=y;var g=function(e){(0,u.default)(f,e);var t,n,i=(t=f,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,s.default)(this,e)});function f(){var e;return(0,o.default)(this,f),(e=i.call(this)).account_map=new a.default,e}return(0,l.default)(f,[{key:"init",value:function(){var e=v.Config.lang;this.setLang(e)}},{key:"initUserInfo",value:function(e){var t=e.userId,n=e.showName,i=e.balances;this.setUserId(t),this.setNickname(n),this.setAccount(i)}},{key:"setCurBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e!==this.cur_balance||t)&&(this.cur_balance=e,(0,h.setCacheBalance)(e),this.event.emit(y.CurBalanceChange,e))}},{key:"setLang",value:function(e){e!==this.lang&&(this.lang=e,(0,p.setItem)("local_lang",e),this.event.emit(y.LangChange,e))}},{key:"setUserId",value:function(e){this.user_id=e}},{key:"setNickname",value:function(e){this.nickname=e,this.event.emit(y.NicknameChange,this.nickname)}},{key:"setAccount",value:function(e){var t;for(var n in e)if(e.hasOwnProperty(n)){t||(t=n);var i=e[n],r=i.balance,a=i.imageUrl,o=i.hide;this.account_map.set(n,{num:Number(r),icon:a,hide:o})}this.event.emit(y.AccountChange,this.account_map);var l=(0,h.getCacheBalance)();this.setCurBalance(l||t,!0)}},{key:"event",get:function(){var e=this.getCom(d.EventCom);return e||(e=new d.EventCom,this.addCom(e)),e}}]),f}(f.ComponentManager);t.UserInfoModel=g},17396:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.getCacheBalance=function(){var e=(0,r.getCurUserId)();return(0,a.getItem)("".concat(e,":balance"))},t.setCacheBalance=function(e){if(void 0!==e){var t=(0,r.getCurUserId)();return(0,a.setItem)("".concat(t,":balance"),e)}},t.getAudio=function(e){var t=(0,a.getItem)("".concat(e,":voice")),n=(0,a.getItem)("".concat(e,":music")),r=n?Number(n):.5,o=t?Number(t):.5;return i.AudioCtrl.setVoice(o),i.AudioCtrl.setMusic(r),[o,r]},t.setVoice=function(e){var t=(0,r.getCurUserId)();i.AudioCtrl.setVoice(e),(0,a.setItem)("".concat(t,":voice"),e+"")},t.setMusic=function(e){var t=(0,r.getCurUserId)();i.AudioCtrl.setMusic(e),(0,a.setItem)("".concat(t,":music"),e+"")},t.getCurrencyIcon=function(e){var t;return null===(t=(0,r.getUserInfo)().account_map.get(e))||void 0===t?void 0:t.icon};var i=n(8360),r=n(55176),a=n(96148)},84746:(e,t,n)=>{"use strict";var i=n(30038)(n(92389));Math.log2=i.default||function(e){return Math.log(e)*Math.LOG2E}},4749:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.ui=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(97641)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=n(18019),d=n(59314),h=n(61711),v=n(78554),p=n(85961),y=n(57250),g=n(15403),m=n(59717),_=n(15052),k=n(40373),b=n(91593),w=n(60736),S=n(85009),x=n(26420),C=n(49106);function I(e){var t=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=(0,r.default)(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var M,E=d.ClassUtils.regClass;t.ui=M,function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[h.Label,v.Box,p.Button,y.Dialog,g.Sprite,m.Image],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/alert")}}]),n}(y.Dialog);e.alertUI=t,E("ui.pop.alert.alertUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[h.Label,m.Image,p.Button,y.Dialog,v.Box,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/buyBullet")}}]),n}(y.Dialog);e.buyBulletUI=n,E("ui.pop.alert.buyBulletUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,m.Image,h.Label,y.Dialog],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/tip")}}]),n}(y.Dialog);e.tipUI=i,E("ui.pop.alert.tipUI",i);var r=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[m.Image,h.Label,y.Dialog],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/topTip")}}]),n}(y.Dialog);e.topTipUI=r,E("ui.pop.alert.topTipUI",r);var s=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[h.Label,y.Dialog,v.Box,g.Sprite,m.Image,p.Button],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/voice")}}]),n}(y.Dialog);e.voiceUI=s,E("ui.pop.alert.voiceUI",s);var d=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,_.ProgressBar,p.Button],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/voiceProgress")}}]),n}(f.Scene);e.voiceProgressUI=d,E("ui.pop.alert.voiceProgressUI",d)})((t=e.pop||(e.pop={})).alert||(t.alert={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,p.Button,h.Label,y.Dialog],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/guide/GuideDialog")}}]),n}(y.Dialog);e.GuideDialogUI=t,E("ui.pop.guide.GuideDialogUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[k.Skeleton,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/guide/GuidePointer")}}]),n}(f.Scene);e.GuidePointerUI=n,E("ui.pop.guide.GuidePointerUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[b.HTMLDivElement,w.View,m.Image],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/guide/GuidePrompt")}}]),n}(w.View);e.GuidePromptUI=i,E("ui.pop.guide.GuidePromptUI",i)})((t=e.pop||(e.pop={})).guide||(t.guide={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,h.Label,S.List,y.Dialog,m.Image,p.Button,g.Sprite,x.Tab,C.ViewStack],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/help/help")}}]),n}(y.Dialog);e.helpUI=t,E("ui.pop.help.helpUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[m.Image,h.Label,w.View],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/help/helpItem")}}]),n}(w.View);e.helpItemUI=n,E("ui.pop.help.helpItemUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,m.Image,h.Label,w.View,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/help/skillItem")}}]),n}(w.View);e.skillItemUI=i,E("ui.pop.help.skillItemUI",i)})((t=e.pop||(e.pop={})).help||(t.help={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[k.Skeleton,m.Image,w.View,v.Box,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(w.View);t.uiView={type:"View",props:{width:119,height:119},compId:2,child:[{type:"Box",props:{y:-1,x:-1},compId:18,child:[{type:"SkeletonPlayer",props:{y:59,x:58,visible:!1,var:"light",url:"image/pop/lottery/exchange_circle_light.sk",runtime:"laya.ani.bone.Skeleton"},compId:15},{type:"Image",props:{y:0,x:-3,width:128,skin:"image/pop/lottery/lottery_item_bg.png",height:128},compId:16,child:[{type:"Sprite",props:{y:-16,x:-16,texture:"image/pop/lottery/lottery_item_light.png"},compId:17}]},{type:"Image",props:{y:60,x:60,width:140,var:"light_circle",skin:"image/pop/lottery/light_circle.png",scaleY:1.1,scaleX:1.1,pivotY:70,pivotX:70,height:140,alpha:.8},compId:21},{type:"SkeletonPlayer",props:{y:61,x:60,width:1,visible:!1,var:"box_ani",url:"image/pop/lottery/box.sk",height:100,runtime:"laya.ani.bone.Skeleton"},compId:22},{type:"Image",props:{y:25,x:22,var:"box_img",skin:"image/pop/lottery/box_normal.png"},compId:26}]}],loadList:["image/pop/lottery/exchange_circle_light.sk","image/pop/lottery/lottery_item_bg.png","image/pop/lottery/lottery_item_light.png","image/pop/lottery/light_circle.png","image/pop/lottery/box.sk","image/pop/lottery/box_normal.png"],loadList3D:[]},e.itemUI=t,E("ui.pop.lottery.itemUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[p.Button,h.Label,m.Image,g.Sprite,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(f.Scene);n.uiView={type:"Scene",props:{width:211,height:253},compId:2,child:[{type:"Image",props:{y:0,x:3.5,skin:"image/pop/lottery/lottery_item2_bg.png",sizeGrid:"42,60,37,53"},compId:17,child:[{type:"SkeletonPlayer",props:{y:127,x:101,url:"image/pop/lottery/exchange_item_light.sk",runtime:"laya.ani.bone.Skeleton"},compId:13},{type:"Image",props:{y:144,x:1,width:202,skin:"image/pop/lottery/lottery_item2_banner.png",sizeGrid:"0,127,0,31",height:28},compId:19}]},{type:"Sprite",props:{y:20,x:49,texture:"image/pop/lottery/lottery_item2_nbg.png"},compId:4},{type:"Button",props:{y:177,x:37,var:"btn_buy",stateNum:1,skin:"image/pop/lottery/btn_lottery_bug.png"},compId:5,child:[{type:"Label",props:{y:12,x:65,width:53,var:"price_label",text:"500",height:24,fontSize:24,color:"#174c7d",bold:!0,align:"right"},compId:7},{type:"Image",props:{y:8.5,x:22,width:45,var:"price_tag",skin:"image/pop/lottery/tag_bg.png",height:33},compId:12,child:[{type:"Image",props:{y:4,x:12,width:22,var:"coin_icon",skin:"image/pop/lottery/tag_coin_bg.png",height:22},compId:21}]}]},{type:"Label",props:{y:145,width:156,var:"remain_label",valign:"middle",text:"剩余10/20",strokeColor:"#621615",stroke:2,height:22,fontSize:18,color:"#ffffff",centerX:0,bold:!0,align:"center"},compId:8},{type:"Box",props:{y:44,width:183,height:80,centerX:1},compId:18,child:[{type:"Label",props:{y:15,x:-33,width:145,var:"num_label",valign:"middle",text:"1000",strokeColor:"#692315",stroke:2,pivotY:15,pivotX:73,height:30,fontSize:36,font:"lottery",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:10},{type:"Label",props:{y:69,x:0,width:155,var:"item_type",valign:"middle",text:"BTC",strokeColor:"#692315",stroke:2,pivotY:30,pivotX:73,height:30,fontSize:36,font:"alphabet",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:22}]}],loadList:["image/pop/lottery/lottery_item2_bg.png","image/pop/lottery/exchange_item_light.sk","image/pop/lottery/lottery_item2_banner.png","image/pop/lottery/lottery_item2_nbg.png","image/pop/lottery/btn_lottery_bug.png","image/pop/lottery/tag_bg.png","image/pop/lottery/tag_coin_bg.png"],loadList3D:[]},e.item2UI=n,E("ui.pop.lottery.item2UI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[p.Button,h.Label,m.Image,g.Sprite,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(f.Scene);i.uiView={type:"Scene",props:{width:182,height:253},compId:2,child:[{type:"Image",props:{y:0,x:2,width:182,skin:"image/pop/lottery/lottery_item2_bg.png",sizeGrid:"42,60,37,53",height:253},compId:17,child:[{type:"SkeletonPlayer",props:{y:126.5,x:87.5,url:"image/pop/lottery/exchange_item_light.sk",runtime:"laya.ani.bone.Skeleton"},compId:13},{type:"Image",props:{y:144,x:1,width:173,skin:"image/pop/lottery/lottery_item2_banner.png",sizeGrid:"0,127,0,31",height:28},compId:19}]},{type:"Sprite",props:{y:22,x:33,texture:"image/pop/lottery/lottery_item2_nbg.png"},compId:4},{type:"Button",props:{y:178,x:22,var:"btn_buy",stateNum:1,skin:"image/pop/lottery/btn_lottery_bug.png"},compId:5,child:[{type:"Label",props:{y:12,x:65,width:51,var:"price_label",text:"500",height:24,fontSize:24,color:"#174c7d",bold:!0,align:"right"},compId:7},{type:"Image",props:{y:8.5,x:22,width:45,var:"price_tag",skin:"image/pop/lottery/tag_bg.png",height:33},compId:12,child:[{type:"Image",props:{y:5,x:13.5,width:20,var:"coin_icon",skin:"image/pop/lottery/tag_coin_bg.png",height:20},compId:21}]}]},{type:"Label",props:{y:145,width:156,var:"remain_label",valign:"middle",text:"剩余10/20",strokeColor:"#621615",stroke:2,height:22,fontSize:18,color:"#ffffff",centerX:4,bold:!0,align:"center"},compId:8},{type:"Box",props:{y:45,width:183,height:80,centerX:-1},compId:18,child:[{type:"Label",props:{y:15,x:-33,width:145,var:"num_label",valign:"middle",text:"1000",strokeColor:"#692315",stroke:2,pivotY:15,pivotX:73,height:30,fontSize:36,font:"lottery",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:10},{type:"Label",props:{y:69,x:0,width:155,var:"item_type",valign:"middle",text:"BTC",strokeColor:"#692315",stroke:2,pivotY:30,pivotX:73,height:30,fontSize:36,font:"alphabet",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:23}]}],loadList:["image/pop/lottery/lottery_item2_bg.png","image/pop/lottery/exchange_item_light.sk","image/pop/lottery/lottery_item2_banner.png","image/pop/lottery/lottery_item2_nbg.png","image/pop/lottery/btn_lottery_bug.png","image/pop/lottery/tag_bg.png","image/pop/lottery/tag_coin_bg.png"],loadList3D:[]},e.item2fiveUI=i,E("ui.pop.lottery.item2fiveUI",i);var r=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[h.Label,p.Button,m.Image,g.Sprite,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(f.Scene);r.uiView={type:"Scene",props:{width:877,height:230},compId:2,child:[{type:"Image",props:{y:0,x:0,width:877,skin:"image/pop/lottery/lottery_item2_bg.png",sizeGrid:"23,76,31,60",height:240},compId:17},{type:"Sprite",props:{y:3,x:66,texture:"image/pop/lottery/money_bg.png"},compId:19,child:[{type:"SkeletonPlayer",props:{y:156,x:165,url:"image/pop/lottery/exchange_item_light.sk",scaleY:-1,runtime:"laya.ani.bone.Skeleton"},compId:24},{type:"SkeletonPlayer",props:{y:86,x:165,url:"image/pop/lottery/exchange_item_light.sk",runtime:"laya.ani.bone.Skeleton"},compId:13},{type:"Sprite",props:{y:58,x:109,texture:"image/pop/lottery/lottery_item2_nbg.png"},compId:4},{type:"Box",props:{y:81,width:210,height:71,centerX:-1},compId:18,child:[{type:"Label",props:{y:15,x:-33,width:145,var:"num_label",valign:"middle",text:"1000",strokeColor:"#692315",stroke:2,pivotY:15,pivotX:73,height:30,fontSize:36,font:"lottery",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:10},{type:"Label",props:{y:69,x:0,width:155,var:"item_type",valign:"middle",text:"BTC",strokeColor:"#692315",stroke:2,pivotY:30,pivotX:73,height:30,fontSize:36,font:"alphabet",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:26}]}]},{type:"Box",props:{y:59,x:391,width:475,height:133},compId:25,child:[{type:"Button",props:{y:74,x:168,var:"btn_buy",stateNum:1,skin:"image/pop/lottery/btn_lottery_bug.png"},compId:5,child:[{type:"Label",props:{y:12,x:65,width:51,var:"price_label",text:"500",height:24,fontSize:24,color:"#174c7d",bold:!0,align:"right"},compId:7},{type:"Image",props:{y:7.5,x:22,width:45,var:"price_tag",skin:"image/pop/lottery/tag_bg.png",height:33},compId:22,child:[{type:"Image",props:{y:5,x:13.5,width:20,var:"coin_icon",skin:"image/pop/lottery/tag_coin_bg.png",height:20},compId:23}]}]},{type:"Image",props:{y:0,x:97,width:280,skin:"image/pop/lottery/remain_bg.png",sizeGrid:"10,21,10,23",height:43},compId:21,child:[{type:"Label",props:{y:10,x:7,width:266,var:"remain_label",valign:"middle",text:"剩余: 10/20",height:22,fontSize:24,color:"#fdf3cf",bold:!0,align:"center"},compId:8}]}]}],loadList:["image/pop/lottery/lottery_item2_bg.png","image/pop/lottery/money_bg.png","image/pop/lottery/exchange_item_light.sk","image/pop/lottery/lottery_item2_nbg.png","image/pop/lottery/btn_lottery_bug.png","image/pop/lottery/tag_bg.png","image/pop/lottery/tag_coin_bg.png","image/pop/lottery/remain_bg.png"],loadList3D:[]},e.item2oneUI=r,E("ui.pop.lottery.item2oneUI",r);var s=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[p.Button,h.Label,m.Image,g.Sprite,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/lottery/item2two")}}]),n}(f.Scene);e.item2twoUI=s,E("ui.pop.lottery.item2twoUI",s);var d=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,m.Image,S.List,p.Button,h.Label,_.ProgressBar,y.Dialog,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/lottery/lottery")}}]),n}(y.Dialog);e.lotteryUI=d,E("ui.pop.lottery.lotteryUI",d);var x=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[g.Sprite,h.Label,b.HTMLDivElement,p.Button,y.Dialog],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/lottery/reward")}}]),n}(y.Dialog);e.rewardUI=x,E("ui.pop.lottery.rewardUI",x)})((t=e.pop||(e.pop={})).lottery||(t.lottery={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[S.List,w.View,m.Image,g.Sprite,v.Box,h.Label],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/coinMenu")}}]),n}(w.View);e.coinMenuUI=t,E("ui.pop.record.coinMenuUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[S.List,w.View,m.Image,g.Sprite,v.Box,h.Label],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/dateMenu")}}]),n}(w.View);e.dateMenuUI=n,E("ui.pop.record.dateMenuUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,h.Label,S.List,p.Button,g.Sprite,y.Dialog,m.Image],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/gameRecord")}}]),n}(y.Dialog);e.gameRecordUI=i,E("ui.pop.record.gameRecordUI",i);var r=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[S.List,w.View,m.Image,g.Sprite,v.Box,h.Label],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/itemMenu")}}]),n}(w.View);e.itemMenuUI=r,E("ui.pop.record.itemMenuUI",r);var s=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,h.Label,S.List,p.Button,g.Sprite,y.Dialog,m.Image],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/itemRecord")}}]),n}(y.Dialog);e.itemRecordUI=s,E("ui.pop.record.itemRecordUI",s);var d=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[h.Label,m.Image,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/selectCoinBox")}}]),n}(f.Scene);e.selectCoinBoxUI=d,E("ui.pop.record.selectCoinBoxUI",d);var _=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[h.Label,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/selectItemBox")}}]),n}(f.Scene);e.selectItemBoxUI=_,E("ui.pop.record.selectItemBoxUI",_)})((t=e.pop||(e.pop={})).record||(t.record={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,m.Image,S.List,h.Label,y.Dialog,g.Sprite,p.Button],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/shop/shop")}}]),n}(y.Dialog);e.shopUI=t,E("ui.pop.shop.shopUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[g.Sprite,m.Image,h.Label,C.ViewStack,p.Button,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/shop/shopGunItem")}}]),n}(f.Scene);e.shopGunItemUI=n,E("ui.pop.shop.shopGunItemUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[g.Sprite,m.Image,h.Label,p.Button],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("pop/shop/shopItemItem")}}]),n}(f.Scene);e.shopItemItemUI=i,E("ui.pop.shop.shopItemItemUI",i)})((t=e.pop||(e.pop={})).shop||(t.shop={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,m.Image,k.Skeleton,p.Button,h.Label,b.HTMLDivElement],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/game/game")}}]),n}(f.Scene);e.gameUI=t,E("ui.scenes.game.gameUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,k.Skeleton,m.Image,h.Label,p.Button,w.View],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(w.View);n.uiView={type:"View",props:{y:111,x:111,width:223,runtime:"view/scenes/game/gunBoxView.ts",mouseThrough:!0,mouseEnabled:!0,height:223,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Box",props:{y:114,x:111,width:149,var:"ani_box",pivotY:77.5,pivotX:74,height:149},compId:7,child:[{type:"Box",props:{y:77.5,x:74,width:59,var:"gun_box",height:45},compId:8,child:[{type:"SkeletonPlayer",props:{var:"base",url:"ani/gun/base11.sk",runtime:"laya.ani.bone.Skeleton"},compId:9},{type:"SkeletonPlayer",props:{var:"gun",url:"ani/gun/gun11.sk",runtime:"laya.ani.bone.Skeleton"},compId:10},{type:"SkeletonPlayer",props:{y:0,x:0,var:"light",url:"ani/gun/light11.sk",runtime:"laya.ani.bone.Skeleton"},compId:11},{type:"SkeletonPlayer",props:{y:0,x:0,var:"body",url:"ani/gun/light11.sk",runtime:"laya.ani.bone.Skeleton"},compId:18}]}]},{type:"Box",props:{y:142,x:110,width:177,var:"ctrl_wrap",height:51,anchorY:.5,anchorX:.5},compId:22,child:[{type:"Image",props:{y:26,x:88,width:120,var:"score_box",skin:"image/game/time_bg.png",sizeGrid:"0,20,0,22",height:48,anchorY:.5,anchorX:.5},compId:13,child:[{type:"Label",props:{y:2,x:0,width:120,var:"score_label",valign:"middle",text:"100",height:44,font:"score_num",align:"center"},compId:14}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"ctrl_box"},compId:23,child:[{type:"Button",props:{y:0,x:121,var:"btn_add",stateNum:1,skin:"image/game/btn_add.png"},compId:15},{type:"Button",props:{y:0,x:9,var:"btn_minus",stateNum:1,skin:"image/game/btn_minus.png",left:9},compId:16}]}]}],loadList:["ani/gun/base11.sk","ani/gun/gun11.sk","ani/gun/light11.sk","image/game/time_bg.png","image/game/btn_add.png","image/game/btn_minus.png"],loadList3D:[]},e.gunBoxUI=n,E("ui.scenes.game.gunBoxUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[g.Sprite,v.Box,m.Image,k.Skeleton,w.View],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/game/skillBox")}}]),n}(w.View);e.skillBoxUI=i,E("ui.scenes.game.skillBoxUI",i);var r=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[m.Image,g.Sprite,h.Label,k.Skeleton,w.View],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(w.View);r.uiView={type:"View",props:{width:94,runtime:"view/scenes/game/skillItemView.ts",mouseThrough:!1,mouseEnabled:!0,height:96},compId:2,child:[{type:"Sprite",props:{y:48,x:47,width:94,texture:"image/game/skill_bg.png",pivotY:48,pivotX:47,height:96},compId:3},{type:"Image",props:{y:7,x:8,width:80,var:"skill_icon",skin:"image/game/skill_aim.png",height:80},compId:7},{type:"Sprite",props:{y:8,x:8,width:81,var:"overlay",texture:"image/game/skill_overlay.png",height:79},compId:6},{type:"Label",props:{y:59,x:8,width:78,var:"num_label",valign:"middle",text:"0",strokeColor:"#000",stroke:3,height:28,fontSize:24,color:"#ffffff",bold:!0,align:"right"},compId:5},{type:"SkeletonPlayer",props:{y:48,x:49,width:100,visible:!1,var:"border_light",url:"ani/other/skill_border_light.sk",height:100,runtime:"laya.ani.bone.Skeleton"},compId:8},{type:"Label",props:{y:8,x:9,width:78,visible:!1,var:"shortcut_label",valign:"middle",text:"0",strokeColor:"#000",stroke:3,height:28,fontSize:24,color:"#ffffff",bold:!0,align:"left"},compId:9}],loadList:["image/game/skill_bg.png","image/game/skill_aim.png","image/game/skill_overlay.png","ani/other/skill_border_light.sk"],loadList3D:[]},e.skillItemUI=r,E("ui.scenes.game.skillItemUI",r)})((t=e.scenes||(e.scenes={})).game||(t.game={}))}(M||(t.ui=M={})),function(e){var t;(function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[m.Image,S.List,w.View,g.Sprite,v.Box,h.Label],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/coinMenu")}}]),n}(w.View);e.coinMenuUI=t,E("ui.scenes.hall.coinMenuUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[m.Image,S.List,w.View,g.Sprite,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/flagMenu")}}]),n}(w.View);e.flagMenuUI=n,E("ui.scenes.hall.flagMenuUI",n);var i=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[g.Sprite,v.Box,h.Label,k.Skeleton],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/hall")}}]),n}(f.Scene);e.hallUI=i,E("ui.scenes.hall.hallUI",i);var r=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[v.Box,h.Label,p.Button,m.Image,w.View,g.Sprite],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/header")}}]),n}(w.View);e.headerUI=r,E("ui.scenes.hall.headerUI",r)})((t=e.scenes||(e.scenes={})).hall||(t.hall={}))}(M||(t.ui=M={})),function(e){!function(e){var t=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[_.ProgressBar,y.Dialog,g.Sprite,v.Box],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/loading")}}]),n}(y.Dialog);e.loadingUI=t,E("ui.scenes.loadingUI",t);var n=function(e){(0,u.default)(n,e);var t=I(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).referenceClass=[],e}return(0,o.default)(n,[{key:"createChildren",value:function(){(0,l.default)((0,c.default)(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/test")}}]),n}(f.Scene);e.testUI=n,E("ui.scenes.testUI",n)}(e.scenes||(e.scenes={}))}(M||(t.ui=M={}))},21270:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.sleep=function(e){return new y.default((function(t,n){(0,p.default)((function(){t(e)}),1e3*e)}))},t.fade_in=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return S(this,void 0,void 0,v.default.mark((function r(){var a,o;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A(e);case 2:return a={alpha:0,visible:!0},t=t||700,n=n||"circleOut",o={alpha:i},r.abrupt("return",x({ease_fn:n,end_props:o,sprite:e,start_props:a,time:t}));case 7:case"end":return r.stop()}}),r)})))},t.fade_out=function(e,t,n){return S(this,void 0,void 0,v.default.mark((function i(){var r;return v.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,A(e);case 2:return t=t||700,n=n||"circleOut",r={alpha:0},i.abrupt("return",x({ease_fn:n,end_props:r,sprite:e,time:t}).then((function(){e.visible=!1,e.alpha=1})));case 6:case"end":return i.stop()}}),i)})))},t.scale_in=function(e,t,n){return S(this,void 0,void 0,v.default.mark((function i(){var r,a;return v.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,A(e);case 2:return n=n||"circleIn",t=t||400,r={alpha:.2,scaleX:.2,scaleY:.2,visible:!0},a={alpha:1,scaleX:1,scaleY:1},i.abrupt("return",x({sprite:e,start_props:r,end_props:a,time:t,ease_fn:n}));case 7:case"end":return i.stop()}}),i)})))},t.scale_out=function(e,t,n){return S(this,void 0,void 0,v.default.mark((function i(){var r;return v.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,A(e);case 2:return n=n||"circleIn",t=t||400,r={alpha:.2,scaleX:.2,scaleY:.2},i.abrupt("return",x({sprite:e,end_props:r,time:t,ease_fn:n}).then((function(){C(e,{visible:!1,scaleX:1,scaleY:1,alpha:1})})));case 6:case"end":return i.stop()}}),i)})))},t.slide_up_in=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l,u;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().height,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"circleOut",t=t||200,C(e,{alpha:.2,visible:!0}),o=e.y,l={y:o+i},u={alpha:1,y:o},r.abrupt("return",x({sprite:e,start_props:l,end_props:u,time:t,ease_fn:n}));case 10:case"end":return r.stop()}}),r)})))},t.slide_up_out=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().height,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"circleIn",t=t||200,o=e.y,l={alpha:1,y:o-i},r.next=9,x({sprite:e,end_props:l,time:t,ease_fn:n}).then((function(){C(e,{visible:!1,alpha:1,y:o})}));case 9:case"end":return r.stop()}}),r)})))},t.slide_down_in=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l,u;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().height,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"circleOut",t=t||200,C(e,{alpha:.2,visible:!0}),o=e.y,l={y:o-i},u={alpha:1,y:o},r.next=11,x({sprite:e,start_props:l,end_props:u,time:t,ease_fn:n});case 11:case"end":return r.stop()}}),r)})))},t.slide_down_out=function(e,t,n,i){var r=this;return new y.default((function(a,o){return S(r,void 0,void 0,v.default.mark((function r(){var o;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(o=e.getBounds().height,i=o>50?50:o),r.next=3,A(e);case 3:(0,p.default)((function(){n=n||"circleIn",t=t||200;var r=e.y;return x({sprite:e,end_props:{alpha:0,y:r+i},time:t,ease_fn:n}).then((function(){C(e,{visible:!1,alpha:1,y:r}),a()}))}));case 4:case"end":return r.stop()}}),r)})))}))},t.slide_left_in=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l,u;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().width,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"easeIn",t=t||200,C(e,{alpha:.2,visible:!0}),o=e.x,l={x:o+i},u={alpha:1,x:o},r.abrupt("return",x({sprite:e,start_props:l,end_props:u,time:t,ease_fn:n}));case 10:case"end":return r.stop()}}),r)})))},t.slide_left_out=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().width,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"circleIn",t=t||200,o=e.x,l={alpha:0,x:o+i},r.abrupt("return",x({sprite:e,end_props:l,time:t,ease_fn:n}).then((function(){e.visible=!1,e.alpha=1,e.x=o})));case 8:case"end":return r.stop()}}),r)})))},t.slide_right_in=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l,u;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().width,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"circleOut",t=t||200,C(e,{alpha:.2,visible:!0}),o=e.x,l={x:o-i},u={alpha:1,x:o},r.abrupt("return",x({sprite:e,start_props:l,end_props:u,time:t,ease_fn:n}));case 10:case"end":return r.stop()}}),r)})))},t.slide_right_out=function(e,t,n,i){return S(this,void 0,void 0,v.default.mark((function r(){var a,o,l;return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(a=e.getBounds().width,i=a>50?50:a),r.next=3,A(e);case 3:return n=n||"circleIn",t=t||200,o=e.x,l={alpha:0,x:o-i},r.abrupt("return",x({sprite:e,end_props:l,time:t,ease_fn:n}).then((function(){e.visible=!1,e.alpha=1,e.x=o})));case 8:case"end":return r.stop()}}),r)})))},t.rotate=function(e,t,n,i){var r=Number(e.rotation);return r!=r&&(e.rotation=0),x({sprite:e,end_props:{rotation:t},time:n,ease_fn:i})},t.blink=function(e,t){I({sprite:e,props_arr:[{alpha:1},{alpha:.3}],time:t||300})},t.move=function(e,t,n,i,r){return S(this,void 0,void 0,v.default.mark((function a(){return v.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(e);case 2:return C(e,t),a.abrupt("return",x({sprite:e,end_props:n,time:i,ease_fn:r}));case 4:case"end":return a.stop()}}),a)})))},t.tween=x,t.setStyle=C,t.stepAni=function(e){var t,n=e.props_arr,i=e.time,r=void 0===i?300:i,a=e.loop,o=void 0===a||a,l=e.step_fn,u=n.length,s=!1;return function(){S(this,void 0,void 0,v.default.mark((function e(){var i,a,c;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=v.default.mark((function e(i){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=3;break}return a=i,e.abrupt("return",{v:void 0});case 3:return e.next=5,new y.default((function(e,a){t=(0,p.default)((function(){l(n[i]),e()}),r)}));case 5:o&&i>=u-1&&(i=-1),a=i;case 7:case"end":return e.stop()}}),e)})),a=0;case 2:if(!(a<u)){e.next=10;break}return e.delegateYield(i(a),"t0",4);case 4:if(c=e.t0,"object"!==(0,d.default)(c)){e.next=7;break}return e.abrupt("return",c.v);case 7:a++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))}(),function(){clearTimeout(t),s=!0}},t.tweenLoop=I,t.countDown=function(e,t,n,i){return M({callback:i,caller:e,end_props:{x:0},start_props:{x:t},step:t+1,step_fun:function(e){n(Math.floor(e.x))},time:1e3*t})},t.stopAni=E,t.completeAni=A,t.tweenProps=void 0;var a=r(n(69129)),o=r(n(44790)),l=r(n(53632)),u=r(n(35847)),s=r(n(55846)),c=r(n(85323)),f=r(n(43142)),d=r(n(92765)),h=r(n(35559)),v=r(n(41509)),p=r(n(6113)),y=r(n(82069)),g=i(n(29411)),m=n(26789),_=n(52617),k=n(49663);function b(e){if(void 0===u.default||null==(0,l.default)(e)){if((0,o.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return w(e,t);var i=(0,c.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,s.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?w(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,f=!0,d=!1;return{s:function(){i=(0,a.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,r=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var S=function(e,t,n,i){return new(n||(n=y.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function x(e){var t=this;return new y.default((function(n,i){return S(t,void 0,void 0,v.default.mark((function t(){var r,a,o,l,u,s,c;return v.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.sprite,a=e.start_props,o=e.end_props,!r.destroyed){t.next=3;break}return t.abrupt("return",i());case 3:return t.next=5,A(r);case 5:if(l=e.ease_fn,u=e.time,s=new m.Tween,"string"==typeof(l=l||_.Ease.linearNone)&&(l=_.Ease[l]),C(r,a),0!==u&&!r.is_stop){t.next=15;break}return C(r,o),n(),t.abrupt("return");case 15:for(c in u=u||300,o)r[c]===o[c]&&delete o[c];(0,h.default)(o).length||n(),r.tween=s.to(r,o,u,l,k.Handler.create(r,(function(){r.destroyed?i():n()})));case 19:case"end":return t.stop()}}),t)})))}))}function C(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function I(e){var t=e.sprite,n=e.props_arr,i=e.time,r=e.ease_fn,a=e.is_jump,o=e.end_jump,l=e.step_fn,u=n.length,s=0,c=0;E(t),function e(){if(!t.destroyed){if(a)!function(e,t,n){new y.default((function(i,r){(0,p.default)((function(){C(e,t),i()}),n)}))}(t,n[s],i);else{var f=s+1;f>=u&&(o?(s=0,f=1):f=0);var d=n[s],h=n[f];x({ease_fn:r,end_props:h,sprite:t,start_props:d,time:i}).then((function(){l(c),(0,p.default)(e,0)}))}s++,c++,s>=u&&(s=0)}}()}var M=function(){var e=[];function t(e,t,n){return e+(t-e)*n}function n(t,n){for(var i=e.length-1;i>=0;i--){var r=e[i].caller,a=e[i].off,o=e[i].callback;r===t&&(n&&o&&"function"==typeof o&&o(),a&&"function"==typeof a&&a(),(0,f.default)(e).call(e,i,1))}}return function(i){var r,a=i.callback,o=i.caller,l=i.start_props,u=i.end_props,s=i.time,c=i.time_fun,f=i.step_fun,d=i.step,v=d?s/d:1e3/60,p=s/v;if("string"==typeof c&&(r=_.Ease[c]),r||(r=_.Ease.linearNone),n(o,!0),!l){l={};for(var y=0,m=(0,h.default)(u);y<m.length;y++){var k=m[y];l[k]=o[k]||0}}for(var w=[],S=0,x=(0,h.default)(u);S<x.length;S++){var C=x[S];l[C]!==u[C]&&w.push(C)}if(0!==w.length){var I=g.loop(E,v);e.push({callback:a,caller:o,off:I,step_fun:f});var M=0;return E(1),function(e){n(o,e)}}function E(e){if(o.destroyed||o.is_stop)return n(o);if(M>=p)return n(o,!0);var i={},a=M/p;if(c||(a=r(a,0,1,1)),M>=p){var s,d=b(w);try{for(d.s();!(s=d.n()).done;){var h=s.value;i[h]=u[h]}}catch(e){d.e(e)}finally{d.f()}}else{var v,y=b(w);try{for(y.s();!(v=y.n()).done;){var g=v.value;i[g]=t(l[g],u[g],a)}}catch(e){y.e(e)}finally{y.f()}}if("function"==typeof f)f(i,e);else for(var m in i)i.hasOwnProperty(m)&&(i[m]=t(l[m],u[m],a));M+=e}a&&"function"==typeof a&&a()}}();function E(e){if(e)return"function"==typeof e?e():e.time_out?clearTimeout(e.time_out):void(e.tween&&(e.tween.complete(),e.tween.clear()))}function A(e){return new y.default((function(t,n){e&&(e.tween&&(e.tween.complete(),e.tween.clear(),e.tween=void 0),(0,p.default)((function(){t()})))}))}t.tweenProps=M},98870:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.asyncQue=function(e,t){return new a.default((function(n,i){var r=l.get(e);r||(r={is_running:!1,que:[]},l.set(e,r));var a,o,s=r,c=s.que,f=s.is_running;o={async_fn:t,resolve:n,reject:i},(a=c).length?a[a.length-1]=o:a.push(o),f||u(e)}))},t.clearAsyncQue=function(e){var t=l.get(e),n=t.que.length;t&&(0!==n&&(0,t.que[n-1].resolve)(!0),t.que=[],t.is_running=!1)},t.asyncOnly=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new a.default((function(i,r){var a=s.get(e);if(!a){var o=t();n||(o=o.then((function(t){return s.delete(e),t})).catch((function(t){throw s.delete(e),t}))),a={wait:o,reject:r,resolve:i},s.set(e,a)}a.wait.then((function(e){i(e)})).catch((function(e){r(e)}))}))},t.clearAsyncOnly=function(e){var t=s.get(e);t&&(0,r.default)((function(){var n=t.reject;s.delete(e),n("Async Only be rejected")}))};var r=i(n(6113)),a=i(n(82069)),o=i(n(1979)),l=new o.default;function u(e){var t=l.get(e),n=t.que;if(n.length){t.is_running=!0;var i=n.shift();i.async_fn().then((function(){i.resolve(0===n.length),u(e)})).catch((function(){i.reject(0===n.length),u(e)}))}else t.is_running=!1}var s=new o.default},92268:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.BgMonitor=t.BgMonitorEvent=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(83922),l=n(4615),u={VisibleChange:"VisibleChange"};t.BgMonitorEvent=u;var s=function(){function e(){var t=this;(0,r.default)(this,e),this.event=new l.EventCom,this.visibilityChange=function(){var e=document.visibilityState;"hidden"===e&&t.emitEvent(!1),"visible"===e&&t.emitEvent(!0)},this.init()}return(0,a.default)(e,[{key:"init",value:function(){var e=this;if(null===document||void 0===document?void 0:document.visibilityState)return document.addEventListener("visibilitychange",this.visibilityChange);var t=o.Laya.Browser,n=t.now();if(t.onAndroid){var i=0;this.interval=window.setInterval((function(){var r=t.now();r-n>1e3&&(i>1?(clearInterval(e.interval),e.emitEvent(!1)):i+=1),n=r}),300)}else this.interval=window.setInterval((function(){var i=t.now();i-n>1e3&&(clearInterval(e.interval),e.emitEvent(!1)),n=i}),300)}},{key:"emitEvent",value:function(e){this.event.emit(u.VisibleChange,e)}}]),e}();t.BgMonitor=s},31613:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.startCount=function(e,t,n){var i=o++,r=e/t,s=0,c=function(e){if((s+=e)>=r)return n(0),u(i);n((r-s)/r)};return(0,a.loop)(c,1e3*t,null),n(1),l.set(i,(function(){(0,a.clear)(c,null)})),i},t.clearCount=u;var r=i(n(1979)),a=n(29411),o=0,l=new r.default;function u(e){l.get(e)&&(l.get(e)(),l.delete(e),l.size)}},76542:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getGunSkinMap=function(e,t){var n,i=v.SPRITE.gun[e],r=new f.default,a=k(i);try{for(a.s();!(n=a.n()).done;){var o,l=n.value;"body"===l&&"5"===e?r.set(l,"".concat(e)):r.set(l,(0,c.default)(o="".concat(e)).call(o,t))}}catch(e){a.e(e)}finally{a.f()}return r},t.getGunInfo=function(e){return{pos:h.Coordinates.gun_global_pos[e]}},t.getGunLevelSkinInfo=function(e){for(var t=m.GunInfo.LevelUp,n=m.GunInfo.HoleNum,i=0;i<t.length;i++){if(e<t[i])return{level_skin:"".concat(i+1),hole_num:n[i]}}return{level_skin:"".concat(3),hole_num:n[2]}},t.getSpriteInfo=w,t.getShapeInfo=function(e,t){var n=p.SHAPE[e][t]||p.SHAPE[e][1]||p.SHAPE[e];return n.as&&(n=v.SPRITE[e][n.as]),n},t.getShadowInfo=function(e){return h.Coordinates.shadowPos[e]||h.Coordinates.shadowPos.default},t.getBulletStartPos=function(e,t,n){var i,r=h.Coordinates.bullet_offset[n],a=[],o=t.clone().normalize().scale(30,30),l=t.clone().normalize().rotate(Math.PI/2),u=k(r);try{for(u.s();!(i=u.n()).done;){var s=i.value,c=l.clone().scale(s,s),f=e,v=h.Coordinates.gun_global_pos[f],p=h.Coordinates.guns_inside_pos.origin_point,g=h.Coordinates.guns_inside_pos.start_point,m=void 0,_=void 0;f<=1?(m=g.x-p.x,_=g.y-p.y):(m=p.x-g.x,_=p.y-g.y);var b,w=new d.default.Vector(m,_);b=f<=1?(0,y.vectorToAngle)(t)+Math.PI/2:(0,y.vectorToAngle)(t)-Math.PI/2,w=w.rotate(b),m=v.x+w.x+c.x+o.x,_=v.y+w.y+c.y+o.y,a.push({x:m,y:_})}}catch(e){u.e(e)}finally{u.f()}return a},t.createSprite=function(e,t){var n,i=w(e,t),r=i.type,a=i.path,o=i.pivot||{x:0,y:0};if("DragonBone"===r)n=(0,g.createSkeleton)(a);else if("Frame"===r)n=(0,g.createAnimation)(a);else if(n=(0,g.createImg)(a),!o.x&&!o.y){var l=n.getBounds();o={x:l.width/2,y:l.height/2}}return n.pivot(o.x,o.y),n},t.createGunBox=function(e){var t=new _.Box,n=new _.Box;t.size(149,149),n.pos(74,77),t.addChild(n);var i=(0,g.createSkeleton)("ani/gun/gun".concat(e,"/base")),r=(0,g.createSkeleton)("ani/gun/gun".concat(e,"/light")),a=(0,g.createSkeleton)("ani/gun/gun".concat(e,"/gun"));n.addChildren(i,r,a)},t.isBombFish=function(e){return"9"===e.type};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(77433)),f=i(n(1979)),d=i(n(75110)),h=n(31506),v=n(46483),p=n(52182),y=n(11857),g=n(53815),m=n(67651),_=n(78554);function k(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return b(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function w(e,t){var n=v.SPRITE[e][t];return n.as&&(n=v.SPRITE[e][n.as]),n}},63375:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.Displace=void 0;var a=r(n(56530)),o=r(n(25233)),l=r(n(91678)),u=i(n(75110)),s=n(92898),c=function(){function e(t,n,i,r){(0,o.default)(this,e),this.curve_list=[],this.cur_curve_info={},this.is_reverse=!1,this.total_frame=(0,s.timeToFrame)(t),this.used_frame=(0,s.timeToFrame)(n),this.curve_list=i,this.is_reverse=r}return(0,l.default)(e,[{key:"update",value:function(e){var t=this.is_reverse,n=(this.used_frame=this.used_frame+e)/this.total_frame,i=!1;if(this.radio=n,n<=0)return{visible:!1};if(n>=1)return{is_complete:i=!0};t&&(n=1-n);var r=this.getPointAtRadio(n),o=r.position,l=r.direction;return t&&(l=(0,a.default)(l).call(l)),{visible:!0,pos:o,velocity:l,is_complete:i}}},{key:"getPointAtRadio",value:function(e){var t=this.calcCurCurveInfo(e),n=t.curve,i=t.radio_in_curve,r=t.index,a=n.curve.get(i),o=n.curve.derivative(i);if(n.curve.is_static){var l,s,c=this.curve_list;r-1>=0?(l=c[r-1].curve,s=1):(l=c[r+1].curve,s=0),o=l.derivative(s)}return{position:a,direction:new u.Vector(o.x,o.y)}}},{key:"calcCurCurveInfo",value:function(e){var t=this.cur_curve_info,n=this.curve_list,i=this.is_reverse,r=t.end_radio,a=t.start_radio,o=0;if(!i&&r&&e<r||i&&a&&e>a)return o=(e-a)/(r-a),t.radio_in_curve=o,t;for(var l,u,s=0,c=0;c<n.length;c++)if(!(e>(u=n[c]).radio)){0===(s=c)?(l=0,o=e/u.radio):o=(e-(l=n[c-1].radio))/(u.radio-l);break}return t.radio_in_curve=o,t.index=s,t.start_radio=l,t.end_radio=u.radio,t.curve=u,t}}]),e}();t.Displace=c},92898:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getLineOutPoint=y,t.timeToFrame=function(e){return Math.ceil(60*e)},t.createSpace=g,t.calcNormalLen=m,t.calcFixLen=_,t.createCurvesByPath=k,t.createCurvesByFun=b,t.createOffsetLine=w,t.createBezier=S,t.createLine=x,t.createFishDisplace=function(e){var t,n=e.fishId,i=e.displaceType,a=e.pathNo,l=e.pathList,u=e.usedTime,s=e.totalTime,f=(0,r.default)(e),d=e.funList,v=e.displaceLen;switch(i){case"path":var p;if(a?p=o.PATH[a]:l&&(p=l),!p)return void(0,h.error)("cant find path for no:".concat(a));t=k(p,n);break;default:t=b(d,n,v)}return new c.Displace(s/1e3,u/1e3,t,f)},t.stage_height=t.stage_width=void 0;var r=i(n(56530)),a=i(n(95101)),o=n(26501),l=i(n(86990)),u=i(n(75110)),s=n(76542),c=n(63375),f=n(13921),d=n(15118),h=n(20096),v=l.default.width;t.stage_width=v;var p=l.default.height;function y(e,t){var n,i,r=0;(i=r-e.x)*t.x<0&&(i=(r=l.default.width)-e.x);var a,o,u,s=r*r+(n=i*t.y/t.x+e.y)*n;return(u=o-e.y)*t.y<0&&(u=(o=l.default.height)-e.y),s<(a=u*t.x/t.y+e.x)*a+o*o?{x:r,y:n}:{x:a,y:o}}function g(e,t,n,i){var a,o,l=(0,s.getSpriteInfo)("fish",i),c=l.ani_type;if(l.offset&&"horizon_turn"===c){var f=_(t,i);a=f.fish_len,o=f.derivative}else a=m(e,i),o=new u.default.Vector(n.x,n.y).normalize(),"before"===e&&(o=(0,r.default)(o).call(o));var h=o.scale(a,a),v={x:t.x+h.x,y:t.y+h.y};return{curve:"before"===e?new d.Line(v,t):new d.Line(t,v),length:a}}function m(e,t){var n=(0,s.getSpriteInfo)("fish",t).offset;return n||(0,h.error)("can't find fish sprite offset"),"before"===e?n[0]:n[2]}function _(e,t){var n,i,r=(0,s.getSpriteInfo)("fish",t);return e.y<=0?(n=Math.max(r.offset[0],r.offset[2]),i=new u.default.Vector(0,-1)):e.x>=v?(n=Math.max(r.offset[1],r.offset[3]),i=new u.default.Vector(1,0)):e.y>=p?(n=Math.max(r.offset[0],r.offset[2]),i=new u.default.Vector(0,1)):(n=Math.max(r.offset[1],r.offset[3]),i=new u.default.Vector(-1,0)),{fish_len:n,derivative:i}}function k(e,t){for(var n=[],i=0,r=0;r<e.length;r++){var a=void 0,o=void 0,l=e[r];if(l.length>=6)o=(a=S(l)).curve;else{if(4!==l.length)continue;o=(a=x(l)).curve}if(n.push(a),0===r){var u=g("before",o.get(0),o.derivative(0),t);n.unshift(u),i+=u.length}if(r===e.length-1){var s=g("after",o.get(1),o.derivative(1),t);n.push(s),i+=s.length}i+=a.length}for(var c=0,f=0,d=n;f<d.length;f++){var h=d[f];c+=h.length,h.radio=c/i}return n}function b(e,t,n){for(var i=0,r=[],a=0;a<e.length;a++){var o={},l=e[a],u=l.funNo,s=l.params,c=l.no_enter_leave,d=l.no_enter_leave,h=l.radio,v=f.FUNCTION[u].apply(this,s);o.curve=v;var p=n*h;if(p||"function"!=typeof v.length||(p=v.length(1)),o.length=p||1,i+=o.length,r.push(o),0===a&&!c){var y=g("before",v.get(0),v.derivative(0),t);r.unshift(y),i+=y.length}if(a===e.length-1){if(d){var m=w(o,"after");r.push(m),i+=m.length,v=m.curve}var _=g("after",v.get(1),v.derivative(1),t);r.push(_),i+=_.length}}for(var k=0,b=0,S=r;b<S.length;b++){var x=S[b];k+=x.length,x.radio=k/i}return r}function w(e,t){var n=0;"after"===t&&(n=1);var i=e.curve.get(n),a=e.curve.derivative(n),o=new u.default.Vector(a.x,a.y);"before"===t&&(o=(0,r.default)(o).call(o));var l=y(i,o),s=new d.Line(l,i);return"after"===t&&(s=new d.Line(i,l)),{curve:s,length:s.length(1)}}function S(e){var t=new a.default(e);return{curve:t,length:t.length()}}function x(e){var t={x:e[0],y:e[1]},n={x:e[2],y:e[3]},i=new d.Line(t,n);return{curve:i,length:i.length(1)}}t.stage_height=p},13921:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.FUNCTION=void 0;var i=n(15118),r={1:function(e,t,n,i,r){var a=r[1]-r[0],o=1;return a<0&&(o=-1),{get:function(o){return{x:o=r[0]+o*a,y:e*Math.sin(i+t*o)+n}},derivative:function(n){return n=r[0]+n*a,{x:o,y:o*e*t*Math.cos(i+t*n)}}}},2:function(e,t,n){var i=n[1]-n[0],r=i>0?1:-1,a=Math.abs(i)*t,o={x:e.x-r*t,y:750},l=750-e.y,u=e.y,s=l+a+u,c=[0,l/s,(l+a)/s,1];return{get:function(r){for(var a=0,s=0;s<c.length&&!(r<c[s]);s++)a=s;return r=(r-c[a])/(c[a+1]-c[a]),0===a?{x:o.x,y:750-r*l}:1===a?(r=r*i+n[0],{x:e.x+Math.cos(r)*t,y:e.y+Math.sin(r)*t}):{x:o.x,y:u*(1-r)}},derivative:function(e){for(var t=0,a=0;a<c.length&&!(e<c[a]);a++)t=a;return e=(e-c[t])/(c[t+1]-c[t]),1!==t?{x:0,y:-1}:(e=e*i+n[0],{x:r*Math.cos(Math.PI/2+e),y:r*Math.sin(Math.PI/2+e)})}}},3:function(e,t){return new i.Line(e,t)},4:function(e,t,n){var i=n[1]-n[0],r=i>0?1:-1,a=667+e,o=375+t,l=187.5;return{get:function(e){return e=n[0]+e*i,{x:333.5*Math.cos(e)+a,y:l*Math.sin(e)+o}},derivative:function(e){return e=n[0]+e*i,{x:333.5*-r*Math.sin(e),y:r*l*Math.cos(e)}},length:function(e){return Math.abs(Math.ceil(e*(2*Math.PI*l+584)*i/(2*Math.PI)))}}}};t.FUNCTION=r},15118:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.Line=void 0;var a=r(n(25233)),o=r(n(91678)),l=i(n(75110)),u=function(){function e(t,n){(0,a.default)(this,e),this.is_static=!1,t.x===n.x&&t.y===n.y&&(this.is_static=!0,this.len=0,this.direction=new l.Vector(0,0));var i=t.x,r=t.y,o=n.x,u=n.y-r,s=o-i,c=Math.sqrt(s*s+u*u);this.start_pos=t,this.end_pos=n,this.direction=new l.Vector(s,u).normalize(),this.len=c}return(0,o.default)(e,[{key:"get",value:function(e){var t=e*this.len,n=this.direction.clone().scale(t,t),i=this.start_pos.x,r=this.start_pos.y;return{x:i+n.x,y:r+n.y}}},{key:"derivative",value:function(e){return this.direction}},{key:"length",value:function(e){return this.len}}]),e}();t.Line=u},1633:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.KeyBoardNumber=void 0;var r=i(n(83544)),a=i(n(69129)),o=i(n(44790)),l=i(n(53632)),u=i(n(35847)),s=i(n(55846)),c=i(n(85323)),f=i(n(35559)),d=i(n(88657)),h=i(n(13433)),v=i(n(84048)),p=i(n(47172)),y=i(n(69385)),g=i(n(68393)),m=i(n(25233)),_=i(n(91678)),k=i(n(97641)),b=i(n(89224)),w=i(n(77887)),S=i(n(18127)),x=n(15403),C=n(71877),I=n(78554),M=n(61711),E=n(59717),A=n(83922),L=n(26789),B=n(52617);function T(e){if(void 0===u.default||null==(0,l.default)(e)){if((0,o.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return P(e,t);var i=(0,c.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,s.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?P(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,f=!0,d=!1;return{s:function(){i=(0,a.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,r=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw r}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function D(e){var t=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,S.default)(e);if(t){var a=(0,S.default)(this).constructor;n=(0,r.default)(i,arguments,a)}else n=i.apply(this,arguments);return(0,w.default)(this,n)}}var F={confirm:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAWlBMVEUAAADMQkLLQkLLQkL9Y2PLQkLLQkL9Y2PMQkL9Y2PLQkLLQkLdTk75YGD7YmL9Y2P2Xl77YmL9Y2P9Y2P9Y2PLQkL9Y2PLQkL3Xl7cTU3tWFj5YGDoVVXmVFTAQB7jAAAAFnRSTlMA4qyPiltUU9sGBvr59e3cyl/fplYHf9H6ogAAAJVJREFUKM/lzFkOhCAQRdEHCs5TD1WAuv9ttm00xii1Ae/vSS7Wis/7Ree6DHtZRzelm6Z0XyrpUvY/U7S2QNFSvAEDCfXoJW7QkBTooTzK7CR1CBIH1BLXyIX7qKB9nL2G4TmmMxuUiqd7nVh9Acvs3RWdZ7ZYSpjZB3eysCAnwOaXDgVsfsXcAnul0ao6qFLalCv8AOM4RjeBMUEAAAAAAElFTkSuQmCC",delete:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAb1BMVEUAAADLy8ttbGzMzMzMzMxtbGzMzMxtbGzMzMxtbGzMzMxubW3MzMxtbGxtbGyQj4/MzMxtbGxtbGzMzMzMzMzMzMzMzMzMzMzMzMxwb29tbGzMzMxtbGzBwcGtra2NjIy/vr6goKCPjo6kpKSko6Pen5mzAAAAG3RSTlMA/N2piVtVVAYGA+ParPr54ZSKW1Hz5OPf2quDrJY6AAAAqklEQVQoz9XPSQ6DMBBE0TKEeR4yum0Dyf3PGCARLLA76/ztk0oqrMWhfxNy65z7YYytPpeH8v6L6UlaO6Urz+rwRUPpLATiq5svMTrJ1MHn2EfNcQ3BsYBk+2P+8XvgWEFzrFFxXOGumO0MD+NmUyCg0aUjBUgyetn1SVkCRETG8m4wRBHmWiKatBI7CaUnImqxlDZkrUnxKfKO6EXYSoLCK3cqvSJIVngDsvlU0+yaOfMAAAAASUVORK5CYII=",number:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAeFBMVEUAAADGxsa3t7f///////////////////+3t7e3t7fo6Oi3t7fT09P///////+3t7e6urr///+3t7f///+3t7e3t7f///////////////+3t7e3t7f///+3t7fQ0ND29vb19fX7+/v39/fo6Ojh4eHe3t65ubm4uLiqIy5xAAAAHHRSTlMABeKJVQb64VtV/Prp5NvbrqysppSKW1Hz11xTZZ6wfwAAAKVJREFUKM/d00cSgzAQRNEWOefgIIkM97+hMbhwuUBzAP/tq1nMorFlGrlt8aPbPTdMHNURPxXVH2Q6v0xnG6+q8LcaXJkBmKGaQxMVJ6qQUpzCptiGRbEFTva/3FHaoaW4gUexh4DiAEmv1j6BI9UsH2DapNJJY4C7jNc6Li7WSiHbM7ZSlPsMCjHLofn5d5CzKBj2nrE4Fbs4Yk6m+V/ytczZT1+rJlhgr8lBXAAAAABJRU5ErkJggg=="},N=[{text:"1",skin:"number",x:20,y:15},{text:"2",skin:"number",x:280,y:15},{text:"3",skin:"number",x:545,y:15},{text:"4",skin:"number",x:20,y:125},{text:"5",skin:"number",x:280,y:125},{text:"6",skin:"number",x:545,y:125},{text:"7",skin:"number",x:20,y:235},{text:"8",skin:"number",x:280,y:235},{text:"9",skin:"number",x:545,y:235},{text:"0",skin:"number",x:810,y:15},{text:"00",skin:"number",x:810,y:125},{text:".",skin:"number",x:810,y:235},{text:"",skin:"confirm",x:1070,y:15},{text:"",skin:"delete",x:1070,y:235}],U=C.Event.CLICK,z={config:{caller:null,closeOnSide:!0,shadowAlpha:.3,shadowColor:"#000000",nullMsg:"输入的值不能为空",length:11,float:!1,fixed:4,delTxt:"删除",confirmTxt:"确定",input:function(e){},close:function(e,t){}}},R=function(e){(0,b.default)(n,e);var t=D(n);function n(){var e;return(0,m.default)(this,n),(e=t.call(this)).textValue="",e.firstInput=!1,e.init(),e}return(0,_.default)(n,[{key:"destroy",value:function(){A.Laya.stage.off(A.Laya.Event.RESIZE,this,this.onResize),this.keyBoardMask=null,this.keyBoardPanel=null,this.textValue=null,(0,k.default)((0,S.default)(n.prototype),"destroy",this).call(this,!0)}},{key:"init",value:function(){this.size(A.Laya.stage.width,A.Laya.stage.height),this.zOrder=1e3;var e=new H;e.on("input",this,this.onInput),e.on("exit",this,this.onExit);var t=new O;t.on("exit",this,(function(t){e.exit(t)})),this.keyBoardMask=t,this.keyBoardPanel=e,this.addChildren(t,e),A.Laya.stage.on(A.Laya.Event.RESIZE,this,this.onResize)}},{key:"onExit",value:function(e){this.removeSelf(),z.config.close&&z.config.close.call(z.config.caller,e,"confirm"===e?this.textValue+"":null),this.textValue=""}},{key:"onInput",value:function(e){var t=z.config,n=t.delTxt,i=t.confirmTxt,r=t.nullMsg,a=t.input,o=t.float,l=t.fixed,u=t.length;switch(e){case n:var s=this.textValue.split("");s.pop(),this.textValue=s.join(""),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(r,"#ff0000"),a&&a.call(z.config.caller,this.textValue);break;case i:this.keyBoardPanel.exit("confirm");break;default:if(this.firstInput&&(this.textValue="",this.firstInput=!1),"."===e){var c;if(!0!==o)return;if(""===this.textValue&&(e="0."),-1!==(0,g.default)(c=this.textValue).call(c,"."))return}if(!0===o){var f=this.textValue.split(".")[1];if(f&&f.length>=l)return}if((this.textValue+e).length>u)return;this.textValue=this.textValue+e,this.textValue=this.textValue.replace(/^0+/,""),a&&a.call(z.config.caller,this.textValue),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(r,"#ff0000")}}},{key:"enter",value:function(e,t){var n=this;z.config=(0,y.default)((0,y.default)({},z.config),t),this.textValue=e,this.firstInput=!0,A.Laya.timer.callLater(this,(function(){n.keyBoardMask.update(n.width,n.height,z.config.shadowAlpha,z.config.shadowColor,z.config.closeOnSide),n.keyBoardPanel.enter(n.textValue)})),A.Laya.stage.addChild(this)}},{key:"close",value:function(){this.removeSelf(),this.textValue="",this.keyBoardPanel.exit("force")}},{key:"onResize",value:function(){var e=A.Laya.stage.width,t=A.Laya.stage.height;this.size(e,t),this.keyBoardMask.resize(e,t),this.keyBoardPanel.resize(e,t)}}]),n}(I.Box);t.KeyBoardNumber=R;var O=function(e){(0,b.default)(n,e);var t=D(n);function n(){var e;return(0,m.default)(this,n),(e=t.call(this)).configAlpha=null,e.configColor=null,e.closeOnSide=!1,e.on(U,(0,p.default)(e),(function(){e.closeOnSide&&e.event("exit",["mask",null])})),e}return(0,_.default)(n,[{key:"update",value:function(e,t,n,i,r){this.alpha=this.configAlpha=n,this.configColor=i,this.closeOnSide=r,this.resize(e,t)}},{key:"resize",value:function(e,t){this.size(e,t),this.graphics.clear(),this.graphics.drawRect(0,0,this.width,this.height,this.configColor),this.alpha=this.configAlpha}}]),n}(x.Sprite),G=function(e){(0,b.default)(n,e);var t=D(n);function n(){var e;return(0,m.default)(this,n),(e=t.call(this)).init(),e}return(0,_.default)(n,[{key:"destroy",value:function(){(0,k.default)((0,S.default)(n.prototype),"destroy",this).call(this),this.Mask=null,this.textValue=null,this.originHeight=null}},{key:"init",value:function(){this.originHeight=60;var e=new O;e.update(this.width,this.height,.5,"#000000",!1);var t=new M.Label;t.height=30,t.fontSize=30,t.align="center",this.Mask=e,this.textValue=t,this.addChildren(e,t)}},{key:"update",value:function(e,t){this.textValue.color=t,this.textValue.text=e}},{key:"resize",value:function(e,t){var n=t/1334;this.size(e,this.originHeight*n),this.Mask.resize(this.width,this.height),this.textValue.width=e,this.textValue.bottom=0,this.top=-this.height}}]),n}(I.Box),V=function(e){(0,b.default)(n,e);var t=D(n);function n(e,i){var r;return(0,m.default)(this,n),(r=t.call(this)).init(e,i),r}return(0,_.default)(n,[{key:"destroy",value:function(){(0,k.default)((0,S.default)(n.prototype),"destroy",this).call(this,!0),this.config=null,this.label=null}},{key:"init",value:function(e,t){var n=this;e.width=240,e.height="confirm"===e.skin?210:100,this.config=e,this.skin=F[e.skin],this.sizeGrid="15,15,15,15",this.resize(A.Laya.stage.width,A.Laya.stage.height),this.create(),this.on(U,this,(function(){t(n.config.text)}))}},{key:"create",value:function(){var e=this.config,t=e.text,n=e.skin,i=t;"confirm"===n?i=z.config.confirmTxt:"delete"===n&&(i=z.config.delTxt),this.config.text=i;var r=new M.Label(i);r.color="confirm"===n?"#ffffff":"#1c1c1c",r.font="arial",r.align="center",r.fontSize=40,r.size(this.width,r.fontSize),r.centerY=0,this.label=r,this.addChild(r)}},{key:"enter",value:function(){var e=this.config,t=e.text,n=e.skin,i=t;"confirm"===n?i=z.config.confirmTxt:"delete"===n&&(i=z.config.delTxt),this.config.text=i,this.label.text=i}},{key:"resize",value:function(e,t){var n=e/1334,i=t/1334;this.size(this.config.width*n,this.config.height*i),this.pos(this.config.x*n,this.config.y*i),this.label&&(this.label.width=this.width)}}]),n}(E.Image),H=function(e){(0,b.default)(n,e);var t=D(n);function n(){var e;return(0,m.default)(this,n),(e=t.call(this)).keys=[],e.init(),e}return(0,_.default)(n,[{key:"init",value:function(){var e=A.Laya.stage.height;e=e<750?750:e,this.size(A.Laya.stage.width,e/1334*350),this.bottom=-this.height;var t=new O;t.update(this.width,this.height,.5,"#000000",!1);var n=new G;n.resize(this.width,e),this.inputText=n,this.panelMask=t,this.addChildren(t,n);var i,r=T(N);try{for(r.s();!(i=r.n()).done;){var a,o=i.value;(0,h.default)(this).push(new V(o,(0,d.default)(a=this.onClick).call(a,this)))}}catch(e){r.e(e)}finally{r.f()}this.addChildren.apply(this,(0,v.default)((0,h.default)(this)))}},{key:"onClick",value:function(e){this.event("input",[e])}},{key:"update",value:function(e,t){this.inputText.update(e,t)}},{key:"enter",value:function(e){this.inputText.update(e,"#ffffff"),L.Tween.to(this,{bottom:0},200,B.Ease.cubicOut);var t,n=T((0,h.default)(this));try{for(n.s();!(t=n.n()).done;)t.value.enter()}catch(e){n.e(e)}finally{n.f()}}},{key:"exit",value:function(e){var t=this;"force"!==e?L.Tween.to(this,{bottom:-this.height},150,B.Ease.cubicOut,A.Laya.Handler.create(this,(function(){t.event("exit",[e])}))):this.bottom=-this.height}},{key:"resize",value:function(e,t){var n=(t=t<750?750:t)/1334;this.size(e,350*n),this.panelMask.resize(this.width,this.height),this.inputText.resize(e,t);for(var i=0,r=(0,f.default)((0,h.default)(this));i<r.length;i++){var a=r[i];(0,h.default)(this)[a].resize(e,t)}}}]),n}(I.Box)},62420:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(71877),l=n(83922),u=function(){function e(t,n){(0,r.default)(this,e),this.view=t,this.on_progress=n,this.initEvent()}return(0,a.default)(e,[{key:"initEvent",value:function(){var e=this,t=this.view,n=o.Event.MOUSE_DOWN,i=o.Event.MOUSE_MOVE,r=o.Event.MOUSE_OVER,a=o.Event.MOUSE_OUT,u=o.Event.MOUSE_UP;t.on(n,this,(function(t){e.onClick(t),l.Laya.stage.on(i,e,e.onMouseMove),l.Laya.stage.on(r,e,e.onMouseOut),l.Laya.stage.on(a,e,e.onMouseOut),l.Laya.stage.on(u,e,e.onMouseOut)}))}},{key:"onClick",value:function(e){e.stopPropagation();var t=this.view.box,n=t.width,i=t.getMousePoint().x/n;i>1&&(i=1),i<0&&(i=0),this.setProgress(i)}},{key:"onMouseMove",value:function(e){var t=this.view.box;e.stopPropagation();var n=t.getMousePoint().x/t.width;n>1&&(n=1),n<0&&(n=0),this.setProgress(n)}},{key:"onMouseOut",value:function(e){e.stopPropagation(),l.Laya.stage.offAllCaller(this)}},{key:"setProgress",value:function(e){var t=this.view,n=t.box,i=t.progress_bar,r=t.progress_btn,a=n.width;e!==this.radio&&(this.radio=e,i.value=e,r.x=e*a,e<.1&&(e=0),this.on_progress(e))}},{key:"destroy",value:function(){this.view=void 0,this.on_progress=void 0}}]),e}();t.default=u},88539:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.LayaSlider=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(78554),l=n(28569),u=n(71877),s=n(49663),c=n(26789),f=1/6,d=function(){function e(t,n){(0,r.default)(this,e),this.dom={},this.config={},this.tmp={},this.touch_status="end",this.dom.glr=t,this.initConfig(n),this.init()}return(0,a.default)(e,[{key:"next",value:function(){"end"===this.touch_status&&(this.detectNextShowIndex("right"),this.animateMove())}},{key:"prev",value:function(){"end"===this.touch_status&&(this.detectNextShowIndex("left"),this.animateMove(!1))}},{key:"goto",value:function(e){"end"===this.touch_status&&(this.tmp.next_show_index=e,this.animateMove(!1))}},{key:"initConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config.cur_index=e.origin_index||0,this.config.item_space=e.item_space||10,this.config.animate_time=e.animate_time||500,this.config.pagination=!e.hasOwnProperty("pagination")||e.pagination,e.hasOwnProperty("loop")?this.config.loop=e.loop:this.config.loop=true,this.config.end_call_back=e.end_call_back||null,e.item_width&&(this.config.move_space=e.item_width+this.config.item_space,this.config.move_scope=this.config.move_space*f)}},{key:"init",value:function(){this.initDom(),this.initEvent(),this.config.move_space||(this.config.move_space=this.dom.con.width+this.config.item_space,this.config.move_scope=this.config.move_space*f)}},{key:"initEvent",value:function(){var e=this.dom.list,t=u.Event.MOUSE_DOWN,n=u.Event.MOUSE_MOVE,i=u.Event.MOUSE_UP,r=u.Event.MOUSE_OUT;this.config.pagination&&(this.dom.pagination.selectHandler=s.Handler.create(this,this.paginationHandler,null,!1)),e.on(t,this,this.onTouchStart),e.on(n,this,this.onTouchMove),e.on(i,this,this.onTouchEnd),e.on(r,this,this.onTouchEnd)}},{key:"initDom",value:function(){var e=this.dom.glr;this.dom.con=e.getChildByName("con"),this.dom.list=this.dom.con.getChildByName("list"),this.replaceGlrList(),this.addMask(),this.dom.items=[];for(var t=0;t<this.dom.list.numChildren;t++)this.dom.items.push(this.dom.list.getChildAt(t));var n=this.config.pagination;n&&(this.dom.pagination="boolean"==typeof n?e.getChildByName("pagination"):n)}},{key:"addMask",value:function(){var e=this.dom.con;e.scrollRect=new l.Rectangle(0,0,e.width,e.height)}},{key:"replaceGlrList",value:function(){var e=this.dom,t=e.con,n=e.list,i=new o.Box;i.name="list";for(var r=[],a=0;a<n.numChildren;a++){var l=n.getChildAt(a);l.name="item",l.visible=!0,r.push(l)}for(var u=0;u<r.length;u++)r[u].visible=0===u,i.addChild(r[u]);this.dom.list=i,t.addChild(i),i.space=10,i.cacheAs="none",i.x=n.x,i.y=n.y,t.removeChild(n),n.destroy()}},{key:"paginationHandler",value:function(e,t){if("onEndAnimate"===this.touch_status)return!0;var n;n=this.config.cur_index>e?"left":"right",this.handleMoveEffect(n,e),this.animateMove(t)}},{key:"onTouchStart",value:function(e){var t=this.dom.list;if("onEndAnimate"===this.touch_status)return!0;this.tmp.start_point={x:e.stageX,y:e.stageY},this.tmp.origin_pos={x:t.x},this.touch_status="start"}},{key:"onTouchMove",value:function(e){var t=this.touch_status,n=this.dom.list;if("start"!==t&&"move"!==t)return!0;"start"===t&&(this.touch_status="move"),this.tmp.move_dist={x:e.stageX-this.tmp.start_point.x,y:e.stageY-this.tmp.start_point.y},n.x=this.tmp.origin_pos.x+this.tmp.move_dist.x,this.detectMoveDirection(this.tmp.move_dist.x)}},{key:"detectMoveDirection",value:function(e){var t,n=this.config.loop,i=this.dom.items.length,r=this.config.cur_index;if(e>0)t="left";else{if(!(e<0))return this.tmp.next_show_index=r,!0;t="right"}!n&&(0===r&&"left"===t||r===i-1&&"right"===t)||this.detectNextShowIndex(t)}},{key:"detectNextShowIndex",value:function(e){var t,n=this.config.cur_index,i=this.dom.items.length;(t="left"===e?n-1:n+1)<0?t=i-1:t>=i&&(t=0),this.handleMoveEffect(e,t)}},{key:"handleMoveEffect",value:function(e,t){var n=this.config,i=n.cur_index,r=n.move_space,a=this.dom.items;if(e===this.tmp.move_direction&&t===this.tmp.next_show_index)return!0;this.tmp.move_direction=e,this.tmp.next_show_index=t;for(var o=0;o<a.length;o++)o!==i&&o!==t&&(a[o].x=0,a[o].visible=!1);var l=a[t];l.visible=!0,l.x="left"===e?-r:r}},{key:"onTouchEnd",value:function(){var e,t,n=null===(t=null===(e=this.tmp)||void 0===e?void 0:e.move_dist)||void 0===t?void 0:t.x;return"onEndAnimate"===this.touch_status||("move"===this.touch_status&&n?(n=this.tmp.move_dist.x,Math.abs(n)<this.config.move_scope&&(this.tmp.next_show_index=this.config.cur_index),void 0===this.tmp.next_show_index&&(this.tmp.next_show_index=this.config.cur_index),void this.animateMove()):(this.reset(),!0))}},{key:"animateMove",value:function(e){var t=this.config.end_call_back,n=this.tmp.next_show_index,i=this.config.move_space;this.touch_status="onEndAnimate",this.config.cur_index===n?i=0:(this.config.cur_index=n,"right"===this.tmp.move_direction&&(i=-i));var r=this.dom.list,a={x:i};function o(){this.config.pagination&&(this.dom.pagination.selectedIndex=this.config.cur_index),t&&"function"==typeof t&&t(this.config.cur_index),this.reset()}!1===e?(r.x=i,o.call(this)):c.Tween.to(r,a,this.config.animate_time,null,s.Handler.create(this,o))}},{key:"reset",value:function(){this.resetGlrCon(),this.tmp={},this.touch_status="end"}},{key:"resetGlrCon",value:function(){var e=this.dom,t=e.list,n=e.items,i=this.config.cur_index;t.x=0,n[i].x=0;for(var r=0;r<n.length;r++)r===this.config.cur_index?(n[r].visible=!0,n[r].x=0):n[r].visible=!1}}]),e}();t.LayaSlider=d},43542:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.tween=function(e,t){return new r.default((function(n,i){var r={_val:0,get val(){return this._val},set val(e){this._val=e,t(e)}};a.Tween.to(r,{val:1},e,o.Ease.sineInOut,l.Handler.create(null,(function(){n()})))}))};var r=i(n(82069)),a=n(26789),o=n(52617),l=n(49663)},89785:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.onStageClick=function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new h.Observable((function(t){var a=function(e){if(n){var a,o=e.target,l=y(n);try{for(l.s();!(a=l.n()).done;)if(k(o,a.value))return}catch(e){l.e(e)}finally{l.f()}}t.next(e),i=t,r&&t.complete()};d.Laya.stage.on(p.Event.CLICK,e,a),t.add((function(){d.Laya.stage.off(p.Event.CLICK,e,a)}))}));a.subscribe((function(n){e&&e.destroyed?i&&i.complete():t.call(e,n)}))},t.onNode=function(e,t,n,i){var r,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=new h.Observable((function(n){var o=function(t){!0!==e.is_disable&&(e.is_disable=!0,(0,f.default)((function(){e&&e.destroyed||(e.is_disable=!1)}),a),n.next(t),r=n,i&&n.complete())};e.on(t,e,o),n.add((function(){e.off(t,e,o)}))}));o.pipe((0,v.throttleTime)(a||1e3)).subscribe((function(t){e&&e.destroyed?r&&r.complete():n(t)}))},t.onMouseMove=function(e,t){var n=p.Event.MOUSE_MOVE,i=function(n){var i=e.getMousePoint(),r=i.x,a=i.y;t({x:r,y:a})};e.on(n,e,i),m.push({item:e,off:function(){e.off(n,e,i)}})},t.offMouseMove=function(e){for(var t=m.length-1;t>=0;t--){var n=m[t],i=n.item,r=n.off;i===e&&(r(),(0,c.default)(m).call(m,t,1))}},t.resizeParent=function(e,t,n){var i=e.parent;_(i,t),n&&i.width<n&&(i.width=n)},t.resizeContain=_,t.isClosest=k,t.getRectRadiusPath=function(e,t,n,i,r){return[["moveTo",e+r,t],["lineTo",e+n-r,t],["arcTo",e+n,t,e+n,t+r,r],["lineTo",e+n,t+i-r],["arcTo",e+n,t+i,e+n-r,t+i,r],["lineTo",e+r,t+i],["arcTo",e,t+i,e,t+i-r,r],["lineTo",e,t+r],["arcTo",e,t,e+r,t,r],["closePath"]]};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(43142)),f=i(n(6113)),d=n(83922),h=n(60399),v=n(37816),p=n(71877);function y(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return g(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var m=[];function _(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",i=e.numChildren,r=[],a=0,o=0;o<i;o++){var l=e.getChildAt(o);l.visible&&r.push(l)}for(var u=0;u<r.length;u++){var s=r[u];"horizontal"===n?s.x=a:s.y=a,"horizontal"===n?u!==r.length-1?a+=s.width+t:a+=s.width:u!==r.length-1?a+=s.height+t:a+=s.height}"horizontal"===n?e.width=a:e.height=a}function k(e,t){return!!e&&(e===t||k(e.parent,t))}},96148:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.removeItem=function(e){localStorage.removeItem(e)},t.setItem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n){var i,r,l=24*Number(n)*60*60*1e3;t=(0,o.default)(i=(0,o.default)(r="".concat(t,"|")).call(r,l,"|")).call(i,(0,a.default)())}localStorage.setItem(e,t)},t.getItem=function(e){var t=localStorage.getItem(e);if(!t)return t;var n=t.split("|"),i=(0,r.default)(n,3),o=i[0],l=i[1],u=i[2];if(!l)return o;var s=Number(l),c=Number(u);return(0,a.default)()-c<s?o:(localStorage.removeItem(e),null)};var r=i(n(35526)),a=i(n(83065)),o=i(n(77433))},20096:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.error=t.debug=t.log=void 0;var r=i(n(6113)),a=i(n(88657)),o=n(79079);function l(e){if(!(0,o.getParams)("GodMode"))return function(){};var t=console[e];return t||(t=console.log),(0,a.default)(t).call(t,window.console)}var u=console.log;t.log=u;var s=console.warn;t.debug=s;var c=console.error;t.error=c,(0,r.default)((function(){t.log=u=l(),t.debug=s=l("debug"),t.error=c=l("error")}),0)},11857:(e,t,n)=>{"use strict";var i=n(94354);n(63656)(t,"__esModule",{value:!0}),t.angleToVector=function(e){return new r.Vector(Math.cos(e),Math.sin(e))},t.degreeToVector=function(e){var t=e*Math.PI/180;return{x:Math.cos(t),y:Math.sin(t)}},t.vectorToAngle=a,t.angleToDegree=o,t.vectorToDegree=function(e){return o(a(e))},t.degreeToAngle=function(e){return e*Math.PI/180},t.timeToFrame=function(e){return Math.ceil(60*e)},t.frameToTime=function(e){return Math.ceil(e/60)};var r=i(n(75110));function a(e){return Math.atan2(e.y,e.x)}function o(e){return 180*e/Math.PI}},21042:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.Pagination=void 0;var r=i(n(25233)),a=i(n(91678)),o=function(){function e(){(0,r.default)(this,e)}return(0,a.default)(e,[{key:"updateData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;e===this.item_total_num&&this.item_page_num===t&&this.pagination_num===n||(this.item_total_num=e,this.item_page_num=t,this.pagination_num=n,this.cur_page=0,this.analyse())}},{key:"reset",value:function(){this.item_total_num=0,this.item_page_num=0,this.pagination_num=0,this.cur_page=0}},{key:"next",value:function(){this.has_next&&(this.cur_page+=1,this.analyse())}},{key:"prev",value:function(){this.has_prev&&(this.cur_page-=1,this.analyse())}},{key:"setCurPage",value:function(e){e<0&&(e=0),e>this.page_num-1&&(e=this.page_num-1),this.cur_page=e,this.analyse()}},{key:"rightSpread",value:function(){if(this.has_right_spread){var e=this.cur_page+this.pagination_num;e>this.page_num-1&&(e=this.page_num-1),this.cur_page=e,this.analyse()}}},{key:"leftSpread",value:function(){if(this.has_left_spread){var e=this.cur_page-this.pagination_num;e<0&&(e=0),this.cur_page=e,this.analyse()}}},{key:"analyse",value:function(){var e=this.item_total_num,t=this.item_page_num,n=this.cur_page,i=this.pagination_num,r=Math.ceil(e/t);this.page_num=r;var a=(n+1)*t;a>e&&(a=e);var o=[n*t,a];this.item_range=o;var l=n>0,u=n<r-1;this.has_prev=l,this.has_next=u;var s=n-Math.ceil((i-1)/2);s<0&&(s=0);var c=s+i;c>r&&(s=(c=r)-i)<0&&(s=0);var f=[s,c];this.pagination_range=f;var d=s>1,h=c<r-1;this.has_left_spread=d,this.has_right_spread=h}},{key:"output",value:function(){var e=this.cur_page,t=this.item_range,n=this.has_next,i=this.has_prev,r=this.pagination_range,a=this.has_left_spread,o=this.has_right_spread,l=this.page_num,u=[];if(r[0]>0&&u.push(0),a&&u.push("left_spread"),r)for(var s=r[0];s<r[1];s++)u.push(s);return o&&u.push("right_spread"),r[1]<l&&u.push(l-1),u.length>0&&(u.unshift("prev"),u.push("next")),{cur_page:e,item_range:t,has_next:n,has_prev:i,pagination_arr:u,pagination_range:r,page_num:l}}}]),e}();t.Pagination=o},93069:(e,t,n)=>{"use strict";var i=n(63656),r=n(24823),a=n(24183);i(t,"__esModule",{value:!0}),t.onKeyBoardEvent=function(e){return(0,o.fromEvent)(document.body,"keydown").pipe(a(l)((function(t){return t.keyCode===e})),r(l)((function(e){return e.preventDefault(),e})))},t.onNodeEvent=function(e,t,n){return new o.Observable((function(i){var r=function(e){e.stopPropagation(),i.next(e),n&&i.complete()};e.on(t,e,r),i.add((function(){e.off(t,e,r)}))}))};var o=n(60399),l=n(37816)},65665:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.createTick=function(e){return m||(m=!0,d.Laya.timer.loop(y,null,k)),_++,g.add({fn:e,index:_}),_},t.clearTick=function(e){var t,n=h(g);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.index===e&&g.delete(i)}}catch(e){n.e(e)}finally{n.f()}0===g.size&&(d.Laya.timer.clear(null,k),m=!1,p=0)};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83065)),f=i(n(73718)),d=n(83922);function h(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return v(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p,y=1e3/30,g=new f.default,m=!1,_=0;function k(){var e=2;if(p){var t=(0,c.default)(),n=t-p;e=Math.floor(n/y*2),p=t-(n-e/2*y)}else p=(0,c.default)();var i,r=h(g);try{for(r.s();!(i=r.n()).done;)i.value.fn(e)}catch(e){r.e(e)}finally{r.f()}}},79079:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.isFunc=d,t.callFunc=function(e){if(d(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.apply(void 0,n)}},t.setProps=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},t.changeNum=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",n=h(e);if("add"===t){var i=v(1,n.length-1);return e+i}var r=n[0];return e-v(1,1===r?n.length-2:n.length-1)},t.splitNum=h,t.addZeroToNum=v,t.stopSkeleton=function(e){e.player?e.stop():e.once(f.Event.PLAYED,e,(function(){(0,l.default)((function(){e.stop()}))}))},t.playSkeleton=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.player?e.play.apply(e,n):e.once(f.Event.PLAYED,e,(function(){(0,l.default)((function(){e.play.apply(e,n)}))}))},t.playSkeletonOnce=function(e,t){return new o.default((function(n,i){e.once(f.Event.STOPPED,e,(function(){n()})),e.player?e.play(t,!1):e.once(f.Event.PLAYED,e,(function(){(0,l.default)((function(){e.play(t,!1)}))}))}))},t.utilSkeletonLoadUrl=function(e,t){return new o.default((function(n,i){e.load(t,new c.Handler(e,(function(){n()})))}))},t.createRedFilter=function(){return new u.ColorFilter([.5,.5,.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])},t.createDarkFilter=p,t.createGLowRedFilter=function(){return new s.GlowFilter("#ff0000",10,0,0)},t.createColorFilter=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;if("string"==typeof e){var r=y(e);e=r.r,t=r.g,n=r.b,i=255}var a=[e/=255,0,0,0,0,0,t/=255,0,0,0,0,0,n/=255,0,0,0,0,0,i/=255,0];return new u.ColorFilter(a)},t.hexToRgb=y,t.darkNode=function(e){e.filters=[p()]},t.unDarkNode=function(e){e.filters=null},t.genRandomStr=function(){return Math.random().toString().replace("0.","")},t.getParams=function(e){return r||(r={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,n){return r[t]=n,n}))),r[e]},t.getDateFromNow=function(e){var t=new Date,n=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),i=new Date(n),r=new Date(n);r.setDate(t.getDate()+e),i.setDate(t.getDate()+e+1);var a=r.getMonth()+1,o=r.getDate();return{date_str:g(a)+"-"+g(o),start:r.valueOf(),end:i.valueOf()}},t.formatDate=g;var r,a=i(n(4393)),o=i(n(82069)),l=i(n(6113)),u=n(74138),s=n(42901),c=n(49663),f=n(71877);function d(e){return e&&"function"==typeof e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e<1)return t;var n=e%10,i=(e-n)/10;return t.unshift(n),h(i,t)}function v(e,t){return(t-=1)<0?e:v(e*=10,t)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7,t=1-e,n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];return new u.ColorFilter(n)}function y(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:(0,a.default)(t[1],16),g:(0,a.default)(t[2],16),b:(0,a.default)(t[3],16)}:null}function g(e){return e<10?"0"+e:""+e}},29411:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.loop=function(e,t,n,i){var r=function(){g(e,n)};return y.push({caller:n,delay:t,fun:e,off:r,once:i,then:(0,d.default)()}),m(),r},t.clear=g,t.clearAll=function(e){for(var t=y.length-1;t>=0;t--){e!==y[t].caller||(0,f.default)(y).call(y,t,1)}m()};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(24823)),f=i(n(43142)),d=i(n(83065)),h=n(83922);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=function e(t,n){return n?e(n,t%n):t},y=[];function g(e,t){for(var n=y.length-1;n>=0;n--){var i=y[n],r=i.fun;if(i.caller===t&&r===e)return(0,f.default)(y).call(y,n,1),void m()}}function m(){h.timer.clear(this,_);var e=(0,c.default)(y).call(y,(function(e){return e.delay}));if(e.length){var t=function(e){var t,n,i=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return v(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;t=p(c,t)}}catch(e){i.e(e)}finally{i.f()}return t}(e);h.timer.loop(t,this,_)}}function _(){var e=y.length;if(e)for(var t=(0,d.default)(),n=e-1;n>=0;n--){var i=y[n],r=i.fun,a=i.then,o=i.delay,l=i.once,u=i.off,s=t-a||0;if(!(s<o)){var c=Math.floor(s/o),f=t-(s-c*o);"function"==typeof r&&r(c),l?u():i.then=f}}}},20118:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.AlertRes=t.default=void 0;var r=i(n(83544)),a=i(n(41509)),o=i(n(25233)),l=i(n(91678)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=i(n(82069)),d=n(8360),h=n(39594),v=n(62482),p=n(94643),y=i(n(53746)),g=n(71877),m=n(4749);var _=function(e){(0,u.default)(m,e);var t,n,i=(t=m,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,s.default)(this,e)});function m(){var e;return(0,o.default)(this,m),(e=i.apply(this,arguments)).isModal=!0,e}return(0,l.default)(m,[{key:"onAwake",value:function(){this.initEvent()}},{key:"initEvent",value:function(){var e=this,t=this.btn_confirm,n=this.btn_cancel;t.on(g.Event.CLICK,t,(function(t){t.stopPropagation(),e.close("confirm")})),n.on(g.Event.CLICK,t,(function(t){t.stopPropagation(),e.close("cancel")}))}},{key:"alert",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initLang(),new f.default((function(i,r){var a=n.hide_cancel,o=n.confirm_text,l=t.label,u=t.btn_cancel,s=t.btn_confirm,c=t.btn_confirm_label;l.text=e,t.close_resolve=i,a?(u.visible=!1,s.x=127):(u.visible=!0,s.x=255),o&&(c.text=o)}))}},{key:"onClosed",value:function(e){d.AudioCtrl.play(v.AudioRes.Click);var t=this.close_resolve;t&&t(e),this.close_resolve=void 0}},{key:"initLang",value:function(){var e=(0,h.getLang)(),t=this.title,n=this.btn_confirm_label,i=this.btn_cancel_label,r=p.InternationalTip[e],a=r.tips,o=r.cancel,l=r.confirm;t.text=a,n.text=l,i.text=o}},{key:"zOrder",get:function(){return 100}}],[{key:"alert",value:function(e,t){return n=this,i=void 0,r=void 0,o=a.default.mark((function n(){var i;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d.AudioCtrl.play(v.AudioRes.PopShow),n.next=3,y.default.director.openDialog(m);case 3:return i=n.sent,n.next=6,i.alert(e,t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})),new(r||(r=f.default))((function(e,t){function a(e){try{u(o.next(e))}catch(e){t(e)}}function l(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,l)}u((o=o.apply(n,i||[])).next())}));var n,i,r,o}}]),m}(m.ui.pop.alert.alertUI);t.default=_,t.AlertRes=["pop/alert/alert.json","image/pop/alert/alert_bg_01.png","image/pop/alert/alert_bg_02.png","image/pop/alert/btn_close.png","image/pop/alert/alert_con_bg.png","image/pop/alert/btn_cancel.png","image/pop/alert/btn_confirm.png"]},79882:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getSkillName=M,t.buyItemAlert=E,t.buySkinAlert=function(e,t){return new h.default((function(n,i){var r=(0,p.getLang)(),a=g.InternationalTip[r].bullet,o=g.InternationalTip[r].buySkinTip.replace("$1",e+"").replace("$2",a).replace("$3",t);S.default.alert(o).then((function(e){"confirm"===e?n(!0):i()}))}))},t.default=void 0;var r=i(n(83544)),a=i(n(41509)),o=i(n(77433)),l=i(n(25233)),u=i(n(91678)),s=i(n(97641)),c=i(n(89224)),f=i(n(77887)),d=i(n(18127)),h=i(n(82069)),v=n(75561),p=n(39594),y=n(97956),g=n(94643),m=i(n(53746)),_=n(71877),k=n(55176),b=n(4749),w=n(79079),S=i(n(20118)),x=n(34308),C=i(n(26387));var I=function(e){(0,c.default)(y,e);var t,n,i=(t=y,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.default)(t);if(n){var a=(0,d.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,f.default)(this,e)});function y(){var e;return(0,l.default)(this,y),(e=i.apply(this,arguments)).isModal=!0,e}return(0,u.default)(y,[{key:"onAwake",value:function(){var e=this;(0,p.onLangChange)(this,(function(t){e.initLang(t)})),this.initEvent()}},{key:"initEvent",value:function(){var e=this,t=this.btn_minus,n=this.btn_add,i=this.btn_buy,r=_.Event.CLICK;t.on(r,this,(function(){e.changeNum("minus")})),n.on(r,this,(function(){e.changeNum("add")})),i.on(r,this,(function(){var t=(0,p.getLang)(),n=g.InternationalTip[t].buySuccess,i=e.buy_info,r=i.id,a=i.num,o=i.price;E(a,o,r).then((function(t){t&&(0,x.buyItem)(r,a,o).then((function(){C.default.tip(n),e.close()}))}))})),this.num_label.on(r,this,(function(){v.ctrlState.app.keyboard_number.enter(e.num_label.text,{close:function(t,n){"confirm"===t&&e.setNum(Number(n))}})}))}},{key:"setNum",value:function(e){var t=this.buy_info.price,n=(0,p.getLang)(),i=g.InternationalTip[n].beyondBulletNum,r=(0,k.getCurPlayer)();e*t>r.bullet_num&&(C.default.tip(i),e=Math.floor(r.bullet_num/t)),this.buy_info.num=e,this.num_label.text=e+"",this.setIntro()}},{key:"changeNum",value:function(e){var t=this.num_label.text,n=Number(t),i=t.length-1,r=(0,w.addZeroToNum)(1,i);"minus"===e&&r===n&&(r=(0,w.addZeroToNum)(1,i-1)),"add"===e?n+=r:n-=r,n<1&&(n=1),this.setNum(n)}},{key:"setIntro",value:function(){var e,t,n,i,r=(0,p.getLang)(),a=this.intro,l=this.buy_info,u=g.InternationalTip[r],s=(u.purchase,u.buyBulletCost),c=u.bullet,f=l.price,d=l.num;a.text="en"===r?(0,o.default)(e=(0,o.default)(t="".concat(s," ")).call(t,f*d," ")).call(e,c):(0,o.default)(n=(0,o.default)(i="".concat(s)).call(i,f*d)).call(n,c)}},{key:"initLang",value:function(e){var t=g.InternationalTip[e].purchase,n=this.title,i=this.btn_label;n.text=t,i.text=t,this.setIntro()}},{key:"buy",value:function(e){var t=this.num_label,n=this.icon,i=e.num,r=e.id,a=i+"";t.text=a,n.skin="image/pop/shop/icon/".concat(r,".png"),this.buy_info=e,this.setIntro()}},{key:"destroy",value:function(){(0,p.offLangChange)(this),(0,s.default)((0,d.default)(y.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(e){return t=this,n=void 0,i=void 0,r=a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.director.openDialog({dialog:y,use_exist:!0});case 2:t.sent.buy(e);case 4:case"end":return t.stop()}}),t)})),new(i||(i=h.default))((function(e,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,l)}u((r=r.apply(t,n||[])).next())}));var t,n,i,r}}]),y}(b.ui.pop.alert.buyBulletUI);function M(e){var t=(0,p.getLang)(),n=g.InternationalTip[t],i=n.bomb,r=n.lock,a=n.freeze;switch(e){case y.SkillMap.Bomb:return i;case y.SkillMap.Freezing:return a;case y.SkillMap.LockFish:return r}}function E(e,t,n){return new h.default((function(i,r){var a=(0,p.getLang)(),o=g.InternationalTip[a],l=o.bullet,u=(o.buySuccess,g.InternationalTip[a].buyItemTip.replace("$1",e*t+"").replace("$2",l).replace("$3",e+"").replace("$4",M(n)));S.default.alert(u).then((function(e){"confirm"===e?i(!0):r()}))}))}t.default=I},43157:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(83544)),a=i(n(41509)),o=i(n(25233)),l=i(n(91678)),u=i(n(97641)),s=i(n(89224)),c=i(n(77887)),f=i(n(18127)),d=i(n(82069)),h=i(n(53746)),v=n(4749),p=n(88539),y=n(49663),g=n(74358),m=n(97956),_=n(39594),k=n(94643),b=n(89785),w=n(25371);var S=function(e,t,n,i){return new(n||(n=d.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},x=function(e){(0,s.default)(d,e);var t,n,i=(t=d,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,f.default)(t);if(n){var a=(0,f.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,c.default)(this,e)});function d(){var e;return(0,o.default)(this,d),(e=i.apply(this,arguments)).isModal=!0,e}return(0,l.default)(d,[{key:"onAwake",value:function(){var e=this;(0,_.onLangChange)(this,(function(t){e.initLang(t)})),this.slider_glr=new p.LayaSlider(this.glr);var t=this.skill_list,n=this.fish_list;n.array=[],t.array=[],n.renderHandler=y.Handler.create(this,this.fishListRender,null,!1),t.renderHandler=y.Handler.create(this,this.skillListRender,null,!1),n.array=g.test_fish_list}},{key:"goto",value:function(e){this.slider_glr.goto(e)}},{key:"fishListRender",value:function(e,t){var n=this.times_tpl,i=this.fish_list.array[t],r=i.id,a=i.num,o=i.is_special,l=e.bg,u=e.num_label,s=e.icon;u.text=a?a+n:"",s.skin="image/pop/help/fish".concat(r,".png");var c=o?"":"1";l.skin="image/pop/help/fish_item_bg".concat(c,".png")}},{key:"skillListRender",value:function(e,t){var n=e.skill_icon,i=e.intro_label,r=e.item_box,a=this.skill_list.array[t],o=a.id,l=a.intro;i.text=l,o!==m.SkillMap.Super?n.skin="image/game/skill_".concat(m.SkillNameMap[o],".png"):(r.visible=!1,i.x=10,i.width=i.parent.width)}},{key:"initLang",value:function(e){var t=k.InternationalTip[e],n=t.help,i=t.help1,r=t.help2,a=t.help3,o=t.help31,l=t.help4,u=t.help41,s=t.help42,c=t.help43,f=t.times,d=this.title,h=this.intro1,v=this.intro2,p=this.intro3,y=this.intro31,m=this.intro4,_=this.intro41;this.times_tpl=f,this.fish_list.refresh(),d.text=n,h.text=i,v.text=r,p.text=a,y.text=o,m.text=l,_.text=u+"\n"+s+"\n"+c,this.skill_list.array=(0,g.getSkillIntroList)(e),(0,b.resizeContain)(this.item0_wrap,10,"vertical"),(0,b.resizeContain)(this.item1_wrap,10,"vertical"),(0,b.resizeContain)(this.item2_wrap,10,"vertical")}},{key:"destroy",value:function(){(0,_.offLangChange)(this),(0,u.default)((0,f.default)(d.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return S(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.director.openDialog({dialog:d,use_exist:!0});case 2:t.sent.goto(e);case 4:case"end":return t.stop()}}),t)})))}},{key:"preLoad",value:function(){return S(this,void 0,void 0,a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.loaderManager.preLoad("Dialog","pop/help/help.scene"));case 1:case"end":return e.stop()}}),e)})))}}]),d}(v.ui.pop.help.helpUI);t.default=x},74358:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.getSkillIntroList=function(e){var t=r.InternationalTip[e],n=t.help2Freeze,a=t.help2Lock,o=t.help2Bomb;return[{id:i.SkillMap.Bomb,intro:o},{id:i.SkillMap.Freezing,intro:n},{id:i.SkillMap.LockFish,intro:a}]},t.test_fish_list=void 0;var i=n(97956),r=n(94643);t.test_fish_list=[{id:1,num:2,is_special:300},{id:2,num:3,is_special:300},{id:3,num:5,is_special:300},{id:4,num:8,is_special:300},{id:5,num:10,is_special:300},{id:6,num:15,is_special:300},{id:7,num:20,is_special:300},{id:8,num:30,is_special:300},{id:10,num:50,is_special:300},{id:11,num:80,is_special:300},{id:12,num:100,is_special:300},{id:13,num:150,is_special:300},{id:14,num:200,is_special:300},{id:15,num:250,is_special:300},{id:20,num:300,is_special:300},{id:9,num:0,is_special:300}]},3359:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(35526)),d=i(n(43052)),h=i(n(69385)),v=i(n(84048)),p=i(n(77433)),y=i(n(41509)),g=i(n(25233)),m=i(n(91678)),_=i(n(97641)),k=i(n(89224)),b=i(n(77887)),w=i(n(18127)),S=i(n(82069)),x=n(8360),C=n(24856),I=n(39594),M=n(62482),E=n(94643),A=i(n(53746)),L=n(71877),B=n(49663),T=n(4749),P=n(43542),D=n(89785),F=n(79079),N=n(44085),U=n(34308),z=i(n(91081)),R=n(21270),O=i(n(43157)),G=n(25371),V=n(20096);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var j=function(e,t,n,i){return new(n||(n=S.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},$=function(e){(0,k.default)(T,e);var t,n,i=(t=T,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,w.default)(t);if(n){var r=(0,w.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,b.default)(this,e)});function T(){var e;return(0,g.default)(this,T),(e=i.apply(this,arguments)).is_init=!1,e.isModal=!0,e.renderLottery=function(t,n){var i=t.light,r=t.light_circle,a=t.box_ani,o=t.box_img,l=e.lottery_list.array[n],u=l.cur,s=l.get;if(l.lottery_num,r.visible=!1,i.visible=!1,o.visible=!0,a.visible=!1,u){var c=s?"active":"move";i.visible=!0,"move"===c?r.visible=!0:(o.visible=!1,a.visible=!0,(0,F.playSkeletonOnce)(a,0).then((function(){return(0,F.playSkeletonOnce)(i,c).then((function(){e.showLotteryAward(l)}))})),i.playbackRate(1))}},e}return(0,m.default)(T,[{key:"reloadData",value:function(){return j(this,void 0,void 0,y.default.mark((function e(){var t;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.getLotteryData)();case 2:t=e.sent,this.initData(t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onEnable",value:function(){x.AudioCtrl.play(M.AudioRes.PopShow),this.is_init||this.init(),this.is_init=!0}},{key:"init",value:function(){var e=this,t=this.lottery_list,n=this.btn_lottery;this.lottery_exchange_ctrl,t.array=[],this.lottery_exchange_ctrl=new N.LotteryExchangeCtrl(this.exchange_list),t.renderHandler=new B.Handler(t,this.renderLottery,void 0,!1),(0,D.onNode)(n,L.Event.CLICK,(function(){e.runLottery()}))}},{key:"initData",value:function(e){var t,n,i=e.lottery,c=e.exchange,f=e.lottery_cost,d=e.lottery_num,y=this.lottery_list,g=this.progress,m=this.lottery_remain,_=this.lottery_exchange_ctrl,k=this.btn_lottery,b=[],w=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return H(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?H(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(i);try{for(w.s();!(n=w.n()).done;){var S=n.value;b.push((0,h.default)((0,h.default)({},S),{cur:!1,get:!1}))}}catch(e){w.e(e)}finally{w.f()}var x=b.length;if(x<5){(0,V.log)("test:>lottery:>0",b);for(var C=0;C<5-x;C++)b.push({lottery_id:"xx",lottery_type:"xx",lottery_num:0,cur:!1,get:!1})}var I=d/f;g.value=I>1?1:I,m.text=(0,p.default)(t="".concat(d,"/")).call(t,f),y.array=b,(0,V.log)("test:>lottery:>1",I,b),k.disabled=I<1,_.renderData((0,v.default)(c)),this.remain_info={lottery_num:d,lottery_cost:f}}},{key:"runLottery",value:function(){var e=this,t=this.remain_info,n=this.progress,i=this.lottery_remain,r=this.btn_lottery,a=t.lottery_num,o=t.lottery_cost;a<o||(0,U.runLottery)().then((function(l){return j(e,void 0,void 0,y.default.mark((function e(){var u;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runLotteryAni(l);case 2:a-=o,n.value=a/o,t.lottery_num=a,i.text=(0,p.default)(u="".concat(a,"/")).call(u,o),r.disabled=a<o;case 7:case"end":return e.stop()}}),e,this)})))}))}},{key:"runLotteryAni",value:function(e){var t=this;return new S.default((function(n,i){var r=t.lottery_list,a=t.btn_lottery,o=r.array;a.disabled=!0;var l=(0,d.default)(o).call(o,(function(t){return t.lottery_id===e}))+20,u=!1;(0,P.tween)(3e3,(function(e){var i=Math.round(e*l)%5;if(!u){1===e&&(u=!0);for(var a=0;a<o.length;a++){var s=o[a];s.get=!1,s.cur=a===i}u&&(o[i].get=!0,o[i].cur=!0,(0,R.sleep)(2).then((function(){t.completeLottery(),n()}))),r.refresh()}}))}))}},{key:"completeLottery",value:function(){this.btn_lottery.disabled=!1,clearInterval(this.lottery_interval)}},{key:"showLotteryAward",value:function(e){var t=this,n=e.lottery_type,i=e.lottery_num;"bullet"===n&&(0,C.changeBulletNum)(i),z.default.preEnter({type:n,num:i}).then((function(){t.reloadData()}))}},{key:"destroy",value:function(){var e=this.lottery_exchange_ctrl;this.completeLottery(),(0,I.offLangChange)(this),(0,_.default)((0,w.default)(T.prototype),"destroy",this).call(this),e.destroy(),this.lottery_exchange_ctrl=void 0}},{key:"onAwake",value:function(){var e=this,t=this.btn_help;(0,I.onLangChange)(this,(function(t){e.initLang(t)})),t.on(L.Event.CLICK,this,(function(){O.default.preEnter(2)}))}},{key:"initLang",value:function(e){var t=this.title,n=this.btn_label,i=this.sub_title,r=this.lottery_exchange_ctrl,a=E.InternationalTip[e],o=a.luckyDraw,l=a.redemption;n.text=o,i.text=l,r.refresh(),(0,D.resizeParent)(n,30,142),t.skin="image/international/txt_lottery_".concat(e,".png")}}],[{key:"preEnter",value:function(){var e=A.default.director.openDialog({dialog:T,use_exist:!0}),t=(0,U.getLotteryData)();return S.default.all([e,t]).then((function(e){var t=(0,f.default)(e,2),n=t[0],i=t[1];n.initData(i)}))}},{key:"preLoad",value:function(){return G.loaderManager.preLoad("Dialog","pop/lottery/lottery.scene")}}]),T}(T.ui.pop.lottery.lotteryUI);t.default=$},44085:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.LotteryExchangeCtrl=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(77433)),f=i(n(41509)),d=i(n(35526)),h=i(n(12778)),v=i(n(25233)),p=i(n(91678)),y=i(n(82069)),g=n(4749),m=n(39594),_=n(94643),k=n(97956),b=n(79079),w=n(71877),S=n(34308),x=i(n(91081)),C=n(70600),I=n(17396);function M(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return E(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?E(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var A=function(e,t,n,i){return new(n||(n=y.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},L=function(){function e(t){(0,v.default)(this,e),this.item_list=[],this.data=[],this.view=t,this.clear()}return(0,p.default)(e,[{key:"renderData",value:function(e){return A(this,void 0,void 0,f.default.mark((function t(){var n,i,r,a,o,l,u,s,c,v;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.view,i=e.length,this.data=e,this.clear(),a=10,o=0,1===i?r=g.ui.pop.lottery.item2oneUI:5===i?(r=g.ui.pop.lottery.item2fiveUI,a=5):2===i?(r=g.ui.pop.lottery.item2twoUI,a=50):3===i?(a=80,r=g.ui.pop.lottery.item2UI):r=g.ui.pop.lottery.item2UI,l=M((0,h.default)(e).call(e)),t.prev=8,l.s();case 10:if((u=l.n()).done){t.next=22;break}return s=(0,d.default)(u.value,2),c=s[0],s[1],v=new r,n.addChild(v),this.item_list.push(v),t.next=17,(0,C.afterActive)(v);case 17:v.x=o,o+=v.width,c!==e.length-1&&(o+=a);case 20:t.next=10;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(8),l.e(t.t0);case 27:return t.prev=27,l.f(),t.finish(27);case 30:n.width=o,this.refresh();case 32:case"end":return t.stop()}}),t,this,[[8,24,27,30]])})))}},{key:"refresh",value:function(){var e,t=this.data,n=this.item_list,i=M((0,h.default)(n).call(n));try{for(i.s();!(e=i.n()).done;){var r=(0,d.default)(e.value,2),a=r[0],o=r[1];this.renderItem(o,t[a])}}catch(e){i.e(e)}finally{i.f()}}},{key:"renderItem",value:function(e,t){var n,i,r=this,a=e.price_label,o=e.coin_icon,l=e.remain_label,u=e.num_label,s=e.btn_buy,f=e.item_type,d=(0,m.getLang)(),h=_.InternationalTip[d].Num,v=t.exchange_type,p=t.exchange_id,y=t.exchange_num,g=t.cost_num,S=t.cur_num,x=k.ItemMap[p];x=x?x.toLowerCase():x;var C=y+"";a.text=g+"";var M=(0,I.getCurrencyIcon)(v);o.skin=M,o.filters=[(0,b.createColorFilter)("#64280e")],u.text=C,f.text=v.toUpperCase(),l.text=(0,c.default)(n=(0,c.default)(i="".concat(h,": ")).call(i,S,"/")).call(n,g);var E=1/(C.length/3),A=1/(v.length/4);E=E>1?1:E,A=A>.95?.95:A,u.scale(E,E),f.scale(A,A),s.offAll(),S<g?e.filters=[(0,b.createDarkFilter)(.3)]:(e.filters=null,s.on(w.Event.CLICK,s,(function(){r.runTicketExchange(t)})))}},{key:"runTicketExchange",value:function(e){return A(this,void 0,void 0,f.default.mark((function t(){var n,i,r,a,o,l;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.exchange_id,i=e.cost_num,r=e.cur_num,a=e.exchange_type,t.next=3,(0,S.runTicketExchange)(n);case 3:o=t.sent,l=o.num,x.default.preEnter({type:a,num:l}),e.cur_num=r-i,this.refresh();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"clear",value:function(){this.view.removeChildren(),this.item_list=[]}},{key:"destroy",value:function(){this.item_list=[],this.data=[],this.clear(),this.view=void 0}}]),e}();t.LotteryExchangeCtrl=L},34308:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.getShopInfo=function(){return new h.default((function(e,t){var n=(0,v.getSocket)(p.ServerName.Game);n.event.once(p.ServerEvent.ShopList,(function(t){e(b(t))})),n.send(p.ServerEvent.ShopList)}))},t.genShopInfo=b,t.useGunSkin=function(e){return new h.default((function(t,n){var i=(0,v.getSocket)(p.ServerName.Game);i.event.once(p.ServerEvent.UseSkin,(function(e){t(!0)})),i.send(p.ServerEvent.UseSkin,{skinId:e,userId:g.modelState.app.user_info.user_id})}))},t.buyItem=function(e,t,n){return new h.default((function(i,r){var a=(0,v.getSocket)(p.ServerName.Game);a.event.once(p.ServerEvent.Buy,(function(r,a){if(200!==a)return(0,m.errorHandler)(a);var o=g.modelState.app.user_info.user_id,l=[];t&&l.push({id:e,num:t,type:"skill"}),-n&&l.push({num:-n*t,type:"bullet"}),y.ctrlState.game.changeUserNumInfo({userId:o,change_arr:l}),i(!0)})),a.send(p.ServerEvent.Buy,{itemId:e,num:t})}))},t.getLotteryData=function(){var e=new h.default((function(e,t){var n=(0,v.getSocket)(p.ServerName.Game);n.event.once(p.ServerEvent.LotteryList,(function(t){e(t)})),n.send(p.ServerEvent.LotteryList)})),t=new h.default((function(e,t){var n=(0,v.getSocket)(p.ServerName.Game);n.event.once(p.ServerEvent.ExchangeList,(function(t){e(t)})),n.send(p.ServerEvent.ExchangeList)}));return h.default.all([e,t]).then((function(e){var t=(0,d.default)(e,2),n=t[0],i=t[1],r=n.costNum,a=n.curNum,o=n.list,l=i.list;(0,f.default)(i);var u,s=[],c=[],h=_(o);try{for(h.s();!(u=h.n()).done;){var v=u.value;s.push({lottery_type:v.name,lottery_id:v.id,lottery_num:v.num})}}catch(e){h.e(e)}finally{h.f()}var p,y=_(l);try{for(y.s();!(p=y.n()).done;){var g=p.value;c.push({exchange_id:g.itemId,exchange_type:g.name,exchange_num:g.num,cost_num:g.cost,cur_num:g.curNum})}}catch(e){y.e(e)}finally{y.f()}var m=a/r;return{lottery:s,exchange:c,radio:m=m>1?1:m,lottery_cost:r,lottery_num:a}}))},t.runLottery=function(){return new h.default((function(e,t){var n=(0,v.getSocket)(p.ServerName.Game);n.event.once(p.ServerEvent.Lottery,(function(t,n){200===n&&e(t.id)})),n.send(p.ServerEvent.Lottery)}))},t.runTicketExchange=function(e){return new h.default((function(t,n){var i=(0,v.getSocket)(p.ServerName.Game);i.event.once(p.ServerEvent.TicketExchange,(function(e){t(e)})),i.send(p.ServerEvent.TicketExchange,{itemId:e})}))},t.getItemList=function(e){return new h.default((function(t,n){var i=(0,v.getSocket)(p.ServerName.Hall);i.event.once(p.ServerEvent.GetItemList,(function(e){t(e)})),i.send(p.ServerEvent.GetItemList,(0,c.default)({},e))}))},t.getBulletList=function(e){return new h.default((function(t,n){var i=(0,v.getSocket)(p.ServerName.Hall);i.event.once(p.ServerEvent.GetBulletList,(function(e){t(e)})),i.send(p.ServerEvent.GetBulletList,(0,c.default)({},e))}))},t.getRecentBullet=function(){return new h.default((function(e,t){var n=(0,v.getSocket)(p.ServerName.Hall);n.event.once(p.ServerEvent.GetRecentBullet,(function(t){e(t)})),n.send(p.ServerEvent.GetRecentBullet)}))};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(69385)),f=i(n(19139)),d=i(n(35526)),h=i(n(82069)),v=n(83560),p=n(91917),y=n(75561),g=n(55176),m=n(89945);function _(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return k(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function b(e){var t,n={gun:[],item:[]},i=_(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.type,o=r.item_id,l=r.status,u=r.price,s=r.num,c=r.name;1===a?n.gun.push({id:o,price:u,status:l,name:c}):n.item.push({id:o,price:u,num:s,name:c})}}catch(e){i.e(e)}finally{i.f()}return n}},98623:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(41509)),d=i(n(77433)),h=i(n(24823)),v=i(n(35526)),p=i(n(43052)),y=i(n(25233)),g=i(n(91678)),m=i(n(97641)),_=i(n(89224)),k=i(n(77887)),b=i(n(18127)),w=i(n(82069)),S=n(39594),x=n(94643),C=i(n(53746)),I=n(4749),M=n(79079),E=n(34308),A=n(97090),L=n(3682),B=n(89785),T=n(25371);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var D=[],F=0;F>=-7;F--)D.push((0,M.getDateFromNow)(F));var N=function(e){(0,_.default)(I,e);var t,n,i=(t=I,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,b.default)(t);if(n){var r=(0,b.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,k.default)(this,e)});function I(){var e;return(0,y.default)(this,I),(e=i.apply(this,arguments)).isModal=!0,e}return(0,g.default)(I,[{key:"onAwake",value:function(){var e=this,t=this.select_item,n=this.select_coin,i=this.date_menu,r=this.coin_menu,a=this.btn_search;this.record_list.array=[];var o=new L.SelectCtrl(n,r);o.setRender(this.renderSelectCoin),(0,S.onAccountChange)(this,(function(t){e.renderCoinMenu(t)})),o.init();var l=new L.SelectCtrl(t,i);l.setRender(this.renderSelectItem),l.init(),l.setList(D),l.setCurIndex(0);var u=new A.PaginationCtrl(this.pagination);u.on(A.PaginationEvent.Change,(function(t){var n=t.cur;t.trigger_change&&e.search(n+1)})),this.pagination_ctrl=u,(0,B.onNode)(a,"click",(function(){e.pagination_ctrl.reset(),e.search(1)})),this.select_coin_ctrl=o,this.select_date_ctrl=l,(0,S.onLangChange)(this,(function(t){e.initLang(t)}))}},{key:"onEnable",value:function(){var e=this,t=this.select_coin_ctrl,n=this.select_date_ctrl;(0,E.getRecentBullet)().then((function(i){var r=t.getList(),a=n.getList(),o=(0,p.default)(r).call(r,(function(e){return e.coin_name===i.currency})),l=(0,p.default)(a).call(a,(function(e){return e.start<i.time&&e.end>i.time}));-1===o&&(o=0),-1===l&&(l=0),t.setCurIndex(o),n.setCurIndex(l),e.search(1)}))}},{key:"initLang",value:function(e){var t=x.InternationalTip[e],n=t.gameListTitle,i=t.search,r=t.prize,a=t.cost,o=x.InternationalTip[e].noData,l=this.title,u=this.title_box,s=this.btn_search_label,c=this.empty_tip;l.text=n;for(var f=[a,r],d=0;d<u.numChildren;d++)u.getChildAt(d).text=f[d];s.text=i,c.text=o}},{key:"renderSelectCoin",value:function(e,t){var n=e.coin_icon,i=e.coin_name,r=t.coin_icon,a=t.coin_name;n.skin=r,i.text=a}},{key:"renderSelectItem",value:function(e,t){var n=e.item_name,i=t.date_str;n.text=i}},{key:"renderCoinMenu",value:function(e){var t,n=this.select_coin_ctrl,i=[],c=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return P(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?P(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(c.s();!(t=c.n()).done;){var f=(0,v.default)(t.value,2),d=f[0],h=f[1].icon;i.push({coin_icon:h,coin_name:d})}}catch(e){c.e(e)}finally{c.f()}n.setList(i)}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this.select_coin_ctrl,i=this.select_date_ctrl,r=this.pagination_ctrl,a=this.empty_tip,o=n.getCurData()||{},l=i.getCurData()||{};this.renderRecordList([]);var u=10;(0,E.getBulletList)({currency:o.coin_name,startTime:l.start,endTime:l.end,pageNum:t,pageSize:u}).then((function(t){r.update(t.total,u),e.renderRecordList(t.list),a.visible=!t.list.length}))}},{key:"renderRecordList",value:function(e){this.record_list.array=(0,h.default)(e).call(e,(function(e){var t,n;return{prize:e.prize?(0,d.default)(t="".concat(e.prize,"  ")).call(t,e.currency):0,cost:e.cost?(0,d.default)(n="".concat(e.cost,"  ")).call(n,e.currency):0}}))}},{key:"destroy",value:function(){(0,S.offBindEvent)(this),this.select_coin_ctrl.destroy(),this.select_date_ctrl.destroy(),this.select_coin_ctrl=void 0,this.select_date_ctrl=void 0,(0,m.default)((0,b.default)(I.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){return e=this,t=void 0,n=void 0,i=f.default.mark((function e(){var t;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.default.director.openDialog({dialog:I,use_exist:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})),new(n||(n=w.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}));var e,t,n,i}},{key:"preLoad",value:function(){return T.loaderManager.preLoad("Dialog","pop/record/gameRecord.scene")}}]),I}(I.ui.pop.record.gameRecordUI);t.default=N},95385:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(41509)),d=i(n(35526)),h=i(n(6113)),v=i(n(24823)),p=i(n(25233)),y=i(n(91678)),g=i(n(97641)),m=i(n(89224)),_=i(n(77887)),k=i(n(18127)),b=i(n(82069)),w=n(39594),S=n(94643),x=i(n(53746)),C=n(4749),I=n(79882),M=n(34308),E=n(97090),A=n(3682),L=n(25371);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var T=function(e){(0,m.default)(C,e);var t,n,i=(t=C,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,k.default)(t);if(n){var r=(0,k.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,_.default)(this,e)});function C(){var e;return(0,p.default)(this,C),(e=i.apply(this,arguments)).isModal=!0,e.isInit=!1,e}return(0,y.default)(C,[{key:"onAwake",value:function(){var e,t=this,n=this.select_item,i=this.select_coin,r=this.item_menu,a=this.coin_menu,o=this.btn_search,l=new A.SelectCtrl(i,a);l.setRender(this.renderSelectCoin),(0,w.onAccountChange)(this,(function(e){t.renderCoinMenu(e)})),l.init(),(0,w.onLangChange)(this,(function(e){t.initLang(e)}));var u=new A.SelectCtrl(n,r);u.setRender(this.renderSelectItem),u.init();var s=(0,v.default)(e=["2001","2002","2003"]).call(e,(function(e){return{item_name:(0,I.getSkillName)(e),item_id:e}}));s.unshift({item_name:"ALL",item_id:void 0}),u.setList(s),u.setCurIndex(0);var c=new E.PaginationCtrl(this.pagination);c.on(E.PaginationEvent.Change,(function(e){e.cur;for(var n=e.range,i=t.all_list,r=[],a=n[0];a<n[1];a++)r.push(i[a]);t.renderRecordList(r)})),this.pagination_ctrl=c,o.on("click",null,(function(){t.search()})),(0,h.default)((function(){t.search()})),this.select_coin_ctrl=l,this.select_item_ctrl=u}},{key:"onEnable",value:function(){var e=this;if(this.isInit){var t=this.select_coin_ctrl,n=this.select_item_ctrl;t.setCurIndex(0),n.setCurIndex(0),(0,h.default)((function(){e.search()}))}else this.isInit=!0}},{key:"initLang",value:function(e){var t=S.InternationalTip[e],n=t.itemListTitle,i=t.search,r=t.itemList1,a=t.itemList2,o=t.itemList3,l=t.gameNo,u=t.remainingNum,s=S.InternationalTip[e].noData,c=this.title,f=this.title_box,d=this.btn_search_label,h=this.empty_tip;c.text=n,h.text=s;for(var v=[r,a,o,u,l],p=0;p<f.numChildren;p++)f.getChildAt(p).text=v[p];d.text=i}},{key:"renderSelectCoin",value:function(e,t){var n=e.coin_icon,i=e.coin_name,r=t.coin_icon,a=t.coin_name;r?(i.x=43,n.visible=!0,n.skin=r):(i.x=15,n.visible=!1),i.text=a}},{key:"renderSelectItem",value:function(e,t){var n=e.item_name,i=t.item_name;n.text=i}},{key:"renderCoinMenu",value:function(e){var t=this.select_coin_ctrl,n=[];n.push({coin_icon:"",coin_name:"ALL",coin_id:void 0});var i,c=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return B(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(c.s();!(i=c.n()).done;){var f=(0,d.default)(i.value,2),h=f[0],v=f[1].icon;n.push({coin_icon:v,coin_name:h,coin_id:h})}}catch(e){c.e(e)}finally{c.f()}t.setList(n),t.setCurIndex(0)}},{key:"search",value:function(){var e=this,t=this.empty_tip,n=this.select_coin_ctrl,i=this.select_item_ctrl,r=this.pagination_ctrl,a=n.getCurData()||{},o=(i.getCurData()||{}).item_id,l=a.coin_id;this.renderRecordList([]),(0,M.getItemList)({itemId:o,currency:l}).then((function(n){e.all_list=n.list,t.visible=!n.list.length,r.update(n.list.length,10)}))}},{key:"setList",value:function(e){this.all_list=e,this.pagination_ctrl.update(e.length,9)}},{key:"renderRecordList",value:function(e){this.record_list.array=(0,v.default)(e).call(e,(function(e){return{buy_total:e.buyNum,remain:e.curNum,type:(0,I.getSkillName)(e.itemId+""),give_total:e.prizeNum,no:e.currency}}))}},{key:"destroy",value:function(){(0,w.offBindEvent)(this),this.select_coin_ctrl.destroy(),this.select_item_ctrl.destroy(),this.select_coin_ctrl=void 0,this.select_item_ctrl=void 0,(0,g.default)((0,k.default)(C.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){return e=this,t=void 0,n=void 0,i=f.default.mark((function e(){var t;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.director.openDialog({dialog:C,use_exist:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})),new(n||(n=b.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}));var e,t,n,i}},{key:"preLoad",value:function(){return L.loaderManager.preLoad("Dialog","pop/record/itemRecord.scene")}}]),C}(C.ui.pop.record.itemRecordUI);t.default=T},97090:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.PaginationCtrl=t.PaginationEvent=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(25233)),d=i(n(91678)),h=i(n(89224)),v=i(n(77887)),p=i(n(18127)),y=n(85961),g=n(59717),m=n(61711),_=n(21042),k=n(89785),b=n(4615);function w(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return S(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x={Change:"change"};t.PaginationEvent=x;var C=function(e){(0,h.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,p.default)(t);if(n){var r=(0,p.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,v.default)(this,e)});function r(e){var t;return(0,f.default)(this,r),(t=i.call(this)).view=e,t.init(),t}return(0,d.default)(r,[{key:"init",value:function(){this.view.removeChildren(),this.pagination=new _.Pagination}},{key:"reset",value:function(){this.pagination.reset()}},{key:"update",value:function(e,t){this.pagination.updateData(e,t),this.render(this.pagination.output(),!1)}},{key:"triggerAction",value:function(e){var t=this.pagination;switch(e){case"prev":t.prev();break;case"next":t.next();break;case"left_spread":t.leftSpread();break;case"right_spread":t.rightSpread();break;default:t.setCurPage(e)}this.render(t.output())}},{key:"render",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.view,r=e.pagination_arr,a=e.cur_page,o=e.item_range,l=e.has_prev,u=e.has_next;if(i.removeChildren(),r.length<=1)this.emit(x.Change,{cur:a,range:o,trigger_change:n});else{var s,c=w(r);try{var f=function(){var e=s.value,n=void 0;switch(e){case"prev":(n=I()).disabled=!l;break;case"next":(n=M()).disabled=!u;break;case"left_spread":case"right_spread":n=A();break;default:n=E(e+1,e===a)}n.on("click",null,(function(){t.triggerAction(e)})),i.addChild(n)};for(c.s();!(s=c.n()).done;)f()}catch(e){c.e(e)}finally{c.f()}(0,k.resizeContain)(i,5),i.x=(i.parent.width-i.width)/2,this.emit(x.Change,{cur:a,range:o,trigger_change:n})}}}]),r}(b.EventCom);function I(){var e=new y.Button;e.skin="image/pop/record/btn_pagination1.png",e.stateNum=1,e.label="";var t=new g.Image;return t.skin="image/pop/record/left.png",t.x=23,t.y=8,e.addChild(t),e}function M(){var e=new y.Button;e.skin="image/pop/record/btn_pagination1.png",e.stateNum=1,e.label="";var t=new g.Image;return t.skin="image/pop/record/next.png",t.x=23,t.y=8,e.addChild(t),e}function E(e,t){var n=new y.Button;n.skin="image/pop/record/btn_pagination2.png",n.stateNum=1,n.label="";var i=new m.Label;return i.fontSize=25,i.bold=!0,t?(i.color="#492b00",n.skin="image/pop/record/btn_pagination0.png"):(i.color="#06684a",n.skin="image/pop/record/btn_pagination2.png"),i.align="center",i.valign="middle",i.x=8,i.y=7,i.width=54,i.height=29,i.text=e+"",n.addChild(i),n}function A(){var e=new y.Button;e.skin="image/pop/record/btn_pagination2.png",e.stateNum=1,e.label="";var t=new m.Label;return t.fontSize=25,t.bold=!0,t.color="#06684a",t.align="center",t.valign="middle",t.x=8,t.y=5,t.width=54,t.height=29,t.text="...",e.addChild(t),e}t.PaginationCtrl=C},3682:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.SelectCtrl=void 0;var r=i(n(25233)),a=i(n(91678)),o=n(49663),l=n(89785),u=function(){function e(t,n){(0,r.default)(this,e),this.select_index=-1,this.select_box=t,this.select_list=n}return(0,a.default)(e,[{key:"init",value:function(){var e=this,t=this.select_box,n=this.select_list;t.on("click",null,(function(){n.visible=!n.visible})),(0,l.onStageClick)(t,(function(){n.visible=!1}),[t,n]),n.list.selectHandler=o.Handler.create(null,(function(t){var i;if(n.visible=!1,-1!==t)if(n.list.array.length){e.select_index=t,n.list.selectedIndex=-1;var r=n.list.array[t];null===(i=e.selected_render)||void 0===i||i.call(e,e.select_box,r)}else n.list.selectedIndex=-1}),null,!1),this.list_render&&(n.list.renderHandler=o.Handler.create(null,this.list_render,null,!1))}},{key:"setRender",value:function(e,t){this.selected_render=e,this.list_render=t}},{key:"setListRender",value:function(e){this.selected_render=e}},{key:"setList",value:function(e){this.select_list.list.array=e}},{key:"getList",value:function(){return this.select_list.list.array}},{key:"getCurIndex",value:function(){return this.select_index}},{key:"setCurIndex",value:function(e){this.select_list.list.selectedIndex=e}},{key:"getCurData",value:function(){return this.select_list.list.array[this.select_index]}},{key:"destroy",value:function(){this.select_box=void 0,this.select_list=void 0,this.selected_render=void 0}}]),e}();t.SelectCtrl=u},91081:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(83544)),a=i(n(41509)),o=i(n(25233)),l=i(n(91678)),u=i(n(97641)),s=i(n(89224)),c=i(n(77887)),f=i(n(18127)),d=i(n(82069)),h=i(n(53746)),v=n(4749),p=n(39594),y=n(94643),g=n(71877);var m=function(e){(0,s.default)(v,e);var t,n,i=(t=v,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,f.default)(t);if(n){var a=(0,f.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,c.default)(this,e)});function v(){var e;return(0,o.default)(this,v),(e=i.apply(this,arguments)).isModal=!0,e}return(0,l.default)(v,[{key:"onAwake",value:function(){var e=this;(0,p.onLangChange)(this,(function(t){e.initLang(t)})),this.btn_confirm.on(g.Event.CLICK,this,(function(){e.close()}))}},{key:"initLang",value:function(e){var t=this.btn_confirm_label,n=y.InternationalTip[e].confirm;t.text=n}},{key:"showReward",value:function(e){var t=this;return new d.default((function(n,i){var r=(0,p.getLang)(),a=y.InternationalTip[r],o=a.luckyDrawTip2,l=a.bullet,u=t.item_num,s=t.item_type,c=t.bullet_icon,f=t.bullet_num,d=t.txt_label;t.close_resolve=n;var h=e.type,v=e.num,g="bullet"===h,m=g?l:h,_=v+"";d.innerHTML=g?'<div style="width: 392px;height: 32px;line-height:32px;font-size: 24px;color:#d3d6ff;align:center;"><span>$0</span><span style="margin-right: 10px;">&nbsp;$1&nbsp;</span><span color="#ffdd76">$2</span></div>'.replace("$0",o).replace("$1",m).replace("$2","x".concat(v)):'<div style="width: 392px;height: 32px;line-height:32px;font-size: 24px;color:#d3d6ff;align:center;"><span>$0</span><span color="#ffdd76" style="margin-right: 10px;">&nbsp;$2&nbsp;</span><span>$1</span></div>'.replace("$0",o).replace("$1",m).replace("$2","".concat(v)),u.visible=s.visible=c.visible=f.visible=!1,g?(c.visible=f.visible=!0,f.text=_):(u.visible=s.visible=!0,u.text=_,s.text=h.toUpperCase());var k=1/(h.length/4),b=1/(_.length/4);b=b>1?1:b,k=k>.95?.95:k,u.scale(b,b),s.scale(k,k)}))}},{key:"onClosed",value:function(){var e;null===(e=this.close_resolve)||void 0===e||e.call(this)}},{key:"destroy",value:function(){(0,p.offLangChange)(this),(0,u.default)((0,f.default)(v.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(e){return t=this,n=void 0,i=void 0,r=a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.director.openDialog({dialog:v,use_exist:!0});case 2:return n=t.sent,t.next=5,n.showReward(e);case 5:case"end":return t.stop()}}),t)})),new(i||(i=d.default))((function(e,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,l)}u((r=r.apply(t,n||[])).next())}));var t,n,i,r}}]),v}(v.ui.pop.lottery.rewardUI);t.default=m},37811:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(68393)),l=r(n(69129)),u=r(n(44790)),s=r(n(53632)),c=r(n(35847)),f=r(n(55846)),d=r(n(85323)),h=r(n(83544)),v=r(n(35526)),p=r(n(82069)),y=r(n(25233)),g=r(n(91678)),m=r(n(97641)),_=r(n(89224)),k=r(n(77887)),b=r(n(18127)),w=n(8360),S=n(62482),x=r(n(53746)),C=n(71877),I=n(49663),M=n(4749),E=n(34308),A=n(39594),L=n(94643),B=i(n(79882)),T=n(25371);function P(e){if(void 0===c.default||null==(0,s.default)(e)){if((0,u.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return D(e,t);var i=(0,d.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,f.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,a=!0,o=!1;return{s:function(){i=(0,l.default)(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}!function(e){e[e.NoHave=0]="NoHave",e[e.Have=1]="Have",e[e.Used=2]="Used"}(a||(a={}));var F=function(e){(0,_.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!h.default)return!1;if(h.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,h.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,b.default)(t);if(n){var r=(0,b.default)(this).constructor;e=(0,h.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,k.default)(this,e)});function r(){var e;return(0,y.default)(this,r),(e=i.apply(this,arguments)).isModal=!0,e.is_init=!1,e.renderGunList=function(t,n){var i=e.gun_list.array[n],r=i.gun_name,o=i.gun_id,l=i.gun_status,u=i.gun_price,s=t.name_label,c=t.icon,f=t.stack_btn,d=t.icon_check,h=t.select_bd,v=(0,A.getLang)(),p=L.InternationalTip[v],y=p.use,g=p.inUse;s.text=r,c.skin="image/pop/shop/icon/".concat(o,".png"),f.selectedIndex=l;var m=f.getChildAt(l),_=m.getChildByName("label");d.visible=!1,h.visible=!1,m.offAll(),l===a.NoHave?(_.text=u+"",m.on(C.Event.CLICK,m,(function(){(0,B.buySkinAlert)(u,r).then((function(t){t&&(0,E.buyItem)(o,1,u).then((function(){e.buyGunSkin(o)}))}))}))):l===a.Have?(_.text=y,m.on(C.Event.CLICK,m,(function(){(0,E.useGunSkin)(o).then((function(){e.useGunSkin(o)}))}))):l===a.Used&&(_.text=g,d.visible=!0,h.visible=!0)},e.renderItemList=function(t,n){var i=e.item_list.array[n],r=i.item_name,a=i.item_id,o=i.item_num,l=i.item_price,u=t.name_label,s=t.icon,c=t.num_label,f=t.price_label,d=t.btn_buy;u.text=r,c.text=o+"",s.skin="image/pop/shop/icon/".concat(a,".png"),f.text=l+"",d.offAll(),d.on(C.Event.CLICK,d,(function(){B.default.preEnter({type:r,id:a,num:o,price:l})}))},e}return(0,g.default)(r,[{key:"init",value:function(){var e=this.gun_list,t=this.item_list;e.array=[],t.array=[],e.renderHandler=new I.Handler(e,this.renderGunList,null,!1),t.renderHandler=new I.Handler(t,this.renderItemList,null,!1)}},{key:"onEnable",value:function(){this.is_init||this.init(),this.is_init=!0}},{key:"initData",value:function(e){var t,n=this.gun_list,i=this.item_list,r=e.gun,a=e.item,o=[],l=P(r);try{for(l.s();!(t=l.n()).done;){var u=t.value,s=u.name,c=u.id,f=u.status,d=u.price,h=N(c,s);o.push({gun_name:h,gun_id:c,gun_status:f,gun_price:d})}}catch(e){l.e(e)}finally{l.f()}n.array=o;var v,p=[],y=P(a);try{for(y.s();!(v=y.n()).done;){var g=v.value,m=g.name,_=g.id,k=g.price,b=g.num,w=N(_,m);p.push({item_name:w,item_id:_,item_price:k,item_num:b})}}catch(e){y.e(e)}finally{y.f()}i.array=p}},{key:"useGunSkin",value:function(e){var t,n=P(this.gun_list.array);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.gun_id===e?i.gun_status=a.Used:i.gun_status!==a.NoHave&&(i.gun_status=a.Have)}}catch(e){n.e(e)}finally{n.f()}this.gun_list.refresh()}},{key:"buyGunSkin",value:function(e){var t,n=P(this.gun_list.array);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.gun_id===e){i.gun_status=a.Have;break}}}catch(e){n.e(e)}finally{n.f()}this.gun_list.refresh()}},{key:"onAwake",value:function(){var e=this;(0,A.onLangChange)(this,(function(t){e.initLang(t)}))}},{key:"initLang",value:function(e){var t=this.title,n=this.item_tag,i=this.skin_tag,r=L.InternationalTip[e],a=r.skin,o=r.item;t.skin="image/international/title_shop_".concat(e,".png"),n.text=o,i.text=a}},{key:"destroy",value:function(){(0,A.offLangChange)(this),(0,m.default)((0,b.default)(r.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){w.AudioCtrl.play(S.AudioRes.PopShow);var e=x.default.director.openDialog({dialog:r,use_exist:!0}),t=(0,E.getShopInfo)();return p.default.all([e,t]).then((function(e){var t=(0,v.default)(e,2),n=t[0],i=t[1];n.initData(i)}))}},{key:"preLoad",value:function(){return T.loaderManager.preLoad("Dialog","pop/shop/shop.scene")}}]),r}(M.ui.pop.shop.shopUI);function N(e,t){var n=(0,A.getLang)(),i=L.InternationalTip[n],r=i.skin,a=i.bomb,l=i.freeze,u=i.lock,s="";return-1!==(0,o.default)(t).call(t,"皮肤")&&(s=t.replace("皮肤","")),("2001"===e?u:"2002"===e?l:"2003"===e?a:r)+s}t.default=F},26387:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(41509)),d=i(n(77433)),h=i(n(69385)),v=i(n(25233)),p=i(n(91678)),y=i(n(89224)),g=i(n(77887)),m=i(n(18127)),_=i(n(82069)),k=n(8360),b=n(62482),w=i(n(53746)),S=n(66443),x=n(4749),C=n(31613);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var M=function(e,t,n,i){return new(n||(n=_.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},E={count:2,click_through:!0,auto_hide:!0},A=function(e){(0,y.default)(x,e);var t,n,i=(t=x,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,m.default)(t);if(n){var r=(0,m.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,g.default)(this,e)});function x(){var e;return(0,v.default)(this,x),(e=i.apply(this,arguments)).isModal=!0,e}return(0,p.default)(x,[{key:"onResize",value:function(e,t){this.width=e,this.height=t,this.pivotX=e/2,this.pivotY=t/2}},{key:"tip",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new _.default((function(i,r){var a;if(!e)return i();var o=n=(0,h.default)((0,h.default)({},E),n),l=o.count,u=o.show_count,s=o.click_through,c=o.auto_hide,f=u?(0,d.default)(a="".concat(e," ")).call(a,l):e;t.mouseThrough=s,(0,C.clearCount)(t.count_id),t.count_id=(0,C.startCount)(l,1,(function(n){if(u){var r,a=Math.floor(l*n);t.setTipText((0,d.default)(r="".concat(e," ")).call(r,a))}0===n&&(c&&t.close(),i())})),t.show(),t.setTipText(f)}))}},{key:"analysisSize",value:function(e){var t=this.label,n=this.bg,i=this.inner,c=e.split("\n"),f=c.length,d=100+15*function(e){var t,n=[],i=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return I(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;n.push((0,S.getStringLength)(c))}}catch(e){i.e(e)}finally{i.f()}return Math.max.apply(this,n)}(c),h=50+30*f;d=d>300?d:300,h=h>120?h:120,i.width=t.width=n.width=d,i.height=t.height=n.height=h}},{key:"setTipText",value:function(e){this.label.text=e}}],[{key:"tip",value:function(e,t){return M(this,void 0,void 0,f.default.mark((function n(){return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k.AudioCtrl.play(b.AudioRes.PopShow),n.next=3,w.default.director.openDialog({dialog:x,use_exist:!0},{beforeOpen:function(t){t.analysisSize(e)}});case 3:return this.instance=n.sent,n.next=6,this.instance.tip(e,t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"hide",value:function(){return M(this,void 0,void 0,f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.instance&&this.instance.close();case 1:case"end":return e.stop()}}),e,this)})))}}]),x}(x.ui.pop.alert.tipUI);t.default=A},18773:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(41509)),d=i(n(25233)),h=i(n(91678)),v=i(n(89224)),p=i(n(77887)),y=i(n(18127)),g=i(n(82069)),m=i(n(53746)),_=n(4749),k=n(31613),b=n(66443),w=n(21270),S=n(62482),x=n(8360),C=n(83922);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var M=function(e,t,n,i){return new(n||(n=g.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},E="pop/alert/topTip.scene",A=function(e){(0,v.default)(_,e);var t,n,i=(t=_,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,y.default)(t);if(n){var r=(0,y.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,p.default)(this,e)});function _(){var e;return(0,d.default)(this,_),(e=i.call(this)).isShowEffect=!1,e.isPopupCenter=!1,e.zOrder=100,e}return(0,h.default)(_,[{key:"tip",value:function(e,t){var n=this;return new g.default((function(i,r){if(!e)return i();(0,k.startCount)(t,1,(function(e){0===e&&(n.close(),i())})),n.analysisSize(e),n.setTipText(e)}))}},{key:"analysisSize",value:function(e){var t=this.label,n=this.bg,i=e.split("\n"),c=i.length,f=100+18*function(e){var t,n=[],i=function(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return I(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;n.push((0,b.getStringLength)(c))}}catch(e){i.e(e)}finally{i.f()}return Math.max.apply(this,n)}(i),d=30+30*c;f=f>750?f:750,d=d>70?d:70,this.width=t.width=n.width=f,this.height=t.height=n.height=d,this.x=(C.Laya.stage.width-this.width)/2}},{key:"setTipText",value:function(e){this.label.text=e,(0,w.slide_down_in)(this)}}],[{key:"tip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return M(this,void 0,void 0,f.default.mark((function n(){var i;return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x.AudioCtrl.play(S.AudioRes.PopShow),n.next=3,m.default.director.openDialog(E);case 3:return i=n.sent,this.instance=i,n.next=7,i.tip(e,t);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"hide",value:function(){return M(this,void 0,void 0,f.default.mark((function e(){var t;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null==(t=this.instance)?void 0:t.visible)&&(null==t||t.close());case 2:case"end":return e.stop()}}),e,this)})))}}]),_}(_.ui.pop.alert.topTipUI);t.default=A},76023:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(97641)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=i(n(53746)),d=n(4749),h=i(n(62420)),v=n(55176),p=n(62482),y=n(8360),g=n(39594),m=n(94643);var _=function(e){(0,u.default)(d,e);var t,n,i=(t=d,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,s.default)(this,e)});function d(){var e;return(0,a.default)(this,d),(e=i.apply(this,arguments)).isModal=!0,e.onMusicChange=function(e){v.modelState.app.setting.setMusic(e)},e.onVoiceChange=function(e){v.modelState.app.setting.setVoice(e)},e}return(0,o.default)(d,[{key:"onAwake",value:function(){var e=this;(0,g.onLangChange)(this,(function(t){e.initLang(t)}));var t=v.modelState.app.setting,n=t.voice,i=t.music,r=this.music_progress,a=this.voice_progress,o=new h.default(r,this.onMusicChange),l=new h.default(a,this.onVoiceChange);l.setProgress(n),o.setProgress(i),this.music_ctrl=o,this.voice_ctrl=l}},{key:"destroy",value:function(){var e=this.music_ctrl,t=this.voice_ctrl;(0,g.offLangChange)(this),e.destroy(),t.destroy(),this.music_ctrl.destroy(),this.voice_ctrl.destroy(),(0,l.default)((0,c.default)(d.prototype),"destroy",this).call(this)}},{key:"initLang",value:function(e){var t=this.sound_label,n=this.music_label,i=this.title,r=m.InternationalTip[e],a=r.music,o=r.soundEffects,l=r.volumeSetting;i.text=l,t.text=o,n.text=a}}],[{key:"preEnter",value:function(){y.AudioCtrl.play(p.AudioRes.PopShow),f.default.director.openDialog({dialog:d,use_exist:!0})}}]),d}(d.ui.pop.alert.voiceUI);t.default=_},34340:(e,t,n)=>{"use strict";var i=n(94354),r=n(30038);n(63656)(t,"__esModule",{value:!0}),t.activeAim=function(e){var t=y("aim_big");(0,f.playSkeleton)(t,0,!0),t.pos(e.x,e.y)},t.activeAimFish=function(e,t,n){if(e){var i=y("aim"),r=v.fish,a=e.pos;r&&(r.event.offAllCaller(i),(0,h.log)(r.event.getBind("FishEvent.Move"),r.id)),v.fish=e,v.ori_pos=n,m(),e.visible&&((0,f.playSkeleton)(i,0,!0),i.pos(a.x,a.y)),e.event.on(u.FishEvent.VisibleChange,(function(e){e?((0,f.playSkeleton)(i,0,!0),i.pos(a.x,a.y)):(0,f.stopSkeleton)(i)}),i),e.event.on(u.FishEvent.Move,(function(e){var r=e.pos,a=r.x,o=r.y;i.pos(a,o),t&&g({x:a,y:o},n)}),i),e.event.on(u.FishEvent.Destroy,(function(){p("aim"),e.event.offAllCaller(i)}),i)}},t.stopAim=p,t.createPoints=g;var a=r(n(43142)),o=r(n(1979)),l=n(53815),u=n(77924),s=i(n(75110)),c=n(76542),f=n(79079),d=n(11522),h=n(20096),v={point_list:[],points_temp:[],aim_ani_map:new o.default};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aim",t=v.aim_ani_map,n=v.fish,i=v.point_list,r=t.get(e);r&&(r.stop(),r.removeSelf()),"aim"===e&&(i.length&&(v.ori_pos=void 0,m()),n&&(n.event.offAllCaller(r),v.fish=void 0))}function y(e){var t=v.aim_ani_map,n=d.viewState.ani_wrap,i=t.get(e);return!i||i.destroyed?(i=(0,c.createSprite)("other",e),n.addChild(i),t.set(e,i)):i.parent||n.addChild(i),i}function g(e,t){var n=v.point_list,i=d.viewState.ani_wrap,r=new s.Vector(e.x-t.x,e.y-t.y),o=r.len(),u=r.clone().normalize(),c=Math.ceil(o/50);!function(e){var t=v.point_list,n=v.points_temp,i=t.length;if(i<e)for(var r=i;r<e;r++){var o=n.pop()||(0,l.createImg)("image/game/aim_point");o.pivot(9.5,9.5),t.push(o)}else if(i>e)for(var u=i-1;u>=e;u--){var s=t[u];s.removeSelf(),n.push(s),(0,a.default)(t).call(t,u,1)}}(c);for(var f=0;f<c;f++){var h=n[f],p=u.clone().scale(50*f,50*f),y=t.x+p.x,g=t.y+p.y;h.x=y,h.y=g,i.addChild(h)}}function m(){for(var e=v.point_list,t=v.points_temp,n=e.length-1;n>=0;n--){var i=e[n];i.removeSelf(),t.push(i),(0,a.default)(e).call(e,n,1)}}},42072:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.showAwardCircle=function(e,t,n,i,u){return v(this,void 0,void 0,r.default.mark((function g(){var m=this;return r.default.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new a.default((function(a,g){return v(m,void 0,void 0,r.default.mark((function v(){var g,m,_,k,b;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g=d.viewState.ani_overlay,m=(0,h.createAni)("award_circle"),_=d.viewState.game.upside_down,k=1,_?(m.scaleY=-1,k=-1):m.scaleY=1,e=(0,h.calcPosRange)(e,135,135),o.AudioCtrl.play(l.AudioRes.FlySkill),b=y(e,t,n),g.addChild(m),(0,f.playSkeleton)(m,0,!1),m.pos(e.x,e.y),r.next=13,p(b,{x:1.5*Math.abs(k),y:1.5*k},400,(function(e,t,n,r){return s.Ease.elasticOut(e,t,n,r,i,u)}));case 13:(0,c.tweenLoop)({sprite:b,props_arr:[{rotation:0},{rotation:-30},{rotation:0},{rotation:30}],time:80,step_fn:function(e){10===e&&((0,h.tempAni)("award_circle",m),b.destroy(),(0,c.stopAni)(b),a())}});case 14:case"end":return r.stop()}}),v)})))})));case 1:case"end":return g.stop()}}),g)})))},t.scale_in=p;var r=i(n(41509)),a=i(n(82069)),o=n(8360),l=n(62482),u=n(61711),s=n(52617),c=n(21270),f=n(79079),d=n(11522),h=n(38472),v=function(e,t,n,i){return new(n||(n=a.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function p(e,t,n,i){return v(this,void 0,void 0,r.default.mark((function a(){var o,l;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.completeAni)(e);case 2:return i=i||"circleIn",n=n||400,o={alpha:.2,scaleX:.2*t.x,scaleY:.2*t.y,visible:!0},l={alpha:1,scaleX:1*t.x,scaleY:1*t.y},r.abrupt("return",(0,c.tween)({sprite:e,start_props:o,end_props:l,time:n,ease_fn:i}));case 7:case"end":return r.stop()}}),a)})))}function y(e,t,n){var i=d.viewState.ani_overlay,r=d.viewState.game.upside_down,a=new u.Label;a.zOrder=10,a.font=n?"numYellow40":"numWhite40",a.text="+"+t,i.addChild(a);var o=a.getBounds();return a.pivot(o.width/2,o.height/2),a.pos(e.x,e.y),r&&(a.scaleY=-1),a}},38472:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.showAwardCoin=function(e,t,n,i){return p(this,void 0,void 0,o.default.mark((function r(){var a,l,u;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=y(e,n),l=a.coins,u=a.pos,(0,c.sleep)(.5).then((function(){g(u,n,i)})),r.next=4,_(l,t);case 4:case"end":return r.stop()}}),r)})))},t.createAwardCoin=y,t.showAwardNum=g,t.calcPosRange=m,t.createAni=b,t.tempAni=w;var r=i(n(56530)),a=i(n(89835)),o=i(n(41509)),l=i(n(82069)),u=n(11522),s=n(76542),c=n(21270),f=n(83922),d=n(71877),h=n(61711),v=n(79079),p=function(e,t,n,i){return new(n||(n=l.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))};function y(e,t){var n=u.viewState.ani_overlay,i=t/8>=8?8:Math.ceil(t/8),r=i>4?2:1,a=Math.ceil(i/r),o=[];e=m(e,(10*(a-1)+70*a)/2,(10*(r-1)+70*r)/2);for(var l=0;l<a;l++)for(var s=0;s<r;s++){var c=b("coin"),f=u.viewState.game.upside_down;c.scaleY=f?-1:1,c.visible=!1,n.addChild(c);var d=e.x+80*(2*l+1-a)/2,h=e.y+80*(2*s+1-r)/2;c.play(0,!0),c.pos(d,h),o.push(c)}return{coins:o,pos:e}}function g(e,t,n){var i=u.viewState.ani_overlay,r=u.viewState.game.upside_down,a=b("award_light"),o=new h.Label;a.zOrder=5,o.zOrder=10,o.font=n?"numYellow40":"numWhite40",o.text="+"+t,r&&(o.scaleY=-1),i.addChild(o),i.addChild(a);var l=o.getBounds();o.pivot(l.width/2,l.height/2),o.pos(e.x,e.y),a.pos(e.x,e.y),a.once(d.Event.STOPPED,a,(function(){o.destroy(),a.destroy(),w("award_light",a)})),a.play(0,!1)}function m(e,t,n){var i=e.x,r=e.y,a=u.viewState.ani_overlay,o=f.Laya.stage.width,l=f.Laya.stage.height,s=(a.width-o)/2,c=s+o;return i-t<s?i=s+t:i+t>c&&(i=c-t),r-n<0?r=n:r+n>l&&(r=l-n),{x:i,y:r}}function _(e,t){var n,i=this;(0,a.default)(n=(0,r.default)(e).call(e)).call(n,(function(e,n){return p(i,void 0,void 0,o.default.mark((function i(){var r;return o.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r={x:e.x,y:e.y},i.next=3,(0,c.slide_up_in)(e,500);case 3:return i.next=5,(0,c.sleep)(.5+.2*n);case 5:return i.next=7,(0,c.move)(e,r,t,500);case 7:e.removeSelf(),w("coin",e);case 9:case"end":return i.stop()}}),i)})))}))}var k={};function b(e){var t=k[e];t||(t=[],k[e]=[]);var n=t.pop();return n&&!n.destroyed||(n=(0,s.createSprite)("other",e)),(0,v.playSkeleton)(n,0,!0),n}function w(e,t){var n=k[e];n||(n=[],k[e]=[]),t.removeSelf(),t.stop(),n.push(t)}},45307:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.awardSkill=function(e,t,n,i){return k(this,void 0,void 0,c.default.mark((function r(){var a,o,l;return c.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=m(n),r.prev=1,l=c.default.mark((function n(){var r,a,l,u,s;return c.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=o.value,a=r.itemNum,l=r.itemId,u=S(),"3001"===l?(s=(0,h.getCurrencyIcon)(i),u.setIcon(s)):u.setId(l),u.setNum(a),u.pos(e.x,e.y),n.next=8,(0,v.fade_in)(u).then((function(){return(0,v.sleep)(.5)})).then((function(){return(0,v.tween)({sprite:u,start_props:e,end_props:(0,f.default)((0,f.default)({},t),{alpha:.2,scaleX:.4,scaleY:.4*u.scaleY}),time:2e3}).then((function(){w(u)}))}));case 8:case"end":return n.stop()}}),n)})),a.s();case 4:if((o=a.n()).done){r.next=8;break}return r.delegateYield(l(),"t0",6);case 6:r.next=4;break;case 8:r.next=13;break;case 10:r.prev=10,r.t1=r.catch(1),a.e(r.t1);case 13:return r.prev=13,a.f(),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[1,10,13,16]])})))};var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(41509)),f=i(n(69385)),d=i(n(82069)),h=n(17396),v=n(21270),p=n(79079),y=i(n(44014)),g=n(11522);function m(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return _(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var k=function(e,t,n,i){return new(n||(n=d.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}))},b=[];function w(e){e.removeSelf(),e.unHighlight(),e.scaleY=1,b.push(e)}function S(){var e=g.viewState.ani_overlay,t=g.viewState.game.upside_down,n=b.pop();return n&&!n.destroyed||(n=new y.default).pivot(n.width/2,n.height/2),(0,p.setProps)(n,{scaleX:1,alpha:1,scaleY:t?-1:1}),e.addChild(n),n.highlight(),n}},66008:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.activeExploding=function(e){var t,n,l=(t=a.viewState.ani_wrap,(n=(0,o.createSkeletonPool)("other","exploding")).scale(2,2),n.pos(t.width/2,t.height/2),t.addChild(n),n.alpha=.8,n);l.once(i.Event.STOPPED,l,(function(){(0,o.recoverSkeletonPool)("other","exploding",l)})),l.pos(e.x,e.y),(0,r.playSkeleton)(l,0,!1)};var i=n(71877),r=n(79079),a=n(11522),o=n(24454)},31593:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.activeFreeze=function(){u(),i.once(l.Event.STOPPED,i,(function(){s()})),(0,a.playSkeleton)(i,0,!1)},t.loopFreeze=s,t.stopFreeze=function(){i.offAll(),i.stop(),i.removeSelf()};var i,r=n(76542),a=n(79079),o=n(11522),l=n(71877);function u(){var e=o.viewState.ani_wrap;!i||i.destroyed?((i=(0,r.createSprite)("other","freezing")).pos(e.width/2,e.height/2),e.addChild(i),i.alpha=.8):i.parent||e.addChild(i)}function s(){u(),(0,a.playSkeleton)(i,1,!0)}},20813:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.activePosTip=function(){return e=(0,r.getLang)(),t=o.viewState.ani_overlay,n=o.viewState.game.upside_down,i&&!i.destroyed||(i=(0,l.createAni)("pos_tip")),i.parent||t.addChild(i),i.scaleX=n?-1:1,(0,a.playSkeleton)(i,e,!0),i;var e,t,n},t.stopPosTip=function(){!i&&i.destroyed||(0,l.tempAni)("pos_tip",i)};var i,r=n(39594),a=n(79079),o=n(11522),l=n(38472)},78731:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.activeShoalWave=function(e){return new a.default((function(t,n){var i;i=u.viewState.ani_wrap,!r||r.destroyed?((r=(0,o.createSprite)("other","shoal_wave")).scale(2,2),r.pos(i.width/2,i.height/2),i.addChild(r),r.alpha=.8):r.parent||i.addChild(r),r.once(s.Event.STOPPED,r,(function(){c(),t()})),r.scaleX=e?2:-2,(0,l.playSkeleton)(r,0,!1)}))},t.stopShoalWave=c;var r,a=i(n(82069)),o=n(76542),l=n(79079),u=n(11522),s=n(71877);function c(){r.offAll(),r.stop(),r.removeSelf()}},30871:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.FishView=void 0;var r=i(n(83544)),a=i(n(6113)),o=i(n(82069)),l=i(n(69385)),u=i(n(35526)),s=i(n(25233)),c=i(n(91678)),f=i(n(47172)),d=i(n(97641)),h=i(n(89224)),v=i(n(77887)),p=i(n(18127)),y=n(53815),g=n(76542),m=n(79079),_=n(11857),k=n(15403),b=n(24454),w=n(11522),S=n(17396);var x=function(e){(0,h.default)(k,e);var t,n,i=(t=k,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,p.default)(t);if(n){var a=(0,p.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,v.default)(this,e)});function k(e,t){var n;return(0,s.default)(this,k),(n=i.call(this)).info=e,n.pool=t,n.mouseEnabled=!0,n.mouseThrough=!1,n.visible=!1,window.fish=(0,f.default)(n),n}return(0,c.default)(k,[{key:"initAni",value:function(){if(!this.fish_ani){var e=this.info.type,t=(0,g.getSpriteInfo)("fish",e),n=t.offset,i=t.turn_ani,r=this.createFishAni(),a=(0,u.default)(n,4),o=a[0],l=a[1],s=a[2],c=a[3],f=l+c,d=o+s,h=c,v=o;this.size(f,d),this.pivot(h,v),r.pos(h,v),this.addChild(r),(0,m.playSkeleton)(r,0,!0),this.fish_ani=r,this.turn_ani=i,this.initShadow(),this.zOrder=Number(e)}}},{key:"createFishAni",value:function(){var e=this.info,t=e.type,n=e.currency,i=(0,g.getSpriteInfo)("fish",t),r=i.coin_flag,a=i.coin_color,o=i.scale,l=(0,b.createSkeletonPool)("fish",t,null,r?1:void 0);if(r){var u=(0,b.createSkeletonPool)("other","coin_light");u.zOrder=10,l.addChild(u),u.scale(1.5,1.5),u.alpha=.6,(0,m.playSkeleton)(u,0,!0),this.coin_light=u;var s=(0,S.getCurrencyIcon)(n);s&&(0,y.createSprite)(s).then((function(e){e.filters=[(0,m.createColorFilter)(a)];var t=e.drawToTexture(e.width,e.height,0,0);l.setSlotSkin("huobi",t)}))}return o&&l.scale(o,o),l}},{key:"initShadow",value:function(){var e=this.pool,t=this.info.type,n=w.viewState.game.upside_down,i=(0,b.createImgPool)("image/game/shadow");i.pivot(i.texture.width/2,i.texture.height/2),e.addChild(i);var r=(0,g.getShadowInfo)(t);this.shadow_node=i,this.shadow_info=n?(0,l.default)((0,l.default)({},r),{y:-r.y}):r,(r.scaleX||r.scaleY)&&i.scale(r.scaleX||1,r.scaleY||1)}},{key:"playSwimAni",value:function(){var e=this.fish_ani,t=this.turn_ani_name;if(e){var n=t||0;(0,m.playSkeleton)(e,n,!0)}}},{key:"stopSwimAni",value:function(){var e=this.fish_ani;e&&(0,m.stopSkeleton)(e)}},{key:"setVisible",value:function(e){this.visible=e,e?(this.initAni(),this.playSwimAni()):this.stopSwimAni()}},{key:"syncPos",value:function(e,t,n){var i=this.turn_ani,r=this.fish_ani,a=this.visible,o=this.shadow_node,l=this.shadow_info;if(a){var u=(0,_.vectorToDegree)(t)+90;if(n){var s=u>0&&u<180;if(i){var c=s?"right":"left";this.turn_ani_name!==c&&(this.turn_ani_name=c,(0,m.playSkeleton)(r,c,!0))}else(s?-1:1)!==this.scaleX&&(this.scaleX=s?-1:1)}else this.rotation=u,o.rotation=u+90;this.pos(e.x,e.y),o.pos(e.x+l.x,e.y+l.y)}}},{key:"beCastAni",value:function(){var e=this;return new o.default((function(t,n){var i=e.fish_ani;i&&(i.filters=[(0,m.createRedFilter)()],clearTimeout(e.time_out),e.time_out=(0,a.default)((function(){i.destroyed||(i.filters=[],t())}),500))}))}},{key:"destroy",value:function(){var e,t=this.info.type;(null===(e=null==this?void 0:this.fish_ani)||void 0===e?void 0:e.filters)&&(this.fish_ani.filters=[]),this.shadow_node&&(this.shadow_node.rotation=0),(0,b.recoverSkeletonPool)("other","coin_light",this.coin_light),(0,b.recoverSkeletonPool)("fish",t,this.fish_ani),(0,b.recoverImgPool)("image/game/shadow",this.shadow_node),this.fish_ani=void 0,this.shadow_node=void 0,clearTimeout(this.time_out),(0,d.default)((0,p.default)(k.prototype),"destroy",this).call(this)}}]),k}(k.Sprite);t.FishView=x},61661:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(83544)),a=i(n(41509)),o=i(n(25233)),l=i(n(91678)),u=i(n(97641)),s=i(n(89224)),c=i(n(77887)),f=i(n(18127)),d=i(n(82069)),h=n(39594),v=n(94643),p=i(n(53746)),y=n(53815),g=n(15403),m=n(71877),_=n(60399),k=n(37816),b=n(4749),w=n(21270),S=n(76542),x=n(79079),C=n(24454),I=n(11522),M=n(30871),E=i(n(75242)),A=n(20096);var L=function(e){(0,s.default)(b,e);var t,n,i=(t=b,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,f.default)(t);if(n){var a=(0,f.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,c.default)(this,e)});function b(){var e;return(0,o.default)(this,b),(e=i.apply(this,arguments)).bg_num=1,e}return(0,l.default)(b,[{key:"onEnable",value:function(){var e=this;(0,h.onLangChange)(this,(function(t){e.initLang(t)}))}},{key:"initLang",value:function(e){var t=this.skill_box.auto_shoot_txt,n=this.skill_box.auto_shoot_light.visible?"auto_cancel_".concat(e):"auto_".concat(e);t.skin="image/international/".concat(n,".png")}},{key:"setTrialStyle",value:function(){var e=this.btn_gift;this.btn_shop,e.visible=!1}},{key:"showBubbleRefresh",value:function(e){var t=this.bubble_overlay,n=this.bg,i=this.bubble_wall,r=this.bubble_ani;e||(e=this.bg_num),this.bg_num=e,n.skin="image/game/normal_bg/bg".concat(e,".jpg"),r.url="image/game/bg_normal".concat(e,".sk"),i.visible=!1,t.visible=!0,(0,x.playSkeletonOnce)(t,"out").then((function(){t.visible=!1,(0,w.fade_in)(i,300,"",.3),(0,x.playSkeleton)(i,2,!0)}))}},{key:"onResize",value:function(e,t){var n=this.width,i=this.height,r=this.ctrl_box;this.x=(e-n)/2,this.y=(t-i)/2,e>1334&&(e=1334),r.width=e;var a=1;e<1290&&(a=.8),this.triggerResize(a)}},{key:"triggerResize",value:function(e){if(e!==this.resize_scale){this.bullet_box_pos=e>.8?20:-30,this.setBulletBoxPos(this.bullet_box_dir),this.resize_scale=e;var t=this.btn_gift,n=this.btn_voice,i=this.bullet_box,r=this.btn_leave,a=this.btn_help,o=this.btn_shop,l=this.skill_box;r.x=20*e,t.x=120*e,r.x=20*e,n.right=120*e,a.right=20*e,n.y=10*e,i.scale(e,e),n.scale(e,e),t.scale(e,e),r.scale(e,e),a.scale(e,e),o.scale(e,e),l.scale(e,e)}}},{key:"upSideDown",value:function(){var e=this.pool,t=this.gun_wrap,n=this.ani_wrap,i=this.ani_overlay;e.scaleY=t.scaleY=i.scaleY=n.scaleY=-1,this.upside_down=!0}},{key:"addFish",value:function(e){var t=this.pool,n=this.upside_down,i=e.horizon_turn,r=new M.FishView(e,t);return i&&n&&(r.scaleY=-1),t.addChild(r),r}},{key:"addBullet",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.pool,r=(0,S.getSpriteInfo)("bullet",e),a=r.path;return t=n?(0,y.createSkeleton)("".concat(a,"_rage")):(0,C.createSkeletonPool)("bullet",e),i.addChild(t),t.visible=!1,t}},{key:"addNet",value:function(e){var t=this.pool,n=(0,C.createSkeletonPool)("net",e);return t.addChild(n),n}},{key:"onPoolClick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.offPoolClick();var n=new _.Observable((function(t){var n=e.pool,i=function(e){var i=n.getMousePoint(),r=i.x,a=i.y;e.stopPropagation(),t.next({x:r,y:a})};t.add((function(){n.off(m.Event.CLICK,n,i)})),n.on(m.Event.CLICK,n,i),e.pool_click_observer=t}));return t?n.pipe((0,k.first)()):n}},{key:"offPoolClick",value:function(){var e=this.pool_click_observer;e&&(e.unsubscribe(),this.pool_click_observer=void 0)}},{key:"onFishClick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.offFishClick();var n=new _.Observable((function(t){var n=e.pool,i=function(e){e.stopPropagation();var n=e.target;n instanceof M.FishView&&t.next(n.info.id)};t.add((function(){n.off(m.Event.CLICK,n,i)})),n.on(m.Event.CLICK,n,i),e.fish_click_observer=t}));return t?n.pipe((0,k.first)()):n}},{key:"offFishClick",value:function(){var e=this.fish_click_observer;e&&(e.unsubscribe(),this.fish_click_observer=void 0)}},{key:"addGun",value:function(){var e=this.gun_wrap,t=new E.default;return e.addChild(t),t}},{key:"setBulletNum",value:function(e){var t=(0,h.getLang)(),n=v.InternationalTip[t].NumBullet;this.bullet_num.text="".concat(n,": ")+e}},{key:"getSkillItemByIndex",value:function(e){return this.skill_box.skill_list.getChildAt(e)}},{key:"getAutoShootSkillItem",value:function(){return this.skill_box.auto_shoot}},{key:"setAutoShootLight",value:function(e){var t=(0,h.getLang)();this.skill_box.auto_shoot_light.visible=e;var n=e?"auto_cancel_".concat(t):"auto_".concat(t);this.skill_box.auto_shoot_txt.skin="image/international/".concat(n,".png")}},{key:"setExchangeRate",value:function(e,t){var n=(0,h.getLang)(),i=v.InternationalTip[n].bullet,r=this.exchange_rate;r.innerHTML='<div style="width: 192px;height: 32px;line-height:32px;font-size: 20px;color:#fff;align:center;"><span>1 $0</span> = <span color="#ffdd76">$1</span> <span>$2</span> </div>'.replace("$0",i).replace("$1",e+"").replace("$2",t),r.style.font="20px Arial"}},{key:"setEnergyRadio",value:function(e){var t=this.skill_box.energy_bar,n=t.mask,i=t.width,r=t.height;n||(n=new g.Sprite,t.mask=n),t.mask.graphics.clear(),t.mask.graphics.drawRect(0,0,i*e,r,"#fff")}},{key:"energyLight",value:function(){var e=this.skill_box.energy_light;return new d.default((function(t,n){e.visible=!0,e.on(m.Event.STOPPED,e,(function(){e.visible=!1,t()})),(0,x.playSkeleton)(e,0,!1)}))}},{key:"setBulletBoxPos",value:function(e){var t=this.bullet_box,n=this.bullet_box_bg,i=this.bullet_box_pos;"left"===e?(t.right=void 0,t.left=i,n.scaleX=1):"right"===e&&(t.right=i,t.left=void 0,n.scaleX=-1),this.bullet_box_dir=e}},{key:"getPoolMousePos",value:function(){return this.pool.getMousePoint()}},{key:"destroy",value:function(){try{(0,h.offLangChange)(this),(0,u.default)((0,f.default)(b.prototype),"destroy",this).call(this)}catch(e){(0,A.error)(e)}}}],[{key:"preEnter",value:function(){return e=this,t=void 0,n=void 0,i=a.default.mark((function e(){var t,n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.director.runScene("scenes/game/game.scene");case 2:return t=e.sent,n=t.ani_wrap,i=t.ani_overlay,(0,x.setProps)(I.viewState,{game:t,ani_wrap:n,ani_overlay:i}),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})),new(n||(n=d.default))((function(r,a){function o(e){try{u(i.next(e))}catch(e){a(e)}}function l(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((i=i.apply(e,t||[])).next())}));var e,t,n,i}}]),b}(b.ui.scenes.game.gameUI);t.default=L},75242:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.setGunDirection=B,t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(6113)),d=i(n(77433)),h=i(n(35526)),v=i(n(24183)),p=i(n(25233)),y=i(n(91678)),g=i(n(89224)),m=i(n(77887)),_=i(n(18127)),k=n(98870),b=n(76542),w=n(11857),S=n(79079),x=n(4749),C=n(11522),I=n(20813),M=n(40373);function E(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return A(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L=function(e){(0,g.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,_.default)(t);if(n){var r=(0,_.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,m.default)(this,e)});function r(){return(0,p.default)(this,r),i.call(this)}return(0,y.default)(r,[{key:"onEnable",value:function(){this.init(),this.setDirection(this.gun_direct)}},{key:"init",value:function(){var e=this.light,t=this.gun,n=this.base,i=this.body;(0,S.stopSkeleton)(e),(0,S.stopSkeleton)(n),(0,S.playSkeleton)(t,"standby",!0),(0,S.playSkeleton)(i,"standby",!0)}},{key:"setMySelfStyle",value:function(){this.ctrl_box.visible=!0,this.activePosTip()}},{key:"setBulletCost",value:function(e){var t=e.skin,n=e.level_skin,i=e.bullet_cost,r=this.gun;this.score_label.text=i+"",this.gun_skin=t;var a,o,l=["base","light","body"],u=(0,b.getGunSkinMap)(t,n),s=(0,v.default)(l).call(l,(function(e){return!u.has(e)})),c=E(u);try{for(c.s();!(o=c.n()).done;){var f,p=(0,h.default)(o.value,2),y=p[0],g=p[1],m=(0,d.default)(f="".concat(y)).call(f,g),_=this[y];"gun"===y&&(a=m),"light"===y&&"3"===t&&(_.alpha=.6),_.url="ani/gun/".concat(m,".sk"),_.visible=!0}}catch(e){c.e(e)}finally{c.f()}var k,w=E(s);try{for(w.s();!(k=w.n()).done;){var x=k.value,C=this[x];C.visible=!1,C instanceof M.Skeleton&&(0,S.stopSkeleton)(this[x])}}catch(e){w.e(e)}finally{w.f()}(0,S.utilSkeletonLoadUrl)(r,"ani/gun/".concat(a,".sk")).then((function(){(0,S.playSkeleton)(r,"standby",!0)})),B(this,r.rotation)}},{key:"fixServerTopPos",value:function(){var e=this.ani_box,t=this.ctrl_wrap;e.rotation=this.rotation=180,t.scaleX=-1}},{key:"fixClientTopPos",value:function(){this.ctrl_wrap.scaleY=-1}},{key:"setDirection",value:function(e){if(e){var t=this.gun,n=(0,w.vectorToDegree)(e)+90;t.rotation=n,this.gun_direct=e,B(this,n)}}},{key:"fire",value:function(e,t){var n=this.gun,i="".concat(t,":fire");(0,k.asyncQue)(i,(function(){return(0,S.playSkeletonOnce)(n,"fire")})).then((function(e){e&&(0,S.playSkeleton)(n,"standby",!0)})),clearTimeout(this.time_out),this.time_out=(0,f.default)((function(){(0,k.clearAsyncQue)("".concat(t,":fire"))}),250),this.setDirection(e)}},{key:"addBullet",value:function(e,t){return(0,C.addBullet)(e,t)}},{key:"detectDisableChangeBulletCost",value:function(){}},{key:"activePosTip",value:function(){var e=(0,I.activePosTip)();this.addChild(e),e.pos(this.width/2,this.height/2)}},{key:"stopPosTip",value:function(){(0,I.stopPosTip)()}},{key:"setPos",value:function(e,t){this.pos(e,t)}}]),r}(x.ui.scenes.game.gunBoxUI);function B(e,t){var n=e.gun_skin,i=e.body;"5"===n&&(i.rotation=t)}t.default=L},44014:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(89224)),u=i(n(77887)),s=i(n(18127)),c=n(97956),f=n(15403),d=n(4749),h=n(79079);var v=function(e){(0,l.default)(d,e);var t,n,i=(t=d,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,s.default)(t);if(n){var a=(0,s.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,u.default)(this,e)});function d(){var e;return(0,a.default)(this,d),(e=i.call(this)).init(),e}return(0,o.default)(d,[{key:"init",value:function(){var e=this.overlay,t=new f.Sprite;e.cacheAs="bitmap",t.blendMode="destination-out",e.addChild(t),this.cool_mask=t,e.visible=!1}},{key:"setId",value:function(e){var t=this.skill_icon,n=c.SkillNameMap[e];n?t.skin="image/game/skill_".concat(n,".png"):(n=c.ItemMap[e],t.skin="image/common/coin/".concat(n,".png"))}},{key:"setIcon",value:function(e){this.skill_icon.skin=e}},{key:"setNum",value:function(e){var t=e+"";e>99999&&(t="99999+"),this.num_label.text=t}},{key:"highlight",value:function(){var e=this.border_light;e.visible=!0,(0,h.playSkeleton)(e,0,!0)}},{key:"unHighlight",value:function(){var e=this.border_light;e.visible=!1,(0,h.stopSkeleton)(e)}},{key:"setShortcut",value:function(e){var t=this.shortcut_label;t.visible=!0,t.text=e}},{key:"showCoolTime",value:function(e){var t=this.cool_mask,n=this.overlay,i=t.graphics,r=360*(1-e)-90;i.clear(),0!==e?(n.visible=!0,i.drawPie(40,41,60,270,r,"#fff")):n.visible=!1}},{key:"clearCoolTime",value:function(){this.overlay.visible=!1}}]),d}(d.ui.scenes.game.skillItemUI);t.default=v},29678:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(69129)),a=i(n(44790)),o=i(n(53632)),l=i(n(35847)),u=i(n(55846)),s=i(n(85323)),c=i(n(83544)),f=i(n(35526)),d=i(n(25233)),h=i(n(91678)),v=i(n(97641)),p=i(n(89224)),y=i(n(77887)),g=i(n(18127)),m=n(39594),_=n(94643),k=i(n(53746)),b=n(83922),w=n(49663),S=n(21270),x=n(89785),C=n(79079),I=n(4749),M=n(20096);function E(e){if(void 0===l.default||null==(0,o.default)(e)){if((0,a.default)(e)||(e=function(e,t){var n;if(e){if("string"==typeof e)return A(e,t);var i=(0,s.default)(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?(0,u.default)(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c,f=!0,d=!1;return{s:function(){i=(0,r.default)(e)},n:function(){var e=i.next();return f=e.done,e},e:function(e){d=!0,c=e},f:function(){try{f||null==i.return||i.return()}finally{if(d)throw c}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L=function(e){(0,p.default)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!c.default)return!1;if(c.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,c.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,g.default)(t);if(n){var r=(0,g.default)(this).constructor;e=(0,c.default)(i,arguments,r)}else e=i.apply(this,arguments);return(0,y.default)(this,e)});function r(){return(0,d.default)(this,r),i.apply(this,arguments)}return(0,h.default)(r,[{key:"onResize",value:function(e,t){e||(e=b.Laya.stage.width,t=b.Laya.stage.height);var n=this.width,i=this.height,r=this.inner,a=this.header,o=a.inner,l=a.middle_btn_wrap,u=a.btn_right_wrap,s=a.left_wrap,c=a.right_wrap;this.x=(e-n)/2,this.y=(t-i)/2,e>1334&&(e=1334),o.width=r.width=e;var f=e/t,d=10*f*f;e/t<1.651&&(d=7*f*f),(0,x.resizeContain)(s,d),(0,x.resizeContain)(u,d),(0,x.resizeContain)(l,d),(0,x.resizeContain)(c,d)}},{key:"onOpened",value:function(){var e=this.header,t=e.coin_menu,n=e.flag_menu;t.list.array=[],n.list.array=[],this.activeAni("normal"),t.list.renderHandler=new w.Handler(this,this.coinMenuRender,void 0,!1),this.initEvent()}},{key:"initEvent",value:function(){var e=this,t=this.header,n=t.flag_menu,i=t.btn_coin_select,r=t.flag_box;(0,m.onLangChange)(this,(function(t){e.initLang(t)})),(0,x.onStageClick)(this,(function(){e.toggleCoinMenu(!1)}),[i]),(0,x.onStageClick)(this,(function(){e.toggleFlagMenu(!1)}),[n,r])}},{key:"initLang",value:function(e){var t=this.match_status,n=this.match_box,i=this.normal_box,r=this.btn_play_now,a=this.header,o=a.btn_get,l=a.btn_charge,u=a.middle_btn_wrap,s=_.InternationalTip[e].stayTuned,c=[["normal",i],["match",n]];t.text=s;for(var d=["btn_play","btn_try"],h=0,v=c;h<v.length;h++){var p=(0,f.default)(v[h],2),y=(p[0],p[1]),g=y.getChildByName("ani");(0,C.playSkeleton)(g,"standby_".concat(e),!0);var m,k=E(d);try{for(k.s();!(m=k.n()).done;){var b=m.value,w=y.getChildByName(b).getChildByName("ani");(0,C.playSkeleton)(w,"standby_".concat(e),!0)}}catch(e){k.e(e)}finally{k.f()}}var S=r.getChildByName("ani");(0,C.playSkeleton)(S,"standby_".concat(e),!0),l.getChildByName("txt_label").skin="image/international/charge_".concat(e,".png"),o.getChildByName("txt_label").skin="image/international/withdraw_".concat(e,".png"),(0,x.resizeContain)(u,10),this.activeAni("normal")}},{key:"setRechargeBtnVisible",value:function(e){this.header.btn_recharge.visible=e,e&&this.onResize()}},{key:"activeAni",value:function(e){for(var t=this.normal_box,n=this.match_box,i=(0,m.getLang)(),r=0,a=[["normal",t],["match",n]];r<a.length;r++){var o=(0,f.default)(a[r],2),l=(o[0],o[1].getChildByName("ani"));(0,C.playSkeleton)(l,"standby_".concat(i),!0)}}},{key:"setNickname",value:function(e){var t=this.header,n=t.nickname,i=t.user_box,r=t.left_wrap;if(n.text=k.default.utils.cutStr(e,12),"GUEST"!==e)return(0,x.resizeContain)(r,10),i.visible=!1;i.visible=!0,(0,m.onLangChange)(this,(function(e){var t=_.InternationalTip[e].guest;n.text=t})),(0,x.resizeContain)(r,10)}},{key:"coinMenuRender",value:function(e,t){var n=e.getChildByName("coin_num"),i=this.header.coin_menu.list.array[t].coin_num,r=14/(1.1*(Number(i)+"").length);r=r>1?1:r,n.scale(r,r),n.width=148/r}},{key:"setCoinData",value:function(e){var t,n=this.header.coin_menu,i=n.list,r=n.bg,a=[],o=E(e);try{for(o.s();!(t=o.n()).done;){var l=(0,f.default)(t.value,2),u=l[0],s=l[1],c=s.num,d=s.icon;a.push({coin_icon:d,coin_name:u,coin_num:c})}}catch(e){o.e(e)}finally{o.f()}i.array=a,a.length<=7?n.height=r.height=i.height=48*a.length+10:n.height=i.height=r.height=346}},{key:"setFlagData",value:function(e){var t,n=this.header.flag_menu,i=n.list,r=n.bg,a=[],o=E(e);try{for(o.s();!(t=o.n()).done;){var l=t.value;a.push({flag_type:l,flag_icon:"image/common/flag/flag_".concat(l,".png")})}}catch(e){o.e(e)}finally{o.f()}i.array=a,n.height=r.height=i.height=61*a.length+20}},{key:"toggleCoinMenu",value:function(e){var t=this.header,n=t.coin_menu,i=t.coin_triangle;n.list.array.length&&(e?(n.y=60,(0,S.fade_in)(n,300),i.rotation=180):((0,S.fade_out)(n,100),n.list.selectedIndex=-1,i.rotation=0))}},{key:"setCurBalance",value:function(e,t,n){var i=this.header,r=i.coin_icon,a=i.coin_name,o=i.coin_num,l=this.normal_box,u=this.match_box;r.skin=t,a.text=e.toUpperCase(),o.text=Number(n)+"";var s=11/(1.08*o.text.length);s=s>1?1:s,o.scale(s,s),o.width=119/s;for(var c=0,f=[l,u];c<f.length;c++)f[c].getChildByName("coin_name").text=e.toUpperCase()}},{key:"toggleFlagMenu",value:function(e){var t=this.header,n=t.flag_menu,i=t.flag_triangle;e?((0,S.fade_in)(n,300),i.rotation=180):((0,S.fade_out)(n,100),n.list.selectedIndex=-1,i.rotation=0)}},{key:"setFlag",value:function(e){this.header.flag.skin="image/common/flag/flag_".concat(e,".png")}},{key:"destroy",value:function(){try{(0,v.default)((0,g.default)(r.prototype),"destroy",this).call(this),(0,m.offLangChange)(this)}catch(e){(0,M.error)(e)}}}],[{key:"preEnter",value:function(){return k.default.director.runScene("scenes/hall/hall.scene")}}]),r}(I.ui.scenes.hall.hallUI);t.default=L},50473:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.default=t.LoadingEvent=void 0;var r=i(n(83544)),a=i(n(25233)),o=i(n(91678)),l=i(n(47172)),u=i(n(89224)),s=i(n(77887)),c=i(n(18127)),f=i(n(53746)),d=n(4749),h=n(20096),v=n(4615);var p={Hide:"hide",Show:"show"};t.LoadingEvent=p;var y=function(e){(0,u.default)(d,e);var t,n,i=(t=d,n=function(){if("undefined"==typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=(0,r.default)(i,arguments,a)}else e=i.apply(this,arguments);return(0,s.default)(this,e)});function d(){var e;return(0,a.default)(this,d),(e=i.call(this)).zOrder=100,e.event_com=new v.EventCom,e.popupEffect=void 0,e.closeEffect=void 0,d.instance=(0,l.default)(e),e}return(0,o.default)(d,[{key:"onShow",value:function(){(0,h.log)("load:>onShow"),this.open(!1),f.default.director.openDialog(this),this.event_com.emit(p.Show)}},{key:"onHide",value:function(){(0,h.log)("load:>onHide"),this.close(),this.event_com.emit(p.Show)}},{key:"onProgress",value:function(e){this.progress.value=e}}]),d}(d.ui.scenes.loadingUI);t.default=y},11522:(e,t,n)=>{"use strict";n(63656)(t,"__esModule",{value:!0}),t.getGameView=function(){return i.game},t.addBullet=function(e,t){return i.game.addBullet(e,t)},t.addNet=function(e){return i.game.addNet(e)},t.onPoolClick=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i.game.onPoolClick(e)},t.offPoolClick=function(){return i.game.offPoolClick()},t.setBulletNum=function(e){return i.game.setBulletNum(e)},t.onFishClick=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i.game.onFishClick(e)},t.offFishClick=function(){return i.game.offFishClick()},t.getPoolMousePos=function(){return i.game.getPoolMousePos()},t.getSkillItemByIndex=function(e){return i.game.getSkillItemByIndex(e)},t.getAutoShootSkillItem=function(){return i.game.getAutoShootSkillItem()},t.setAutoShootLight=function(e){return i.game.setAutoShootLight(e)},t.convertPosToNode=function(e,t,n){var i=t.localToGlobal(e,!0);return n.globalToLocal(i,!0)},t.viewState=void 0;var i={};t.viewState=i},24454:(e,t,n)=>{"use strict";var i=n(30038);n(63656)(t,"__esModule",{value:!0}),t.createSkeletonPool=function(e,t,n,i){var u,s,c,f=(0,r.default)(u="".concat(e,":")).call(u,t),d=null===(s=l[f])||void 0===s?void 0:s.pop();if(d)return d;if("fish"===e)return(0,o.createSkeleton)("ani/fish/fish"+t,n,i);if("bullet"===e){var h=null===(c=(0,a.getSpriteInfo)(e,t))||void 0===c?void 0:c.path;return(0,o.createSkeleton)(h)}return"net"===e||"other"===e?(0,a.createSprite)(e,t):void 0},t.recoverSkeletonPool=function(e,t,n){var i;if(n&&!n.destroyed){var a=(0,r.default)(i="".concat(e,":")).call(i,t),o=l[a];o||(o=l[a]=[]),n.offAll(),n.stop(),n.removeSelf(),o.push(n)}},t.createImgPool=function(e){var t,n=null===(t=l[e])||void 0===t?void 0:t.pop();return n||(0,o.createImg)(e)},t.recoverImgPool=function(e,t){if(t&&!(null==t?void 0:t.destroyed)){var n=e,i=l[n];i||(i=l[n]=[]),t.removeSelf(),i.push(t)}};var r=i(n(77433)),a=n(76542),o=n(53815),l={}},32574:()=>{},61758:()=>{}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i](r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={296:0},t=[[95144,977,921]],i=()=>{};function r(){for(var i,r=0;r<t.length;r++){for(var a=t[r],o=!0,l=1;l<a.length;l++){var u=a[l];0!==e[u]&&(o=!1)}o&&(t.splice(r--,1),i=n(n.s=a[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),i}n.x=()=>{n.x=()=>{},o=o.slice();for(var e=0;e<o.length;e++)a(o[e]);return(i=r)()};var a=r=>{for(var a,o,[u,s,c,f]=r,d=0,h=[];d<u.length;d++)o=u[d],n.o(e,o)&&e[o]&&h.push(e[o][0]),e[o]=0;for(a in s)n.o(s,a)&&(n.m[a]=s[a]);for(c&&c(n),l(r);h.length;)h.shift()();return f&&t.push.apply(t,f),i()},o=self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[],l=o.push.bind(o);o.push=a})(),n.x()})();