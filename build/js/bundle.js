!function(t){function e(e){for(var i,a,u=e[0],s=e[1],c=e[2],h=0,f=[];h<u.length;h++)a=u[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,u=1;u<n.length;u++){var s=n[u];0!==r[s]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={0:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=s;o.push([687,2,1]),n()}({637:function(t,e){},687:function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return up})),n.d(e,"covertLang",(function(){return sp}));var i,r,o=n(26),a=n.n(o),u={Env:"PROD",PublicKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDMUws+7NKknmImMYUsSr4DOKYVrs1s7BQzGBgkkTptjGiektUmxm3BNZq34ugF6Vob9V0vU5r0S7vfyuOTC87uFeGe+rBJf7si4kE5wsJiEBlLNZjrz0T30xHGJlf+eizYVKPkpo3012rKvHN0obBlN7iBsdiGpLGP3sPAgO2tFQIDAQAB",SocketUrl:"",code:"",token:"",lang:"en",isLogin:!1,Host:"",CdnVersion:window.version,cndUrl:"",BulletSpeed:25,PoolWidth:1920,PoolHeight:750,BulletZoneWidth:1334,ShootTimeSpace:200,BombRadius:150,ClearFishTime:2.5};!function(t){t.LockFish="2001",t.Freezing="2002",t.Bomb="2003",t.Auto="A2004",t.Super="A2004"}(r||(r={}));var s,c=(i={},a()(i,r.Freezing,"freeze"),a()(i,r.Bomb,"bomb"),a()(i,r.LockFish,"aim"),a()(i,r.Auto,"auto"),a()(i,r.Super,"super"),i),l={3001:"BTC",3002:"ETH",3003:"XRP"},h="game",f="hall";!function(t){t[t.TokenExpire=1002]="TokenExpire",t[t.OtherLogin=1003]="OtherLogin",t[t.AlreadyInRoom=109]="AlreadyInRoom",t[t.NoMoney=101]="NoMoney",t[t.ReExchange=112]="ReExchange",t[t.NeedLogin=114]="NeedLogin",t[t.TrialTimeGame=117]="TrialTimeGame",t[t.OverLimit=121]="OverLimit",t[t.ToQuick=122]="ToQuick",t[t.TrialNotBullet=116]="TrialNotBullet",t[t.TrialTimeHall=507]="TrialTimeHall",t[t.TrialClose=509]="TrialClose",t[t.EnterGameError=505]="EnterGameError",t[t.NetError=511]="NetError"}(s||(s={}));var v,p,d,y,g,m,_,b,k="roomIn",w="roomOut",x="checkReplay",C="tableIn",S="tableOut",I="enterGame",A="shoot",B="hit",T="changeTurret",M="addFish",L="fishShoalWarn",E="fishShoal",P="lockFish",O="useBomb",D="fishBomb",z="autoShoot",U="useFreeze",N="exchangeBullet",j="getItemList",F="getBulletList",R="getRecentBullet",V="conn::error",G="userAccount",H="lottery",$="lotteryList",Y="exchangeList",X="ticketExchange",K="needEmitUser",W="shopList",Q="useSkin",q="buy",J="getRequestId";!function(t){t.Zh="zh",t.Zh_HK="hk",t.Kor="kor",t.En="en",t.Jp="jp"}(b||(b={}));var Z=(m={},a()(m,b.En,(v={deposit:"Deposit",withdrawal:"Withdrawal",balance:"Balance",bullet:"Bullet",automaticFiring:"Automatic firing",buyBullet:"Purchase Bullets",casualMode:"Casual Mode",tournamentMode:"Tournament Mode",trialField:"Demo game",realField:"Real game",stayTuned:"Stay Tuned",quickStart:"Quick Start",NumBullet:"Bullets",guest:"Guest",volumeSetting:"Volume Setting",music:"Music",soundEffects:"Sound Effect",tips:"Reminder",cancel:"Cancel",confirm:"Confirm",luckyDraw:"Prize Draw",redemption:"Exchange",buySuccess:"Congratulations on acquiring!",luckyDrawTip2:"Congrats! You’ve got ",Num:"Remaining",shop:"Shop",skin:"Skin",lock:"Lock",freeze:"Freeze",bomb:"Bomb",voucher:"Voucher",use:"Use",inUse:"In Use",item:"Item",youAreHere:"You are here",purchase:"Purchase",buyBulletCost:"Must spend",leaveTip:"Are you sure you want to leave the game?",reEnter:"You are in the game now, do you want to re-enter?",kickedTip:"You have been kicked out of the game room, do you want to refresh the page and re-enter the game room?",buyBulletTip:"Out of ammo, do you want to purchase more?",buySkillTip:"You don’t have this skill, do you want to purchase it?",logoutTip:"Login disconnected, do you want to refresh the current page?",posBombTip:"Please select a location on the screen to place the bomb",aimFish:"Please select the fish you want to attack",help:"Help",times:"times",help1:"1. Fish Points: Different fishes have different values, with the number of bullets obtained after capturing a fish being equal to the multiple of the cannon currently being used multiplied by the number of Fish Points. For example, if a fish with 50 Fish Points is captured using a 10x cannon, the number of bullets obtained is 50x10=500. Each different type of fish and their corresponding numbers of Fish Points are as follows:",help2:"2. Skill description: Players can apply the following skills in the game.",help2Super:"Super Skill: This is a passive skill which is automatically triggered after a certain number of fish have been captured by the player. It increases bullet power and doubles the firing speed.",help2Freeze:"Freezing Skill: Active skill which can be obtained either by killing certain types of fish or by directly purchasing. It can freeze most of the fish on the screen.",help2Lock:"Lock Skill: Active skill which can be obtained either by killing certain types of fish or by directly purchasing. It can automatically lock in place the fish on the screen which have the highest number of Fish Points; players can also select the fish which they want to lock in place.",help2Bomb:"Bomb Skill: Active skill which can be directly purchased. It will randomly kill groups of nearby fish on the screen.",help3:"3. Available cannon multiples: ",help31:"1,2,3,4,5,10,15,20",help4:"4. Other instructions",help41:"Redemption: Players can get some Fish Vouchers after capturing certain types of fish. Fish Vouchers can be redeemed in exchange for rewards.",help42:"Lucky draw: Players can qualify for 1 lucky draw after capturing 10 fish that each have at least 100 Fish Points. Rewards include bullets and currency.",help43:"Purchases: Players can purchase bullets inside the main hall, and can also purchase cannon skins or bullet effects by clicking on the cannon icon in the game.",tourSkip:"Skip",tourStart:"Start game",tour1:"Click the drop-down button to select the currency",tour2:"Game room will change <br/>according to which currency is selected",tour3:"In the demo game you can only experience the game, <br/>you must be in the real game in order to earn currency",tour4:"The system will automatically convert your digital currency into<br/> bullets when you enter a real game; any remaining <br/> bullets will be converted back into currency after you <br/> have left the room.",tour5:"Control your cannon, click and catch <br/>fish to get more bullets",tour6:"Use items to help you catch more <br/> and bigger fish",noData:"No data",NetError:"Problem with Internet connection, reconnecting",NetComeBack:"Welcome back!",OtherLogin:"Login error, please refresh and try again.",InputEmptyWarn:"Input value cannot be blank!",Delete:"Delete",buyItemTip:"Confirm cost $1 $2,purchase $3 $4.",buySkinTip:"Confirm cost $1 个 $2,purchase $3.",beyondBulletNum:"Exceeds current ammunition limit",itemListTitle:"Items stored",itemList1:"Item types",itemList2:"Sum of purchases",itemList3:"Sum of prizes",search:"Inquire",gameNo:"Sessions",remainingNum:"Amount remaining",gameListTitle:"Game record",cost:"Use up",prize:"Winnings",delayUpdateAccount:"Updates to your balance might be delayed until blocks on the chain can be confirmed, please be patient.",enterGameCostTip:"The system converts {bringAmount} {currency} into {bulletNum} bullets. \n After you leave the room, any remaining bullets \n will then be converted back into your {currency}.",NoMoneyAmount:"The current currency surplus is insufficient, the minimum requirement to enter the market is {minAmount}{currency}, please go to top up or switch to other currencies.",platformDiffCurrencyEnterGameErr:"You have unfinished games, the system will automatically repeat."},a()(v,s.NoMoney,"Insufficient funds, please add funds or change to another currency."),a()(v,"noMoneyConfirm","Add funds"),a()(v,s.ReExchange,"Out of ammo. Continue exchanging?"),a()(v,s.TrialTimeGame,"Demo playing time is up, please go to the real game to continue playing."),a()(v,s.TrialNotBullet,"Out of ammo, please reload the game or go the real game to continue."),a()(v,s.NetError,"Network error, please reload the game "),a()(v,s.TrialClose,"Demo mode is off."),a()(v,s.OverLimit,"Your spending have reached the maximum limit."),a()(v,s.ToQuick,"Operation done too frequently"),v)),a()(m,b.Kor,(p={deposit:"충전",withdrawal:"출금",balance:"잔액",bullet:"총알",automaticFiring:"자동 발사",buyBullet:"총알 구매",casualMode:"레저 모드",tournamentMode:"경기 모드",trialField:"시연장",realField:"게임장",stayTuned:"준비 중",quickStart:"시작",NumBullet:"잔여 총알",guest:"관전",volumeSetting:"음량 설정",music:"음악",soundEffects:"음향",tips:"주의",cancel:"취소",confirm:"확인",luckyDraw:"추첨",redemption:"교환",buySuccess:"구매 완료",luckyDrawTip2:"축하드립니다",Num:"잔금",shop:"상점",skin:"장비",lock:"목표 지정",freeze:"얼음",bomb:"폭탄",voucher:"쿠폰",use:"사용",inUse:"사용중",item:"도구",youAreHere:"현 위치",purchase:"구매",buyBulletCost:"비용 수요",leaveTip:"나가시겠습니까?",reEnter:"게임 진행 중입니다. 다시 진입 하시겠습니까?",kickedTip:"방에서 탈퇴 당하셨습니다. 다시 진입 하시겠습니까?",buyBulletTip:"총알 수량이 부족합니다. 구입 하시겠습니까?",buySkillTip:"해당 기능이 없습니다. 구입 하시겠습니까?",logoutTip:"로그인이 끊겼습니다. 페이지 새로 고침 하시겠습니까?",posBombTip:"위치를 선택하여 폭탄을 배치하세요.",aimFish:"공격하실 물고기를 선택하세요.",help:"도움",times:"배",help1:"1. 물고기 점수 설명: 물고기에 따라 점수가 다릅니다. 한 마리를 잡고 받을 수 있는 총알의 수량는 현재 사용 중인 포좌의 배수에 이 물고기의 점수를 곱한 것과 같습니다. 예를 들어 50배의 물고기 한 마리를 잡았을 때 10배의 포좌를 사용하였으면 받을 수 있는 총알 수량은 50X10=500입니다.각 물고기의 점수는 아래와 같습니다.",help2:"2. 기능 사용 설명: 게임 진행중 플레이어는 다음과 같은 기능을 사용할 수 있습니다.",help2Super:"슈퍼기능: 자동 기능, 플레이어가 일정량의 물고기를 포획한 후 자동으로 발사 됩니다.",help2Freeze:"얼음 기능:수동 기능, 일정한 량의 물고기를 포획하면 받을 수 있 구매도 가능합니다. 해당 기능을 사용하면 게임중 대부분의 물고기들은 움직이지 않습니다.",help2Lock:"목표 지정 기능: 수동 기능, 일정한 량의 물고기를 포획하면 받 을 수 있고 구매도 가능합니다.  해당 기능을 사용하면 게임중의 가장  점수가 높은 물고기에 목표 지정이 됩니다. 또한 플레이어는 수동으로 한마리를 지정할 수 있습니다.",help2Bomb:"폭탄: 수동 기능, 구매하여야 합니다. 사용후 랜덤으로 한 무리의 물고기를 폭격할 수 있습니다.",help3:"3. 선택 가능한 포좌의 배수는 아래와 같습니다.",help31:"1,2,3,4,5,10,15,20",help4:"4. 기타 설명",help41:"환전: 플레이어가 지정된 물고기를 포획할 때, 물고기 쿠폰을 받게 되고, 쿠폰을 모으면 경품을 교환할 수 있게 됩니다.",help42:"추첨: 플레이어는 100점 이상의 물고기를 10마리 잡은 후, 추첨 기회가 한번 주어집니다. 추첨 보상은 총알이나 코인입니다.",help43:"구매: 플레이어는 첫 페이지에서 ‘구매’를 클릭하여 총알을 구입할 수도 있고, 게임 내에서 ‘포좌’를 클릭하여 포좌 종류 또한 특수 기능 총알을 구입할 수도 있습니다. 기능의 수가 0일 때 이 기능 아이콘을 클릭하여 기능을 구입할 수 있습니다.",tourSkip:"Exit",tourStart:"Start",tour1:"내리기 버튼을 클릭하여 코인 종류를 선택합니다.",tour2:"코인 종류에 따라 게임방이 다를 수 있습니다.",tour3:"시연장에서 유저는 체험만 가능하고 기엠장에서는 디지털 화폐를 획득할 수 있습니다",tour4:"게임이 본격적으로 시작되면 시스템이 자동으로 디지털 화폐를 총알로 바꿔드립니다. 게임방을 떠난 후, 남은 모든 총알은 다시 디지털 화폐로 교환됩니다.",tour5:"포좌를 컨트롤하고 물고기 포획을 클릭하면 더 <br/> 많은 총알을 받을 수 있습니다.",tour6:"도구를 사용하여 더 많고 더 큰 물고기를 <br/> 포획할 수 있습니다.",noData:"데이터 없음",NetError:"네트워크 오류, 다시 연결 중",NetComeBack:"돌아오신 걸 환영합니다!",OtherLogin:"다른 곳에서 로그인 시도, 새로고침해 주세요",InputEmptyWarn:"빈칸을 입력해주세요!",Delete:"삭제",buyItemTip:"$1개의 $2를 소비하여, $3개의 $4를 구매",buySkinTip:"$1개의 $2를 소비하여, $3 구매",beyondBulletNum:"현재 총알 수량 초과",itemListTitle:"아이템 보관량",itemList1:"아이템",itemList2:"총 구매 수량",itemList3:"총 게임 보너스",search:"조회",gameNo:"횟수",remainingNum:"남은 수량",gameListTitle:"게임 기록",cost:"소비",prize:"수익",delayUpdateAccount:"잔고에 변동이 생겼습니다. 블록체인에 문제가 생김으로  다소 지연이 될 수 있으니 양해 부탁드립니다.",enterGameCostTip:"시스템이 {bringAmount}{currency}를 {bulletNum}개의 총알로 바꿔드립니다.\n 게임을 나가실때 남은 총알은 {currency}로 바꿔드립니다.",NoMoneyAmount:"현재 화폐 잔액이 부족합니다. 최소{minAmount}{currency} 소유해야 입장이 가능합니다. 충전하시거나 다른 화폐로 교환해주세요.",platformDiffCurrencyEnterGameErr:"완료되지 않은 게임이 있으면 시스템이 자동으로 반복됩니다."},a()(p,s.NoMoney,"현재 보유 중인 화폐 수량이 부족합니다. 입금 또는 다른 화폐를 환전해주세요."),a()(p,"noMoneyConfirm","충전하기"),a()(p,s.ReExchange,"총알 부족, 계속 교환 하시겠습니까?"),a()(p,s.TrialTimeGame,"무료 플레이 종료. 정식 버전을 이용해주세요"),a()(p,s.TrialNotBullet,"총알 부족, 다시 입장하거나 정식 버전을 이용해 주세요."),a()(p,s.NetError,"네트워크 오류. 새로고침 후 다시 시도해 주세요."),a()(p,s.TrialClose,"체험모드 종료"),a()(p,s.OverLimit,"귀하의 소비가 제한에 도달했습니다."),a()(p,s.ToQuick,"너무 자주 작동"),p)),a()(m,b.Jp,(d={deposit:"⼊⾦",withdrawal:"送⾦",balance:"殘⾼",bullet:"弾薬",automaticFiring:"⾃動攻撃",buyBullet:"弾薬購⼊",casualMode:"レジャーモード",tournamentMode:"競技モード",trialField:"體験 ゲームルーム",realField:"本番ゲームルーム",stayTuned:"未開放",quickStart:"即開始",NumBullet:"弾薬",guest:"ゲスト",volumeSetting:"⾳量設定",music:"⾳楽",soundEffects:"⾳聲効果",tips:"注意",cancel:"キャンセル",confirm:"確認",luckyDraw:"抽選",redemption:"交換",buySuccess:"購⼊完了",luckyDrawTip2:"恭喜你獲得",Num:"殘り",shop:"ショップ",skin:"スタイル",lock:"ロック",freeze:"冷凍",bomb:"爆弾",voucher:"賞券",use:"使⽤",inUse:"使⽤中",item:"スキル",youAreHere:"ここにいる",purchase:"購⼊",buyBulletCost:"消費必要",leaveTip:"ゲーム終了しますか。",reEnter:"　現在ゲーム中ですが、再び開始しますか？",kickedTip:"プレールームから出てました。もう⼀度⼊場します か？",buyBulletTip:"弾薬殘數が不⾜になり、ご購⼊しますか。",buySkillTip:"スキルまだない、ご購⼊しますか。",logoutTip:"ログイン接続できません。ページを再読み込みしますか。",posBombTip:"畫⾯中、爆弾を置く場所を選択してください。",aimFish:"攻撃したい⿂を選択してください。",help:"ヘルプ",times:"倍",help1:"⿂ポイント説明：それぞれの⿂ポイントの數値は異なります。１つの⿂を捕獲すること により、獲得弾薬は現在使⽤中の砲臺の倍數をかける⿂ポイントの數値となります。 例えば、50倍の⿂を捕獲する場合は、10倍で撃ちまして、獲得弾薬は50X10=500となり ます。それぞれのポイントは以下のようです。",help2:"スキル使⽤説明：プレーヤーはゲーム中で以下のスキルで使⽤可能です。",help2Super:"スーパースキル：受動スキル、プレーヤーが捕獲した⿂におけて、⼀定の數量に達 すると、弾薬の威⼒が増加し、攻撃スピードが加速となります。",help2Freeze:"冷凍スキル：主動スキル、特定な⿂を攻撃することによって獲得し、もしくは購⼊ もできます。使⽤後、畫⾯內の多數な⿂を凍結されます。",help2Lock:"ロックスキル：主動スキル、特定な⿂を攻撃することによって獲得し、もしくは購 ⼊もできます。使⽤後、畫⾯內の⾼の⿂ポイントに⾃動的に的中し、プレーヤー が⾃由選択もできます。",help2Bomb:"爆弾：主動スキル、購⼊で獲得できます。使⽤後、畫⾯內のランダムで１つ群の⿂ に攻撃します。",help3:"選択可能の倍數は以下のようです。",help31:"1,2,3,4,5,10,15,20",help4:"その他説明：",help41:"交換：プレーヤーは、特定な⿂を捕獲することにより、⿂券が獲得できます。その ⼀定の數量の⿂券を収集すると、景品と交換可能です",help42:"抽選：プレーヤーは、10匹100ポイント以上の⿂を捕獲すると、1回の抽選に參加可 能です。景品は弾薬と通貨を含みます。",help43:"購⼊：プレーヤーは、ホームで購⼊ボタンをクリックし、弾薬を購⼊できます。ま た、ゲーム中で砲臺ボタンをクリックし、砲臺スタイルと弾薬特効を購⼊できま す。スキルの數は0の時、スキルボタンを押して購⼊できます。",tourSkip:"Exit",tourStart:"Start",tour1:"ボタンで通貨タイプを選択",tour2:"通貨タイプが異なることにより、ゲーム <br/> ルームが切替されます。",tour3:"體験ルームプレーはゲームの體験のみ可能です。本番プレールームで仮想通貨が獲得 可能です。",tour4:"本番ゲームルームに⼊場の際、システムは⾃動的に仮想通貨を弾薬に交換されます。 また、お客様は退場の際、殘りの弾薬が⾃動的に仮想通貨に交換されます。ご安⼼くだ さい。",tour5:"砲臺をコントロールし、クリックかつ⿂<br/>の捕獲、もっと弾薬が獲得可能",tour6:"スキルの使⽤で、もっと⼤きくて多い⿂を<br/>捕獲可能です。",noData:"データなし",NetError:"異常なネットワーク、再接続",NetComeBack:"お帰りなさい！",OtherLogin:"サイト外でログオフし、更新して再試行してください",InputEmptyWarn:"入力した値は空にできません...！",Delete:"削除する",buyItemTip:"費用$1$2、購入$3$4を確認します。",buySkinTip:"确认花费$1个$2, 购买$3.",beyondBulletNum:"費用$1$2、購入$3を確認します。",itemListTitle:"アイテムの在庫",itemList1:"道具",itemList2:"合計購入金額",itemList3:"ゲームギフトの合計",search:"問い合わせ",gameNo:"セッション",remainingNum:"残高",gameListTitle:"ゲーム記録",cost:"消費する",prize:"収益",delayUpdateAccount:"チェーンのブロック確認により、資金の変更が遅れる場合があります。しばらくお待ちください",enterGameCostTip:"システムで{bringAmount}{currency}を{bulletNum}弾に変換します。\n部屋を出る時、残りの弾丸を{currency}に交換されます",NoMoneyAmount:"現在の残高が不足しており、参加には最低{minAmount}{currency}を保有する必要があります。入金または他のトークンに切り替えてください。",platformDiffCurrencyEnterGameErr:"まだ終わっていないゲームがありますので、システムは自動的にリセットして差し上げます。"},a()(d,s.NoMoney,"現在の通貨残高が不足しています。再チャージするか、他の通貨に切り替えてください。"),a()(d,"noMoneyConfirm","チャージ"),a()(d,s.ReExchange,"弾丸が不十分な場合は、引き換えてください！"),a()(d,s.TrialTimeGame,"体験期間が過ぎました。会場でご利用ください。"),a()(d,s.TrialNotBullet,"弾丸が足りません。再入力するか、公式会場でプレイしてください。"),a()(d,s.NetError,"ネットワークが異常です。更新してもう一度お試しください。"),a()(d,s.TrialClose,"デモモードオフ"),a()(d,s.OverLimit,"消費金額が上限に達しました"),a()(d,s.ToQuick,"操作が多すぎる"),d)),a()(m,b.Zh,(y={deposit:"充值",withdrawal:"提币",balance:"余额",bullet:"子弹",automaticFiring:"自动开炮",buyBullet:"购买子弹",casualMode:"休闲模式",tournamentMode:"竞技模式",trialField:"试玩场",realField:"正式场",stayTuned:"敬请期待",quickStart:"快速开始",NumBullet:"剩余子弹",guest:"游客",volumeSetting:"音量设置",music:"音乐",soundEffects:"音效",tips:"提示",cancel:"取消",confirm:"确定",luckyDraw:"抽奖",redemption:"兑换",buySuccess:"购买成功",luckyDrawTip2:"恭喜你获得",Num:"剩余",shop:"商店",skin:"皮肤",lock:"锁定",freeze:"冰冻",bomb:"炸弹",voucher:"奖券",use:"使用",inUse:"使用中",item:"道具",youAreHere:"您在此处",purchase:"购买",buyBulletCost:"需要花费",leaveTip:"确定要离开游戏吗?",reEnter:"你当前在游戏中是否重新进入?",kickedTip:"你被踢出房间, 刷新重新进入?",buyBulletTip:"子弹数目不够, 是否购买?",buySkillTip:"你还没有当前技能, 是否购买!",logoutTip:"登陆断开, 是否刷新页面!",posBombTip:"请选择屏幕中的位置放置炸弹",aimFish:"请选中你要攻击的鱼",help:"帮助",times:"倍",help1:"1.\t鱼分说明：不同的鱼有不同的分值，捕获一条鱼得的子弹数等于当前使用的炮台倍数乘以这条鱼的分数。比如捕获一条50倍的鱼，用的10倍的炮，获得的子弹数量就是50X10=500。 不同鱼的鱼分如下",help2:"2.\t技能使用说明：玩家在游戏过程中可以使用下列技能。",help2Super:"超级技能：被动技能，玩家捕获一定数量的鱼后自动触发，子弹威力加强、射速加倍。",help2Freeze:"冰冻技能：主动技能，可以通过打死某些鱼获得，也可购买，使用后冻住 当前屏幕内的大部分鱼。",help2Lock:"锁定技能：主动技能，可以通过打死某些鱼获得，也可购买，使用后会 自动锁定当前屏幕内鱼分最高的那条鱼，玩家也可以自己点击选择某一条鱼。",help2Bomb:"炸弹：主动技能，购买获得，使用后会随机炸死屏幕内的一群鱼。",help3:"3. 可选的炮倍数如下：",help31:"1,2,3,4,5,10,15,20",help4:"4. 其他说明",help41:"兑换：玩家捕获某些鱼时，会得到一些鱼券，收集一定数量的鱼券可以兑换奖品。",help42:"抽奖：玩家捕获10条鱼分100以上的鱼后，可以抽一次，奖品包括子弹和货币。",help43:"购买：玩家可以在大厅点击购买来购买子弹，也可以在游戏内点击炮台购买炮台皮肤或子弹特效。当技能的数量是0时，可以点击此技能图标来购买技能。",tourSkip:"退出引导",tourStart:"开始游戏",tour1:"点击下拉按钮选择币种",tour2:"选择币种不同，<br/>游戏房间也会随之切换",tour3:"在试玩场您只能体验游戏，<br/>在正式场才能赢得数字货币",tour4:"进入正式场后，系统会自动将您的数字货币兑换成子弹；请放心，在您离开房间后，所有剩余子弹将会再兑换成您的数字货币",tour5:"控制您的炮台，点击并捕捉鱼群，<br/>获得更多子弹",tour6:"可以使用道具，帮助您捕获<br/>更多更大的鱼",noData:"暂无数据",NetError:"网络异常, 正在重新连接",NetComeBack:"欢迎回来!",OtherLogin:"异地登录，请刷新重试",InputEmptyWarn:"输入的值不能为空...!",Delete:"删除",buyItemTip:"确认花费$1个$2, 购买$3个$4.",buySkinTip:"确认花费$1个$2, 购买$3.",beyondBulletNum:"超出当前的子弹数目",itemListTitle:"道具存量",itemList1:"道具类型",itemList2:"购买数量总和",itemList3:"游戏赠送总和",search:"查询",gameNo:"场次",remainingNum:"剩余数量",gameListTitle:"游戏记录",cost:"消耗",prize:"收益",delayUpdateAccount:"您的余额变动因链上区块确认可能有所延迟，请耐心等待。",enterGameCostTip:"系統將{bringAmount}{currency}兌換成{bulletNum}子彈，\n離開房間時，會將剩餘子彈兌換成您的{currency}。",NoMoneyAmount:"当前货币余额不足，最小需携带{minAmount}{currency}才可进场，请去充值或者切换其他货币。",platformDiffCurrencyEnterGameErr:"您还有未完成的游戏，系统自动帮您复盘。"},a()(y,s.NoMoney,"当前货币余额不足，请去充值或切换其他货币."),a()(y,"noMoneyConfirm","去充值"),a()(y,s.ReExchange,"子弹不足是否继续兑换!"),a()(y,s.TrialTimeGame,"已超出试玩时长，请去正式场进行游戏"),a()(y,s.TrialNotBullet,"子弹不足，请重新进入或去正式场进行游戏"),a()(y,s.NetError,"网络异常, 请刷新重试"),a()(y,s.TrialClose,"试玩模式关闭"),a()(y,s.OverLimit,"消费金额已达上限"),a()(y,s.ToQuick,"操作太频繁"),y)),a()(m,b.Zh_HK,(g={deposit:"充值",withdrawal:"提幣",balance:"餘額",bullet:"子彈",automaticFiring:"自動開炮",buyBullet:"購買子彈",casualMode:"休閒模式",tournamentMode:"競技模式",trialField:"試玩場",realField:"正式場",stayTuned:"敬請期待",quickStart:"快速開始",NumBullet:"剩餘子彈",guest:"遊客",volumeSetting:"音量設定",music:"音樂",soundEffects:"音效",tips:"提示",cancel:"取消",confirm:"確定",luckyDraw:"抽獎",redemption:"兌換",buySuccess:"購買成功",luckyDrawTip2:"恭喜你獲得",Num:"弾薬",shop:"商店",skin:"皮膚",lock:"鎖定",freeze:"冰凍",bomb:"炸彈",voucher:"獎券",use:"使用",inUse:"使用中",item:"道具",youAreHere:"您在此處",purchase:"購買",buyBulletCost:"需要花費",leaveTip:"確定要離開遊戲嗎?",reEnter:"你當前在遊戲中是否重新進入?",kickedTip:"你被踢出房間, 刷新重新進入?",buyBulletTip:"子彈數目不夠, 是否購買?",buySkillTip:"你還冇有當前技能, 是否購買!",logoutTip:"登陸斷開, 收否刷新頁麵!",posBombTip:"請選擇屏幕中的位置放置炸彈",aimFish:"請選中你要攻擊的魚",help:"幫助",times:"倍",help1:"1.\t魚分說明：不同的魚有不同的分值，捕獲一條魚得的子彈數等於當前使用的炮臺倍數乘以這條魚的分數。比如捕獲一條50倍的魚，用的10倍的炮，獲得的子彈數量就是50X10=500。 不同魚的魚分如下",help2:"2.\t技能使用說明：玩家在遊戲過程中可以使用下列技能。",help2Super:"超級技能：被動技能，玩家捕獲一定數量的魚後自動觸發，子彈威力加強、射速加倍。",help2Freeze:"冰凍技能：主動技能，可以通過打死某些魚獲得，也可購買，使用後凍住 當前屏幕內的大部分魚。",help2Lock:"鎖定技能：主動技能，可以通過打死某些魚獲得，也可購買，使用後會 自動鎖定當前屏幕內魚分最高的那條魚，玩家也可以自己點擊選擇某一條魚。",help2Bomb:"炸彈：主動技能，購買獲得，使用後會隨機炸死屏幕內的一群魚。",help3:"3. 可選的炮倍數如下：",help31:"1,2,3,4,5,10,15,20",help4:"4.\t其他說明",help41:"兌換：玩家捕獲某些魚時，會得到一些魚券，收集一定數量的魚券可以兌換獎品。",help42:"抽獎：玩家捕獲10條魚分100以上的魚後，可以抽一次，獎品包括子彈和貨幣。",help43:"購買：玩家可以在大廳點擊購買來購買子彈，也可以在遊戲內點擊炮臺購買炮臺皮膚或子彈特效。當技能的數量是0時，可以點擊此技能圖標來購買技能。",tourSkip:"退出引導",tourStart:"開始遊戲",tour1:"點擊下拉按鈕選擇幣種",tour2:"選擇幣種不同，<br/>遊戲房間也會隨之切換",tour3:"在試玩場您隻能體驗遊戲，<br/>在正式場才能贏得數字貨幣",tour4:"進入正式場後，係統會自動將您的數字貨幣兌換成子彈；請放心，在您離開房間後，所有剩餘子彈將會再兌換成您的數字貨幣",tour5:"控製您的炮臺，點擊並捕捉魚群，<br/>獲得更多子彈",tour6:"可以使用道具，幫助您捕獲<br/>更多更大的魚",noData:"暫無數據",NetError:"網絡異常, 正在重新連接",NetComeBack:"歡迎回來!",OtherLogin:"異地登錄，請刷新重試",InputEmptyWarn:"輸入的值不能為空...!",Delete:"刪除",buyItemTip:"確認花費$1個$2, 購買$3個$4.",buySkinTip:"確認花費$1個$2, 購買$3.",beyondBulletNum:"超出當前的子彈數目",itemListTitle:"道具存量",itemList1:"道具類型",itemList2:"購買數量總和",itemList3:"遊戲贈送總和",search:"查詢",gameNo:"場次",remainingNum:"剩餘數量",gameListTitle:"遊戲記錄",cost:"消耗",prize:"收益",delayUpdateAccount:"您的餘額變動因鏈上區塊確認可能有所延遲，請耐心等待。",enterGameCostTip:"系統將{bringAmount}{currency}兌換成{bulletNum}子彈，\n離開房間時，會將剩餘子彈兌換成您的{currency}。",NoMoneyAmount:"當前貨幣餘額不足，最小需攜帶{minAmount}{currency}才可進場，請去充值或者切換其他貨幣。",platformDiffCurrencyEnterGameErr:"您還有未完成的遊戲，係統自動幫您複盤。"},a()(g,s.NoMoney,"當前貨幣餘額不足，請去充值或切換其他貨幣."),a()(g,"noMoneyConfirm","去充值"),a()(g,s.ReExchange,"子彈不足是否繼續兌換!"),a()(g,s.TrialTimeGame,"已超出試玩時長，請去正式場進行遊戲"),a()(g,s.TrialNotBullet,"子彈不足，請重新進入或去正式場進行遊戲"),a()(g,s.NetError,"網絡異常, 請刷新重試"),a()(g,s.TrialClose,"試玩模式關閉"),a()(g,s.OverLimit,"消費金額已達上限"),a()(g,s.ToQuick,"操作太頻繁"),g)),m),tt=(_={},a()(_,b.Kor,{}),a()(_,b.Jp,{}),a()(_,b.Zh,{}),a()(_,b.Zh_HK,{}),a()(_,b.En,{}),n(89)),et=n.n(tt),nt=n(0),it=n.n(nt),rt=n(1),ot=n.n(rt),at=n(9),ut=n.n(at),st=n(12),ct=n.n(st),lt=n(29),ht=n.n(lt),ft=n(13),vt=n.n(ft),pt=n(22),dt=n.n(pt),yt=n(23),gt=n.n(yt),mt=n(21),_t=n.n(mt),bt=n(24),kt=n.n(bt),wt=n(34),xt=n.n(wt),Ct=n(11),St=n.n(Ct),It={gun:{1:["base","light","gun"],2:["light","gun"],3:["light","gun"],4:["light","gun"],5:["body","gun"]},bullet:{1:{type:"DragonBone",path:"ani/gun/bullet1"},2:{type:"DragonBone",path:"ani/gun/bullet2"},3:{type:"DragonBone",path:"ani/gun/bullet3"},4:{type:"DragonBone",path:"ani/gun/bullet4"},5:{type:"DragonBone",path:"ani/gun/bullet5"}},net:{1:{type:"DragonBone",path:"ani/gun/net1"},2:{type:"DragonBone",path:"ani/gun/net2"},3:{type:"DragonBone",path:"ani/gun/net3"},4:{type:"DragonBone",path:"ani/gun/net4"},5:{type:"DragonBone",path:"ani/gun/net5"}},fish_shadow:{1:{type:"Img",path:"images/game/fish_shadow1"}},fish:{1:{type:"DragonBone",offset:[50,41,33,43],path:"ani/fish/fish1",ani_type:"horizon_turn",scale:.7},2:{type:"DragonBone",offset:[63,50,62,50],path:"ani/fish/fish2",scale:.7},3:{type:"DragonBone",offset:[47,67,38,58],path:"ani/fish/fish3",ani_type:"horizon_turn",scale:.7},4:{type:"DragonBone",offset:[82,90,86,91],path:"ani/fish/fish4",scale:.8},5:{type:"DragonBone",offset:[137,43,168,43],path:"ani/fish/fish5",scale:.7},6:{type:"DragonBone",offset:[49,47,36,44],path:"ani/fish/fish6",ani_type:"horizon_turn",scale:.7},7:{type:"DragonBone",offset:[47,56,38,55],path:"ani/fish/fish7",ani_type:"horizon_turn",scale:.7},8:{type:"DragonBone",offset:[44,79,120,80],path:"ani/fish/fish8",scale:.8},9:{type:"DragonBone",offset:[85,93,88,86],path:"ani/fish/fish9",scale:.8},10:{type:"DragonBone",offset:[84,91,87,88],path:"ani/fish/fish10",scale:.8},11:{type:"DragonBone",offset:[86,72,150,68],path:"ani/fish/fish11",ani_type:"horizon_turn",scale:.8},12:{type:"DragonBone",offset:[176,74,175,75],path:"ani/fish/fish12",scale:.8},13:{type:"DragonBone",offset:[162,103,201,102],path:"ani/fish/fish13",scale:.9},14:{type:"DragonBone",offset:[148,99,311,99],path:"ani/fish/fish14",scale:.9},15:{type:"DragonBone",offset:[229,157,290,156],path:"ani/fish/fish15",scale:.9},16:{type:"DragonBone",offset:[157,130,68,131],path:"ani/fish/fish16",ani_type:"horizon_turn",turn_ani:!0,coin_flag:!0,coin_color:"#ffd52c",scale:.9},17:{type:"DragonBone",offset:[122,92,150,92],path:"ani/fish/fish17",coin_flag:!0,coin_color:"#af5200",scale:.9},18:{type:"DragonBone",offset:[141,183,188,183],path:"ani/fish/fish18",coin_flag:!0,coin_color:"#412770",scale:.9},19:{type:"DragonBone",offset:[147,140,133,156],path:"ani/fish/fish19",ani_type:"horizon_turn",turn_ani:!0,coin_flag:!0,coin_color:"#ffde00",scale:.9},20:{type:"DragonBone",offset:[110,183,54,138],path:"ani/fish/fish20",ani_type:"horizon_turn",turn_ani:!0,coin_flag:!0,coin_color:"#7a3f04",scale:.9,coin_pos:{x:50,y:-30}},G1:{group:[{type:"2",pos:{x:20.5,y:49.5}},{type:"2",pos:{x:20,y:-51.5}}],offset:[101.5,83.5,98.5,0]},G2:{group:[{type:"1",pos:{x:3.5,y:49}},{type:"1",pos:{x:3.5,y:-71}},{type:"1",pos:{x:-76.5,y:-11}}],offset:[108.5,47.5,93.5,0]},G3:{group:[{type:"6",pos:{x:365,y:-15}},{type:"6",pos:{x:205,y:-15}},{type:"6",pos:{x:285,y:55}},{type:"6",pos:{x:285,y:-75}}],offset:[118.5,410.5,98.5,0]},G4:{group:[{type:"3",pos:{x:88,y:98.5}},{type:"3",pos:{x:77,y:-119.5}},{type:"3",pos:{x:-85,y:69.5}},{type:"3",pos:{x:-85,y:-77.5}},{type:"3",pos:{x:15,y:-5.5}}],offset:[164.5,154.5,143.5,0]}},fish_icon:{1:{type:"Img",path:"images/game/normal/icon_fish1"},2:{type:"Img",path:"images/game/normal/icon_fish2"}},other:{freezing:{type:"DragonBone",path:"ani/other/freezing"},exploding:{type:"DragonBone",path:"ani/other/exploding"},shoal_wave:{type:"DragonBone",path:"ani/other/shoal_wave"},pos_tip:{type:"DragonBone",path:"ani/other/pos_tip"},aim_big:{type:"DragonBone",path:"ani/other/aim_big"},aim:{type:"DragonBone",path:"ani/other/aim"},energy_light:{type:"DragonBone",path:"ani/other/energy_light"},award_circle:{type:"DragonBone",path:"ani/other/award_circle"},award_light:{type:"DragonBone",path:"ani/other/award_light"},coin:{type:"DragonBone",path:"ani/other/coin"},coin_light:{type:"DragonBone",path:"ani/other/coin_light"},skill_border_light:{type:"DragonBone",path:"ani/other/skill_border_light"}}},At=n(55),Bt=n.n(At),Tt=n(31),Mt=n.n(Tt),Lt={gun_global_pos:{0:{x:670,y:696},1:{x:1250,y:696},2:{x:1250,y:54},3:{x:670,y:54}},guns_inside_pos:{start_point:{x:74.5,y:20},origin_point:{x:74.5,y:74.5}},bullet_offset:{11:[0],12:[15,-15],13:[15,-15],21:[0],22:[10,-10],23:[10,-10],31:[0],32:[10,-10],33:[10,-10],41:[0],42:[20,-20],43:[20,-20],51:[0],52:[0],53:[0]},guns_inbox_pos:{x:104,y:78},shadowPos:{default:{x:0,y:80},1:{x:0,y:60,scaleX:.35,scaleY:.35},2:{x:0,y:70,scaleX:.49,scaleY:.49},3:{x:0,y:70,scaleX:.5,scaleY:.5},4:{x:0,y:100,scaleX:.8,scaleY:1.2},5:{x:0,y:80,scaleY:.8,scaleX:.84},6:{x:0,y:70,scaleX:.43,scaleY:.43},7:{x:0,y:80,scaleX:.5,scaleY:.5},8:{x:0,y:120,scaleX:.6,scaleY:1},9:{x:0,y:120,scaleX:.7,scaleY:1.1},10:{x:0,y:80,scaleX:.9,scaleY:1.4},11:{x:0,y:150},12:{x:0,y:150,scaleX:1.8},13:{x:0,y:150,scaleX:2.2,scaleY:1.5},14:{x:0,y:150,scaleX:2.5,scaleY:1.2},15:{x:0,y:200,scaleX:3,scaleY:2},16:{x:0,y:60,scaleX:2},17:{x:0,y:150,scaleX:1.2,scaleY:1.8},18:{x:0,y:100},19:{x:0,y:120,scaleX:1.4,scaleY:1.4},20:{x:0,y:120,scaleX:2}}},Et={bullet:{shape_list:[{type:"Circle",radius:20}]},net:{shape_list:[{type:"Circle",radius:67}]},fish:{1:{shape_list:[{type:"Circle",radius:25}]},2:{shape_list:[{type:"Box",width:30,height:60,position:{x:0,y:-15}}]},3:{shape_list:[{type:"Circle",radius:30}]},4:{shape_list:[{type:"Circle",radius:45}]},5:{shape_list:[{type:"Box",width:50,height:100,position:{x:0,y:-50}}]},6:{shape_list:[{type:"Circle",radius:25}]},7:{shape_list:[{type:"Circle",radius:30,position:{x:-10,y:0}}]},8:{shape_list:[{type:"Box",width:40,height:80,position:{x:0,y:0}},{type:"Box",width:100,height:40,position:{x:0,y:0}}]},9:{shape_list:[{type:"Circle",radius:59}]},10:{shape_list:[{type:"Box",width:40,height:100},{type:"Circle",radius:20,position:{x:-50,y:-40}},{type:"Circle",radius:20,position:{x:55,y:-45}}]},11:{shape_list:[{type:"Box",width:60,height:50,position:{x:0,y:30}},{type:"Circle",radius:40,position:{x:0,y:-35}}]},12:{shape_list:[{type:"Box",width:70,height:150}]},13:{shape_list:[{type:"Box",width:70,height:220,position:{x:0,y:25}},{type:"Box",width:90,height:30,position:{x:0,y:160}}]},14:{shape_list:[{type:"Box",width:50,height:230,position:{x:0,y:30}},{type:"Box",width:160,height:30,position:{x:0,y:-100}}]},15:{shape_list:[{type:"Box",width:110,height:300,position:{x:0,y:-10}},{type:"Box",width:30,height:80,position:{x:0,y:180}},{type:"Box",width:100,height:30,position:{x:0,y:230}}]},16:{shape_list:[{type:"Circle",radius:80,position:{x:0,y:10}}]},17:{shape_list:[{type:"Circle",radius:70}]},18:{shape_list:[{type:"Box",width:100,height:200,position:{x:0,y:-20}}]},19:{shape_list:[{type:"Box",width:90,height:210}]},20:{shape_list:[{type:"Box",width:220,height:80}]}}};function Pt(t){return Math.atan2(t.y,t.x)}function Ot(t){return function(t){return 180*t/Math.PI}(Pt(t))}var Dt=n(231),zt=n(25),Ut=n(291),Nt=n(51),jt=n(33),Ft=n(16),Rt={};function Vt(t,e,n){e=e||30,n=n||0;var i=zt.b.getRes(t+".png"),r=zt.b.getRes(t+".sk");if(i&&r){var o;Rt[t]?o=Rt[t]:((o=new Dt.a).parseData(i,r,24),Rt[t]=o);var a=new Dt.a;return a.parseData(i,r,e),a.buildArmature(n)}}function Gt(t){var e=new Nt.a;return e.loadImage(t+".png"),e.autoSize=!0,e}var Ht=[3,10],$t=[1,2,2],Yt=n(43);function Xt(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Kt(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Wt(t,e){var n,i=It.gun[t],r=new Bt.a,o=Xt(i);try{for(o.s();!(n=o.n()).done;){var a,u=n.value;if("body"===u&&"5"===t)r.set(u,"".concat(t));else r.set(u,ht()(a="".concat(t)).call(a,e))}}catch(t){o.e(t)}finally{o.f()}return r}function Qt(t){for(var e=Ht,n=$t,i=0;i<e.length;i++){if(t<e[i])return{level_skin:"".concat(i+1),hole_num:n[i]}}return{level_skin:"".concat(3),hole_num:n[2]}}function qt(t,e){var n=It[t][e];return n.as&&(n=It[t][n.as]),n}function Jt(t,e,n){var i,r=Lt.bullet_offset[n],o=[],a=e.clone().normalize().scale(30,30),u=e.clone().normalize().rotate(Math.PI/2),s=Xt(r);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=u.clone().scale(c,c),h=t,f=Lt.gun_global_pos[h],v=Lt.guns_inside_pos.origin_point,p=Lt.guns_inside_pos.start_point,d=void 0,y=void 0;h<=1?(d=p.x-v.x,y=p.y-v.y):(d=v.x-p.x,y=v.y-p.y);var g=new Mt.a.Vector(d,y),m=void 0;m=h<=1?Pt(e)+Math.PI/2:Pt(e)-Math.PI/2,g=g.rotate(m),d=f.x+g.x+l.x+a.x,y=f.y+g.y+l.y+a.y,o.push({x:d,y:y})}}catch(t){s.e(t)}finally{s.f()}return o}function Zt(t,e){var n,i=qt(t,e),r=i.type,o=i.path,a=i.pivot||{x:0,y:0};if("DragonBone"===r)n=Vt(o);else if("Frame"===r)n=function(t){var e=new Ut.a;e.loadAtlas(t+".json"),e.interval=120,e.index=1,e.play();var n=e.getGraphicBounds();return e.pivot(n.width/2,n.height/2),e}(o);else if(n=Gt(o),!a.x&&!a.y){var u=n.getBounds();a={x:u.width/2,y:u.height/2}}return n.pivot(a.x,a.y),n}function te(t){return"9"===t.type}var ee={Click:"sound/click.mp3",HallBg:"sound/hall_bg.mp3",GameBg:"sound/game_bg.mp3",Fire:"sound/fire.mp3",Bomb:"sound/bomb.mp3",Freeze:"sound/freezing.mp3",ShoalComing:"sound/shoal_coming.mp3",CoinFew:"sound/coin_few.mp3",CoinShow:"sound/coin_show.mp3",CoinLot:"sound/coin_lot.mp3",LeaveGame:"sound/leave_game.mp3",PopShow:"sound/pop_show.mp3",FlySkill:"sound/pop_show.mp3",CoinCircle:"sound/pop_show.mp3"},ne=n(19),ie=n(2),re=n.n(ie),oe=n(6),ae=n.n(oe),ue=n(8),se=n.n(ue),ce=n(3),le=n.n(ce),he=n(93),fe=n.n(he),ve=n(35),pe=n.n(ve),de=n(373),ye=n(155),ge=n.n(ye),me=n(41),_e=n.n(me),be=n(145),ke=n.n(be);function we(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return xe(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ce=function(){function t(){it()(this,t),this.events=new Bt.a}return ot()(t,[{key:"on",value:function(t){var e=this,n=t.event,i=t.callback,r=t.caller,o=t.once,a=t.unshift;if("object"!==ge()(n)){var u=[];this.events.has(n)?u=this.events.get(n):this.events.set(n,u);var s,c=we(u);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(r===l.caller&&i===l.callback)return}}catch(t){c.e(t)}finally{c.f()}var h=function(){e.off({event:n,callback:i,caller:r})};a?u.unshift({caller:r,callback:i,once:o,off:h}):u.push({caller:r,callback:i,once:o,off:h})}else for(var f in r=i,n)n.hasOwnProperty(f)&&this.on({event:f,callback:n[f],caller:r})}},{key:"off",value:function(t){var e=t.event,n=t.callback,i=t.caller;if("object"!==ge()(e)){if(this.events.has(e))if(n||i){for(var r=this.events.get(e),o=r.length-1;o>=0;o--)if(r[o].callback===n&&r[o].caller===i){_e()(r).call(r,o,1);break}}else this.events.delete(e)}else for(var a in i=n,e)e.hasOwnProperty(a)&&this.off({event:a,callback:e[a],caller:i})}},{key:"offCaller",value:function(t){var e,n,i=we(ke()(e=this.events).call(e));try{for(i.s();!(n=i.n()).done;)for(var r=n.value,o=r.length-1;o>=0;o--)r[o].caller===t&&_e()(r).call(r,o,1)}catch(t){i.e(t)}finally{i.f()}}},{key:"emit",value:function(t){for(var e=["*",t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,a=e;o<a.length;o++){var u=a[o];if(this.events.has(u)){var s,c=this.events.get(u),l=we(ht()(c).call(c,[]));try{for(l.s();!(s=l.n()).done;){var h,f=s.value,v=void 0,p=f.callback,d=f.once,y=f.off;if("function"==typeof p)if("*"===u)v=p.apply(void 0,ht()(h=[t]).call(h,i));else v=p.apply(void 0,i);if(d&&y(),v)return v}}catch(t){l.e(t)}finally{l.f()}}}}},{key:"clear",value:function(){this.events=new Bt.a}}]),t}(),Se="voice_change",Ie="music_change",Ae=function(){function t(){it()(this,t)}return ot()(t,null,[{key:"init",value:function(){zt.a.stage.on(zt.a.Event.FOCUS,null,(function(){t.resumeBg()}))}},{key:"setVoice",value:function(t){var e=this.sound_manager;this.voice=t;var n=0===t;n!==e.soundMuted&&(e.soundMuted=n),e.setSoundVolume(t),this.event.emit(Se,t)}},{key:"setMusic",value:function(t){var e=this.sound_manager,n=0===t;n!==e.musicMuted&&(e.musicMuted=n,n||this.playBg(this.bg_url)),e.setMusicVolume(t),this.music=t,this.event.emit(Ie,t)}},{key:"play",value:function(t){var e=this,n=this.music||1,i=this.sound_manager,r=i.playSound;i.soundMuted||(this.sound_manager.setMusicVolume(.5*n),r(t,1,de.a.create(null,(function(){e.sound_manager.setMusicVolume(n)}))))}},{key:"playBg",value:function(t){var e=this.sound_manager,n=e.playMusic,i=e.musicMuted;this.bg_url=t,i||n(t)}},{key:"resumeBg",value:function(){this.sound_manager._musicChannel||this.playBg(this.bg_url)}},{key:"stop",value:function(t){var e=this.sound_manager.stopSound;if(!t)return!0;-1!==St()(t).call(t,"bg")&&this.sound_manager.stopMusic(),e(t)}},{key:"stopAll",value:function(){this.sound_manager.stopAll()}}]),t}();Ae.event=new Ce,Ae.sound_manager=zt.a.SoundManager;var Be=n(52),Te=n.n(Be),Me=n(146),Le=n.n(Me),Ee=n(121),Pe=n.n(Ee),Oe=n(109),De=n.n(Oe);function ze(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ue(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ue(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ne(t,e){var n,i=[];"fish"===t?(n=Et.fish[e]).as&&(n=Et.fish[n.as]):n="bullet"===t?Et.bullet:Et.net;var r,o=ze(n.shape_list);try{for(o.s();!(r=o.n()).done;){var a=r.value,u={},s=a.position||{x:0,y:0};if(u.pos=new Tt.Vector(s.x,s.y),"Circle"===a.type)u.shape=new Tt.Circle(new Tt.Vector(0,0),a.radius);else if("Box"===a.type){var c=new Tt.Box(new Tt.Vector(0,0),a.width,a.height);u.shape=c.toPolygon(),a.pivot?u.shape.translate(-a.pivot.x,-a.pivot.y):u.shape.translate(-a.width/2,-a.height/2)}else{for(var l=[],h=a.pivot,f=0;f<a.points.length;f+=2){var v=a.points[f],p=a.points[f+1];l.push(new Tt.Vector(v,p))}u.shape=new Tt.Polygon(new Tt.Vector(0,0),l),h&&u.shape.translate(-h.x,-h.y)}i.push(u)}}catch(t){o.e(t)}finally{o.f()}return i}function je(t){if(t instanceof Tt.Polygon){var e,n=[],i=ze(t.points);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(new Tt.Vector(r.x,r.y))}}catch(t){i.e(t)}finally{i.f()}return new Tt.Polygon(n[0],n)}if(t instanceof Tt.Circle)return new Tt.Circle(t.pos.clone(),t.r)}function Fe(t,e){var n,i=t.shapes,r=e.shapes,o=ze(i);try{for(o.s();!(n=o.n()).done;){var a,u=n.value.shape,s=ze(r);try{for(s.s();!(a=s.n()).done;){var c=a.value.shape,l=new Tt.Response,h=!1;if(u instanceof Tt.Polygon&&c instanceof Tt.Polygon&&(h=Tt.testPolygonPolygon(u,c,l)),u instanceof Tt.Circle&&c instanceof Tt.Polygon&&(h=Tt.testCirclePolygon(u,c,l)),u instanceof Tt.Polygon&&c instanceof Tt.Circle&&(h=Tt.testCirclePolygon(c,u,l)),u instanceof Tt.Circle&&c instanceof Tt.Circle&&(h=Tt.testCircleCircle(c,u,l)),h)return!0}}catch(t){s.e(t)}finally{s.f()}return!1}}catch(t){o.e(t)}finally{o.f()}}function Re(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ve(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ve(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ge={};function He(){return Ge.app.user_info}function $e(){return Ge.app.game.currency}function Ye(){return Ge.app.user_info.user_id}function Xe(t){return t===Ge.app.user_info.user_id}function Ke(){return Ge.app.game.getCurPlayer()}function We(t){return Ge.app.game.getFishById(t)}function Qe(){var t,e=Ge.app.game,n=et()(ke()(t=e.getAllFish()).call(t));return n=Le()(n).call(n,(function(t){return t.visible&&qe(t.pos)})),(n=Pe()(n).call(n,(function(t,e){return e.score-t.score})))[0]}function qe(t){var e=zt.a.stage.width,n=(u.PoolWidth-e)/2,i=n+e,r=t.x;return r>n&&r<i}function Je(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Ge.app.game.getAllFish(),r=Re(i);try{for(r.s();!(e=r.n()).done;){var o=xt()(e.value,2),a=o[1];if(-1===St()(n).call(n,a)){var u=a.body,s=a.visible;s&&Fe(t,u)&&n.push(a)}}}catch(t){r.e(t)}finally{r.f()}return n}var Ze=n(110),tn=n.n(Ze);function en(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return nn(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var rn=function(){function t(){it()(this,t),this.destroyed=!1,this.components=new tn.a}return ot()(t,[{key:"addCom",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];this.components.add(o)}}},{key:"delCom",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];this.components.delete(o)}}},{key:"getCom",value:function(t){var e,n=en(this.components);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i instanceof t)return i}}catch(t){n.e(t)}finally{n.f()}}},{key:"destroy",value:function(){var t,e=en(this.components);try{for(e.s();!(t=e.n()).done;){var n=t.value;"function"==typeof n.destroy&&n.destroy()}}catch(t){e.e(t)}finally{e.f()}this.components.clear(),this.destroyed=!0}}]),t}();function on(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return an(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return an(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function an(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var un=function(){function t(){it()(this,t),this.events=new Bt.a}return ot()(t,[{key:"on",value:function(t,e,n,i){var r,o=this;this.events.has(t)?r=this.events.get(t):(r=new tn.a,this.events.set(t,r));var a,u=on(r);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(n===s.caller&&e===s.callback)return}}catch(t){u.e(t)}finally{u.f()}r.add({caller:n,callback:e,once:i,off:function(){o.off(t,e,n)}})}},{key:"once",value:function(t,e,n){return this.on(t,e,n,!0)}},{key:"getBind",value:function(t){return this.events.get(t)}},{key:"off",value:function(t,e,n){if(this.events.has(t))for(var i=this.events.get(t),r=0,o=et()(i);r<o.length;r++){var a=o[r];if(a.callback===e&&a.caller===n){i.delete(a);break}}}},{key:"offAllCaller",value:function(t){var e,n,i=on(ke()(e=this.events).call(e));try{for(i.s();!(n=i.n()).done;)for(var r=n.value,o=0,a=et()(r);o<a.length;o++){var u=a[o];u.caller===t&&r.delete(u)}}catch(t){i.e(t)}finally{i.f()}}},{key:"emit",value:function(t){if(this.events.has(t)){for(var e=this.events.get(t),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,a=et()(e);o<a.length;o++){var u=a[o];if(e.has(u)){var s=u.callback,c=u.once,l=u.off;"function"==typeof s&&s.apply(void 0,i),c&&l()}}}}},{key:"destroy",value:function(){this.events.clear()}}]),t}(),sn=n(118),cn=n.n(sn),ln=n(81),hn=n.n(ln);function fn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n){var i,r,o=24*Number(n)*60*60*1e3;e=ht()(i=ht()(r="".concat(e,"|")).call(r,o,"|")).call(i,hn()())}localStorage.setItem(t,e)}function vn(t){var e=localStorage.getItem(t);if(!e)return e;var n=e.split("|"),i=xt()(n,3),r=i[0],o=i[1],a=i[2];if(!o)return r;var u=Number(o),s=Number(a);return hn()()-s<u?r:(localStorage.removeItem(t),null)}var pn=n(59),dn=n.n(pn),yn=n(185),gn=n.n(yn),mn={closeOther:!1,closeOnSide:!0,closeByGroup:!1,closeByName:!1,shadowAlpha:.7,shadowColor:"#000000",autoClose:!1};function _n(t,e,n){var i=t[e];return t[e]=function(){for(var t,e=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i.apply(this,ht()(t=[]).call(t,o));return bn(u,(function(){var t;n.apply(void 0,ht()(t=[e,u]).call(t,o))})),u},function(){t[e]=i}}function bn(t,e){t instanceof ct.a?t.then((function(t){bn(t,e)})):e()}function kn(t){return new ct.a((function(e,n){return e(new t)}))}function wn(t){var e=this;return new ct.a((function(n,i){if(t.active)return n();t.once("onViewCreated",e,(function(){return n()}))}))}function xn(t){return new ct.a((function(e,n){if(t.active)return e();_n(t,"onEnable",(function(){e()})),_n(t,"onDestroy",(function(){n()}))}))}var Cn=n(64),Sn=n(69),In=n(60),An=n(112),Bn=n(5);function Tn(){var t=Ji.director.runningScene;return function(){return!!Ji.director.isLoadingScene||t!==Ji.director.runningScene}}function Mn(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ln(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ln(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var En=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Pn=function(t){var e=this;t.HonorEffectTween&&t.HonorEffectTween.complete(),t.HonorEffectTween=Cn.a.from(t,{x:zt.a.stage.width/2,y:zt.a.stage.height/2,scaleX:.2,scaleY:.2,alpha:0},300,Sn.a.backOut,Ft.a.create(this,(function(){t.HonorEffectTween=void 0,t.scale(1,1),t.alpha=1,e.doOpen(t)})),0,!1,!1)},On=function(t){var e=this;t.HonorEffectTween&&t.HonorEffectTween.complete(),t.HonorEffectTween=Cn.a.to(t,{x:zt.a.stage.width/2,y:zt.a.stage.height/2,scaleX:0,scaleY:0,alpha:0},300,Sn.a.backIn,Ft.a.create(this,(function(){t.HonorEffectTween=void 0,t.scale(1,1),t.alpha=1,e.doClose(t)})),0,!1,!1)},Dn=function(){function t(){var e;it()(this,t),this.wait_dialog_task=new Bt.a,this.open_dialog_list=[],this.dialog_pool_list=[],An.a.closeDialogOnSide=!1;var n=In.a.manager;_n(n,"doClose",dn()(e=this.injectDoCloseAfter).call(e,this)),n.popupEffectHandler=new Ft.a(n,Pn),n.closeEffectHandler=new Ft.a(n,On),this.dialog_manager=n}return ot()(t,[{key:"onResize",value:function(t,e){var n,i=Mn(this.open_dialog_list);try{for(i.s();!(n=i.n()).done;){var r=n.value.dialog;r.onResize&&r.onResize(t,e)}}catch(t){i.e(t)}finally{i.f()}}},{key:"openDialog",value:function(t,e){var n=this;return new ct.a((function(i,r){return En(n,void 0,void 0,ut.a.mark((function n(){var o,a,u,s,c,l,h,f,v,p,d,y,g,m=this;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t,s=!1,t.dialog&&(o=(c=t).dialog,a=c.use_exist,u=c.use_exist,s=c.stay_scene||!1),l=this.wait_dialog_task,h=this.open_dialog_list,s&&(f=Tn()),!a){n.next=15;break}if(!(p=l.get(o))){n.next=13;break}return n.next=10,p.then((function(t){return t}));case 10:v=n.sent,n.next=15;break;case 13:(d=gn()(h).call(h,(function(t){return t.url===o})))&&(v=d.dialog);case 15:if(v){n.next=21;break}return y=this.createDialog(o),l.set(o,y.then((function(t){return l.delete(o),t}))),n.next=20,y;case 20:v=n.sent;case 21:return g=this.setDialogConfig(o,v,e),wn(v).then((function(){if(v.onResize){var t=zt.a.stage,e=t.width,n=t.height;v.onResize(e,n)}var i=v.popupEffect;if(void 0!==u&&!1===u&&(v.popupEffect=null),g.beforeOpen&&g.beforeOpen(v),null==f?void 0:f())return r("change scene! dialog cant open in diff scene!");v.open(g.closeOther),i&&(v.popupEffect=i),m.afterOpen(v),m.checkMask()})),n.next=25,xn(v);case 25:return n.abrupt("return",i(v));case 26:case"end":return n.stop()}}),n,this)})))}))}},{key:"createDialog",value:function(t){var e=this;return new ct.a((function(n,i){return En(e,void 0,void 0,ut.a.mark((function e(){var i,r,o,a,u;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.dialog_pool_list,r=0;case 2:if(!(r<i.length)){e.next=11;break}if((o=i[r]).url!==t){e.next=8;break}return _e()(i).call(i,r,1),a=o.dialog,e.abrupt("return",n(a));case 8:r++,e.next=2;break;case 11:if("string"!=typeof t){e.next=17;break}return e.next=14,ki.loadScene("Dialog",t);case 14:u=e.sent,e.next=24;break;case 17:if("function"!=typeof t){e.next=23;break}return e.next=20,kn(t).then((function(t){return n(t)}));case 20:u=e.sent,e.next=24;break;case 23:t instanceof In.a&&(u=t);case 24:n(u);case 25:case"end":return e.stop()}}),e,this)})))}))}},{key:"setDialogConfig",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.open_dialog_list;n=pe()(pe()(pe()({},mn),e.config),n);var r=gn()(i).call(i,(function(t){return t.dialog===e}));return r?r.config=n:i.push({url:t,dialog:e,config:n}),n}},{key:"getDialogConfig",value:function(t){var e=this.open_dialog_list,n=gn()(e).call(e,(function(e){return e.dialog===t}));return n&&n.config}},{key:"injectDoCloseAfter",value:function(t,e,n){for(var i,r=this.open_dialog_list,o=this.dialog_pool_list,a=0;a<r.length;a++){var u=r[a];if(u.dialog===n){i=u,_e()(r).call(r,a,1);break}}this.checkMask(),i&&!n.destroyed&&o.push(i)}},{key:"afterOpen",value:function(t){var e=this.getDialogConfig(t);e&&e.autoClose&&zt.a.timer.once(e.autoClose,t,t.close)}},{key:"checkMask",value:function(){for(var t=this,e=this.dialog_manager,n=e.maskLayer,i=function(i){var r=e.getChildAt(i);if(r&&r.isModal){var o=t.getDialogConfig(r);if(!o)return"continue";An.a.popupBgAlpha=o.shadowAlpha,An.a.popupBgColor=o.shadowColor,o.closeOnSide&&(n.offAllCaller(e),n.once(Bn.a.CLICK,e,(function(){r.close()})));var a=n.width,u=n.height;return n.graphics.clear(!0),n.graphics.drawRect(0,0,a,u,An.a.popupBgColor),n.alpha=An.a.popupBgAlpha,{v:void 0}}},r=e.numChildren-1;r>-1;r--){var o=i(r);if("continue"!==o&&"object"===ge()(o))return o.v}}},{key:"closeAllDialogs",value:function(){this.dialog_manager.closeAll()}},{key:"getDialogsByGroup",value:function(t){this.dialog_manager.getDialogsByGroup(t)}},{key:"closeDialogsByGroup",value:function(t){this.dialog_manager.closeByGroup(t)}},{key:"getDialogByName",value:function(t){var e,n=Mn(this.open_dialog_list);try{for(n.s();!(e=n.n()).done;){var i=e.value.dialog;if(i.name===t)return i}}catch(t){n.e(t)}finally{n.f()}}},{key:"closeDialogByName",value:function(t){var e,n=Mn(this.open_dialog_list);try{for(n.s();!(e=n.n()).done;){var i=e.value.dialog;if(i.name===t)return i.close()}}catch(t){n.e(t)}finally{n.f()}}},{key:"hideMask",value:function(t){this.dialog_manager.maskLayer.visible=t}}]),t}(),zn=n(87);function Un(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Nn(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var jn=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Fn=function(){function t(){it()(this,t),this.sceneChangeBeforeListener=[],this.sceneChangeAfterListener=[],this.sceneClassMap={},this.scene_pool=new Bt.a,this.is_loading_scene=!1}return ot()(t,[{key:"onResize",value:function(t,e){this.cur_scene&&(this.cur_scene.onResize?this.cur_scene.onResize(t,e):this.cur_scene.size(t,e))}},{key:"getCurScene",value:function(){return this.cur_scene}},{key:"switchScene",value:function(t,e){var n=this.scene_pool,i=zt.a.stage,r=i.width,o=i.height,a=this.cur_scene,u=a?a.url:void 0;return this.cur_scene=e,e.open(!0),this.onResize(r,o),a&&!a.destroyed&&n.set(u,a),{cur:e.url,prev:u}}},{key:"callChangeListener",value:function(t){var e=[];"before"===t?e=this.sceneChangeBeforeListener:"after"===t&&(e=this.sceneChangeAfterListener);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o,a=Un(e);try{for(a.s();!(o=a.n()).done;){var u=o.value,s=u.apply(void 0,i);if(s)return s}}catch(t){a.e(t)}finally{a.f()}}},{key:"runScene",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return new ct.a((function(n,r){return jn(e,void 0,void 0,ut.a.mark((function e(){var o,a;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.is_loading_scene=!0,!this.callChangeListener("before",this.cur_scene&&this.cur_scene.url,t)){e.next=4;break}return e.abrupt("return",r("has callChangeListener interrupt open:> ".concat(t," ")));case 4:if(o=this.scene_pool.get(t)){e.next=19;break}if("string"!=typeof t){e.next=12;break}return e.next=9,ki.loadScene("Scene",t);case 9:o=e.sent,e.next=19;break;case 12:if("function"!=typeof t){e.next=18;break}return o=new t,e.next=16,new ct.a((function(e,n){kn(t).then((function(t){return e(t)}))}));case 16:e.next=19;break;case 18:t instanceof zn.a&&(o=t);case 19:xn(o).then((function(){n(o)})),a=this.switchScene(i,o),this.is_loading_scene=!1,this.callChangeListener("after",a.cur,a.prev);case 23:case"end":return e.stop()}}),e,this)})))}))}}]),t}(),Rn=n(283),Vn=n.n(Rn);function Gn(t,e){var n=this;return new ct.a((function(i,r){var o;e&&(o=new Ft.a(null,(function(t){e(t)}),null,!1));var a=new Ft.a(n,(function(){Vn()(i)}));zt.b.load(t,a,o)}))}var Hn=n(165),$n=n.n(Hn),Yn=n(72),Xn=n.n(Yn);function Kn(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Wn(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Qn=function t(e,n){return n?t(n,e%n):e},qn=[];function Jn(t,e,n,i){var r=function(){Zn(t,n)};return qn.push({caller:n,delay:e,fun:t,off:r,once:i,then:hn()()}),ti(),r}function Zn(t,e){for(var n=qn.length-1;n>=0;n--){var i=qn[n],r=i.fun;if(i.caller===e&&r===t)return _e()(qn).call(qn,n,1),void ti()}}function ti(){zt.c.clear(this,ei);var t=Xn()(qn).call(qn,(function(t){return t.delay}));if(t.length){var e=function(t){var e,n,i=Kn(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e=Qn(r,e)}}catch(t){i.e(t)}finally{i.f()}return e}(t);zt.c.loop(e,this,ei)}}function ei(){var t=qn.length;if(t)for(var e=hn()(),n=t-1;n>=0;n--){var i=qn[n],r=i.fun,o=i.then,a=i.delay,u=i.once,s=i.off,c=e-o||0;if(!(c<a)){var l=Math.floor(c/a),h=e-(c-l*a);"function"==typeof r&&r(l),u?s():i.then=h}}}function ni(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return ii(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ii(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ri=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function oi(t){return new ct.a((function(e,n){Te()((function(){e(t)}),1e3*t)}))}function ai(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ri(this,void 0,void 0,ut.a.mark((function r(){var o,a;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,gi(t);case 2:return o={alpha:0,visible:!0},e=e||700,n=n||"circleOut",a={alpha:i},r.abrupt("return",vi({ease_fn:n,end_props:a,sprite:t,start_props:o,time:e}));case 7:case"end":return r.stop()}}),r)})))}function ui(t,e,n){return ri(this,void 0,void 0,ut.a.mark((function i(){var r;return ut.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,gi(t);case 2:return e=e||700,n=n||"circleOut",r={alpha:0},i.abrupt("return",vi({ease_fn:n,end_props:r,sprite:t,time:e}).then((function(){t.destroyed||(t.visible=!1,t.alpha=1)})));case 6:case"end":return i.stop()}}),i)})))}function si(t,e,n,i){return ri(this,void 0,void 0,ut.a.mark((function r(){var o,a,u,s;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(o=t.getBounds().height,i=o>50?50:o),r.next=3,gi(t);case 3:return n=n||"circleOut",e=e||200,pi(t,{alpha:.2,visible:!0}),a=t.y,u={y:a+i},s={alpha:1,y:a},r.abrupt("return",vi({sprite:t,start_props:u,end_props:s,time:e,ease_fn:n}));case 10:case"end":return r.stop()}}),r)})))}function ci(t,e,n,i){return ri(this,void 0,void 0,ut.a.mark((function r(){var o,a,u,s;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(o=t.getBounds().height,i=o>50?50:o),r.next=3,gi(t);case 3:return n=n||"circleOut",e=e||200,pi(t,{alpha:.2,visible:!0}),a=t.y,u={y:a-i},s={alpha:1,y:a},r.next=11,vi({sprite:t,start_props:u,end_props:s,time:e,ease_fn:n});case 11:case"end":return r.stop()}}),r)})))}function li(t,e,n,i){return ri(this,void 0,void 0,ut.a.mark((function r(){var o,a,u,s;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(o=t.getBounds().width,i=o>50?50:o),r.next=3,gi(t);case 3:return n=n||"easeIn",e=e||200,pi(t,{alpha:.2,visible:!0}),a=t.x,u={x:a+i},s={alpha:1,x:a},r.abrupt("return",vi({sprite:t,start_props:u,end_props:s,time:e,ease_fn:n}));case 10:case"end":return r.stop()}}),r)})))}function hi(t,e,n,i){return ri(this,void 0,void 0,ut.a.mark((function r(){var o,a,u,s;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i||(o=t.getBounds().width,i=o>50?50:o),r.next=3,gi(t);case 3:return n=n||"circleOut",e=e||200,pi(t,{alpha:.2,visible:!0}),a=t.x,u={x:a-i},s={alpha:1,x:a},r.abrupt("return",vi({sprite:t,start_props:u,end_props:s,time:e,ease_fn:n}));case 10:case"end":return r.stop()}}),r)})))}function fi(t,e,n,i,r){return ri(this,void 0,void 0,ut.a.mark((function o(){return ut.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,gi(t);case 2:return pi(t,e),o.abrupt("return",vi({sprite:t,end_props:n,time:i,ease_fn:r}));case 4:case"end":return o.stop()}}),o)})))}function vi(t){var e=this;return new ct.a((function(n,i){return ri(e,void 0,void 0,ut.a.mark((function e(){var r,o,a,u,s,c,l;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sprite,o=t.start_props,a=t.end_props,!r.destroyed){e.next=3;break}return e.abrupt("return",i());case 3:return e.next=5,gi(r);case 5:if(u=t.ease_fn,s=t.time,c=new Cn.a,"string"==typeof(u=u||Sn.a.linearNone)&&(u=Sn.a[u]),pi(r,o),0!==s&&!r.is_stop){e.next=15;break}return pi(r,a),n(),e.abrupt("return");case 15:for(l in s=s||300,a)r[l]===a[l]&&delete a[l];$n()(a).length||n(),r.tween=c.to(r,a,s,u,Ft.a.create(r,(function(){r.destroyed?i():n()})));case 19:case"end":return e.stop()}}),e)})))}))}function pi(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function di(t){var e=t.sprite,n=t.props_arr,i=t.time,r=t.ease_fn,o=t.is_jump,a=t.end_jump,u=t.step_fn,s=n.length,c=0,l=0;yi(e),function t(){if(!e.destroyed){if(o)!function(t,e,n){new ct.a((function(i,r){Te()((function(){pi(t,e),i()}),n)}))}(e,n[c],i);else{var h=c+1;h>=s&&(a?(c=0,h=1):h=0);var f=n[c],v=n[h];vi({ease_fn:r,end_props:v,sprite:e,start_props:f,time:i}).then((function(){u(l),Te()(t,0)}))}c++,l++,c>=s&&(c=0)}}()}!function(){var t=[];function e(t,e,n){return t+(e-t)*n}function n(e,n){for(var i=t.length-1;i>=0;i--){var r=t[i].caller,o=t[i].off,a=t[i].callback;r===e&&(n&&a&&"function"==typeof a&&a(),o&&"function"==typeof o&&o(),_e()(t).call(t,i,1))}}}();function yi(t){if(t)return"function"==typeof t?t():t.time_out?clearTimeout(t.time_out):void(t.tween&&(t.tween.complete(),t.tween.clear()))}function gi(t){return new ct.a((function(e,n){t&&(t.tween&&(t.tween.complete(),t.tween.clear(),t.tween=void 0),Te()((function(){e()})))}))}function mi(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return _i(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function _i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var bi,ki,wi,xi=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Ci=function(){function t(){it()(this,t),this.load_tasks=new tn.a,this.load_map=new Bt.a}return ot()(t,[{key:"loadScene",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&"Scene"===t&&zt.a.loader.clearUnLoaded();var r=new ct.a((function(i,r){("Scene"===t?zn.a:In.a).load(e,Ft.a.create(n,(function(t){i(t)})),Ft.a.create(n,n.setLoadProgress,[t],!1))}));return i||this.addLoadTask(t,r),r}},{key:"preLoad",value:function(t,e){this.loadScene(t,e,!0)}},{key:"load",value:function(t,e){var n=this,i=new ct.a((function(i,r){return xi(n,void 0,void 0,ut.a.mark((function n(){var r,o=this;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&(r=function(t){o.setLoadProgress(e,t)}),n.next=3,Gn(t,r);case 3:return n.abrupt("return",i());case 4:case"end":return n.stop()}}),n)})))}));return this.addLoadTask(e,i),i}},{key:"addLoadTask",value:function(t,e){var n=this;if(t){var i=this.load_tasks;this.setLoadViewVisible(t,!0);var r=ct.a.all([e,oi(1)]).then((function(){var e,o=!1,a=mi(i);try{for(a.s();!(e=a.n()).done;){var u=e.value;u.task!==r?u.type===t&&(o=!0):i.delete(u)}}catch(t){a.e(t)}finally{a.f()}o||n.setLoadViewVisible(t,!1)}));this.load_tasks.add({task:r,type:t})}}},{key:"setLoadView",value:function(t,e){return xi(this,void 0,void 0,ut.a.mark((function n(){var i,r;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i="Scene"===t?zn.a:In.a,n.next=3,new ct.a((function(t,n){i.load(e,Ft.a.create(null,(function(e){t(e)})))}));case 3:r=n.sent,this.load_map.set(t,r);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"setLoadViewVisible",value:function(t,e){var n=this.load_map.get(t);n&&(e?n.onShow():n.onHide())}},{key:"setLoadProgress",value:function(t,e){var n=this.load_map.get(t);n&&n.onProgress(e)}}]),t}(),Si=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function Ii(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ai(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ai(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ai(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Bi=new(function(){function t(){it()(this,t)}return ot()(t,[{key:"init",value:function(){zt.a.stage.on(Bn.a.RESIZE,this,this.onResize),this.onResize()}},{key:"onResize",value:function(){var t=zt.a.stage,e=t.width,n=t.height;wi.onResize(e,n),bi.onResize(e,n)}},{key:"runScene",value:function(t){return wi.runScene(t).catch((function(t){Ji.DEBUG_MODE&&console.error(t)}))}},{key:"isLoadingScene",get:function(){return wi.is_loading_scene}},{key:"runningScene",get:function(){return wi.getCurScene()}},{key:"openDialog",value:function(t,e){return bi.openDialog(t,e)}},{key:"load",value:function(t,e){return ki.load(t,e)}},{key:"getDialogByName",value:function(t){return bi.getDialogByName(t)}},{key:"getDialogsByGroup",value:function(t){return bi.getDialogsByGroup(t)}},{key:"closeDialogByName",value:function(t){bi.closeDialogByName(t)}},{key:"closeDialogsByGroup",value:function(t){bi.closeDialogsByGroup(t)}},{key:"closeAllDialogs",value:function(){bi.closeAllDialogs()}},{key:"setLoadPageForScene",value:function(t){return ki.setLoadView("Scene",t)}},{key:"setLoadPageForDialog",value:function(t){return ki.setLoadView("Dialog",t)}},{key:"clearDialog",value:function(t){return Si(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li();case 2:wi.sceneChangeAfterListener.push(t);case 3:case"end":return e.stop()}}),e)})))}},{key:"onSceneChangeBefore",value:function(t){return Si(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li();case 2:wi.sceneChangeBeforeListener.push(t);case 3:case"end":return e.stop()}}),e)})))}},{key:"onSceneChangeAfter",value:function(t){return Si(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li();case 2:wi.sceneChangeAfterListener.push(t);case 3:case"end":return e.stop()}}),e)})))}},{key:"clearListener",value:function(t){return Si(this,void 0,void 0,ut.a.mark((function e(){var n,i;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li();case 2:wi.sceneChangeBeforeListener=Le()(n=wi.sceneChangeBeforeListener).call(n,(function(e){return e!==t})),wi.sceneChangeAfterListener=Le()(i=wi.sceneChangeAfterListener).call(i,(function(e){return e!==t}));case 4:case"end":return e.stop()}}),e)})))}},{key:"hideDialog",value:function(t){bi.hideMask(t)}}]),t}()),Ti=[],Mi=!1;function Li(){return new ct.a((function(t,e){if(Mi)return t();Ti.push(t)}))}function Ei(){if(wi=new Fn,ki=new Ci,bi=new Dn,Bi.init(),Ti){var t,e=Ii(Ti);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(t){e.e(t)}finally{e.f()}Mi=!0,Ti=void 0}}function Pi(t){return(""+t.replace(/[^\x00-\xff]/gi,"ox")).length}var Oi=n(178),Di=n.n(Oi);function zi(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ui(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ui(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ui(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ni(t){return t>9?t+"":"0"+t}var ji=n(276),Fi=n(76);function Ri(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Vi(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vi(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Vi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Gi={createSkeleton:Vt,cutStr:function(t,e){var n=/[^\x00-\xff]/g;if((t+="").replace(n,"mm").length<=e)return t;for(var i=Math.floor(e/2);i<t.length;i++)if(t.substr(0,i).replace(n,"mm").length>=e)return t.substr(0,i)+"...";return t},getStringLength:Pi,formatTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["小时","分钟","秒"],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="",r=0,o=0,a=t%60;"string"==typeof e&&(e=[e,e,""]),t>=60&&(o=t/60|0),o>=60&&(r=o/60|0,o%=60);for(var u=[r,o,a],s=0,c=u.length;s<c;s++){var l=u[s];n&&!l||(n=!1,i+=Ni(l)+e[s])}return i},formatTimeLight:function(t){var e="",n=0,i=0,r=0;t>60&&(r=t/60|0),r>60&&(i=r/60|0,r%=60),i>24&&(n=i/24|0,i%=24);var o,a=[n,i,r,t%60],u=["天","小时","分","秒"],s=zi(Di()(a).call(a));try{for(s.s();!(o=s.n()).done;){var c,l,h=xt()(o.value,2),f=h[0],v=h[1];if(v>0)e=ht()(c=ht()(l="".concat(e)).call(l,v)).call(c,u[f])}}catch(t){s.e(t)}finally{s.f()}return e},loadRes:Gn,registerFontSize:function(t){var e,n=Ri(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=new ji.a,o=i.split("/"),a=o[o.length-1],u="".concat(i,".fnt"),s="".concat(i,".png");r.parseFont(zt.b.getRes(u),zt.b.getRes(s)),Fi.a.registerBitmapFont(a,r)}}catch(t){n.e(t)}finally{n.f()}}},Hi=n(27),$i=n(206),Yi=n(133),Xi=n(184),Ki=n(40),Wi=n(44),Qi=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},qi=!1;var Ji={name:"Honor",version:"1.0.0-beta",run:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qi(this,void 0,void 0,ut.a.mark((function n(){var i,r,o,a,u=this;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return zt.a.Config.isAntialias=!0,zt.a.Config.useRetinalCanvas=!0,/apple/i.test(navigator.vendor)&&(zt.a.Config.useRetinalCanvas=!1,zt.a.Config.useWebGL2=!1),zt.a.init(t.width,t.height,Yi.a),zt.a.stage.frameRate=Xi.a.FRAME_FAST,zt.a.DebugPanel&&zt.a.DebugPanel.enable(),Wi.a.basePath=e.basePath||Wi.a.basePath,zt.a.stage.scaleMode=t.scaleMode,zt.a.stage.screenMode=t.screenMode,zt.a.stage.alignV=t.alignV,zt.a.stage.alignH=t.alignH,Wi.a.exportSceneToJson=t.exportSceneToJson,t.debug||"true"===Ki.a.getQueryString("debug")?(qi=!0,zt.a.enableDebugPanel()):qi=!1,t.stat&&Hi.a.show(0,0),zt.a.alertGlobalError(!1),i=(i=e.defaultVersion)||"0",Wi.a.customFormat=function(t){var e=Wi.a.version||{};if(St()(t).call(t,"data:image")<0&&St()(t).call(t,"?")<0&&St()(t).call(t,"?v=")<0){var n=e[t];!n&&i&&(n=i),t+="?v="+n}return t},r=[],o=new ct.a((function(t,e){$i.a.enable("fileconfig.json",Ft.a.create(null,(function(){return Qi(u,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})))})))})),r.push(o),(a=e.versionPath)&&r.push(Gn([a])),n.next=25,ct.a.all(r);case 25:a&&(Wi.a.version=zt.b.getRes(a)),Ei();case 27:case"end":return n.stop()}}),n)})))},director:Bi,utils:Gi,DEBUG_MODE:qi},Zi=n(7),tr=n.n(Zi),er=n(10),nr=n(48),ir=n(54),rr=n(210),or=n(129),ar=n(212),ur=n(67),sr=n(98),cr=n(282),lr=n(228);function hr(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var fr,vr,pr,dr=er.a.regClass;pr=fr||(fr={}),function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[nr.a,Yt.a,ir.a,In.a,jt.a,Nt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/alert")}}]),n}(In.a);t.alertUI=e,dr("ui.pop.alert.alertUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[nr.a,Nt.a,ir.a,In.a,Yt.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/buyBullet")}}]),n}(In.a);t.buyBulletUI=n,dr("ui.pop.alert.buyBulletUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,Nt.a,nr.a,In.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/tip")}}]),n}(In.a);t.tipUI=i,dr("ui.pop.alert.tipUI",i);var r=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Nt.a,nr.a,In.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/topTip")}}]),n}(In.a);t.topTipUI=r,dr("ui.pop.alert.topTipUI",r);var o=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[nr.a,In.a,Yt.a,jt.a,Nt.a,ir.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/voice")}}]),n}(In.a);t.voiceUI=o,dr("ui.pop.alert.voiceUI",o);var a=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,rr.a,ir.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/alert/voiceProgress")}}]),n}(zn.a);t.voiceProgressUI=a,dr("ui.pop.alert.voiceProgressUI",a)}((vr=pr.pop||(pr.pop={})).alert||(vr.alert={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,ir.a,nr.a,In.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/guide/GuideDialog")}}]),n}(In.a);t.GuideDialogUI=e,dr("ui.pop.guide.GuideDialogUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[or.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/guide/GuidePointer")}}]),n}(zn.a);t.GuidePointerUI=n,dr("ui.pop.guide.GuidePointerUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[ar.a,ur.a,Nt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/guide/GuidePrompt")}}]),n}(ur.a);t.GuidePromptUI=i,dr("ui.pop.guide.GuidePromptUI",i)}(t.guide||(t.guide={}))}(t.pop||(t.pop={}))}(fr||(fr={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,nr.a,sr.a,In.a,Nt.a,ir.a,jt.a,cr.a,lr.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/help/help")}}]),n}(In.a);t.helpUI=e,dr("ui.pop.help.helpUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Nt.a,nr.a,ur.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/help/helpItem")}}]),n}(ur.a);t.helpItemUI=n,dr("ui.pop.help.helpItemUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,Nt.a,nr.a,ur.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/help/skillItem")}}]),n}(ur.a);t.skillItemUI=i,dr("ui.pop.help.skillItemUI",i)}(t.help||(t.help={}))}(t.pop||(t.pop={}))}(fr||(fr={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[or.a,Nt.a,ur.a,Yt.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(ur.a);e.uiView={type:"View",props:{width:119,height:119},compId:2,child:[{type:"Box",props:{y:-1,x:-1},compId:18,child:[{type:"SkeletonPlayer",props:{y:59,x:58,visible:!1,var:"light",url:"image/pop/lottery/exchange_circle_light.sk",runtime:"Laya.Skeleton"},compId:15},{type:"Image",props:{y:0,x:-3,width:128,skin:"image/pop/lottery/lottery_item_bg.png",height:128},compId:16,child:[{type:"Sprite",props:{y:-16,x:-16,texture:"image/pop/lottery/lottery_item_light.png"},compId:17}]},{type:"Image",props:{y:60,x:60,width:140,var:"light_circle",skin:"image/pop/lottery/light_circle.png",scaleY:1.1,scaleX:1.1,pivotY:70,pivotX:70,height:140,alpha:.8},compId:21},{type:"SkeletonPlayer",props:{y:61,x:60,width:1,visible:!1,var:"box_ani",url:"image/pop/lottery/box.sk",height:100,runtime:"Laya.Skeleton"},compId:22},{type:"Image",props:{y:25,x:22,var:"box_img",skin:"image/pop/lottery/box_normal.png"},compId:26}]}],loadList:["image/pop/lottery/exchange_circle_light.sk","image/pop/lottery/lottery_item_bg.png","image/pop/lottery/lottery_item_light.png","image/pop/lottery/light_circle.png","image/pop/lottery/box.sk","image/pop/lottery/box_normal.png"],loadList3D:[]},t.itemUI=e,dr("ui.pop.lottery.itemUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[ir.a,nr.a,Nt.a,jt.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(zn.a);n.uiView={type:"Scene",props:{width:211,height:253},compId:2,child:[{type:"Image",props:{y:0,x:3.5,skin:"image/pop/lottery/lottery_item2_bg.png",sizeGrid:"42,60,37,53"},compId:17,child:[{type:"SkeletonPlayer",props:{y:127,x:101,url:"image/pop/lottery/exchange_item_light.sk",runtime:"Laya.Skeleton"},compId:13},{type:"Image",props:{y:144,x:1,width:202,skin:"image/pop/lottery/lottery_item2_banner.png",sizeGrid:"0,127,0,31",height:28},compId:19}]},{type:"Sprite",props:{y:20,x:49,texture:"image/pop/lottery/lottery_item2_nbg.png"},compId:4},{type:"Button",props:{y:177,x:37,var:"btn_buy",stateNum:1,skin:"image/pop/lottery/btn_lottery_bug.png"},compId:5,child:[{type:"Label",props:{y:12,x:65,width:53,var:"price_label",text:"500",height:24,fontSize:24,color:"#174c7d",bold:!0,align:"right"},compId:7},{type:"Image",props:{y:8.5,x:22,width:45,var:"price_tag",skin:"image/pop/lottery/tag_bg.png",height:33},compId:12,child:[{type:"Image",props:{y:4,x:12,width:22,var:"coin_icon",skin:"image/pop/lottery/tag_coin_bg.png",height:22},compId:21}]}]},{type:"Label",props:{y:145,width:156,var:"remain_label",valign:"middle",text:"剩余10/20",strokeColor:"#621615",stroke:2,height:22,fontSize:18,color:"#ffffff",centerX:0,bold:!0,align:"center"},compId:8},{type:"Box",props:{y:44,width:183,height:80,centerX:1},compId:18,child:[{type:"Label",props:{y:15,x:-33,width:145,var:"num_label",valign:"middle",text:"1000",strokeColor:"#692315",stroke:2,pivotY:15,pivotX:73,height:30,fontSize:36,font:"lottery",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:10},{type:"Label",props:{y:69,x:0,width:155,var:"item_type",valign:"middle",text:"BTC",strokeColor:"#692315",stroke:2,pivotY:30,pivotX:73,height:30,fontSize:36,font:"alphabet",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:22}]}],loadList:["image/pop/lottery/lottery_item2_bg.png","image/pop/lottery/exchange_item_light.sk","image/pop/lottery/lottery_item2_banner.png","image/pop/lottery/lottery_item2_nbg.png","image/pop/lottery/btn_lottery_bug.png","image/pop/lottery/tag_bg.png","image/pop/lottery/tag_coin_bg.png"],loadList3D:[]},t.item2UI=n,dr("ui.pop.lottery.item2UI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[ir.a,nr.a,Nt.a,jt.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(zn.a);i.uiView={type:"Scene",props:{width:182,height:253},compId:2,child:[{type:"Image",props:{y:0,x:2,width:182,skin:"image/pop/lottery/lottery_item2_bg.png",sizeGrid:"42,60,37,53",height:253},compId:17,child:[{type:"SkeletonPlayer",props:{y:126.5,x:87.5,url:"image/pop/lottery/exchange_item_light.sk",runtime:"Laya.Skeleton"},compId:13},{type:"Image",props:{y:144,x:1,width:173,skin:"image/pop/lottery/lottery_item2_banner.png",sizeGrid:"0,127,0,31",height:28},compId:19}]},{type:"Sprite",props:{y:22,x:33,texture:"image/pop/lottery/lottery_item2_nbg.png"},compId:4},{type:"Button",props:{y:178,x:22,var:"btn_buy",stateNum:1,skin:"image/pop/lottery/btn_lottery_bug.png"},compId:5,child:[{type:"Label",props:{y:12,x:65,width:51,var:"price_label",text:"500",height:24,fontSize:24,color:"#174c7d",bold:!0,align:"right"},compId:7},{type:"Image",props:{y:8.5,x:22,width:45,var:"price_tag",skin:"image/pop/lottery/tag_bg.png",height:33},compId:12,child:[{type:"Image",props:{y:5,x:13.5,width:20,var:"coin_icon",skin:"image/pop/lottery/tag_coin_bg.png",height:20},compId:21}]}]},{type:"Label",props:{y:145,width:156,var:"remain_label",valign:"middle",text:"剩余10/20",strokeColor:"#621615",stroke:2,height:22,fontSize:18,color:"#ffffff",centerX:4,bold:!0,align:"center"},compId:8},{type:"Box",props:{y:45,width:183,height:80,centerX:-1},compId:18,child:[{type:"Label",props:{y:15,x:-33,width:145,var:"num_label",valign:"middle",text:"1000",strokeColor:"#692315",stroke:2,pivotY:15,pivotX:73,height:30,fontSize:36,font:"lottery",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:10},{type:"Label",props:{y:69,x:0,width:155,var:"item_type",valign:"middle",text:"BTC",strokeColor:"#692315",stroke:2,pivotY:30,pivotX:73,height:30,fontSize:36,font:"alphabet",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:23}]}],loadList:["image/pop/lottery/lottery_item2_bg.png","image/pop/lottery/exchange_item_light.sk","image/pop/lottery/lottery_item2_banner.png","image/pop/lottery/lottery_item2_nbg.png","image/pop/lottery/btn_lottery_bug.png","image/pop/lottery/tag_bg.png","image/pop/lottery/tag_coin_bg.png"],loadList3D:[]},t.item2fiveUI=i,dr("ui.pop.lottery.item2fiveUI",i);var r=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[nr.a,ir.a,Nt.a,jt.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(zn.a);r.uiView={type:"Scene",props:{width:877,height:230},compId:2,child:[{type:"Image",props:{y:0,x:0,width:877,skin:"image/pop/lottery/lottery_item2_bg.png",sizeGrid:"23,76,31,60",height:240},compId:17},{type:"Sprite",props:{y:3,x:66,texture:"image/pop/lottery/money_bg.png"},compId:19,child:[{type:"SkeletonPlayer",props:{y:156,x:165,url:"image/pop/lottery/exchange_item_light.sk",scaleY:-1,runtime:"Laya.Skeleton"},compId:24},{type:"SkeletonPlayer",props:{y:86,x:165,url:"image/pop/lottery/exchange_item_light.sk",runtime:"Laya.Skeleton"},compId:13},{type:"Sprite",props:{y:58,x:109,texture:"image/pop/lottery/lottery_item2_nbg.png"},compId:4},{type:"Box",props:{y:81,width:210,height:71,centerX:-1},compId:18,child:[{type:"Label",props:{y:15,x:-33,width:145,var:"num_label",valign:"middle",text:"1000",strokeColor:"#692315",stroke:2,pivotY:15,pivotX:73,height:30,fontSize:36,font:"lottery",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:10},{type:"Label",props:{y:69,x:0,width:155,var:"item_type",valign:"middle",text:"BTC",strokeColor:"#692315",stroke:2,pivotY:30,pivotX:73,height:30,fontSize:36,font:"alphabet",color:"#f4e090",centerX:0,bold:!0,align:"center"},compId:26}]}]},{type:"Box",props:{y:59,x:391,width:475,height:133},compId:25,child:[{type:"Button",props:{y:74,x:168,var:"btn_buy",stateNum:1,skin:"image/pop/lottery/btn_lottery_bug.png"},compId:5,child:[{type:"Label",props:{y:12,x:65,width:51,var:"price_label",text:"500",height:24,fontSize:24,color:"#174c7d",bold:!0,align:"right"},compId:7},{type:"Image",props:{y:7.5,x:22,width:45,var:"price_tag",skin:"image/pop/lottery/tag_bg.png",height:33},compId:22,child:[{type:"Image",props:{y:5,x:13.5,width:20,var:"coin_icon",skin:"image/pop/lottery/tag_coin_bg.png",height:20},compId:23}]}]},{type:"Image",props:{y:0,x:97,width:280,skin:"image/pop/lottery/remain_bg.png",sizeGrid:"10,21,10,23",height:43},compId:21,child:[{type:"Label",props:{y:10,x:7,width:266,var:"remain_label",valign:"middle",text:"剩余: 10/20",height:22,fontSize:24,color:"#fdf3cf",bold:!0,align:"center"},compId:8}]}]}],loadList:["image/pop/lottery/lottery_item2_bg.png","image/pop/lottery/money_bg.png","image/pop/lottery/exchange_item_light.sk","image/pop/lottery/lottery_item2_nbg.png","image/pop/lottery/btn_lottery_bug.png","image/pop/lottery/tag_bg.png","image/pop/lottery/tag_coin_bg.png","image/pop/lottery/remain_bg.png"],loadList3D:[]},t.item2oneUI=r,dr("ui.pop.lottery.item2oneUI",r);var o=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[ir.a,nr.a,Nt.a,jt.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/lottery/item2two")}}]),n}(zn.a);t.item2twoUI=o,dr("ui.pop.lottery.item2twoUI",o);var a=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,Nt.a,sr.a,ir.a,nr.a,rr.a,In.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/lottery/lottery")}}]),n}(In.a);t.lotteryUI=a,dr("ui.pop.lottery.lotteryUI",a);var u=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[jt.a,nr.a,ar.a,ir.a,In.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/lottery/reward")}}]),n}(In.a);t.rewardUI=u,dr("ui.pop.lottery.rewardUI",u)}(t.lottery||(t.lottery={}))}(t.pop||(t.pop={}))}(fr||(fr={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[sr.a,ur.a,Nt.a,jt.a,Yt.a,nr.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/coinMenu")}}]),n}(ur.a);t.coinMenuUI=e,dr("ui.pop.record.coinMenuUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[sr.a,ur.a,Nt.a,jt.a,Yt.a,nr.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/dateMenu")}}]),n}(ur.a);t.dateMenuUI=n,dr("ui.pop.record.dateMenuUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,nr.a,sr.a,ir.a,jt.a,In.a,Nt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/gameRecord")}}]),n}(In.a);t.gameRecordUI=i,dr("ui.pop.record.gameRecordUI",i);var r=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[sr.a,ur.a,Nt.a,jt.a,Yt.a,nr.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/itemMenu")}}]),n}(ur.a);t.itemMenuUI=r,dr("ui.pop.record.itemMenuUI",r);var o=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,nr.a,sr.a,ir.a,jt.a,In.a,Nt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/itemRecord")}}]),n}(In.a);t.itemRecordUI=o,dr("ui.pop.record.itemRecordUI",o);var a=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[nr.a,Nt.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/selectCoinBox")}}]),n}(zn.a);t.selectCoinBoxUI=a,dr("ui.pop.record.selectCoinBoxUI",a);var u=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[nr.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/record/selectItemBox")}}]),n}(zn.a);t.selectItemBoxUI=u,dr("ui.pop.record.selectItemBoxUI",u)}(t.record||(t.record={}))}(t.pop||(t.pop={}))}(fr||(fr={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,Nt.a,sr.a,nr.a,In.a,jt.a,ir.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/shop/shop")}}]),n}(In.a);t.shopUI=e,dr("ui.pop.shop.shopUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[jt.a,Nt.a,nr.a,lr.a,ir.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/shop/shopGunItem")}}]),n}(zn.a);t.shopGunItemUI=n,dr("ui.pop.shop.shopGunItemUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[jt.a,Nt.a,nr.a,ir.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("pop/shop/shopItemItem")}}]),n}(zn.a);t.shopItemItemUI=i,dr("ui.pop.shop.shopItemItemUI",i)}(t.shop||(t.shop={}))}(t.pop||(t.pop={}))}(fr||(fr={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,Nt.a,or.a,ir.a,nr.a,ar.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/game/game")}}]),n}(zn.a);t.gameUI=e,dr("ui.scenes.game.gameUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,or.a,Nt.a,nr.a,ir.a,ur.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(ur.a);n.uiView={type:"View",props:{y:111,x:111,width:223,runtime:"view/scenes/game/gunBoxView.ts",mouseThrough:!0,mouseEnabled:!0,height:223,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Box",props:{y:114,x:111,width:149,var:"ani_box",pivotY:77.5,pivotX:74,height:149},compId:7,child:[{type:"Box",props:{y:77.5,x:74,width:59,var:"gun_box",height:45},compId:8,child:[{type:"SkeletonPlayer",props:{var:"base",url:"ani/gun/base11.sk",runtime:"Laya.Skeleton"},compId:9},{type:"SkeletonPlayer",props:{var:"gun",url:"ani/gun/gun11.sk",runtime:"Laya.Skeleton"},compId:10},{type:"SkeletonPlayer",props:{y:0,x:0,var:"light",url:"ani/gun/light11.sk",runtime:"Laya.Skeleton"},compId:11},{type:"SkeletonPlayer",props:{y:0,x:0,var:"body",url:"ani/gun/light11.sk",runtime:"Laya.Skeleton"},compId:18}]}]},{type:"Box",props:{y:142,x:110,width:177,var:"ctrl_wrap",height:51,anchorY:.5,anchorX:.5},compId:22,child:[{type:"Image",props:{y:26,x:88,width:120,var:"score_box",skin:"image/game/time_bg.png",sizeGrid:"0,20,0,22",height:48,anchorY:.5,anchorX:.5},compId:13,child:[{type:"Label",props:{y:2,x:0,width:120,var:"score_label",valign:"middle",text:"100",height:44,font:"score_num",align:"center"},compId:14}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"ctrl_box"},compId:23,child:[{type:"Button",props:{y:0,x:121,var:"btn_add",stateNum:1,skin:"image/game/btn_add.png"},compId:15},{type:"Button",props:{y:0,x:9,var:"btn_minus",stateNum:1,skin:"image/game/btn_minus.png",left:9},compId:16}]}]}],loadList:["ani/gun/base11.sk","ani/gun/gun11.sk","ani/gun/light11.sk","image/game/time_bg.png","image/game/btn_add.png","image/game/btn_minus.png"],loadList3D:[]},t.gunBoxUI=n,dr("ui.scenes.game.gunBoxUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[jt.a,Yt.a,Nt.a,or.a,ur.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/game/skillBox")}}]),n}(ur.a);t.skillBoxUI=i,dr("ui.scenes.game.skillBoxUI",i);var r=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Nt.a,jt.a,nr.a,or.a,ur.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.createView(n.uiView)}}]),n}(ur.a);r.uiView={type:"View",props:{width:94,runtime:"view/scenes/game/skillItemView.ts",mouseThrough:!1,mouseEnabled:!0,height:96},compId:2,child:[{type:"Sprite",props:{y:48,x:47,width:94,texture:"image/game/skill_bg.png",pivotY:48,pivotX:47,height:96},compId:3},{type:"Image",props:{y:7,x:8,width:80,var:"skill_icon",skin:"image/game/skill_aim.png",height:80},compId:7},{type:"Sprite",props:{y:8,x:8,width:81,var:"overlay",texture:"image/game/skill_overlay.png",height:79},compId:6},{type:"Label",props:{y:59,x:8,width:78,var:"num_label",valign:"middle",text:"0",strokeColor:"#000",stroke:3,height:28,fontSize:24,color:"#ffffff",bold:!0,align:"right"},compId:5},{type:"SkeletonPlayer",props:{y:48,x:49,width:100,visible:!1,var:"border_light",url:"ani/other/skill_border_light.sk",height:100,runtime:"Laya.Skeleton"},compId:8},{type:"Label",props:{y:8,x:9,width:78,visible:!1,var:"shortcut_label",valign:"middle",text:"0",strokeColor:"#000",stroke:3,height:28,fontSize:24,color:"#ffffff",bold:!0,align:"left"},compId:9}],loadList:["image/game/skill_bg.png","image/game/skill_aim.png","image/game/skill_overlay.png","ani/other/skill_border_light.sk"],loadList3D:[]},t.skillItemUI=r,dr("ui.scenes.game.skillItemUI",r)}(t.game||(t.game={}))}(t.scenes||(t.scenes={}))}(fr||(fr={})),function(t){!function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Nt.a,sr.a,ur.a,jt.a,Yt.a,nr.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/coinMenu")}}]),n}(ur.a);t.coinMenuUI=e,dr("ui.scenes.hall.coinMenuUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Nt.a,sr.a,ur.a,jt.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/flagMenu")}}]),n}(ur.a);t.flagMenuUI=n,dr("ui.scenes.hall.flagMenuUI",n);var i=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[jt.a,Yt.a,nr.a,or.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/hall")}}]),n}(zn.a);t.hallUI=i,dr("ui.scenes.hall.hallUI",i);var r=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[Yt.a,nr.a,ir.a,Nt.a,ur.a,jt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/hall/header")}}]),n}(ur.a);t.headerUI=r,dr("ui.scenes.hall.headerUI",r)}(t.hall||(t.hall={}))}(t.scenes||(t.scenes={}))}(fr||(fr={})),function(t){!function(t){var e=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[rr.a,In.a,jt.a,Yt.a],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/loading")}}]),n}(In.a);t.loadingUI=e,dr("ui.scenes.loadingUI",e);var n=function(t){ae()(n,t);var e=hr(n);function n(){var t;return it()(this,n),(t=e.call(this)).referenceClass=[],t}return ot()(n,[{key:"createChildren",value:function(){tr()(le()(n.prototype),"createChildren",this).call(this),this.loadScene("scenes/test")}}]),n}(zn.a);t.testUI=n,dr("ui.scenes.testUI",n)}(t.scenes||(t.scenes={}))}(fr||(fr={}));var yr=0,gr=new Bt.a;function mr(t,e,n){var i=yr++,r=t/e,o=0,a=function(t){if((o+=t)>=r)return n(0),_r(i);n((r-o)/r)};Jn(a,1e3*e,null);return n(1),gr.set(i,(function(){Zn(a,null)})),i}function _r(t){gr.get(t)&&(gr.get(t)(),gr.delete(t),gr.size)}function br(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return kr(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function wr(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var xr=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Cr={count:2,click_through:!0,auto_hide:!0},Sr=function(t){ae()(n,t);var e=wr(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t}return ot()(n,[{key:"onResize",value:function(t,e){this.width=t,this.height=e,this.pivotX=t/2,this.pivotY=e/2}},{key:"tip",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ct.a((function(i,r){var o;if(!t)return i();var a=n=pe()(pe()({},Cr),n),u=a.count,s=a.show_count,c=a.click_through,l=a.auto_hide,h=s?ht()(o="".concat(t," ")).call(o,u):t;e.mouseThrough=c,_r(e.count_id),e.count_id=mr(u,1,(function(n){if(s){var r,o=Math.floor(u*n);e.setTipText(ht()(r="".concat(t," ")).call(r,o))}0===n&&(l&&e.close(),i())})),e.show(),e.setTipText(h)}))}},{key:"analysisSize",value:function(t){var e=this.label,n=this.bg,i=this.inner,r=t.split("\n"),o=r.length,a=100+15*function(t){var e,n=[],i=br(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(Pi(r))}}catch(t){i.e(t)}finally{i.f()}return Math.max.apply(this,n)}(r),u=50+30*o;a=a>300?a:300,u=u>120?u:120,i.width=e.width=n.width=a,i.height=e.height=n.height=u}},{key:"setTipText",value:function(t){this.label.text=t}}],[{key:"tip",value:function(t,e){return xr(this,void 0,void 0,ut.a.mark((function i(){return ut.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return Ae.play(ee.PopShow),i.next=3,Ji.director.openDialog({dialog:n,use_exist:!0},{beforeOpen:function(e){e.analysisSize(t)}});case 3:return this.instance=i.sent,i.next=6,this.instance.tip(t,e);case 6:case"end":return i.stop()}}),i,this)})))}},{key:"hide",value:function(){return xr(this,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.instance&&this.instance.close();case 1:case"end":return t.stop()}}),t,this)})))}}]),n}(fr.pop.alert.tipUI);function Ir(t,e){if(void 0!==t){paladin.account.currency({name:t,balance:e});var n=Ye();return fn("".concat(n,":balance"),t)}}function Ar(t){var e;return null===(e=He().account_map.get(t))||void 0===e?void 0:e.icon}function Br(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Tr="cur_balance_change",Mr="lang_change",Lr="account_change",Er="nick_name_change",Pr=function(t){ae()(n,t);var e=Br(n);function n(){var t;return it()(this,n),(t=e.call(this)).account_map=new Bt.a,t}return ot()(n,[{key:"init",value:function(){var t=u.lang;this.setLang(t)}},{key:"initUserInfo",value:function(t){var e=t.userId,n=t.showName,i=t.balances;this.setUserId(e),this.setNickname(n),this.setAccount(i)}},{key:"event",get:function(){var t=this.getCom(un);return t||(t=new un,this.addCom(t)),t}},{key:"setCurBalance",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ir(t,null===(e=this.account_map.get(t))||void 0===e?void 0:e.num),(t!==this.cur_balance||n)&&(this.cur_balance=t,this.event.emit(Tr,t))}},{key:"setLang",value:function(t){t!==this.lang&&(this.lang=t,fn("local_lang",t),this.event.emit(Mr,t))}},{key:"setUserId",value:function(t){this.user_id=t}},{key:"setNickname",value:function(t){this.nickname=t,this.event.emit(Er,this.nickname)}},{key:"setAccount",value:function(t){var e;for(var n in t)if(t.hasOwnProperty(n)){e||(e=n);var i=t[n],r=i.balance,o=i.imageUrl,a=i.hide;this.account_map.set(n,{num:Number(r),icon:o,hide:a})}this.event.emit(Lr,this.account_map);var u,s,c=(u=this.account_map,(s=paladin.getCurrency())&&u.get(s)?s:u.size?cn()(u)[0]:void 0);this.setCurBalance(c||e,!0)}}]),n}(rn);function Or(t,e){var n=Ge.app.user_info,i=n.event,r=n.lang;i.on(Mr,e,t),Te()((function(){r&&e(r)}))}function Dr(){var t,e;return null===(e=null===(t=Ge.app)||void 0===t?void 0:t.user_info)||void 0===e?void 0:e.lang}function zr(t){Ge.app.user_info.event.offAllCaller(t)}function Ur(t,e){var n=Ge.app.user_info,i=n.event,r=n.account_map;i.on(Lr,e,t),Te()((function(){r&&e(r)}))}function Nr(t){var e=Ge.app,n=e.user_info,i=e.setting,r=n.event,o=i.event;r.offAllCaller(t),o.offAllCaller(t)}function jr(){var t,e,n;return null===(n=null===(e=null===(t=window.paladin)||void 0===t?void 0:t.sys)||void 0===e?void 0:e.config)||void 0===n?void 0:n.channel}function Fr(){var t,e,n=Ge.app.user_info,i=n.account_map,r=n.cur_balance;if(!i.get(r).hide)return paladin.sys.config.isLogin?void(null===(t=window)||void 0===t||t.paladin.pay.recharge({data:{currency:r,gameNo:null===(e=window)||void 0===e?void 0:e.paladin.sys.config.gameId,isHorizontal:!0}})):paladin.account.login()}function Rr(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Vr=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Gr=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&St()(e).call(e,i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof fe.a){var r=0;for(i=fe()(t);r<i.length;r++)St()(e).call(e,i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},Hr=function(t){ae()(n,t);var e=Rr(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t}return ot()(n,[{key:"zOrder",get:function(){return 100}},{key:"onAwake",value:function(){this.initEvent()}},{key:"initEvent",value:function(){var t=this,e=this.btn_confirm,n=this.btn_cancel;e.on(Bn.a.CLICK,e,(function(e){e.stopPropagation(),t.close("confirm")})),n.on(Bn.a.CLICK,e,(function(e){e.stopPropagation(),t.close("cancel")}))}},{key:"alert",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initLang(),new ct.a((function(i,r){var o=n.hide_cancel,a=n.confirm_text,u=e.label,s=e.btn_cancel,c=e.btn_confirm,l=e.btn_confirm_label;u.text=t,e.close_resolve=i,o?(s.visible=!1,c.x=127):(s.visible=!0,c.x=255),a&&(l.text=a)}))}},{key:"onClosed",value:function(t){Ae.play(ee.Click);var e=this.close_resolve;e&&e(t),this.close_resolve=void 0}},{key:"initLang",value:function(){var t=Dr(),e=this.title,n=this.btn_confirm_label,i=this.btn_cancel_label,r=Z[t],o=r.tips,a=r.cancel,u=r.confirm;e.text=o,n.text=u,i.text=a}}],[{key:"alert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vr(this,void 0,void 0,ut.a.mark((function i(){var r,o,a,u;return ut.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.hide_cancel,o=e.confirm_text,a=Gr(e,["hide_cancel","confirm_text"]),Ae.play(ee.PopShow),i.next=4,Ji.director.openDialog(n,pe()({},a));case 4:return u=i.sent,i.next=7,u.alert(t,{hide_cancel:r,confirm_text:o});case 7:return i.abrupt("return",i.sent);case 8:case"end":return i.stop()}}),i)})))}}]),n}(fr.pop.alert.alertUI),$r=["pop/alert/alert.json","image/pop/alert/alert_bg_01.png","image/pop/alert/alert_bg_02.png","image/pop/alert/btn_close.png","image/pop/alert/alert_con_bg.png","image/pop/alert/btn_cancel.png","image/pop/alert/btn_confirm.png"];function Yr(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Xr(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Kr={font:[],audio:[],common:[],game:[{url:"res/image/game.png",type:ne.a.IMAGE}],gameTutorial:[{url:"res/image/game.png",type:ne.a.IMAGE}]},Wr=["1","pos_tip","coin","award_light"];for(var Qr in It)if(It.hasOwnProperty(Qr)){var qr=It[Qr];if("gun"!==Qr){for(var Jr in qr)if(qr.hasOwnProperty(Jr)){var Zr=qr[Jr];if("DragonBone"===Zr.type){var to,eo,no=Zr.path,io=[{url:"".concat(no,".sk"),type:ne.a.BUFFER},{url:"".concat(no,".png"),type:ne.a.IMAGE}];if(-1!==St()(Wr).call(Wr,Jr))(eo=Kr.gameTutorial).push.apply(eo,io);(to=Kr.game).push.apply(to,io)}}}else for(var ro in qr)if(qr.hasOwnProperty(ro))for(var oo=1;oo<=3;oo++){var ao,uo=Yr(Wt("".concat(ro),"".concat(oo)));try{for(uo.s();!(ao=uo.n()).done;){var so,co,lo,ho=xt()(ao.value,2),fo=ho[0],vo=ho[1],po=ht()(so="".concat(fo)).call(so,vo),yo=[{url:"ani/gun/".concat(po,".sk"),type:ne.a.BUFFER},{url:"ani/gun/".concat(po,".png"),type:ne.a.IMAGE}];if((co=Kr.game).push.apply(co,yo),-1!==St()(Wr).call(Wr,ro))(lo=Kr.gameTutorial).push.apply(lo,yo)}}catch(t){uo.e(t)}finally{uo.f()}}}for(var go=["font/score_num","font/numYellow40","font/lottery","font/numWhite40","font/alphabet"],mo=0,_o=go;mo<_o.length;mo++){var bo=_o[mo];Kr.font.push({url:"".concat(bo,".fnt"),type:ne.a.XML},{url:"".concat(bo,".png"),type:ne.a.IMAGE})}for(var ko in ee)if(ee.hasOwnProperty(ko)){var wo=ee[ko];Kr.audio.push({url:wo,type:ne.a.SOUND})}for(var xo in $r)if($r.hasOwnProperty(xo)){var Co=$r[xo];Kr.common.push(Co)}function So(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Io(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Io(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Io(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ao(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Bo=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},To=function(t){ae()(n,t);var e=Ao(n);function n(){var t;return it()(this,n),(t=e.call(this)).isShowEffect=!1,t.isPopupCenter=!1,t.zOrder=100,t}return ot()(n,[{key:"tip",value:function(t,e){var n=this;return new ct.a((function(i,r){if(!t)return i();mr(e,1,(function(t){0===t&&(n.close(),i())})),n.analysisSize(t),n.setTipText(t)}))}},{key:"analysisSize",value:function(t){var e=this.label,n=this.bg,i=t.split("\n"),r=i.length,o=100+18*function(t){var e,n=[],i=So(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(Pi(r))}}catch(t){i.e(t)}finally{i.f()}return Math.max.apply(this,n)}(i),a=30+30*r;o=o>750?o:750,a=a>70?a:70,this.width=e.width=n.width=o,this.height=e.height=n.height=a,this.x=(zt.a.stage.width-this.width)/2}},{key:"setTipText",value:function(t){this.label.text=t,ci(this)}}],[{key:"tip",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Bo(this,void 0,void 0,ut.a.mark((function n(){var i;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Ae.play(ee.PopShow),n.next=3,Ji.director.openDialog("pop/alert/topTip.scene");case 3:return i=n.sent,this.instance=i,n.next=7,i.tip(t,e);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"hide",value:function(){return Bo(this,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null==(e=this.instance)?void 0:e.visible)&&(null==e||e.close());case 2:case"end":return t.stop()}}),t,this)})))}}]),n}(fr.pop.alert.topTipUI),Mo=function(){function t(e,n){it()(this,t),this.view=e,this.on_progress=n,this.initEvent()}return ot()(t,[{key:"initEvent",value:function(){var t=this,e=this.view,n=Bn.a.MOUSE_DOWN,i=Bn.a.MOUSE_MOVE,r=Bn.a.MOUSE_OVER,o=Bn.a.MOUSE_OUT,a=Bn.a.MOUSE_UP;e.on(n,this,(function(e){t.onClick(e),zt.a.stage.on(i,t,t.onMouseMove),zt.a.stage.on(r,t,t.onMouseOut),zt.a.stage.on(o,t,t.onMouseOut),zt.a.stage.on(a,t,t.onMouseOut)}))}},{key:"onClick",value:function(t){t.stopPropagation();var e=this.view.box,n=e.width,i=e.getMousePoint().x/n;i>1&&(i=1),i<0&&(i=0),this.setProgress(i)}},{key:"onMouseMove",value:function(t){var e=this.view.box;t.stopPropagation();var n=e.getMousePoint().x/e.width;n>1&&(n=1),n<0&&(n=0),this.setProgress(n)}},{key:"onMouseOut",value:function(t){t.stopPropagation(),zt.a.stage.offAllCaller(this)}},{key:"setProgress",value:function(t){var e=this.view,n=e.box,i=e.progress_bar,r=e.progress_btn,o=n.width;t!==this.radio&&(this.radio=t,i.value=t,r.x=t*o,t<.1&&(t=0),this.on_progress(t))}},{key:"destroy",value:function(){this.view=void 0,this.on_progress=void 0}}]),t}();function Lo(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Eo,Po=function(t){ae()(n,t);var e=Lo(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t.onMusicChange=function(t){Ge.app.setting.setMusic(t)},t.onVoiceChange=function(t){Ge.app.setting.setVoice(t)},t}return ot()(n,[{key:"onAwake",value:function(){var t=this;Or(this,(function(e){t.initLang(e)}));var e=Ge.app.setting,n=e.voice,i=e.music,r=this.music_progress,o=this.voice_progress,a=new Mo(r,this.onMusicChange),u=new Mo(o,this.onVoiceChange);u.setProgress(n),a.setProgress(i),this.music_ctrl=a,this.voice_ctrl=u}},{key:"destroy",value:function(){var t=this.music_ctrl,e=this.voice_ctrl;zr(this),t.destroy(),e.destroy(),this.music_ctrl.destroy(),this.voice_ctrl.destroy(),tr()(le()(n.prototype),"destroy",this).call(this)}},{key:"initLang",value:function(t){var e=this.sound_label,n=this.music_label,i=this.title,r=Z[t],o=r.music,a=r.soundEffects,u=r.volumeSetting;i.text=u,e.text=a,n.text=o}}],[{key:"preEnter",value:function(){Ae.play(ee.PopShow),Ji.director.openDialog({dialog:n,use_exist:!0})}}]),n}(fr.pop.alert.voiceUI),Oo={},Do=n(272),zo=n(30),Uo=n(36),No=n.n(Uo),jo=n(115);n(232);function Fo(t){return t&&"function"==typeof t}function Ro(t){if(Fo(t)){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.apply(void 0,n)}}function Vo(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function Go(t,e){return(e-=1)<0?t:Go(t*=10,e)}function Ho(t){t.player?t.stop():t.once(Bn.a.PLAYED,t,(function(){Te()((function(){t.stop()}))}))}function $o(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.player?t.play.apply(t,n):t.once(Bn.a.PLAYED,t,(function(){Te()((function(){t.play.apply(t,n)}))}))}function Yo(t,e){return new ct.a((function(n,i){t.once(Bn.a.STOPPED,t,(function(){n(void 0)})),t.player?t.play(e,!1):t.once(Bn.a.PLAYED,t,(function(){Te()((function(){t.play(e,!1)}))}))}))}function Xo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7,e=1-t,n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];return new jo.a(n)}function Ko(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;if("string"==typeof t){var r=Wo(t);t=r.r,e=r.g,n=r.b,i=255}var o=[t/=255,0,0,0,0,0,e/=255,0,0,0,0,0,n/=255,0,0,0,0,0,i/=255,0];return new jo.a(o)}function Wo(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i){return e+e+n+n+i+i}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:No()(e[1],16),g:No()(e[2],16),b:No()(e[3],16)}:null}function Qo(t){t.filters=[Xo()]}function qo(t){t.filters=null}function Jo(t){return Eo||(Eo={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,e,n){return Eo[e]=n,n}))),Eo[t]}function Zo(t){var e=new Date,n=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),i=new Date(n),r=new Date(n);r.setDate(e.getDate()+t),i.setDate(e.getDate()+t+1);var o=r.getMonth()+1,a=r.getDate();return{date_str:ta(o)+"-"+ta(a),start:r.valueOf(),end:i.valueOf()}}function ta(t){return t<10?"0"+t:""+t}function ea(t,e){var n=t;for(var i in e)e.hasOwnProperty(i)&&(console.log(i,n),n=n.replace(new RegExp("{".concat(i,"}"),"g"),e[i]+""));return n}var na=n(80),ia=n(690);function ra(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return oa(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return oa(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function oa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function aa(t,e,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=new na.a((function(e){var o=function(t){if(n){var o,a=t.target,u=ra(n);try{for(u.s();!(o=u.n()).done;){if(ha(a,o.value))return}}catch(t){u.e(t)}finally{u.f()}}e.next(t),i=e,r&&e.complete()};zt.a.stage.on(Bn.a.CLICK,t,o),e.add((function(){zt.a.stage.off(Bn.a.CLICK,t,o)}))}));o.subscribe((function(n){t&&t.destroyed?i&&i.complete():e.call(t,n)}))}function ua(t,e,n,i){var r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=new na.a((function(n){var a=function(e){!0!==t.is_disable&&(t.is_disable=!0,Te()((function(){t&&t.destroyed||(t.is_disable=!1)}),o),n.next(e),r=n,i&&n.complete())};t.on(e,t,a),n.add((function(){t.off(e,t,a)}))}));a.pipe(Object(ia.a)(o||1e3)).subscribe((function(e){t&&t.destroyed?r&&r.complete():n(e)}))}var sa=[];function ca(t){for(var e=sa.length-1;e>=0;e--){var n=sa[e],i=n.item,r=n.off;i===t&&(r(),_e()(sa).call(sa,e,1))}}function la(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",i=t.numChildren,r=[],o=0,a=0;a<i;a++){var u=t.getChildAt(a);u.visible&&r.push(u)}for(var s=0;s<r.length;s++){var c=r[s];"horizontal"===n?c.x=o:c.y=o,"horizontal"===n?s!==r.length-1?o+=c.width+e:o+=c.width:s!==r.length-1?o+=c.height+e:o+=c.height}"horizontal"===n?t.width=o:t.height=o}function ha(t,e){return!!t&&(t===e||ha(t.parent,e))}function fa(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var va=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},pa=function(t){ae()(n,t);var e=fa(n);function n(){var t;return it()(this,n),(t=e.call(this)).config={},t.zOrder=99,t.isShowEffect=void 0,t.config={shadowAlpha:0},t}return ot()(n,[{key:"onAwake",value:function(){var t=this;this.init(),Or(this,(function(e){t.initLang(e)}))}},{key:"initLang",value:function(t){var e=Z[t],n=e.tourSkip,i=e.tourStart,r=this.start_label;this.skip_label.text=n,r.text=i}},{key:"onResize",value:function(){var t=zt.a.stage,e=t.width,n=t.height,i=this.mask_area,r=this.mask_wrap,o=this.inner;if(i){var a=e>1920?1920:e;i.width=a,i.height=n,i.x=(this.width-i.width)/2,i.y=(this.height-r.height)/2,i.graphics.clear(),i.graphics.drawRect(0,0,i.width,n,"#000000"),this.x=(e-this.width)/2,this.y=(n-this.height)/2,o.width=e>1920?1920:e}}},{key:"init",value:function(){this.initDom(),this.initEvent()}},{key:"initDom",value:function(){var t=this.mask_wrap;this.cacheAs="bitmap";var e=new zt.a.Sprite;t.addChild(e),e.alpha=.8,e.mouseEnabled=!0,this.mask_area=e;var n=new zt.a.Sprite;t.addChild(n),n.blendMode="destination-out",this.blank_area=n,n.mouseEnabled=!0;var i=new Do.a;n.hitArea=i,this.blank_area=n,e&&this.onResize()}},{key:"setBtnNextDir",value:function(t){var e=this.btn_next;"left"===t?(e.right=NaN,e.rotation=180,e.left=30):(e.left=NaN,e.right=30,e.rotation=0)}},{key:"initEvent",value:function(){var t,e=this,n=this.btn_skip,i=this.mask_area;zt.a.stage.on(Bn.a.RESIZE,this,dn()(t=this.onResize).call(t,this)),i.on(Bn.a.CLICK,this,(function(t){var n=e.force,i=Oo.pointer,r=e.getMousePoint(),o=r.x,a=r.y;if(!n)return i.hide(),e.forceNext();i.isShow()&&(i.show({x:o,y:a}),i.moveToTarget({x:o,y:a},e.click_center))})),n.on(Bn.a.CLICK,this,(function(t){e.forceSkip()}))}},{key:"forceNext",value:function(){var t=this.handler;t&&(Ro(t.next),this.handler=void 0)}},{key:"forceSkip",value:function(){var t=this.handler;t&&(Ro(t.skip,"skip"),this.handler=void 0)}},{key:"showNextHandler",value:function(t,e){var n=this,i=this.btn_next,r=this.btn_start,o=this.blank_area,a=Oo.pointer;e.then((function(){"btn"===t?(ai(i),i.once(Bn.a.CLICK,i,(function(){n.forceNext(),i.offAll(),ui(i)}))):"point"===t?(o.once(Bn.a.CLICK,n,(function(t){o.offAll(),t.stopPropagation(),a.hide(),n.forceNext()})),a.show(n.click_center,"target")):"start"===t&&(ai(r),r.once(Bn.a.CLICK,r,(function(){n.forceNext(),r.offAll(),ui(r)})))}))}},{key:"drawBlankWaitClick",value:function(t,e,n,i){var r=this;return new ct.a((function(o,a){var u,s,c,l,h,f=r.blank_area,v=f.hitArea.hit;if(r.blank_shape=t,r.handler={next:o,skip:a},r.force=e,r.click_center=function(t){return t instanceof zo.a?{x:t.x+t.width/2,y:t.y+t.height/2}:{x:t.x,y:t.y}}(t),r.showBlank(),f.graphics.clear(),r.showNextHandler(n,i),t instanceof zo.a){var p=(u=t.x,s=t.y,c=t.width,l=t.height,[["moveTo",u+(h=10),s],["lineTo",u+c-h,s],["arcTo",u+c,s,u+c,s+h,h],["lineTo",u+c,s+l-h],["arcTo",u+c,s+l,u+c-h,s+l,h],["lineTo",u+h,s+l],["arcTo",u,s+l,u,s+l-h,h],["lineTo",u,s+h],["arcTo",u,s,u+h,s,h],["closePath"]]);f.graphics.drawPath(0,0,p,{fillStyle:"#00ffff"}),v.drawRect(t.x,t.y,t.width,t.height,{fillStyle:"#FFFFFF"})}else f.graphics.drawCircle(t.x,t.y,t.radius,"#000000"),v.drawCircle(t.x,t.y,t.radius,"#000000")}))}},{key:"showBlank",value:function(){var t=this.mask_area;t.graphics.clear(),t.graphics.drawRect(0,0,t.width,t.height,"#000000")}},{key:"clearBlank",value:function(){var t=this.blank_area,e=this.mask_area;this.blank_shape=void 0;var n=t.hitArea.hit;t.graphics.clear(),e.graphics.clear(),n.clear(),this.handler=void 0,this.click_center=void 0}},{key:"hide",value:function(){this.clearBlank(),this.close()}},{key:"destroy",value:function(){zr(this),tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){return va(this,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.director.openDialog("pop/guide/GuideDialog.scene");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))}}]),n}(fr.pop.guide.GuideDialogUI);var da=0,ya=500,ga=10,ma=1/6,_a=!0,ba=!0,ka=null,wa=function(){function t(e,n){it()(this,t),this.dom={},this.config={},this.tmp={},this.touch_status="end",this.dom.glr=e,this.initConfig(n),this.init()}return ot()(t,[{key:"next",value:function(){if("end"===this.touch_status){this.detectNextShowIndex("right"),this.animateMove()}}},{key:"prev",value:function(){if("end"===this.touch_status){this.detectNextShowIndex("left"),this.animateMove(!1)}}},{key:"goto",value:function(t){"end"===this.touch_status&&(this.tmp.next_show_index=t,this.animateMove(!1))}},{key:"initConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config.cur_index=t.origin_index||da,this.config.item_space=t.item_space||ga,this.config.animate_time=t.animate_time||ya,this.config.pagination=t.hasOwnProperty("pagination")?t.pagination:_a,t.hasOwnProperty("loop")?this.config.loop=t.loop:this.config.loop=ba,this.config.end_call_back=t.end_call_back||ka,t.item_width&&(this.config.move_space=t.item_width+this.config.item_space,this.config.move_scope=this.config.move_space*ma)}},{key:"init",value:function(){this.initDom(),this.initEvent(),this.config.move_space||(this.config.move_space=this.dom.con.width+this.config.item_space,this.config.move_scope=this.config.move_space*ma)}},{key:"initEvent",value:function(){var t=this.dom.list,e=Bn.a.MOUSE_DOWN,n=Bn.a.MOUSE_MOVE,i=Bn.a.MOUSE_UP,r=Bn.a.MOUSE_OUT;this.config.pagination&&(this.dom.pagination.selectHandler=Ft.a.create(this,this.paginationHandler,null,!1)),t.on(e,this,this.onTouchStart),t.on(n,this,this.onTouchMove),t.on(i,this,this.onTouchEnd),t.on(r,this,this.onTouchEnd)}},{key:"initDom",value:function(){var t=this.dom.glr;this.dom.con=t.getChildByName("con"),this.dom.list=this.dom.con.getChildByName("list"),this.replaceGlrList(),this.addMask(),this.dom.items=[];for(var e=0;e<this.dom.list.numChildren;e++)this.dom.items.push(this.dom.list.getChildAt(e));var n=this.config.pagination;n&&(this.dom.pagination="boolean"==typeof n?t.getChildByName("pagination"):n)}},{key:"addMask",value:function(){var t=this.dom.con;t.scrollRect=new zo.a(0,0,t.width,t.height)}},{key:"replaceGlrList",value:function(){var t=this.dom,e=t.con,n=t.list,i=new Yt.a;i.name="list";for(var r=[],o=0;o<n.numChildren;o++){var a=n.getChildAt(o);a.name="item",a.visible=!0,r.push(a)}for(var u=0;u<r.length;u++)r[u].visible=u===da,i.addChild(r[u]);this.dom.list=i,e.addChild(i),i.space=ga,i.cacheAs="none",i.x=n.x,i.y=n.y,e.removeChild(n),n.destroy()}},{key:"paginationHandler",value:function(t,e){if("onEndAnimate"===this.touch_status)return!0;var n;n=this.config.cur_index>t?"left":"right",this.handleMoveEffect(n,t),this.animateMove(e)}},{key:"onTouchStart",value:function(t){var e=this.dom.list;if("onEndAnimate"===this.touch_status)return!0;this.tmp.start_point={x:t.stageX,y:t.stageY},this.tmp.origin_pos={x:e.x},this.touch_status="start"}},{key:"onTouchMove",value:function(t){var e=this.touch_status,n=this.dom.list;if("start"!==e&&"move"!==e)return!0;"start"===e&&(this.touch_status="move"),this.tmp.move_dist={x:t.stageX-this.tmp.start_point.x,y:t.stageY-this.tmp.start_point.y},n.x=this.tmp.origin_pos.x+this.tmp.move_dist.x,this.detectMoveDirection(this.tmp.move_dist.x)}},{key:"detectMoveDirection",value:function(t){var e,n=this.config.loop,i=this.dom.items.length,r=this.config.cur_index;if(t>0)e="left";else{if(!(t<0))return this.tmp.next_show_index=r,!0;e="right"}!n&&(0===r&&"left"===e||r===i-1&&"right"===e)||this.detectNextShowIndex(e)}},{key:"detectNextShowIndex",value:function(t){var e,n=this.config.cur_index,i=this.dom.items.length;(e="left"===t?n-1:n+1)<0?e=i-1:e>=i&&(e=0),this.handleMoveEffect(t,e)}},{key:"handleMoveEffect",value:function(t,e){var n=this.config,i=n.cur_index,r=n.move_space,o=this.dom.items;if(t===this.tmp.move_direction&&e===this.tmp.next_show_index)return!0;this.tmp.move_direction=t,this.tmp.next_show_index=e;for(var a=0;a<o.length;a++)a!==i&&a!==e&&(o[a].x=0,o[a].visible=!1);var u=o[e];u.visible=!0,u.x="left"===t?-r:r}},{key:"onTouchEnd",value:function(){var t,e,n=null===(e=null===(t=this.tmp)||void 0===t?void 0:t.move_dist)||void 0===e?void 0:e.x;return"onEndAnimate"===this.touch_status||("move"===this.touch_status&&n?(n=this.tmp.move_dist.x,Math.abs(n)<this.config.move_scope&&(this.tmp.next_show_index=this.config.cur_index),void 0===this.tmp.next_show_index&&(this.tmp.next_show_index=this.config.cur_index),void this.animateMove()):(this.reset(),!0))}},{key:"animateMove",value:function(t){var e=this.config.end_call_back,n=this.tmp.next_show_index,i=this.config.move_space;this.touch_status="onEndAnimate",this.config.cur_index===n?i=0:(this.config.cur_index=n,"right"===this.tmp.move_direction&&(i=-i));var r=this.dom.list,o={x:i};function a(){this.config.pagination&&(this.dom.pagination.selectedIndex=this.config.cur_index),e&&"function"==typeof e&&e(this.config.cur_index),this.reset()}!1===t?(r.x=i,a.call(this)):Cn.a.to(r,o,this.config.animate_time,null,Ft.a.create(this,a))}},{key:"reset",value:function(){this.resetGlrCon(),this.tmp={},this.touch_status="end"}},{key:"resetGlrCon",value:function(){var t=this.dom,e=t.list,n=t.items,i=this.config.cur_index;e.x=0,n[i].x=0;for(var r=0;r<n.length;r++)r===this.config.cur_index?(n[r].visible=!0,n[r].x=0):n[r].visible=!1}}]),t}(),xa=[{id:1,num:2,is_special:300},{id:2,num:3,is_special:300},{id:3,num:5,is_special:300},{id:4,num:8,is_special:300},{id:5,num:10,is_special:300},{id:6,num:15,is_special:300},{id:7,num:20,is_special:300},{id:8,num:30,is_special:300},{id:10,num:50,is_special:300},{id:11,num:80,is_special:300},{id:12,num:100,is_special:300},{id:13,num:150,is_special:300},{id:14,num:200,is_special:300},{id:15,num:250,is_special:300},{id:20,num:300,is_special:300},{id:9,num:0,is_special:300}];function Ca(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Sa=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Ia=function(t){ae()(n,t);var e=Ca(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t}return ot()(n,[{key:"onAwake",value:function(){var t=this;Or(this,(function(e){t.initLang(e)})),this.slider_glr=new wa(this.glr);var e=this.skill_list,n=this.fish_list;n.array=[],e.array=[],n.renderHandler=Ft.a.create(this,this.fishListRender,null,!1),e.renderHandler=Ft.a.create(this,this.skillListRender,null,!1),n.array=xa}},{key:"goto",value:function(t){this.slider_glr.goto(t)}},{key:"fishListRender",value:function(t,e){var n=this.times_tpl,i=this.fish_list.array[e],r=i.id,o=i.num,a=i.is_special,u=t.bg,s=t.num_label,c=t.icon;s.text=o?o+n:"",c.skin="image/pop/help/fish".concat(r,".png");var l=a?"":"1";u.skin="image/pop/help/fish_item_bg".concat(l,".png")}},{key:"skillListRender",value:function(t,e){var n=t.skill_icon,i=t.intro_label,o=t.item_box,a=this.skill_list.array[e],u=a.id,s=a.intro;i.text=s,u!==r.Super?n.skin="image/game/skill_".concat(c[u],".png"):(o.visible=!1,i.x=10,i.width=i.parent.width)}},{key:"initLang",value:function(t){var e=Z[t],n=e.help,i=e.help1,o=e.help2,a=e.help3,u=e.help31,s=e.help4,c=e.help41,l=e.help42,h=e.help43,f=e.times,v=this.title,p=this.intro1,d=this.intro2,y=this.intro3,g=this.intro31,m=this.intro4,_=this.intro41;this.times_tpl=f,this.fish_list.refresh(),v.text=n,p.text=i,d.text=o,y.text=a,g.text=u,m.text=s,_.text=c+"\n"+l+"\n"+h,this.skill_list.array=function(t){var e=Z[t],n=e.help2Freeze,i=e.help2Lock,o=e.help2Bomb;return[{id:r.Bomb,intro:o},{id:r.Freezing,intro:n},{id:r.LockFish,intro:i}]}(t),la(this.item0_wrap,10,"vertical"),la(this.item1_wrap,10,"vertical"),la(this.item2_wrap,10,"vertical")}},{key:"destroy",value:function(){zr(this),tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Sa(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0});case 2:e.sent.goto(t);case 4:case"end":return e.stop()}}),e)})))}},{key:"preLoad",value:function(){return Sa(this,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ki.preLoad("Dialog","pop/help/help.scene"));case 1:case"end":return t.stop()}}),t)})))}}]),n}(fr.pop.help.helpUI),Aa=n(230),Ba=n.n(Aa),Ta={},Ma=n(140),La=n.n(Ma),Ea=n(380),Pa=n(158),Oa=n.n(Pa),Da=n(144),za=n.n(Da);function Ua(t){if(!Jo("GodMode"))return function(){};var e=console[t];return e||(e=console.log),dn()(e).call(e,window.console)}var Na=console.log,ja=console.warn,Fa=console.error;Vn()((function(){Na=Ua(),ja=Ua("debug"),Fa=Ua("error")}));var Ra,Va=function(){function t(e){var n=this;it()(this,t),this.reconnect_count=0,this.reconnect_max=3,this.heartbeat_time=10,this.heartbeat_gap_time=3,this.onopen=function(){Na("WebSocket:> 连接上了"),n.status="OPEN";var t=n.handlers,e=t.onInit,i=t.onReconnected;n.ping_pong_map&&n.startHeartBeat(),n.reconnect_count=0,"function"==typeof e?(e(),n.handlers.onInit=null):"function"==typeof i&&i()},this.onmessage=function(t){var e=n.handlers.onData,i=t.data;if(n.ping_pong_map){var r=n.ping_pong_map,o=r.ping,a=r.pong;switch(i){case o:n.sendPong();break;case a:n.startHeartBeat()}}"function"==typeof e&&e(i)},this.onError=function(){"function"==typeof n.handlers.onError&&n.handlers.onError()},this.onclose=function(){"function"==typeof n.handlers.onClose&&n.handlers.onClose(),n.reconnect()},this.url=e.url,this.handlers=e.handlers,this.ping_pong_map=e.ping_pong_map,this.connect()}return ot()(t,[{key:"connect",value:function(){if(Na("WebSocket:> 连接..."),!this.ws){var t=this.url;this.status="CONNECTING";var e=new WebSocket(t);e.onopen=this.onopen,e.onmessage=this.onmessage,e.onerror=this.onError,e.onclose=this.onclose,this.ws=e}}},{key:"send",value:function(t){var e=this.status,n=this.ws;if("OPEN"!==e)return console.error("socket is no connected!");n.send(t)}},{key:"reconnect",value:function(){var t=this;Na("WebSocket:> 断线重连");var e=this.reconnect_count,n=this.reconnect_max,i=this.handlers;if(this.status="CONNECTING",e>n)this.end();else{"function"==typeof i.onReconnect&&0===e&&i.onReconnect(e),this.reset();var r=0===e?0:3e3;clearTimeout(this.reconnect_timeout),this.reconnect_timeout=Te()((function(){t.connect()}),r),this.reconnect_count++}}},{key:"startHeartBeat",value:function(){var t=this,e=this.heartbeat_time,n=this.heartbeat_gap_time;clearInterval(this.heartbeat_interval),clearTimeout(this.heartbeat_gap_timeout),this.heartbeat_interval=za()((function(){t.heartbeat_gap_timeout=Te()((function(){t.reconnect()}),1e3*n),t.sendPing()}),1e3*e)}},{key:"clearHearBeatGapTimeout",value:function(){clearTimeout(this.heartbeat_gap_timeout)}},{key:"sendPing",value:function(){if(this.ping_pong_map){var t=this.ping_pong_map.ping;this.ws.send(t)}}},{key:"sendPong",value:function(){if(this.ping_pong_map){var t=this.ping_pong_map.pong;this.ws.send(t)}}},{key:"disconnect",value:function(){"CLOSED"!==this.status&&this.end()}},{key:"end",value:function(){Na("WebSocket:> 断开连接"),this.reset(),this.status="CLOSED",this.handlers.onEnd&&this.handlers.onEnd(),this.handlers={}}},{key:"reset",value:function(){var t=this.ws;t&&(t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null,t.close(),this.ws=null),clearInterval(this.heartbeat_interval),clearTimeout(this.heartbeat_gap_timeout)}}]),t}();function Ga(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}!function(t){t.OnData="0",t.PingTimeOut="1",t.Ping="2",t.Pong="3",t.Error="4",t.MsgAck="5"}(Ra||(Ra={}));var Ha,$a={ping:"2",pong:"3"},Ya="init",Xa="reconnecting",Ka="reconnected",Wa="close",Qa="end",qa=function(t){ae()(n,t);var e=Ga(n);function n(t){var i;return it()(this,n),(i=e.call(this)).params={},i.onInit=function(){i.event.emit(Ya)},i.onData=function(t){var e,n=i.config.name,r=t.substring(1);switch(t.charAt(0)){case Ra.OnData:if(!(e=function(t,e){try{var n=Ja.get(t),i=La.a.AES.decrypt(e,La.a.enc.Utf8.parse(n),{mode:La.a.mode.ECB,padding:La.a.pad.Pkcs7}).toString(La.a.enc.Utf8);return JSON.parse(i)}catch(t){return Fa("cant decrypt data"),""}}(n,r)))return;Na("".concat(n,":>接收:>"),e);var o=e,a=o.cmd,u=o.res,s=o.code,c=o.msg;i.event.emit(a,u,s,c);break;case Ra.Error:case Ra.MsgAck:}},i.onClose=function(){i.event.emit(Wa)},i.onEnd=function(){i.event.emit(Qa)},i.onReconnect=function(t){i.event.emit(Xa,t)},i.onReconnected=function(){i.event.emit(Ka)},i.config=t,i.init(),i}return ot()(n,[{key:"init",value:function(){var t=new un;this.addCom(t),this.event=t,this.connect()}},{key:"connect",value:function(){var t=function(t){var e,n=t.url,i=t.publicKey,r=t.code,o=(t.host,t.name),a=ht()(e="".concat(n,"/gws?auth=")).call(e,function(t,e){var n=function(t){var e=(new Date).toString(),n=Date.parse(e).toString()+Date.parse(e).toString()+Date.parse(e).toString().substring(0,6);return Ja.set(t,n),n}(t),i=new Ea.a;return i.setPublicKey(e),i.encrypt(n)}(o,i));r&&(a+="&code=".concat(r));return a}(this.config),e=new Va({url:t,handlers:{onInit:this.onInit,onData:this.onData,onClose:this.onClose,onEnd:this.onEnd,onReconnect:this.onReconnect,onReconnected:this.onReconnected},ping_pong_map:$a});this.ws=e}},{key:"status",get:function(){return this.ws?this.ws.status:"CLOSED"}},{key:"setParams",value:function(t){this.params=pe()(pe()({},this.params),t)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.ws,i=this.params,r=this.config.name;Na("".concat(r,":>发送:>"),t,e);var o={cmd:t,params:pe()(pe()({},i),e)},a="0"+su(r,Oa()(o));n.send(a)}},{key:"disconnect",value:function(){this.event.destroy(),this.ws.disconnect(),this.ws=void 0}},{key:"reconnect",value:function(){var t=this.ws;if(!t)return Fa("WebSocketWrapCtrl:> is disconnected!");"CLOSED"===t.status&&this.ws.reconnect()}},{key:"emitEvent",value:function(t,e,n,i){}}]),n}(rn),Ja=new Bt.a,Za=new Bt.a,tu=new un,eu="create";function nu(t){return new ct.a((function(e,n){var i=t.name,r=new(Ha||qa)(t);r.event.once(Ya,(function(){tu.emit(eu,i,r),Za.set(i,r),e(r)}))}))}function iu(t){return new ct.a((function(e,n){var i=Za.get(t);if(i)return e(i);tu.once(eu,(function(n,i){n===t&&e(i)}))}))}function ru(t,e){return new na.a((function(n){var i=function(i,r){i===t&&(n.next(r),e&&n.complete())};tu.on(eu,i,null),n.add((function(){tu.off(eu,null,i)}));var r=Za.get(t);r&&i(t,r)}))}function ou(t){Ha=t}function au(t){return Za.get(t)}function uu(t){var e=Za.get(t);e&&(e.disconnect(),Za.delete(t))}function su(t,e){var n=Ja.get(t);return La.a.AES.encrypt(e,La.a.enc.Utf8.parse(n),{mode:La.a.mode.ECB,padding:La.a.pad.Pkcs7}).toString()}function cu(t,e,n){var i=t.event;for(var r in n)n.hasOwnProperty(r)&&i.on(r,n[r],e)}function lu(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return hu(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function hu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var fu=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function vu(){var t=Ge.app.game.getCurPlayer();t&&(t.disableSkill(r.Auto),t.getSkill(r.LockFish).unLock())}function pu(){return fu(this,void 0,void 0,ut.a.mark((function t(){var e=this;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new ct.a((function(t,n){return fu(e,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iu(h);case 2:e.sent.event.once(I,(function(e,n){if(200!==n)return t([!1]);t([!0,e])}));case 4:case"end":return e.stop()}}),e)})))})));case 1:case"end":return t.stop()}}),t)})))}function du(){return fu(this,void 0,void 0,ut.a.mark((function t(){var e=this;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new ct.a((function(t,n){return fu(e,void 0,void 0,ut.a.mark((function e(){var n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iu(h);case 2:(n=e.sent).event.once(N,(function(e,i){if(n.event.offAllCaller(du),200!==i)return t(!1);t(!0)}),du),n.event.on(w,(function(e){Xe(e.userId)&&(n.event.offAllCaller(du),t(!0))}),du);case 5:case"end":return e.stop()}}),e)})))})));case 1:case"end":return t.stop()}}),t)})))}function yu(t){if(t.currency){var e=Dr(),n=Z[e].enterGameCostTip;n=ea(n,{bringAmount:t.bringAmount,bulletNum:t.bulletNum,currency:t.currency}),Sr.tip(n)}}var gu,mu,_u=n(375),bu=n.n(_u);function ku(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return wu(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function wu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function xu(t,e){var n;gu=t,Ru(t,e),cu(t,e,(n={},a()(n,I,(function(t,n){if(200!==n)return Gu(n,t);e.onEnterGame(function(t){var e=t.isTrial,n=t.rate,i=t.users,o=t.items,a=t.fish,u=t.frozen,s=t.frozenLeft,c=t.currency,l=[];mu=o;var h,f=ku(i);try{for(f.s();!(h=f.n()).done;){var v=h.value,p=v.userId,d=v.index,y=v.bulletNum,g=v.multiple,m=v.turretSkin,_=v.lockFish,b=v.lockLeft,k=v.needEmit,w=Xe(p),x=Xe(p)||k,C=Au(o,w);_&&(C[r.LockFish]=pe()(pe()({},C[r.LockFish]),{lock_fish:_,lock_left:b/1e3,needActive:!0}));var S={user_id:p,server_index:d-1,bullet_num:y,bullet_cost:g,gun_skin:"".concat(Number(m)-1e3),nickname:"",avatar:"",is_cur_player:w,skills:C,need_emit:x};w?l.unshift(S):l.push(S)}}catch(t){f.e(t)}finally{f.f()}var I=[];if(u){var A,B=ku(a);try{for(B.s();!(A=B.n()).done;){var T=A.value;T.frozen&&I.push(T.eid)}}catch(t){B.e(t)}finally{B.f()}}return{isTrial:e,exchange_rate:n,fish:a,users:l,frozen:u,currency:c,frozen_left:s/1e3,fish_list:I}}(t))})),a()(n,C,(function(t){var n=function(t){var e=t.userId,n=t.index,i=t.multiple,r=t.turretSkin,o=Au(mu,!1);return{user_id:e,server_index:n-1,bullet_cost:i,gun_skin:"".concat(Number(r)-1e3),nickname:"",avatar:"",bullet_num:0,need_emit:!1,is_cur_player:!1,skills:o}}(t);e.addPlayers([n])})),a()(n,K,(function(t){Xe(t.userId)&&e.setPlayersEmit(t.robotIds)})),a()(n,S,(function(t,n){if(200!==n)return Gu(n,t);e.tableOut(t)})),a()(n,A,(function(t){e.onShoot(t)})),a()(n,B,(function(t,n){if(200!==n)return Gu(n,t);e.onHit(t)})),a()(n,D,(function(t,n){200===n?e.activeSkill(r.Bomb,Iu(t)):e.resetSkill(r.Bomb,Ye())})),a()(n,O,(function(t,n){if(200===n){var i=Iu(t);e.activeSkill(r.Bomb,pe()(pe()({},i),{is_bomb_fish:!0}))}else e.resetSkill(r.Bomb,Ye())})),a()(n,U,(function(t,n){200===n?e.activeSkill(r.Freezing,function(t){var e=t.userId,n=t.count,i=t.duration,r=t.frozenFishList;return{user_id:e,used_time:0,num:n,fish_list:r,duration:i/1e3}}(t)):e.resetSkill(r.Freezing,Ye())})),a()(n,z,(function(t){t.autoShoot?e.activeSkill(r.Auto,function(t){var e=t.userId,n=t.autoShoot;return{user_id:e,autoShoot:n}}(t)):e.disableSkill(r.Auto,t.userId)})),a()(n,P,(function(t,n){200===n?e.activeSkill(r.LockFish,function(t){var e=t.userId,n=t.eid,i=t.needActive,r=t.duration,o=t.count;return{user_id:e,fish:n,needActive:i,duration:r/1e3,used_time:0,num:Number(o)}}(t)):e.resetSkill(r.Freezing,Ye())})),a()(n,M,(function(t){e.addFish(t.fish)})),a()(n,E,(function(t){e.shoalComingTip(De()(t)),e.addFish(t.fish)})),a()(n,L,(function(t){})),a()(n,w,(function(t){e.roomOut(t)})),a()(n,T,(function(t){e.changeBulletCost(t)})),a()(n,Q,(function(t){e.changeSkin(t)})),a()(n,N,(function(t,e){if(200!==e)return Gu(e,t);var n=Ke(),i=n.gun.getAllBulletCost();n.updateInfo({bullet_num:t.balance-i}),yu(t)})),a()(n,Ka,(function(){e.reset(),t.send(I,{replay:!0})})),n))}function Cu(t){Vu(gu,t),gu=void 0}function Su(){var t;null==gu||(t=gu).send.apply(t,arguments)}function Iu(t){return{user_id:t.userId,pos:t.bombPoint,num:t.count,used_time:0,fish_list:t.killedFish}}function Au(t,e){var n,i={},r=ku(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=o.itemId,u=o.count,s=o.usedTime,c=o.coolTime,l=o.duration;i[o.itemId]={item_id:a,num:e?Number(u):0,used_time:e?s/1e3:0,cool_time:c/1e3,duration:l/1e3}}}catch(t){r.e(t)}finally{r.f()}return i}var Bu="VisibleChange",Tu=function(){function t(){var e=this;it()(this,t),this.event=new un,this.visibilityChange=function(){var t=document.visibilityState;"hidden"===t&&e.emitEvent(!1),"visible"===t&&e.emitEvent(!0)},this.init()}return ot()(t,[{key:"init",value:function(){var t=this;if(null===document||void 0===document?void 0:document.visibilityState)return document.addEventListener("visibilitychange",this.visibilityChange);var e=zt.a.Browser,n=e.now();if(e.onAndroid){var i=0;this.interval=za()((function(){var r=e.now();r-n>1e3&&(i>1?(clearInterval(t.interval),t.emitEvent(!1)):i+=1),n=r}),300)}else this.interval=za()((function(){var i=e.now();i-n>1e3&&(clearInterval(t.interval),t.emitEvent(!1)),n=i}),300)}},{key:"emitEvent",value:function(t){this.event.emit(Bu,t)}}]),t}(),Mu=new Bt.a;function Lu(t,e){return new ct.a((function(n,i){var r=Mu.get(t);r||(r={is_running:!1,que:[]},Mu.set(t,r));var o,a,u=r,s=u.que,c=u.is_running;a={async_fn:e,resolve:n,reject:i},(o=s).length?o[o.length-1]=a:o.push(a),c||function t(e){var n=Mu.get(e),i=n.que;if(!i.length)return void(n.is_running=!1);n.is_running=!0;var r=i.shift();r.async_fn().then((function(){r.resolve(0===i.length),t(e)})).catch((function(){r.reject(0===i.length),t(e)}))}(t)}))}var Eu=new Bt.a;function Pu(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new ct.a((function(i,r){var o=Eu.get(t);if(!o){var a=e();n||(a=a.then((function(e){return Eu.delete(t),e})).catch((function(e){throw Eu.delete(t),e}))),o={wait:a,reject:r,resolve:i},Eu.set(t,o)}o.wait.then((function(t){i(t)})).catch((function(t){r(t)}))}))}var Ou=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function Du(){return Ou(this,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!au(f)){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,Nu((e=void 0,n=void 0,i=void 0,r=void 0,o=void 0,e=u.code,n=f,i=u.SocketUrl,r=u.PublicKey,o=u.Host,{url:i,name:n,publicKey:r,code:e,host:o}));case 5:return t.sent,t.abrupt("return",!0);case 7:case"end":return t.stop()}var e,n,i,r,o}),t)})))}function zu(){"YSTAR"===Jo("c")?platform.register():platform.login()}function Uu(t){return Ou(this,void 0,void 0,ut.a.mark((function e(){var n,i,r;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h,i=u.PublicKey,r=u.Host,e.next=4,Nu({url:t,publicKey:i,name:n,host:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}function Nu(t){var e=this;return new ct.a((function(n,i){return Ou(e,void 0,void 0,ut.a.mark((function e(){var i,r;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(t);case 2:if(i=e.sent,!(r=u.token)){e.next=8;break}return i.setParams({jwt:r,userId:Jo("userId")}),n(i),e.abrupt("return");case 8:if(r=vn("local_token")){e.next=14;break}return e.next=12,ju(i);case 12:fn("local_token",r=e.sent,7);case 14:i.setParams({jwt:r,userId:Jo("userId")}),u.token=r,Na("我自己的token:",r),n(i);case 18:case"end":return e.stop()}}),e)})))}))}function ju(t){return new ct.a((function(e,n){t.event.once(J,(function(t){e(t.jwt)})),t.send(J)}))}var Fu=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function Ru(t,e){var n,i=V;cu(t,e,(n={},a()(n,i,(function(e){var n,i=Dr(),r=Z[i].logoutTip,o=Z[i].OtherLogin;e.code===s.TokenExpire?(n="local_token",localStorage.removeItem(n),uu(t.config.name),Hr.alert(r,{hide_cancel:!0}).then((function(t){location.reload()}))):e.code===s.OtherLogin&&(uu(t.config.name),Hr.alert(o,{hide_cancel:!0}).then((function(){location.reload()})))})),a()(n,Xa,(function(t){var e=Dr();if(0===t){var n=Z[e].NetError;Sr.tip(n,{count:20,show_count:!0,auto_hide:!1,click_through:!1})}})),a()(n,Ka,(function(){Hu()})),a()(n,Qa,(function(){var t=Dr(),e=Z[t].logoutTip;Hr.alert(e,{hide_cancel:!0}).then((function(t){location.reload()}))})),n)),Ta.app.bg_monitor.event.on(Bu,(function(e){e&&("OPEN"===t.status?Hu():t.reconnect())}),e)}function Vu(t,e){null==t||t.event.offAllCaller(e),Ta.app.bg_monitor.event.offAllCaller(e)}function Gu(t,e){var n=Dr(),i=Z[n][t];if(t===s.ReExchange)return function(t){return Fu(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vu(),!$u){e.next=3;break}return e.abrupt("return");case 3:return $u=!0,du().then((function(){$u=!1})),e.abrupt("return",Pu(t,(function(){return Hr.alert(t,{closeOnSide:!1}).then((function(t){if("confirm"===t)return Su(N);Su(w)}))})));case 6:case"end":return e.stop()}}),e)})))}(i);if(t===s.NoMoney){var r=i;if(e&&e.minAmount)r=ea(Z[n].NoMoneyAmount,{minAmount:e.minAmount,currency:e.currency});return Hr.alert(r).then((function(t){"confirm"===t&&Fr(),Su(w)}))}return t===s.NeedLogin?zu():t===s.TrialTimeGame||t===s.TrialNotBullet?Hr.alert(Z[n][t],{hide_cancel:!0}).then((function(){au(h).send(w)})):t===s.TrialTimeHall?Sr.tip(Z[n][s.TrialTimeGame]):t===s.TrialClose?Sr.tip(Z[n][s.TrialClose]):t===s.NetError||t===s.EnterGameError?Hr.alert(Z[n][s.NetError],{hide_cancel:!0}).then((function(){location.reload()})):t===s.OverLimit?Hr.alert(Z[n][t],{hide_cancel:!0}).then((function(){var t=au(h);null==t||t.send(w)})):void(i&&Sr.tip(i))}function Hu(){var t=Dr(),e=Z[t].NetComeBack;Sr.tip(e)}var $u=!1;function Yu(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Xu(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Xu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ku(){return new ct.a((function(t,e){var n=au(h);n.event.once(W,(function(e){t(function(t){var e,n={gun:[],item:[]},i=Yu(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,o=r.type,a=r.item_id,u=r.status,s=r.price,c=r.num,l=r.name;1===o?n.gun.push({id:a,price:s,status:u,name:l}):n.item.push({id:a,price:s,num:c,name:l})}}catch(t){i.e(t)}finally{i.f()}return n}(e))})),n.send(W)}))}function Wu(t){return new ct.a((function(e,n){var i=au(h);i.event.once(Q,(function(t){e(!0)})),i.send(Q,{skinId:t,userId:Ge.app.user_info.user_id})}))}function Qu(t,e,n){return new ct.a((function(i,r){var o=au(h);o.event.once(q,(function(r,o){if(200!==o)return Gu(o,r);var a=Ge.app.user_info.user_id,u=[];e&&u.push({id:t,num:e,type:"skill"}),-n&&u.push({num:-n*e,type:"bullet"}),Ta.game.changeUserNumInfo({userId:a,change_arr:u}),i(!0)})),o.send(q,{itemId:t,num:e})}))}function qu(){var t=new ct.a((function(t,e){var n=au(h);n.event.once($,(function(e){t(e)})),n.send($)})),e=new ct.a((function(t,e){var n=au(h);n.event.once(Y,(function(e){t(e)})),n.send(Y)}));return ct.a.all([t,e]).then((function(t){var e=xt()(t,2),n=e[0],i=e[1],r=n.costNum,o=n.curNum,a=n.list,u=i.list;bu()(i);var s,c=[],l=[],h=Yu(a);try{for(h.s();!(s=h.n()).done;){var f=s.value;c.push({lottery_type:f.name,lottery_id:f.id,lottery_num:f.num})}}catch(t){h.e(t)}finally{h.f()}var v,p=Yu(u);try{for(p.s();!(v=p.n()).done;){var d=v.value;l.push({exchange_id:d.itemId,exchange_type:d.name,exchange_num:d.num,cost_num:d.cost,cur_num:d.curNum})}}catch(t){p.e(t)}finally{p.f()}var y=o/r;return{lottery:c,exchange:l,radio:y=y>1?1:y,lottery_cost:r,lottery_num:o}}))}function Ju(t){return new ct.a((function(e,n){var i=au(h);i.event.once(X,(function(t){e(t)})),i.send(X,{itemId:t})}))}function Zu(t){return new ct.a((function(e,n){var i=au(f);i.event.once(F,(function(t){e(t)})),i.send(F,pe()({},t))}))}function ts(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var es=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},ns=function(t){ae()(n,t);var e=ts(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t}return ot()(n,[{key:"onAwake",value:function(){var t=this;Or(this,(function(e){t.initLang(e)})),this.btn_confirm.on(Bn.a.CLICK,this,(function(){t.close()}))}},{key:"initLang",value:function(t){var e=this.btn_confirm_label,n=Z[t].confirm;e.text=n}},{key:"showReward",value:function(t){var e=this;return new ct.a((function(n,i){var r=Dr(),o=Z[r],a=o.luckyDrawTip2,u=o.bullet,s=e.item_num,c=e.item_type,l=e.bullet_icon,h=e.bullet_num,f=e.txt_label;e.close_resolve=n;var v=t.type,p=t.num,d="bullet"===v,y=d?u:v,g=p+"";f.innerHTML=d?'<div style="width: 392px;height: 32px;line-height:32px;font-size: 24px;color:#d3d6ff;align:center;"><span>$0</span><span style="margin-right: 10px;">&nbsp;$1&nbsp;</span><span color="#ffdd76">$2</span></div>'.replace("$0",a).replace("$1",y).replace("$2","x".concat(p)):'<div style="width: 392px;height: 32px;line-height:32px;font-size: 24px;color:#d3d6ff;align:center;"><span>$0</span><span color="#ffdd76" style="margin-right: 10px;">&nbsp;$2&nbsp;</span><span>$1</span></div>'.replace("$0",a).replace("$1",y).replace("$2","".concat(p)),s.visible=c.visible=l.visible=h.visible=!1,d?(l.visible=h.visible=!0,h.text=g):(s.visible=c.visible=!0,s.text=g,c.text=v.toUpperCase());var m=1/(v.length/4),_=1/(g.length/4);_=_>1?1:_,m=m>.95?.95:m,s.scale(_,_),c.scale(m,m)}))}},{key:"onClosed",value:function(){var t;null===(t=this.close_resolve)||void 0===t||t.call(this)}},{key:"destroy",value:function(){zr(this),tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(t){return es(this,void 0,void 0,ut.a.mark((function e(){var i;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0});case 2:return i=e.sent,e.next=5,i.showReward(t);case 5:case"end":return e.stop()}}),e)})))}}]),n}(fr.pop.lottery.rewardUI);function is(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return rs(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rs(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function rs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var os=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},as=function(){function t(e){it()(this,t),this.item_list=[],this.data=[],this.view=e,this.clear()}return ot()(t,[{key:"renderData",value:function(t){return os(this,void 0,void 0,ut.a.mark((function e(){var n,i,r,o,a,u,s,c,l,h;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.view,i=t.length,this.data=t,this.clear(),o=10,a=0,1===i?r=fr.pop.lottery.item2oneUI:5===i?(r=fr.pop.lottery.item2fiveUI,o=5):2===i?(r=fr.pop.lottery.item2twoUI,o=50):3===i?(o=80,r=fr.pop.lottery.item2UI):r=fr.pop.lottery.item2UI,u=is(Di()(t).call(t)),e.prev=8,u.s();case 10:if((s=u.n()).done){e.next=22;break}return c=xt()(s.value,2),l=c[0],c[1],h=new r,n.addChild(h),this.item_list.push(h),e.next=17,wn(h);case 17:h.x=a,a+=h.width,l!==t.length-1&&(a+=o);case 20:e.next=10;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),u.e(e.t0);case 27:return e.prev=27,u.f(),e.finish(27);case 30:n.width=a,this.refresh();case 32:case"end":return e.stop()}}),e,this,[[8,24,27,30]])})))}},{key:"refresh",value:function(){var t,e=this.data,n=this.item_list,i=is(Di()(n).call(n));try{for(i.s();!(t=i.n()).done;){var r=xt()(t.value,2),o=r[0],a=r[1];this.renderItem(a,e[o])}}catch(t){i.e(t)}finally{i.f()}}},{key:"renderItem",value:function(t,e){var n,i,r=this,o=t.price_label,a=t.coin_icon,u=t.remain_label,s=t.num_label,c=t.btn_buy,h=t.item_type,f=Dr(),v=Z[f].Num,p=e.exchange_type,d=e.exchange_id,y=e.exchange_num,g=e.cost_num,m=e.cur_num,_=l[d];_=_?_.toLowerCase():_;var b=y+"";o.text=g+"";var k=Ar(p);a.skin=k,a.filters=[Ko("#64280e")],s.text=b,h.text=p.toUpperCase(),u.text=ht()(n=ht()(i="".concat(v,": ")).call(i,m,"/")).call(n,g);var w=1/(b.length/3),x=1/(p.length/4);w=w>1?1:w,x=x>.95?.95:x,s.scale(w,w),h.scale(x,x),c.offAll(),m<g?t.filters=[Xo(.3)]:(t.filters=null,c.on(Bn.a.CLICK,c,(function(){r.runTicketExchange(e)})))}},{key:"runTicketExchange",value:function(t){return os(this,void 0,void 0,ut.a.mark((function e(){var n,i,r,o,a,u;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exchange_id,i=t.cost_num,r=t.cur_num,o=t.exchange_type,e.next=3,Ju(n);case 3:a=e.sent,u=a.num,ns.preEnter({type:o,num:u}),t.cur_num=r-i,this.refresh();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"clear",value:function(){this.view.removeChildren(),this.item_list=[]}},{key:"destroy",value:function(){this.item_list=[],this.data=[],this.clear(),this.view=void 0}}]),t}();function us(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return ss(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ss(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ss(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cs(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var ls=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},hs=function(t){ae()(n,t);var e=cs(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).is_init=!1,t.isModal=!0,t.renderLottery=function(e,n){var i=e.light,r=e.light_circle,o=e.box_ani,a=e.box_img,u=t.lottery_list.array[n],s=u.cur,c=u.get;u.lottery_num;if(r.visible=!1,i.visible=!1,a.visible=!0,o.visible=!1,s){var l=c?"active":"move";i.visible=!0,"move"===l?r.visible=!0:(a.visible=!1,o.visible=!0,Yo(o,0).then((function(){return Yo(i,l).then((function(){t.showLotteryAward(u)}))})),i.playbackRate(1))}},t}return ot()(n,[{key:"reloadData",value:function(){return ls(this,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qu();case 2:e=t.sent,this.initData(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onEnable",value:function(){Ae.play(ee.PopShow),this.is_init||this.init(),this.is_init=!0}},{key:"init",value:function(){var t=this,e=this.lottery_list,n=this.btn_lottery;this.lottery_exchange_ctrl;e.array=[],this.lottery_exchange_ctrl=new as(this.exchange_list),e.renderHandler=new Ft.a(e,this.renderLottery,void 0,!1),ua(n,Bn.a.CLICK,(function(){t.runLottery()}))}},{key:"initData",value:function(t){var e,n,i=t.lottery,r=t.exchange,o=t.lottery_cost,a=t.lottery_num,u=this.lottery_list,s=this.progress,c=this.lottery_remain,l=this.lottery_exchange_ctrl,h=this.btn_lottery,f=[],v=us(i);try{for(v.s();!(n=v.n()).done;){var p=n.value;f.push(pe()(pe()({},p),{cur:!1,get:!1}))}}catch(t){v.e(t)}finally{v.f()}var d=f.length;if(d<5){Na("test:>lottery:>0",f);for(var y=0;y<5-d;y++)f.push({lottery_id:"xx",lottery_type:"xx",lottery_num:0,cur:!1,get:!1})}var g=a/o;s.value=g>1?1:g,c.text=ht()(e="".concat(a,"/")).call(e,o),u.array=f,Na("test:>lottery:>1",g,f),h.disabled=g<1,l.renderData(et()(r)),this.remain_info={lottery_num:a,lottery_cost:o}}},{key:"runLottery",value:function(){var t=this,e=this.remain_info,n=this.progress,i=this.lottery_remain,r=this.btn_lottery,o=e.lottery_num,a=e.lottery_cost;o<a||new ct.a((function(t,e){var n=au(h);n.event.once(H,(function(e,n){200===n&&t(e.id)})),n.send(H)})).then((function(u){return ls(t,void 0,void 0,ut.a.mark((function t(){var s;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runLotteryAni(u);case 2:o-=a,n.value=o/a,e.lottery_num=o,i.text=ht()(s="".concat(o,"/")).call(s,a),r.disabled=o<a;case 7:case"end":return t.stop()}}),t,this)})))}))}},{key:"runLotteryAni",value:function(t){var e=this;return new ct.a((function(n,i){var r=e.lottery_list,o=e.btn_lottery,a=r.array;o.disabled=!0;var u,s,c=Ba()(a).call(a,(function(e){return e.lottery_id===t}))+20,l=!1;u=3e3,s=function(t){var i=Math.round(t*c)%5;if(!l){1===t&&(l=!0);for(var o=0;o<a.length;o++){var u=a[o];u.get=!1,u.cur=o===i}l&&(a[i].get=!0,a[i].cur=!0,oi(2).then((function(){e.completeLottery(),n()}))),r.refresh()}},new ct.a((function(t,e){var n={_val:0,get val(){return this._val},set val(t){this._val=t,s(t)}};Cn.a.to(n,{val:1},u,Sn.a.sineInOut,Ft.a.create(null,(function(){t()})))}))}))}},{key:"completeLottery",value:function(){this.btn_lottery.disabled=!1,clearInterval(this.lottery_interval)}},{key:"showLotteryAward",value:function(t){var e,n,i=this,r=t.lottery_type,o=t.lottery_num;"bullet"===r&&(e=o,n=Ge.app.user_info.user_id,Ta.game.changeUserNumInfo({userId:n,change_arr:[{num:e,type:"bullet"}]})),ns.preEnter({type:r,num:o}).then((function(){i.reloadData()}))}},{key:"destroy",value:function(){var t=this.lottery_exchange_ctrl;this.completeLottery(),zr(this),tr()(le()(n.prototype),"destroy",this).call(this),t.destroy(),this.lottery_exchange_ctrl=void 0}},{key:"onAwake",value:function(){var t=this,e=this.btn_help;Or(this,(function(e){t.initLang(e)})),e.on(Bn.a.CLICK,this,(function(){Ia.preEnter(2)}))}},{key:"initLang",value:function(t){var e,n,i,r=this.title,o=this.btn_label,a=this.sub_title,u=this.lottery_exchange_ctrl,s=Z[t],c=s.luckyDraw,l=s.redemption;o.text=c,a.text=l,u.refresh(),e=30,n=142,la(i=o.parent,e),n&&i.width<n&&(i.width=n),r.skin="image/international/txt_lottery_".concat(t,".png")}}],[{key:"preEnter",value:function(){var t=Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0}),e=qu();return ct.a.all([t,e]).then((function(t){var e=xt()(t,2),n=e[0],i=e[1];n.initData(i)}))}},{key:"preLoad",value:function(){return ki.preLoad("Dialog","pop/lottery/lottery.scene")}}]),n}(fr.pop.lottery.lotteryUI),fs=function(){function t(){it()(this,t)}return ot()(t,[{key:"updateData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;t===this.item_total_num&&this.item_page_num===e&&this.pagination_num===n||(this.item_total_num=t,this.item_page_num=e,this.pagination_num=n,this.cur_page=0,this.analyse())}},{key:"reset",value:function(){this.item_total_num=0,this.item_page_num=0,this.pagination_num=0,this.cur_page=0}},{key:"next",value:function(){this.has_next&&(this.cur_page+=1,this.analyse())}},{key:"prev",value:function(){this.has_prev&&(this.cur_page-=1,this.analyse())}},{key:"setCurPage",value:function(t){t<0&&(t=0),t>this.page_num-1&&(t=this.page_num-1),this.cur_page=t,this.analyse()}},{key:"rightSpread",value:function(){if(this.has_right_spread){var t=this.cur_page+this.pagination_num;t>this.page_num-1&&(t=this.page_num-1),this.cur_page=t,this.analyse()}}},{key:"leftSpread",value:function(){if(this.has_left_spread){var t=this.cur_page-this.pagination_num;t<0&&(t=0),this.cur_page=t,this.analyse()}}},{key:"analyse",value:function(){var t=this.item_total_num,e=this.item_page_num,n=this.cur_page,i=this.pagination_num,r=Math.ceil(t/e);this.page_num=r;var o=(n+1)*e;o>t&&(o=t);var a=[n*e,o];this.item_range=a;var u=n>0,s=n<r-1;this.has_prev=u,this.has_next=s;var c=n-Math.ceil((i-1)/2);c<0&&(c=0);var l=c+i;l>r&&(c=(l=r)-i)<0&&(c=0);var h=[c,l];this.pagination_range=h;var f=c>1,v=l<r-1;this.has_left_spread=f,this.has_right_spread=v}},{key:"output",value:function(){var t=this.cur_page,e=this.item_range,n=this.has_next,i=this.has_prev,r=this.pagination_range,o=this.has_left_spread,a=this.has_right_spread,u=this.page_num,s=[];if(r[0]>0&&s.push(0),o&&s.push("left_spread"),r)for(var c=r[0];c<r[1];c++)s.push(c);return a&&s.push("right_spread"),r[1]<u&&s.push(u-1),s.length>0&&(s.unshift("prev"),s.push("next")),{cur_page:t,item_range:e,has_next:n,has_prev:i,pagination_arr:s,pagination_range:r,page_num:u}}}]),t}();function vs(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return ps(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ps(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ps(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ds(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var ys="change",gs=function(t){ae()(n,t);var e=ds(n);function n(t){var i;return it()(this,n),(i=e.call(this)).view=t,i.init(),i}return ot()(n,[{key:"init",value:function(){this.view.removeChildren(),this.pagination=new fs}},{key:"reset",value:function(){this.pagination.reset()}},{key:"update",value:function(t,e){this.pagination.updateData(t,e),this.render(this.pagination.output(),!1)}},{key:"triggerAction",value:function(t){var e=this.pagination;switch(t){case"prev":e.prev();break;case"next":e.next();break;case"left_spread":e.leftSpread();break;case"right_spread":e.rightSpread();break;default:e.setCurPage(t)}this.render(e.output())}},{key:"render",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.view,r=t.pagination_arr,o=t.cur_page,a=t.item_range,u=t.has_prev,s=t.has_next;if(i.removeChildren(),r.length<=1)this.emit(ys,{cur:o,range:a,trigger_change:n});else{var c,l=vs(r);try{var h=function(){var t=c.value,n=void 0;switch(t){case"prev":(n=ms()).disabled=!u;break;case"next":(n=_s()).disabled=!s;break;case"left_spread":case"right_spread":n=ks();break;default:n=bs(t+1,t===o)}n.on("click",null,(function(){e.triggerAction(t)})),i.addChild(n)};for(l.s();!(c=l.n()).done;)h()}catch(t){l.e(t)}finally{l.f()}la(i,5),i.x=(i.parent.width-i.width)/2,this.emit(ys,{cur:o,range:a,trigger_change:n})}}}]),n}(un);function ms(){var t=new ir.a;t.skin="image/pop/record/btn_pagination1.png",t.stateNum=1,t.label="";var e=new Nt.a;return e.skin="image/pop/record/left.png",e.x=23,e.y=8,t.addChild(e),t}function _s(){var t=new ir.a;t.skin="image/pop/record/btn_pagination1.png",t.stateNum=1,t.label="";var e=new Nt.a;return e.skin="image/pop/record/next.png",e.x=23,e.y=8,t.addChild(e),t}function bs(t,e){var n=new ir.a;n.skin="image/pop/record/btn_pagination2.png",n.stateNum=1,n.label="";var i=new nr.a;return i.fontSize=25,i.bold=!0,e?(i.color="#492b00",n.skin="image/pop/record/btn_pagination0.png"):(i.color="#06684a",n.skin="image/pop/record/btn_pagination2.png"),i.align="center",i.valign="middle",i.x=8,i.y=7,i.width=54,i.height=29,i.text=t+"",n.addChild(i),n}function ks(){var t=new ir.a;t.skin="image/pop/record/btn_pagination2.png",t.stateNum=1,t.label="";var e=new nr.a;return e.fontSize=25,e.bold=!0,e.color="#06684a",e.align="center",e.valign="middle",e.x=8,e.y=5,e.width=54,e.height=29,e.text="...",t.addChild(e),t}var ws=function(){function t(e,n){it()(this,t),this.select_index=-1,this.select_box=e,this.select_list=n}return ot()(t,[{key:"init",value:function(){var t=this,e=this.select_box,n=this.select_list;e.on("click",null,(function(){n.visible=!n.visible})),aa(e,(function(){n.visible=!1}),[e,n]),n.list.selectHandler=Ft.a.create(null,(function(e){var i;if(n.visible=!1,-1!==e)if(n.list.array.length){t.select_index=e,n.list.selectedIndex=-1;var r=n.list.array[e];null===(i=t.selected_render)||void 0===i||i.call(t,t.select_box,r)}else n.list.selectedIndex=-1}),null,!1),this.list_render&&(n.list.renderHandler=Ft.a.create(null,this.list_render,null,!1))}},{key:"setRender",value:function(t,e){this.selected_render=t,this.list_render=e}},{key:"setListRender",value:function(t){this.selected_render=t}},{key:"setList",value:function(t){this.select_list.list.array=t}},{key:"getList",value:function(){return this.select_list.list.array}},{key:"getCurIndex",value:function(){return this.select_index}},{key:"setCurIndex",value:function(t){this.select_list.list.selectedIndex=t}},{key:"getCurData",value:function(){return this.select_list.list.array[this.select_index]}},{key:"destroy",value:function(){this.select_box=void 0,this.select_list=void 0,this.selected_render=void 0}}]),t}();function xs(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Cs(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cs(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Cs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ss(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}for(var Is=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},As=[],Bs=0;Bs>=-7;Bs--)As.push(Zo(Bs));var Ts=function(t){ae()(n,t);var e=Ss(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t}return ot()(n,[{key:"onAwake",value:function(){var t=this,e=this.select_item,n=this.select_coin,i=this.date_menu,r=this.coin_menu,o=this.btn_search;this.record_list.array=[];var a=new ws(n,r);a.setRender(this.renderSelectCoin),Ur(this,(function(e){t.renderCoinMenu(e)})),a.init();var u=new ws(e,i);u.setRender(this.renderSelectItem),u.init(),u.setList(As),u.setCurIndex(0);var s=new gs(this.pagination);s.on(ys,(function(e){var n=e.cur;e.trigger_change&&t.search(n+1)})),this.pagination_ctrl=s,ua(o,"click",(function(){t.pagination_ctrl.reset(),t.search(1)})),this.select_coin_ctrl=a,this.select_date_ctrl=u,Or(this,(function(e){t.initLang(e)}))}},{key:"onEnable",value:function(){var t=this,e=this.select_coin_ctrl,n=this.select_date_ctrl;new ct.a((function(t,e){var n=au(f);n.event.once(R,(function(e){t(e)})),n.send(R)})).then((function(i){var r=e.getList(),o=n.getList(),a=Ba()(r).call(r,(function(t){return t.coin_name===i.currency})),u=Ba()(o).call(o,(function(t){return t.start<i.time&&t.end>i.time}));-1===a&&(a=0),-1===u&&(u=0),e.setCurIndex(a),n.setCurIndex(u),t.search(1)}))}},{key:"initLang",value:function(t){var e=Z[t],n=e.gameListTitle,i=e.search,r=e.prize,o=e.cost,a=Z[t].noData,u=this.title,s=this.title_box,c=this.btn_search_label,l=this.empty_tip;u.text=n;for(var h=[o,r],f=0;f<s.numChildren;f++)s.getChildAt(f).text=h[f];c.text=i,l.text=a}},{key:"renderSelectCoin",value:function(t,e){var n=t.coin_icon,i=t.coin_name,r=e.coin_icon,o=e.coin_name;n.skin=r,i.text=o}},{key:"renderSelectItem",value:function(t,e){var n=t.item_name,i=e.date_str;n.text=i}},{key:"renderCoinMenu",value:function(t){var e,n=this.select_coin_ctrl,i=[],r=xs(t);try{for(r.s();!(e=r.n()).done;){var o=xt()(e.value,2),a=o[0],u=o[1].icon;i.push({coin_icon:u,coin_name:a})}}catch(t){r.e(t)}finally{r.f()}n.setList(i)}},{key:"search",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this.select_coin_ctrl,i=this.select_date_ctrl,r=this.pagination_ctrl,o=this.empty_tip,a=n.getCurData()||{},u=i.getCurData()||{};this.renderRecordList([]);var s=10;Zu({currency:a.coin_name,startTime:u.start,endTime:u.end,pageNum:e,pageSize:s}).then((function(e){r.update(e.total,s),t.renderRecordList(e.list),o.visible=!e.list.length}))}},{key:"renderRecordList",value:function(t){this.record_list.array=Xn()(t).call(t,(function(t){var e,n;return{prize:t.prize?ht()(e="".concat(t.prize,"  ")).call(e,t.currency):0,cost:t.cost?ht()(n="".concat(t.cost,"  ")).call(n,t.currency):0}}))}},{key:"destroy",value:function(){Nr(this),this.select_coin_ctrl.destroy(),this.select_date_ctrl.destroy(),this.select_coin_ctrl=void 0,this.select_date_ctrl=void 0,tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){return Is(this,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))}},{key:"preLoad",value:function(){return ki.preLoad("Dialog","pop/record/gameRecord.scene")}}]),n}(fr.pop.record.gameRecordUI);function Ms(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Ls=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Es=function(t){ae()(n,t);var e=Ms(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t}return ot()(n,[{key:"onAwake",value:function(){var t=this;Or(this,(function(e){t.initLang(e)})),this.initEvent()}},{key:"initEvent",value:function(){var t=this,e=this.btn_minus,n=this.btn_add,i=this.btn_buy,r=Bn.a.CLICK;e.on(r,this,(function(){t.changeNum("minus")})),n.on(r,this,(function(){t.changeNum("add")})),i.on(r,this,(function(){var e=Dr(),n=Z[e].buySuccess,i=t.buy_info,r=i.id,o=i.num,a=i.price;(function(t,e,n){return new ct.a((function(i,r){var o=Dr(),a=Z[o],u=a.bullet,s=(a.buySuccess,Z[o].buyItemTip.replace("$1",t*e+"").replace("$2",u).replace("$3",t+"").replace("$4",Ps(n)));Hr.alert(s).then((function(t){"confirm"===t?i(!0):r()}))}))})(o,a,r).then((function(e){e&&Qu(r,o,a).then((function(){Sr.tip(n),t.close()}))}))})),this.num_label.on(r,this,(function(){Ta.app.keyboard_number.enter(t.num_label.text,{close:function(e,n){"confirm"===e&&t.setNum(Number(n))}})}))}},{key:"setNum",value:function(t){var e=this.buy_info.price,n=Dr(),i=Z[n].beyondBulletNum,r=Ke();t*e>r.bullet_num&&(Sr.tip(i),t=Math.floor(r.bullet_num/e)),this.buy_info.num=t,this.num_label.text=t+"",this.setIntro()}},{key:"changeNum",value:function(t){var e=this.num_label.text,n=Number(e),i=e.length-1,r=Go(1,i);"minus"===t&&r===n&&(r=Go(1,i-1)),"add"===t?n+=r:n-=r,n<1&&(n=1),this.setNum(n)}},{key:"setIntro",value:function(){var t,e,n,i,r=Dr(),o=this.intro,a=this.buy_info,u=Z[r],s=(u.purchase,u.buyBulletCost),c=u.bullet,l=a.price,h=a.num;"en"===r?o.text=ht()(t=ht()(e="".concat(s," ")).call(e,l*h," ")).call(t,c):o.text=ht()(n=ht()(i="".concat(s)).call(i,l*h)).call(n,c)}},{key:"initLang",value:function(t){var e=Z[t].purchase,n=this.title,i=this.btn_label;n.text=e,i.text=e,this.setIntro()}},{key:"buy",value:function(t){var e=this.num_label,n=this.icon,i=t.num,r=t.id,o=i+"";e.text=o,n.skin="image/pop/shop/icon/".concat(r,".png"),this.buy_info=t,this.setIntro()}},{key:"destroy",value:function(){zr(this),tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(t){return Ls(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0});case 2:e.sent.buy(t);case 4:case"end":return e.stop()}}),e)})))}}]),n}(fr.pop.alert.buyBulletUI);function Ps(t){var e=Dr(),n=Z[e],i=n.bomb,o=n.lock,a=n.freeze;switch(t){case r.Bomb:return i;case r.Freezing:return a;case r.LockFish:return o}}function Os(t,e){return new ct.a((function(n,i){var r=Dr(),o=Z[r].bullet,a=Z[r].buySkinTip.replace("$1",t+"").replace("$2",o).replace("$3",e);Hr.alert(a).then((function(t){"confirm"===t?n(!0):i()}))}))}function Ds(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return zs(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zs(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function zs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Us(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Ns,js=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Fs=function(t){ae()(n,t);var e=Us(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t.isInit=!1,t}return ot()(n,[{key:"onAwake",value:function(){var t,e=this,n=this.select_item,i=this.select_coin,r=this.item_menu,o=this.coin_menu,a=this.btn_search,u=new ws(i,o);u.setRender(this.renderSelectCoin),Ur(this,(function(t){e.renderCoinMenu(t)})),u.init(),Or(this,(function(t){e.initLang(t)}));var s=new ws(n,r);s.setRender(this.renderSelectItem),s.init();var c=Xn()(t=["2001","2002","2003"]).call(t,(function(t){return{item_name:Ps(t),item_id:t}}));c.unshift({item_name:"ALL",item_id:void 0}),s.setList(c),s.setCurIndex(0);var l=new gs(this.pagination);l.on(ys,(function(t){t.cur;for(var n=t.range,i=e.all_list,r=[],o=n[0];o<n[1];o++)r.push(i[o]);e.renderRecordList(r)})),this.pagination_ctrl=l,a.on("click",null,(function(){e.search()})),Te()((function(){e.search()})),this.select_coin_ctrl=u,this.select_item_ctrl=s}},{key:"onEnable",value:function(){var t=this;if(this.isInit){var e=this.select_coin_ctrl,n=this.select_item_ctrl;e.setCurIndex(0),n.setCurIndex(0),Te()((function(){t.search()}))}else this.isInit=!0}},{key:"initLang",value:function(t){var e=Z[t],n=e.itemListTitle,i=e.search,r=e.itemList1,o=e.itemList2,a=e.itemList3,u=e.gameNo,s=e.remainingNum,c=Z[t].noData,l=this.title,h=this.title_box,f=this.btn_search_label,v=this.empty_tip;l.text=n,v.text=c;for(var p=[r,o,a,s,u],d=0;d<h.numChildren;d++)h.getChildAt(d).text=p[d];f.text=i}},{key:"renderSelectCoin",value:function(t,e){var n=t.coin_icon,i=t.coin_name,r=e.coin_icon,o=e.coin_name;r?(i.x=43,n.visible=!0,n.skin=r):(i.x=15,n.visible=!1),i.text=o}},{key:"renderSelectItem",value:function(t,e){var n=t.item_name,i=e.item_name;n.text=i}},{key:"renderCoinMenu",value:function(t){var e=this.select_coin_ctrl,n=[];n.push({coin_icon:"",coin_name:"ALL",coin_id:void 0});var i,r=Ds(t);try{for(r.s();!(i=r.n()).done;){var o=xt()(i.value,2),a=o[0],u=o[1].icon;n.push({coin_icon:u,coin_name:a,coin_id:a})}}catch(t){r.e(t)}finally{r.f()}e.setList(n),e.setCurIndex(0)}},{key:"search",value:function(){var t,e=this,n=this.empty_tip,i=this.select_coin_ctrl,r=this.select_item_ctrl,o=this.pagination_ctrl,a=i.getCurData()||{},u=(r.getCurData()||{}).item_id,s=a.coin_id;this.renderRecordList([]),(t={itemId:u,currency:s},new ct.a((function(e,n){var i=au(f);i.event.once(j,(function(t){e(t)})),i.send(j,pe()({},t))}))).then((function(t){e.all_list=t.list,n.visible=!t.list.length,o.update(t.list.length,10)}))}},{key:"setList",value:function(t){this.all_list=t,this.pagination_ctrl.update(t.length,9)}},{key:"renderRecordList",value:function(t){this.record_list.array=Xn()(t).call(t,(function(t){return{buy_total:t.buyNum,remain:t.curNum,type:Ps(t.itemId+""),give_total:t.prizeNum,no:t.currency}}))}},{key:"destroy",value:function(){Nr(this),this.select_coin_ctrl.destroy(),this.select_item_ctrl.destroy(),this.select_coin_ctrl=void 0,this.select_item_ctrl=void 0,tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){return js(this,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))}},{key:"preLoad",value:function(){return ki.preLoad("Dialog","pop/record/itemRecord.scene")}}]),n}(fr.pop.record.itemRecordUI);function Rs(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Vs(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vs(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Vs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Gs(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}!function(t){t[t.NoHave=0]="NoHave",t[t.Have=1]="Have",t[t.Used=2]="Used"}(Ns||(Ns={}));var Hs=function(t){ae()(n,t);var e=Gs(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).isModal=!0,t.is_init=!1,t.renderGunList=function(e,n){var i=t.gun_list.array[n],r=i.gun_name,o=i.gun_id,a=i.gun_status,u=i.gun_price,s=e.name_label,c=e.icon,l=e.stack_btn,h=e.icon_check,f=e.select_bd,v=Dr(),p=Z[v],d=p.use,y=p.inUse;s.text=r,c.skin="image/pop/shop/icon/".concat(o,".png"),l.selectedIndex=a;var g=l.getChildAt(a),m=g.getChildByName("label");h.visible=!1,f.visible=!1,g.offAll(),a===Ns.NoHave?(m.text=u+"",g.on(Bn.a.CLICK,g,(function(){Os(u,r).then((function(e){e&&Qu(o,1,u).then((function(){t.buyGunSkin(o)}))}))}))):a===Ns.Have?(m.text=d,g.on(Bn.a.CLICK,g,(function(){Wu(o).then((function(){t.useGunSkin(o)}))}))):a===Ns.Used&&(m.text=y,h.visible=!0,f.visible=!0)},t.renderItemList=function(e,n){var i=t.item_list.array[n],r=i.item_name,o=i.item_id,a=i.item_num,u=i.item_price,s=e.name_label,c=e.icon,l=e.num_label,h=e.price_label,f=e.btn_buy;s.text=r,l.text=a+"",c.skin="image/pop/shop/icon/".concat(o,".png"),h.text=u+"",f.offAll(),f.on(Bn.a.CLICK,f,(function(){Es.preEnter({type:r,id:o,num:a,price:u})}))},t}return ot()(n,[{key:"init",value:function(){var t=this.gun_list,e=this.item_list;t.array=[],e.array=[],t.renderHandler=new Ft.a(t,this.renderGunList,null,!1),e.renderHandler=new Ft.a(e,this.renderItemList,null,!1)}},{key:"onEnable",value:function(){this.is_init||this.init(),this.is_init=!0}},{key:"initData",value:function(t){var e,n=this.gun_list,i=this.item_list,r=t.gun,o=t.item,a=[],u=Rs(r);try{for(u.s();!(e=u.n()).done;){var s=e.value,c=s.name,l=s.id,h=s.status,f=s.price,v=$s(l,c);a.push({gun_name:v,gun_id:l,gun_status:h,gun_price:f})}}catch(t){u.e(t)}finally{u.f()}n.array=a;var p,d=[],y=Rs(o);try{for(y.s();!(p=y.n()).done;){var g=p.value,m=g.name,_=g.id,b=g.price,k=g.num,w=$s(_,m);d.push({item_name:w,item_id:_,item_price:b,item_num:k})}}catch(t){y.e(t)}finally{y.f()}i.array=d}},{key:"useGunSkin",value:function(t){var e,n=Rs(this.gun_list.array);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.gun_id===t?i.gun_status=Ns.Used:i.gun_status!==Ns.NoHave&&(i.gun_status=Ns.Have)}}catch(t){n.e(t)}finally{n.f()}this.gun_list.refresh()}},{key:"buyGunSkin",value:function(t){var e,n=Rs(this.gun_list.array);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.gun_id===t){i.gun_status=Ns.Have;break}}}catch(t){n.e(t)}finally{n.f()}this.gun_list.refresh()}},{key:"onAwake",value:function(){var t=this;Or(this,(function(e){t.initLang(e)}))}},{key:"initLang",value:function(t){var e=this.title,n=this.item_tag,i=this.skin_tag,r=Z[t],o=r.skin,a=r.item;e.skin="image/international/title_shop_".concat(t,".png"),n.text=a,i.text=o}},{key:"destroy",value:function(){zr(this),tr()(le()(n.prototype),"destroy",this).call(this)}}],[{key:"preEnter",value:function(){Ae.play(ee.PopShow);var t=Ji.director.openDialog({dialog:n,use_exist:!0,stay_scene:!0}),e=Ku();return ct.a.all([t,e]).then((function(t){var e=xt()(t,2),n=e[0],i=e[1];n.initData(i)}))}},{key:"preLoad",value:function(){return ki.preLoad("Dialog","pop/shop/shop.scene")}}]),n}(fr.pop.shop.shopUI);function $s(t,e){var n=Dr(),i=Z[n],r=i.skin,o=i.bomb,a=i.freeze,u=i.lock,s="";-1!==St()(e).call(e,"皮肤")&&(s=e.replace("皮肤",""));return("2001"===t?u:"2002"===t?a:"2003"===t?o:r)+s}var Ys=n(691),Xs={};function Ks(t,e,n,i){var r,o,a,u=ht()(r="".concat(t,":")).call(r,e),s=null===(o=Xs[u])||void 0===o?void 0:o.pop();return s||("fish"===t?Vt("ani/fish/fish"+e,n,i):"bullet"===t?Vt(null===(a=qt(t,e))||void 0===a?void 0:a.path):"net"===t||"other"===t?Zt(t,e):void 0)}function Ws(t,e,n){var i;if(n&&!n.destroyed){var r=ht()(i="".concat(t,":")).call(i,e),o=Xs[r];o||(o=Xs[r]=[]),n.offAll(),n.stop(),n.removeSelf(),o.push(n)}}var Qs={};function qs(){return Qs.game}function Js(){return Qs.game.offPoolClick()}function Zs(t){return Qs.game.setBulletNum(t)}function tc(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Qs.game.onFishClick(t)}function ec(){return Qs.game.offFishClick()}var nc=n(32),ic=n.n(nc);function rc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var oc=function(t){ae()(n,t);var e=rc(n);function n(t,i){var r;return it()(this,n),(r=e.call(this)).info=t,r.pool=i,r.mouseEnabled=!0,r.mouseThrough=!1,r.visible=!1,window.fish=ic()(r),r}return ot()(n,[{key:"initAni",value:function(){if(!this.fish_ani){var t=this.info.type,e=qt("fish",t),n=e.offset,i=e.turn_ani,r=this.createFishAni(),o=xt()(n,4),a=o[0],u=o[1],s=o[2],c=o[3],l=u+c,h=a+s,f=c,v=a;this.size(l,h),this.pivot(f,v),r.pos(f,v),this.addChild(r),$o(r,0,!0),this.fish_ani=r,this.turn_ani=i,this.initShadow(),this.zOrder=Number(t)}}},{key:"createFishAni",value:function(){var t,e=this.info,n=e.type,i=e.currency,r=qt("fish",n),o=r.coin_flag,a=r.coin_color,u=r.scale,s=Ks("fish",n,null,o?1:void 0);if(o){var c=Ks("other","coin_light");c.zOrder=10,s.addChild(c),c.scale(1.5,1.5),c.alpha=.6,$o(c,0,!0),this.coin_light=c;var l=Ar(i);l&&(t=l,new ct.a((function(e,n){var i=new jt.a;i.loadImage(t,Ft.a.create(null,(function(){i.autoSize=!0,e(i)})))}))).then((function(t){t.filters=[Ko(a)];var e=t.drawToTexture(t.width,t.height,0,0);s.setSlotSkin("huobi",e)}))}return u&&s.scale(u,u),s}},{key:"initShadow",value:function(){var t,e,n=this.pool,i=this.info.type,r=Qs.game.upside_down,o=(null===(e=Xs[t="image/game/shadow"])||void 0===e?void 0:e.pop())||Gt(t);o.pivot(o.texture.width/2,o.texture.height/2),n.addChild(o);var a=function(t){return Lt.shadowPos[t]||Lt.shadowPos.default}(i);this.shadow_node=o,this.shadow_info=r?pe()(pe()({},a),{y:-a.y}):a,(a.scaleX||a.scaleY)&&o.scale(a.scaleX||1,a.scaleY||1)}},{key:"playSwimAni",value:function(){var t=this.fish_ani,e=this.turn_ani_name;t&&$o(t,e||0,!0)}},{key:"stopSwimAni",value:function(){var t=this.fish_ani;t&&Ho(t)}},{key:"setVisible",value:function(t){this.visible=t,t?(this.initAni(),this.playSwimAni()):this.stopSwimAni()}},{key:"syncPos",value:function(t,e,n){var i=this.turn_ani,r=this.fish_ani,o=this.visible,a=this.shadow_node,u=this.shadow_info;if(o){var s=Ot(e)+90;if(n){var c=s>0&&s<180;if(i){var l=c?"right":"left";this.turn_ani_name!==l&&(this.turn_ani_name=l,$o(r,l,!0))}else{(c?-1:1)!==this.scaleX&&(this.scaleX=c?-1:1)}}else this.rotation=s,a.rotation=s+90;this.pos(t.x,t.y),a.pos(t.x+u.x,t.y+u.y)}}},{key:"beCastAni",value:function(){var t=this;return new ct.a((function(e,n){var i=t.fish_ani;i&&(i.filters=[new jo.a([.5,.5,.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])],clearTimeout(t.time_out),t.time_out=Te()((function(){i.destroyed||(i.filters=[],e())}),500))}))}},{key:"destroy",value:function(){var t,e=this.info.type;(null===(t=null==this?void 0:this.fish_ani)||void 0===t?void 0:t.filters)&&(this.fish_ani.filters=[]),this.shadow_node&&(this.shadow_node.rotation=0),Ws("other","coin_light",this.coin_light),Ws("fish",e,this.fish_ani),function(t,e){if(e&&!(null==e?void 0:e.destroyed)){var n=t,i=Xs[n];i||(i=Xs[n]=[]),e.removeSelf(),i.push(e)}}("image/game/shadow",this.shadow_node),this.fish_ani=void 0,this.shadow_node=void 0,clearTimeout(this.time_out),tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(jt.a),ac=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function uc(t,e){var n=Qs.ani_overlay,i=e/8>=8?8:Math.ceil(e/8),r=i>4?2:1,o=Math.ceil(i/r),a=[];t=cc(t,(10*(o-1)+70*o)/2,(10*(r-1)+70*r)/2);for(var u=0;u<o;u++)for(var s=0;s<r;s++){var c=vc("coin"),l=Qs.game.upside_down;c.scaleY=l?-1:1,c.visible=!1,n.addChild(c);var h=t.x+80*(2*u+1-o)/2,f=t.y+80*(2*s+1-r)/2;c.play(0,!0),c.pos(h,f),a.push(c)}return{coins:a,pos:t}}function sc(t,e,n){var i=Qs.ani_overlay,r=Qs.game.upside_down,o=vc("award_light"),a=new nr.a;o.zOrder=5,a.zOrder=10,a.font=n?"numYellow40":"numWhite40",a.text="+"+e,r&&(a.scaleY=-1),i.addChild(a),i.addChild(o);var u=a.getBounds();a.pivot(u.width/2,u.height/2),a.pos(t.x,t.y),o.pos(t.x,t.y),o.once(Bn.a.STOPPED,o,(function(){a.destroy(),o.destroy(),pc("award_light",o)})),o.play(0,!1)}function cc(t,e,n){var i=t.x,r=t.y,o=Qs.ani_overlay,a=zt.a.stage.width,u=zt.a.stage.height,s=(o.width-a)/2,c=s+a;return i-e<s?i=s+e:i+e>c&&(i=c-e),r-n<0?r=n:r+n>u&&(r=u-n),{x:i,y:r}}function lc(t,e){var n,i=this,r=Xn()(n=De()(t).call(t)).call(n,(function(t,n){return ac(i,void 0,void 0,ut.a.mark((function i(){var r;return ut.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r={x:t.x,y:t.y},i.next=3,si(t,500);case 3:return i.next=5,oi(.5+.2*n);case 5:return i.next=7,fi(t,r,e,500);case 7:t.removeSelf(),pc("coin",t);case 9:case"end":return i.stop()}}),i)})))}));return ct.a.all(r)}var hc,fc={};function vc(t){var e=fc[t];e||(e=[],fc[t]=[]);var n=e.pop();return n&&!n.destroyed||(n=Zt("other",t)),$o(n,0,!0),n}function pc(t,e){var n=fc[t];n||(n=[],fc[t]=[]),e.removeSelf(),e.stop(),n.push(e)}function dc(){return function(){var t=Dr(),e=Qs.ani_overlay,n=Qs.game.upside_down;hc&&!hc.destroyed||(hc=vc("pos_tip"));hc.parent||e.addChild(hc);hc.scaleX=n?-1:1,$o(hc,t,!0)}(),hc}function yc(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return gc(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function gc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function mc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var _c=function(t){ae()(n,t);var e=mc(n);function n(){return it()(this,n),e.call(this)}return ot()(n,[{key:"onEnable",value:function(){this.init(),this.setDirection(this.gun_direct)}},{key:"init",value:function(){var t=this.light,e=this.gun,n=this.base,i=this.body;Ho(t),Ho(n),$o(e,"standby",!0),$o(i,"standby",!0)}},{key:"setMySelfStyle",value:function(){this.ctrl_box.visible=!0,this.activePosTip()}},{key:"setBulletCost",value:function(t){var e=t.skin,n=t.level_skin,i=t.bullet_cost,r=this.gun;this.score_label.text=i+"",this.gun_skin=e;var o,a,u=["base","light","body"],s=Wt(e,n),c=Le()(u).call(u,(function(t){return!s.has(t)})),l=yc(s);try{for(l.s();!(a=l.n()).done;){var h,f=xt()(a.value,2),v=f[0],p=f[1],d=ht()(h="".concat(v)).call(h,p),y=this[v];"gun"===v&&(o=d),"light"===v&&"3"===e&&(y.alpha=.6),y.url="ani/gun/".concat(d,".sk"),y.visible=!0}}catch(t){l.e(t)}finally{l.f()}var g,m,_,b=yc(c);try{for(b.s();!(g=b.n()).done;){var k=g.value,w=this[k];w.visible=!1,w instanceof or.a&&Ho(this[k])}}catch(t){b.e(t)}finally{b.f()}(m=r,_="ani/gun/".concat(o,".sk"),new ct.a((function(t,e){m.load(_,new Ft.a(m,(function(){t(void 0)})))}))).then((function(){$o(r,"standby",!0)})),bc(this,r.rotation)}},{key:"fixServerTopPos",value:function(){var t=this.ani_box,e=this.ctrl_wrap;t.rotation=this.rotation=180,e.scaleX=-1}},{key:"fixClientTopPos",value:function(){this.ctrl_wrap.scaleY=-1}},{key:"setDirection",value:function(t){if(t){var e=this.gun,n=Ot(t)+90;e.rotation=n,this.gun_direct=t,bc(this,n)}}},{key:"fire",value:function(t,e){var n=this.gun;Lu("".concat(e,":fire"),(function(){return Yo(n,"fire")})).then((function(t){t&&$o(n,"standby",!0)})),clearTimeout(this.time_out),this.time_out=Te()((function(){!function(t){var e=Mu.get(t),n=e.que.length;if(e){if(0!==n)(0,e.que[n-1].resolve)(!0);e.que=[],e.is_running=!1}}("".concat(e,":fire"))}),250),this.setDirection(t)}},{key:"addBullet",value:function(t,e){return function(t,e){return Qs.game.addBullet(t,e)}(t,e)}},{key:"detectDisableChangeBulletCost",value:function(){}},{key:"activePosTip",value:function(){var t=dc();this.addChild(t),t.pos(this.width/2,this.height/2)}},{key:"stopPosTip",value:function(){!hc&&hc.destroyed||pc("pos_tip",hc)}},{key:"setPos",value:function(t,e){this.pos(t,e)}}]),n}(fr.scenes.game.gunBoxUI);function bc(t,e){var n=t.gun_skin,i=t.body;"5"===n&&(i.rotation=e)}function kc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var wc=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},xc=function(t){ae()(n,t);var e=kc(n);function n(){var t;return it()(this,n),(t=e.apply(this,arguments)).bg_num=1,t}return ot()(n,[{key:"onEnable",value:function(){var t=this;Or(this,(function(e){t.initLang(e)}))}},{key:"initLang",value:function(t){var e=this.skill_box.auto_shoot_txt,n=this.skill_box.auto_shoot_light.visible?"auto_cancel_".concat(t):"auto_".concat(t);e.skin="image/international/".concat(n,".png")}},{key:"setTrialStyle",value:function(){var t=this.btn_gift;this.btn_shop;t.visible=!1}},{key:"showBubbleRefresh",value:function(t){var e=this.bubble_overlay,n=this.bg,i=this.bubble_wall,r=this.bubble_ani;t||(t=this.bg_num),this.bg_num=t,n.skin="image/game/normal_bg/bg".concat(t,".jpg"),r.url="image/game/bg_normal".concat(t,".sk"),i.visible=!1,e.visible=!0,Yo(e,"out").then((function(){e.visible=!1,ai(i,300,"",.3),$o(i,2,!0)}))}},{key:"onResize",value:function(t,e){var n=this.width,i=this.height,r=this.ctrl_box;this.x=(t-n)/2,this.y=(e-i)/2,t>1334&&(t=1334),r.width=t;var o=1;t<1290&&(o=.8),this.triggerResize(o)}},{key:"triggerResize",value:function(t){if(t!==this.resize_scale){this.bullet_box_pos=t>.8?20:-30,this.setBulletBoxPos(this.bullet_box_dir),this.resize_scale=t;var e=this.btn_gift,n=this.btn_voice,i=this.bullet_box,r=this.btn_leave,o=this.btn_help,a=this.btn_shop,u=this.skill_box;r.x=20*t,e.x=120*t,r.x=20*t,n.right=120*t,o.right=20*t,n.y=10*t,i.scale(t,t),n.scale(t,t),e.scale(t,t),r.scale(t,t),o.scale(t,t),a.scale(t,t),u.scale(t,t)}}},{key:"upSideDown",value:function(){var t=this.pool,e=this.gun_wrap,n=this.ani_wrap,i=this.ani_overlay;t.scaleY=e.scaleY=i.scaleY=n.scaleY=-1,this.upside_down=!0}},{key:"addFish",value:function(t){var e=this.pool,n=this.upside_down,i=t.horizon_turn,r=new oc(t,e);return i&&n&&(r.scaleY=-1),e.addChild(r),r}},{key:"addBullet",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.pool,r=qt("bullet",t),o=r.path;return e=n?Vt("".concat(o,"_rage")):Ks("bullet",t),i.addChild(e),e.visible=!1,e}},{key:"addNet",value:function(t){var e=this.pool,n=Ks("net",t);return e.addChild(n),n}},{key:"onPoolClick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.offPoolClick();var n=new na.a((function(e){var n=t.pool,i=function(t){var i=n.getMousePoint(),r=i.x,o=i.y;t.stopPropagation(),e.next({x:r,y:o})};e.add((function(){n.off(Bn.a.CLICK,n,i)})),n.on(Bn.a.CLICK,n,i),t.pool_click_observer=e}));return e?n.pipe(Object(Ys.a)()):n}},{key:"offPoolClick",value:function(){var t=this.pool_click_observer;t&&(t.unsubscribe(),this.pool_click_observer=void 0)}},{key:"onFishClick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.offFishClick();var n=new na.a((function(e){var n=t.pool,i=function(t){t.stopPropagation();var n=t.target;n instanceof oc&&e.next(n.info.id)};e.add((function(){n.off(Bn.a.CLICK,n,i)})),n.on(Bn.a.CLICK,n,i),t.fish_click_observer=e}));return e?n.pipe(Object(Ys.a)()):n}},{key:"offFishClick",value:function(){var t=this.fish_click_observer;t&&(t.unsubscribe(),this.fish_click_observer=void 0)}},{key:"addGun",value:function(){var t=this.gun_wrap,e=new _c;return t.addChild(e),e}},{key:"setBulletNum",value:function(t){var e=Dr(),n=Z[e].NumBullet;this.bullet_num.text="".concat(n,": ")+t}},{key:"getSkillItemByIndex",value:function(t){return this.skill_box.skill_list.getChildAt(t)}},{key:"getAutoShootSkillItem",value:function(){return this.skill_box.auto_shoot}},{key:"setAutoShootLight",value:function(t){var e=Dr();this.skill_box.auto_shoot_light.visible=t;var n=t?"auto_cancel_".concat(e):"auto_".concat(e);this.skill_box.auto_shoot_txt.skin="image/international/".concat(n,".png")}},{key:"setExchangeRate",value:function(t,e){var n=Dr(),i=Z[n].bullet,r=this.exchange_rate;r.innerHTML='<div style="width: 500px;height: 32px;line-height:32px;font-size: 20px;color:#fff;align:center;"><span>1 $0</span> = <span color="#ffdd76">$1</span> <span>$2</span> </div>'.replace("$0",i).replace("$1",t+"").replace("$2",e),r.style.font="20px Arial"}},{key:"setEnergyRadio",value:function(t){var e=this.skill_box.energy_bar,n=e.mask,i=e.width,r=e.height;n||(n=new jt.a,e.mask=n),e.mask.graphics.clear(),e.mask.graphics.drawRect(0,0,i*t,r,"#fff")}},{key:"energyLight",value:function(){var t=this.skill_box.energy_light;return new ct.a((function(e,n){t.visible=!0,t.on(Bn.a.STOPPED,t,(function(){t.visible=!1,e()})),$o(t,0,!1)}))}},{key:"setBulletBoxPos",value:function(t){var e=this.bullet_box,n=this.bullet_box_bg,i=this.bullet_box_pos;"left"===t?(e.right=void 0,e.left=i,n.scaleX=1):"right"===t&&(e.right=i,e.left=void 0,n.scaleX=-1),this.bullet_box_dir=t}},{key:"getPoolMousePos",value:function(){return this.pool.getMousePoint()}},{key:"destroy",value:function(){try{zr(this),tr()(le()(n.prototype),"destroy",this).call(this)}catch(t){Fa(t)}}}],[{key:"preEnter",value:function(){return wc(this,void 0,void 0,ut.a.mark((function t(){var e,n,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.director.runScene("scenes/game/game.scene");case 2:return e=t.sent,n=e.ani_wrap,i=e.ani_overlay,Vo(Qs,{game:e,ani_wrap:n,ani_overlay:i}),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})))}}]),n}(fr.scenes.game.gameUI);function Cc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Sc=function(t){ae()(n,t);var e=Cc(n);function n(){var t;return it()(this,n),(t=e.call(this)).init(),t}return ot()(n,[{key:"init",value:function(){var t=this.overlay,e=new jt.a;t.cacheAs="bitmap",e.blendMode="destination-out",t.addChild(e),this.cool_mask=e,t.visible=!1}},{key:"setId",value:function(t){var e=this.skill_icon,n=c[t];n?e.skin="image/game/skill_".concat(n,".png"):(n=l[t],e.skin="image/common/coin/".concat(n,".png"))}},{key:"setIcon",value:function(t){this.skill_icon.skin=t}},{key:"setNum",value:function(t){var e=t+"";t>99999&&(e="99999+"),this.num_label.text=e}},{key:"highlight",value:function(){var t=this.border_light;t.visible=!0,$o(t,0,!0)}},{key:"unHighlight",value:function(){var t=this.border_light;t.visible=!1,Ho(t)}},{key:"setShortcut",value:function(t){var e=this.shortcut_label;e.visible=!0,e.text=t}},{key:"showCoolTime",value:function(t){var e=this.cool_mask,n=this.overlay,i=e.graphics,r=360*(1-t)-90;i.clear(),0!==t?(n.visible=!0,i.drawPie(40,41,60,270,r,"#fff")):n.visible=!1}},{key:"clearCoolTime",value:function(){this.overlay.visible=!1}}]),n}(fr.scenes.game.skillItemUI);function Ic(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ac(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ac(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ac(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Bc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Tc=function(t){ae()(n,t);var e=Bc(n);function n(){return it()(this,n),e.apply(this,arguments)}return ot()(n,[{key:"onResize",value:function(t,e){t||(t=zt.a.stage.width,e=zt.a.stage.height);var n=this.width,i=this.height,r=this.inner,o=this.header,a=o.inner,u=o.middle_btn_wrap,s=o.btn_right_wrap,c=o.left_wrap,l=o.right_wrap;this.x=(t-n)/2,this.y=(e-i)/2,t>1334&&(t=1334),a.width=r.width=t;var h=t/e,f=10*h*h;t/e<1.651&&(f=7*h*h),la(c,f),la(s,f),la(u,f),la(l,f)}},{key:"onOpened",value:function(){var t=this.header,e=t.coin_menu,n=t.flag_menu;e.list.array=[],n.list.array=[],this.activeAni("normal"),e.list.renderHandler=new Ft.a(this,this.coinMenuRender,void 0,!1),this.initEvent()}},{key:"initEvent",value:function(){var t=this,e=this.header,n=e.flag_menu,i=e.btn_coin_select,r=e.flag_box;Or(this,(function(e){t.initLang(e)})),aa(this,(function(){t.toggleCoinMenu(!1)}),[i]),aa(this,(function(){t.toggleFlagMenu(!1)}),[n,r])}},{key:"initLang",value:function(t){var e=this.match_status,n=this.match_box,i=this.normal_box,r=this.btn_play_now,o=this.header,a=o.btn_get,u=o.btn_charge,s=o.middle_btn_wrap,c=Z[t].stayTuned,l=[["normal",i],["match",n]];e.text=c;for(var h=["btn_play","btn_try"],f=0,v=l;f<v.length;f++){var p=xt()(v[f],2),d=(p[0],p[1]);$o(d.getChildByName("ani"),"standby_".concat(t),!0);var y,g=Ic(h);try{for(g.s();!(y=g.n()).done;){var m=y.value;$o(d.getChildByName(m).getChildByName("ani"),"standby_".concat(t),!0)}}catch(t){g.e(t)}finally{g.f()}}$o(r.getChildByName("ani"),"standby_".concat(t),!0),u.getChildByName("txt_label").skin="image/international/charge_".concat(t,".png"),a.getChildByName("txt_label").skin="image/international/withdraw_".concat(t,".png"),la(s,10),this.activeAni("normal")}},{key:"setRechargeBtnVisible",value:function(t){this.header.btn_recharge.visible=t,t&&this.onResize()}},{key:"activeAni",value:function(t){for(var e=this.normal_box,n=this.match_box,i=Dr(),r=0,o=[["normal",e],["match",n]];r<o.length;r++){var a=xt()(o[r],2);a[0];$o(a[1].getChildByName("ani"),"standby_".concat(i),!0)}}},{key:"setNickname",value:function(t){var e=this.header,n=e.nickname,i=e.user_box,r=e.left_wrap;if(n.text=Ji.utils.cutStr(t,12),"GUEST"!==t)return la(r,10),i.visible=!1;i.visible=!0,Or(this,(function(t){var e=Z[t].guest;n.text=e})),la(r,10)}},{key:"coinMenuRender",value:function(t,e){var n=t.getChildByName("coin_num"),i=this.header.coin_menu.list.array[e].coin_num,r=14/(1.1*(Number(i)+"").length);r=r>1?1:r,n.scale(r,r),n.width=148/r}},{key:"setCoinData",value:function(t){var e,n=this.header.coin_menu,i=n.list,r=n.bg,o=[],a=Ic(t);try{for(a.s();!(e=a.n()).done;){var u=xt()(e.value,2),s=u[0],c=u[1],l=c.num,h=c.icon;o.push({coin_icon:h,coin_name:s,coin_num:l})}}catch(t){a.e(t)}finally{a.f()}i.array=o,o.length<=7?n.height=r.height=i.height=48*o.length+10:n.height=i.height=r.height=346}},{key:"setFlagData",value:function(t){var e,n=this.header.flag_menu,i=n.list,r=n.bg,o=[],a=Ic(t);try{for(a.s();!(e=a.n()).done;){var u=e.value;o.push({flag_type:u,flag_icon:"image/common/flag/flag_".concat(u,".png")})}}catch(t){a.e(t)}finally{a.f()}i.array=o,n.height=r.height=i.height=61*o.length+20}},{key:"toggleCoinMenu",value:function(t){var e=this.header,n=e.coin_menu,i=e.coin_triangle;n.list.array.length&&(t?(n.y=60,ai(n,300),i.rotation=180):(ui(n,100),n.list.selectedIndex=-1,i.rotation=0))}},{key:"setCurBalance",value:function(t,e,n){var i=this.header,r=i.coin_icon,o=i.coin_name,a=i.coin_num,u=this.normal_box,s=this.match_box;r.skin=e,o.text=t.toUpperCase(),a.text=Number(n)+"";var c=11/(1.08*a.text.length);c=c>1?1:c,a.scale(c,c),a.width=119/c;for(var l=0,h=[u,s];l<h.length;l++){h[l].getChildByName("coin_name").text=t.toUpperCase()}}},{key:"toggleFlagMenu",value:function(t){var e=this.header,n=e.flag_menu,i=e.flag_triangle;t?(ai(n,300),i.rotation=180):(ui(n,100),n.list.selectedIndex=-1,i.rotation=0)}},{key:"setFlag",value:function(t){this.header.flag.skin="image/common/flag/flag_".concat(t,".png")}},{key:"destroy",value:function(){try{tr()(le()(n.prototype),"destroy",this).call(this),zr(this)}catch(t){Fa(t)}}}],[{key:"preEnter",value:function(){return Ji.director.runScene("scenes/hall/hall.scene")}}]),n}(fr.scenes.hall.hallUI);function Mc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Lc="show",Ec=function(t){ae()(n,t);var e=Mc(n);function n(){var t;return it()(this,n),(t=e.call(this)).zOrder=100,t.event_com=new un,t.popupEffect=void 0,t.closeEffect=void 0,n.instance=ic()(t),t}return ot()(n,[{key:"onShow",value:function(){Na("load:>onShow"),this.open(!1),Ji.director.openDialog(this),this.event_com.emit(Lc)}},{key:"onHide",value:function(){Na("load:>onHide"),this.close(),this.event_com.emit(Lc)}},{key:"onProgress",value:function(t){this.progress.value=t}}]),n}(fr.scenes.loadingUI),Pc=n(381),Oc=function(){function t(){it()(this,t)}return ot()(t,null,[{key:"init",value:function(){var t=er.a.regClass;t("ui",fr),t("view/pop/alert.ts",Hr),t("view/pop/tip.ts",Sr),t("view/pop/topTip.ts",To),t("view/pop/voice.ts",Po),t("ctrl/guide/guideDialog.ts",pa),t("view/pop/help.ts",Ia),t("view/pop/lottery.ts",hs),t("view/pop/record/gameRecord.ts",Ts),t("view/pop/record/itemRecord.ts",Fs),t("view/pop/shop.ts",Hs),t("view/scenes/game/gameView.ts",xc),t("view/scenes/game/gunBoxView.ts",_c),t("view/scenes/game/skillItemView.ts",Sc),t("view/scenes/hallView.ts",Tc),t("view/scenes/loadingView.ts",Ec),t("Laya.Templet",Dt.a),t("Laya.HTMLDivElement",ar.a),t("laya.effect.GlowFilterSetter",Pc.a)}}]),t}();function Dc(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return zc(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function zc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Oc.width=1920,Oc.height=750,Oc.scaleMode="fixedheight",Oc.screenMode="horizontal",Oc.alignV="top",Oc.alignH="left",Oc.startScene="pop/alert/alert.scene",Oc.sceneRoot="",Oc.debug=!1,Oc.stat=!1,Oc.physicsDebug=!0,Oc.exportSceneToJson=!0,Oc.init();var Uc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];it()(this,t),this.angle=0,this.pos={x:0,y:0},this.shapes=e,this.horizon_turn=n}return ot()(t,[{key:"update",value:function(t,e){e&&this.setAngle(e),this.setPos(t)}},{key:"setPos",value:function(t){var e=t.x,n=t.y,i=this.pos,r=i.x,o=i.y;if(e!==r||n!==o){var a,u=Dc(this.shapes);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.shape,l=s.pos,h=this.angle;if(this.horizon_turn){var f=l.x,v=l.y;c.pos=new Tt.Vector(e+f,n+v)}else{var p=l.clone().rotate(h),d=p.x,y=p.y;c.pos=new Tt.Vector(e+d,n+y)}}}catch(t){u.e(t)}finally{u.f()}this.pos={x:e,y:n}}}},{key:"setAngle",value:function(t){var e=Math.atan2(t.y,t.x),n=this.shapes;if(e+=Math.PI/2,this.horizon_turn)this.angle*e<0&&(this.shapes=function(t){var e,n=[],i=ze(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,o=r.pos,a=r.shape,u=new Tt.Vector(-o.x,o.y),s=void 0;if(a instanceof Tt.Circle)s=je(a);else{var c,l=[],h=ze(a.points);try{for(h.s();!(c=h.n()).done;){var f=c.value;l.push(new Tt.Vector(-f.x,f.y))}}catch(t){h.e(t)}finally{h.f()}s=new Tt.Polygon(l[0],De()(l).call(l))}n.push({pos:u,shape:s})}}catch(t){i.e(t)}finally{i.f()}return n}(this.shapes));else{var i,r=Dc(n);try{for(r.s();!(i=r.n()).done;){var o=i.value.shape;o instanceof Tt.Polygon&&o.setAngle(e)}}catch(t){r.e(t)}finally{r.f()}}this.angle=e}},{key:"destroy",value:function(){this.shapes=void 0,this.angle=0,this.pos={x:0,y:0}}}]),t}(),Nc="destroy";function jc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Fc,Rc={Destroy:Nc,Move:"move",BeCast:"be_cast",BeCapture:"be_capture",StatusChange:"status_change",VisibleChange:"visible_change"};!function(t){t[t.Normal=0]="Normal",t[t.QuickLeave=1]="QuickLeave",t[t.Freezed=2]="Freezed",t[t.Dead=3]="Dead"}(Fc||(Fc={}));var Vc=function(t){ae()(n,t);var e=jc(n);function n(t,i){var r;return it()(this,n),(r=e.call(this)).status=Fc.Normal,r.horizon_turn=!1,r.visible=!1,r.onMoveChange=function(t){var e=ic()(r).body,n=t.pos,i=t.velocity,o=t.is_complete,a=t.visible;if(o)return r.destroy();r.setVisible(a),a&&(r.pos=n,r.velocity=i,e.update(n,i),r.event.emit(Rc.Move,{pos:n,velocity:i}))},r.game=i,r.initCom(t),r}return ot()(n,[{key:"initCom",value:function(t){var e=t.type;Vo(this,{type:e,id:t.id,score:t.score||0,currency:t.currency});var n=!1;"horizon_turn"===qt("fish",e).ani_type&&(n=!0);var i=Ne("fish",Number(e)),r=new Uc(i,n),o=new un;this.event=o,this.body=r,this.horizon_turn=n,this.addCom(new un,r)}},{key:"init",value:function(){this.move_com.start()}},{key:"setMoveCom",value:function(t){var e=this.move_com;e&&(e.destroy(),this.delCom(e)),t.onUpdate(this.onMoveChange),this.move_com=t,this.addCom(t)}},{key:"setStatus",value:function(t){t!==this.status&&(this.status=t,this.event.emit(Rc.StatusChange,t),t===Fc.Freezed?this.move_com.stop():this.move_com.start())}},{key:"setVisible",value:function(t){t!==this.visible&&(this.visible=t,this.event.emit(Rc.VisibleChange,t))}},{key:"beCast",value:function(){this.event&&this.event.emit(Rc.BeCast)}},{key:"beCapture",value:function(){var t=this;return new ct.a((function(e,n){if(t.event){var i=t.pos;t.event.emit(Rc.BeCapture,(function(){e(i),t.destroy()}))}else n(),t.destroy()}))}},{key:"destroy",value:function(){this.destroyed||(this.event.emit(Rc.Destroy),this.setStatus(Fc.Dead),this.game.removeFish(this),this.game=void 0,this.id=void 0,this.type=void 0,this.pos=void 0,this.velocity=void 0,this.visible=!1,this.horizon_turn=!1,this.move_com=void 0,this.event=void 0,this.body=void 0,tr()(le()(n.prototype),"destroy",this).call(this))}}]),n}(rn);function Gc(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Hc(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Hc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Hc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var $c=function(){function t(){it()(this,t),this.timeout_list=new tn.a,this.interval_list=new tn.a}return ot()(t,[{key:"createTimeout",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Te()((function(){t(),e.timeout_list.delete(i)}),n);return this.timeout_list.add(i),i}},{key:"createInterval",value:function(t,e){var n=this,i=za()((function(){t(),n.interval_list.delete(i)}),e);return this.interval_list.add(i),i}},{key:"clear",value:function(t){var e=this.timeout_list,n=this.interval_list;e.has(t)&&(e.delete(t),clearTimeout(t)),n.has(t)&&(n.delete(t),clearInterval(t))}},{key:"destroy",value:function(){var t,e=this.timeout_list,n=this.interval_list,i=Gc(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;clearTimeout(r)}}catch(t){i.e(t)}finally{i.f()}var o,a=Gc(n);try{for(a.s();!(o=a.n()).done;){var u=o.value;clearInterval(u)}}catch(t){a.e(t)}finally{a.f()}e.clear(),n.clear()}}]),t}();function Yc(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Xc(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Xc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Kc(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Wc="freezing",Qc="un_freezing",qc=function(t){ae()(n,t);var e=Kc(n);function n(t){var i;return it()(this,n),(i=e.call(this)).game=t,i.addCom(new $c),i}return ot()(n,[{key:"freezing",value:function(t,e){var n=this,i=this.game,r=this.freezing_timeout,o=i.event,a=this.getCom($c);r&&a.clear(r),this.freezing_timeout=a.createTimeout((function(){n.unFreezing()}),1e3*t);var u,s=Yc(e);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=i.getFishById(c);l&&l.setStatus(Fc.Freezed)}}catch(t){s.e(t)}finally{s.f()}o.emit(Wc)}},{key:"unFreezing",value:function(){var t=this.game,e=this.freezing_timeout,n=t.fish_map,i=t.event,r=this.getCom($c);e&&r.clear(e);var o,a=Yc(n);try{for(a.s();!(o=a.n()).done;){xt()(o.value,2)[1].setStatus(Fc.Normal)}}catch(t){a.e(t)}finally{a.f()}i.emit(Qc)}}]),n}(rn),Jc=n(377),Zc=n.n(Jc),tl={1:[[1465,757,1583,400,1304,143,1008,-6]],2:[[790,753,1404,321,444,475,1046,-6]],3:[[1384,755,1412,380,578,547,774,-7]],4:[[473,754,157,324,884,-7]],5:[[955,758,1158,474,1561,476,915,-8]],6:[[1466,753,1397,532,372,486,755,-6]],7:[[381,759,587,465,1083,260],[1083,260,1242,172,1014,-4]],8:[[1087,756,860,636,747,377],[747,377,682,209,684,100,810,-6]],9:[[100,753,106,214,651,508],[651,508,1094,697,1033,111,988,-8]],10:[[1831,754,1765,593,1280,509],[1280,509,1002,478,970,99,943,-8]],11:[[1686,-5,1753,284,1231,415],[1231,415,937,484,494,521,502,759]],12:[[1550,-8,1344,285,848,491],[848,491,689,579,917,754]],13:[[584,-4,389,477,690,546],[690,546,991,616,1011,753]],14:[[1384,-2,1464,178,1087,511],[1087,511,988,600,1018,751]],15:[[547,-4,519,371,1353,204,1157,757]],16:[[976,-8,773,277,370,274,1015,759]],17:[[465,-2,534,219,1559,265,1176,756]],18:[[1531,755,1726,274,1425,204],[1425,204,1124,135,1104,-3]],19:[[1810,-2,1804,536,1260,242],[1260,242,817,54,878,639,923,759]],20:[[100,-3,166,158,651,242],[651,242,929,273,961,652,988,758]],21:[[1934,697,1883,265,1390,332],[1390,332,593,415,97,-4]],22:[[1932,486,1084,905,793,600],[793,600,466,235,1079,173,1028,-7]],23:[[1932,375,1586,585,1157,488],[1157,488,799,408,617,172,575,-8]],24:[[1932,537,1435,746,1005,650],[1005,650,648,570,465,172,424,-8]],25:[[1932,133,1802,132,1528,550],[1528,550,1320,858,830,240,594,-10]],26:[[1932,610,1802,611,1528,193],[1528,193,1320,-115,830,503,594,753]],27:[[1933,203,1615,677,1229,395],[1229,395,903,181,485,252,274,751]],28:[[1934,697,1710,448,1390,332],[1390,332,969,206,360,754]],29:[[-12,261,837,-158,1127,148],[1127,148,1455,512,841,574,892,754]],30:[[-12,372,334,163,764,259],[764,259,1121,339,1304,575,1345,755]],31:[[-12,210,486,1,915,97],[915,97,1273,177,1455,575,1497,755]],32:[[-12,614,118,615,393,197],[393,197,600,-110,1090,507,1326,757]],33:[[-12,137,118,136,393,554],[393,554,600,862,1090,244,1326,-6]],34:[[-13,544,306,70,691,352],[691,352,1017,566,1436,495,1647,-3]],35:[[-13,50,211,299,531,415],[531,415,952,541,1561,-7]],36:[[-11,359,162,129,601,122],[601,122,1144,120,1932,429]],37:[[-9,306,289,715,650,706],[650,706,1010,696,1930,36]],38:[[-13,285,725,697,1178,713],[1178,713,1630,729,1929,522]],39:[[-11,418,348,181,590,176],[590,176,832,172,944,333,1267,389],[1267,389,1496,404,1628,400,1933,242]],40:[[-10,291,1051,295,1410,254],[1410,254,1770,213,1930,73]],41:[[230,753,147,389,282,197],[282,197,314,151,366,118,468,113],[468,113,1024,82,1680,140,1931,235]],42:[[-12,31,967,636,1440,495],[1440,495,1855,338,1932,160]],43:[[-12,370,322,598,827,598],[827,598,1331,598,1263,388,1931,440]],44:[[-9,494,998,805,1350,670],[1350,670,1755,471,1929,343]],45:[[-12,165,749,554,1225,428],[1225,428,1627,325,1932,27]],46:[[-10,658,719,311,1028,287],[1028,287,1479,231,1931,383]],47:[[-11,608,975,727,1328,613],[1328,613,1681,498,1930,-3]],48:[[-13,204,867,12,1257,9],[1257,9,1646,6,1766,132,1933,135]],49:[[-11,38,1182,19,1431,104],[1431,104,1680,189,1932,458]],50:[[-12,494,1140,869,1701,524],[1701,524,1871,415,1930,318]],51:[[-12,165,476,55,927,98],[927,98,1377,140,1566,417,1695,416],[1695,416,1823,415,1908,320,1933,304]],52:[[-8,705,1291,19,1621,52],[1621,52,1676,52,1720,75,1746,94],[1746,94,1770,112,1835,151,1934,284]],53:[[169,-18,166,315,497,360],[497,360,828,405,1930,291]],54:[[-9,517,525,164,1046,167],[1046,167,1567,169,1932,256]],55:[[-11,-6,634,776,1107,704],[1107,704,1404,660,1929,326]],56:[[-9,333,80,586,340,602],[340,602,601,618,1920,493,1931,493]],57:[[-12,263,98,104,203,61],[203,61,391,-23,1872,694,1929,749]],58:[[-11,463,200,610,566,525],[566,525,854,456,1285,112,1929,126]],59:[[-8,287,641,28,838,125],[838,125,1035,223,944,693,1932,734]],60:[[-13,752,333,510,632,327],[632,327,1143,47,1201,508,1624,504],[1624,504,1821,486,1918,352,1929,349]],61:[[-12,340,160,194,392,170],[392,170,625,145,854,530,999,606],[999,606,1407,849,1768,318,1932,164]],62:[[-10,621,692,896,734,544],[734,544,781,-24,1054,281,1420,238],[1420,238,1792,179,1933,18]],63:[[-12,693,228,404,412,384],[412,384,597,364,729,551,839,583],[839,583,1140,702,1200,303,1933,305]],64:[[103,756,22,202,515,244],[515,244,715,242,931,527,1188,519],[1188,519,1719,500,1933,678]],65:[[-8,128,379,27,570,516],[570,516,733,957,1075,143,1365,131],[1365,131,1590,109,1763,482,1933,511]],66:[[-13,400,550,37,546,339],[546,339,563,1015,1689,686,1305,323],[1305,323,984,52,1744,-8,1934,18]],67:[[-12,5,449,148,516,344],[516,344,642,717,1154,146,1931,250]],68:[[35,-7,66,570,528,665],[528,665,887,734,868,245,1033,147],[1033,147,1315,-37,1783,218,1931,110]],69:[[-11,629,647,348,908,385],[908,385,1170,422,1191,691,1416,657],[1416,657,1641,622,1906,370,1933,345]],70:[[50,-7,255,726,792,138,1942,588]],71:[[-10,97,220,584,676,563],[676,563,934,546,1080,427,1270,380],[1270,380,1672,280,1727,416,1931,324]],72:[[1934,409,1762,555,1530,579],[1530,579,1297,604,1068,219,923,143],[923,143,515,-100,154,431,-10,585]],73:[[1932,128,1230,-147,1188,205],[1188,205,1141,773,868,468,502,511],[502,511,130,570,-11,731]],74:[[1934,56,1694,345,1510,365],[1510,365,1325,385,1193,198,1083,166],[1083,166,782,47,722,446,-11,444]],75:[[1819,-7,1900,546,1407,505],[1407,505,1207,507,991,222,734,230],[734,230,203,249,-11,71]],76:[[1930,621,1543,722,1352,233],[1352,233,1189,-208,847,606,557,618],[557,618,332,640,159,267,-11,238]],77:[[1935,349,1372,712,1376,410],[1376,410,1359,-266,233,63,617,426],[617,426,938,697,178,757,-12,731]],78:[[1933,744,1473,601,1406,405],[1406,405,1280,32,768,603,-9,499]],79:[[1887,755,1856,179,1394,84],[1394,84,1035,15,1054,504,889,602],[889,602,607,785,139,531,-9,639]],80:[[1872,756,1667,23,1130,611,-20,161]],81:[[-9,5,394,792,2128,442,913,61],[913,61,267,-96,330,754,1085,683],[1085,683,1402,652,1447,273,1929,166]],82:[[-13,702,962,925,1964,-151,391,81],[391,81,52,123,131,754,885,683],[885,683,1203,652,1936,595,1527,-6]],83:[[1933,701,958,924,21,210,1425,61],[1425,61,2036,-5,1594,753,840,682],[840,682,522,651,309,238,642,-6]],84:[[1932,37,-164,61,-551,535,1273,686],[1273,686,2065,753,1492,-16,513,57],[513,57,101,88,260,599,374,754]],85:[[1933,378,527,963,-428,215,1228,61],[1228,61,2076,-5,1462,753,414,682],[414,682,-27,651,-65,238,398,-6]],86:[[-9,47,966,-176,3121,590,516,668],[516,668,64,679,135,96,890,167],[890,167,1900,328,1329,510,996,755]],87:[[-13,702,962,925,3128,25,340,233],[340,233,-518,356,1093,909,1052,521],[1052,521,848,-205,1556,230,1588,-6]],88:[[-9,672,1124,776,1903,180,499,31],[499,31,-111,-35,542,985,1085,653],[1085,653,1379,438,309,192,1929,135]],89:[[-13,398,1442,689,1990,-4,340,130],[340,130,3,165,518,973,724,599],[724,599,1158,-351,1277,722,1931,670]],90:[[-9,369,966,591,2128,442,913,61],[913,61,267,-96,88,754,842,683],[842,683,1227,621,803,37,1929,166]],91:[[1929,744,1527,-43,-207,307,1007,688],[1007,688,1654,845,1590,-5,836,66],[836,66,519,97,473,476,-8,583]],92:[[1933,47,959,-176,-44,900,1529,667],[1529,667,1868,626,1789,-5,1035,66],[1035,66,718,97,-15,154,393,755]],93:[[-13,48,962,-175,1900,539,495,688],[495,688,-115,754,327,-4,1081,67],[1081,67,1398,98,1611,511,1278,755]],94:[[-12,712,2084,687,2471,214,648,63],[648,63,-145,-4,429,764,1408,692],[1408,692,1820,660,1661,150,1546,-5]],95:[[-13,371,1394,-214,2348,533,693,688],[693,688,-155,754,458,-4,1507,67],[1507,67,1947,98,1985,510,1523,755]],96:[[1929,702,955,924,-1200,159,1404,81],[1404,81,1857,70,1785,653,1031,581],[1031,581,21,421,592,238,925,-6]],97:[[1933,47,959,-176,-1207,724,1580,516],[1580,516,2439,393,828,-160,868,228],[868,228,1072,954,365,519,333,755]],98:[[1929,77,797,-27,17,569,1421,718],[1421,718,2032,784,1378,-236,836,96],[836,96,542,311,1611,557,-8,613]],99:[[1933,351,478,60,-70,752,1580,619],[1580,619,1917,584,1402,-224,1197,150],[1197,150,763,1099,644,27,-11,79]],100:[[1929,380,955,158,-207,307,1007,688],[1007,688,1654,845,1833,-5,1078,66],[1078,66,694,128,1117,712,-8,583]]},el=function(){function t(e,n,i,r){it()(this,t),this.curve_list=[],this.cur_curve_info={},this.is_reverse=!1,this.total_frame=al(e),this.used_frame=al(n),this.curve_list=i,this.is_reverse=r}return ot()(t,[{key:"update",value:function(t){var e=this.is_reverse,n=(this.used_frame=this.used_frame+t)/this.total_frame,i=!1;if(this.radio=n,n<=0)return{visible:!1};if(n>=1)return{is_complete:i=!0};e&&(n=1-n);var r=this.getPointAtRadio(n),o=r.position,a=r.direction;return e&&(a=De()(a).call(a)),{visible:!0,pos:o,velocity:a,is_complete:i}}},{key:"getPointAtRadio",value:function(t){var e=this.calcCurCurveInfo(t),n=e.curve,i=e.radio_in_curve,r=e.index,o=n.curve.get(i),a=n.curve.derivative(i);if(n.curve.is_static){var u,s,c=this.curve_list;r-1>=0?(u=c[r-1].curve,s=1):(u=c[r+1].curve,s=0),a=u.derivative(s)}return{position:o,direction:new Tt.Vector(a.x,a.y)}}},{key:"calcCurCurveInfo",value:function(t){var e=this.cur_curve_info,n=this.curve_list,i=this.is_reverse,r=e.end_radio,o=e.start_radio,a=0;if(!i&&r&&t<r||i&&o&&t>o)return a=(t-o)/(r-o),e.radio_in_curve=a,e;for(var u,s,c=0,l=0;l<n.length;l++)if(!(t>(s=n[l]).radio)){0===(c=l)?(u=0,a=t/s.radio):a=(t-(u=n[l-1].radio))/(s.radio-u);break}return e.radio_in_curve=a,e.index=c,e.start_radio=u,e.end_radio=s.radio,e.curve=s,e}}]),t}(),nl=function(){function t(e,n){it()(this,t),this.is_static=!1,e.x===n.x&&e.y===n.y&&(this.is_static=!0,this.len=0,this.direction=new Tt.Vector(0,0));var i=e.x,r=e.y,o=n.x,a=n.y-r,u=o-i,s=Math.sqrt(u*u+a*a);this.start_pos=e,this.end_pos=n,this.direction=new Tt.Vector(u,a).normalize(),this.len=s}return ot()(t,[{key:"get",value:function(t){var e=t*this.len,n=this.direction.clone().scale(e,e),i=this.start_pos.x,r=this.start_pos.y;return{x:i+n.x,y:r+n.y}}},{key:"derivative",value:function(t){return this.direction}},{key:"length",value:function(t){return this.len}}]),t}(),il={1:function(t,e,n,i,r){var o=r[1]-r[0],a=1;return o<0&&(a=-1),{get:function(a){return{x:a=r[0]+a*o,y:t*Math.sin(i+e*a)+n}},derivative:function(n){return n=r[0]+n*o,{x:a,y:a*t*e*Math.cos(i+e*n)}}}},2:function(t,e,n){var i=n[1]-n[0],r=i>0?1:-1,o=Math.abs(i)*e,a={x:t.x-r*e,y:750},u=750-t.y,s=t.y,c=u+o+s,l=[0,u/c,(u+o)/c,1];return{get:function(r){for(var o=0,c=0;c<l.length&&!(r<l[c]);c++)o=c;return r=(r-l[o])/(l[o+1]-l[o]),0===o?{x:a.x,y:750-r*u}:1===o?(r=r*i+n[0],{x:t.x+Math.cos(r)*e,y:t.y+Math.sin(r)*e}):{x:a.x,y:s*(1-r)}},derivative:function(t){for(var e=0,o=0;o<l.length&&!(t<l[o]);o++)e=o;return t=(t-l[e])/(l[e+1]-l[e]),1!==e?{x:0,y:-1}:(t=t*i+n[0],{x:r*Math.cos(Math.PI/2+t),y:r*Math.sin(Math.PI/2+t)})}}},3:function(t,e){return new nl(t,e)},4:function(t,e,n){var i=n[1]-n[0],r=i>0?1:-1,o=667+t,a=375+e,u=333.5,s=187.5;return{get:function(t){return t=n[0]+t*i,{x:u*Math.cos(t)+o,y:s*Math.sin(t)+a}},derivative:function(t){return t=n[0]+t*i,{x:-r*u*Math.sin(t),y:r*s*Math.cos(t)}},length:function(t){return Math.abs(Math.ceil(t*(2*Math.PI*s+584)*i/(2*Math.PI)))}}}},rl=Oc.width,ol=Oc.height;function al(t){return Math.ceil(60*t)}function ul(t,e,n,i){var r,o,a=qt("fish",i),u=a.ani_type;if(a.offset&&"horizon_turn"===u){var s=function(t,e){var n,i,r=qt("fish",e);t.y<=0?(n=Math.max(r.offset[0],r.offset[2]),i=new Mt.a.Vector(0,-1)):t.x>=rl?(n=Math.max(r.offset[1],r.offset[3]),i=new Mt.a.Vector(1,0)):t.y>=ol?(n=Math.max(r.offset[0],r.offset[2]),i=new Mt.a.Vector(0,1)):(n=Math.max(r.offset[1],r.offset[3]),i=new Mt.a.Vector(-1,0));return{fish_len:n,derivative:i}}(e,i);r=s.fish_len,o=s.derivative}else r=sl(t,i),o=new Mt.a.Vector(n.x,n.y).normalize(),"before"===t&&(o=De()(o).call(o));var c=o.scale(r,r),l={x:e.x+c.x,y:e.y+c.y};return{curve:"before"===t?new nl(l,e):new nl(e,l),length:r}}function sl(t,e){var n=qt("fish",e).offset;return n||Fa("can't find fish sprite offset"),"before"===t?n[0]:n[2]}function cl(t,e){var n=0;"after"===e&&(n=1);var i=t.curve.get(n),r=t.curve.derivative(n),o=new Mt.a.Vector(r.x,r.y);"before"===e&&(o=De()(o).call(o));var a=function(t,e){var n,i,r=0;(i=r-t.x)*e.x<0&&(i=(r=Oc.width)-t.x);var o,a,u,s=r*r+(n=i*e.y/e.x+t.y)*n;return(u=a-t.y)*e.y<0&&(u=(a=Oc.height)-t.y),s<(o=u*e.x/e.y+t.x)*o+a*a?{x:r,y:n}:{x:o,y:a}}(i,o),u=new nl(a,i);return"after"===e&&(u=new nl(i,a)),{curve:u,length:u.length(1)}}function ll(t){var e=new Zc.a(t);return{curve:e,length:e.length()}}function hl(t){var e={x:t[0],y:t[1]},n={x:t[2],y:t[3]},i=new nl(e,n);return{curve:i,length:i.length(1)}}function fl(t){var e,n=t.fishId,i=t.displaceType,r=t.pathNo,o=t.pathList,a=t.usedTime,u=t.totalTime,s=De()(t),c=t.funList,l=t.displaceLen;switch(i){case"path":var h;if(r?h=tl[r]:o&&(h=o),!h)return void Fa("cant find path for no:".concat(r));e=function(t,e){for(var n=[],i=0,r=0;r<t.length;r++){var o=void 0,a=void 0,u=t[r];if(u.length>=6)a=(o=ll(u)).curve;else{if(4!==u.length)continue;a=(o=hl(u)).curve}if(n.push(o),0===r){var s=ul("before",a.get(0),a.derivative(0),e);n.unshift(s),i+=s.length}if(r===t.length-1){var c=ul("after",a.get(1),a.derivative(1),e);n.push(c),i+=c.length}i+=o.length}for(var l=0,h=0,f=n;h<f.length;h++){var v=f[h];l+=v.length,v.radio=l/i}return n}(h,n);break;default:e=function(t,e,n){for(var i=0,r=[],o=0;o<t.length;o++){var a={},u=t[o],s=u.funNo,c=u.params,l=u.no_enter_leave,h=u.no_enter_leave,f=u.radio,v=il[s].apply(this,c);a.curve=v;var p=n*f;if(p||"function"!=typeof v.length||(p=v.length(1)),a.length=p||1,i+=a.length,r.push(a),0===o&&!l){var d=ul("before",v.get(0),v.derivative(0),e);r.unshift(d),i+=d.length}if(o===t.length-1){if(h){var y=cl(a,"after");r.push(y),i+=y.length,v=y.curve}var g=ul("after",v.get(1),v.derivative(1),e);r.push(g),i+=g.length}}for(var m=0,_=0,b=r;_<b.length;_++){var k=b[_];m+=k.length,k.radio=m/i}return r}(c,n,l)}return new el(u/1e3,a/1e3,e,s)}function vl(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return pl(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function pl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var dl,yl=new Bt.a,gl=!1,ml=0;function _l(){var t=1;if(dl){var e=hn()(),n=e-dl;t=Math.floor(n/(1e3/60)*1),dl=e-(n-t/1*(1e3/60))}else dl=hn()();var i,r=vl(yl);try{for(r.s();!(i=r.n()).done;){xt()(i.value,2)[1].fn(t)}}catch(t){r.e(t)}finally{r.f()}}function bl(t){return gl||(gl=!0,zt.a.timer.loop(1e3/60,null,_l)),ml++,yl.set(ml,{fn:t,index:ml}),ml}function kl(t){yl.delete(t),0===yl.size&&(zt.a.timer.clear(null,_l),gl=!1,dl=0)}var wl=function(){function t(e){var n=this;it()(this,t),this.is_stop=!1,this.onTick=function(t){var e=n.is_stop,i=n.update_fn;e||i(n.displace.update(t))},this.displace=e}return ot()(t,[{key:"onUpdate",value:function(t){this.update_fn=t}},{key:"start",value:function(){this.tick_index?this.is_stop=!1:(this.is_stop=!1,this.tick_index=bl(this.onTick),this.onTick(0))}},{key:"stop",value:function(){this.is_stop=!0}},{key:"getRadio",value:function(){return this.displace.radio}},{key:"destroy",value:function(){kl(this.tick_index),this.displace=void 0,this.update_fn=void 0,this.is_stop=!1,this.tick_index=0}}]),t}();function xl(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Cl(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Cl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Sl(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Il="pre_add_shoal",Al=function(t){ae()(n,t);var e=Sl(n);function n(t){var i;return it()(this,n),(i=e.call(this)).shoal_map=new Bt.a,i.game=t,i}return ot()(n,[{key:"preAddShoal",value:function(t){var e=this.game,n=e.event,i=e.fish_map;n.emit(Il,t);var r,o=xl(i);try{for(o.s();!(r=o.n()).done;){Bl(xt()(r.value,2)[1],t)}}catch(t){o.e(t)}finally{o.f()}}},{key:"addShoal",value:function(t){}},{key:"removeShoal",value:function(t){this.shoal_map.delete(t)}},{key:"genFish",value:function(){}},{key:"destroy",value:function(){}}]),n}(rn);function Bl(t,e){var n=t.pos;if(!t.visible)return t.destroy();var i,r=u.ClearFishTime,o=u.PoolWidth,a=sl("after",t.type),s={y:n.y};e?(i=o-n.x+a,s.x=o+a):(s.x=-a,i=n.x+a);var c=new nl(n,s),l=new el(r,0,[{curve:c,length:i,radio:1}],!1),h=new wl(l);t.setMoveCom(h),t.init()}function Tl(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Ml=function(t){ae()(n,t);var e=Tl(n);function n(t){var i;return it()(this,n),(i=e.call(this)).gun=t,i}return ot()(n,[{key:"active",value:function(){var t=this.gun;t.event.on(ql.SwitchOn,(function(){t.preAddBullet(t.direction,!0)}),this),t.setStatus(Ql.AutoShoot),t.preAddBullet(t.direction,!0),t.event.emit(ql.AutoShoot,!0)}},{key:"clear",value:function(){var t=this.gun,e=t.event;t.setStatus(Ql.Normal),e.offAllCaller(this),t.event.emit(ql.AutoShoot,!1)}},{key:"destroy",value:function(){this.clear(),this.gun.delCom(this),this.gun=void 0}}]),n}(rn),Ll=function(){function t(e,n,i,r){var o=this;it()(this,t),this.is_stop=!1,this.update=function(t){var e=o.target,n=o.pos,i=o.is_stop,r=o.velocity_size;if(!i&&e.pos){var a=n.x,u=n.y,s=e.pos,c=s.x,l=s.y,h=new Tt.Vector(c-a,l-u).normalize().scale(r);n.x+=h.x*t,n.y+=h.y*t,o.detectOnHit()?(o.update_fn({pos:pe()({},e.pos),velocity:h}),o.on_hit(e)):o.update_fn({pos:pe()({},o.pos),velocity:h})}},this.target=i,this.pos=pe()({},e),this.start_pos=pe()({},e),this.velocity_size=n.len(),this.on_hit=r}return ot()(t,[{key:"start",value:function(){var t;this.tick_index?this.is_stop=!1:(this.is_stop=!1,this.tick_index=bl(dn()(t=this.update).call(t,this)),this.update(0))}},{key:"stop",value:function(){this.is_stop=!0}},{key:"onUpdate",value:function(t){this.update_fn=t}},{key:"detectOnHit",value:function(){var t=this.pos,e=this.start_pos,n=this.target.pos,i=new Tt.Vector(n.x-e.x,n.y-e.y).normalize();return!(new Tt.Vector(n.x-t.x,n.y-t.y).normalize().dot(i)>0)&&(this.pos=n,!0)}},{key:"destroy",value:function(){kl(this.tick_index),this.tick_index=0,this.target=void 0,this.on_hit=void 0,this.pos=void 0,this.start_pos=void 0,this.velocity_size=0,this.update_fn=void 0,this.is_stop=!1}}]),t}(),El=function(){function t(e,n){it()(this,t),this.is_stop=!1,this.pos=e,this.velocity=n}return ot()(t,[{key:"start",value:function(){var t;this.tick_index?this.is_stop=!1:(this.is_stop=!1,this.tick_index=bl(dn()(t=this.update).call(t,this)),this.update(0))}},{key:"stop",value:function(){this.is_stop=!0}},{key:"update",value:function(t){var e=this.pos,n=this.velocity;this.is_stop||(e.x+=n.x*t,e.y+=n.y*t,this.detectHitWall(),this.update_fn({pos:e,velocity:n}))}},{key:"onUpdate",value:function(t){this.update_fn=t}},{key:"detectHitWall",value:function(){var t=u.PoolHeight,e=u.PoolWidth,n=u.BulletZoneWidth,i=this.velocity,r=this.pos,o=i.x,a=i.y,s=(e-n)/2,c=s+n;r.x>c&&(r.x=c-(r.x-c),o=-Math.abs(i.x)),r.x<s&&(r.x=s+(s-r.x),o=Math.abs(i.x)),r.y>t&&(r.y=t-(r.y-t),a=-Math.abs(i.y)),r.y<0&&(r.y=-r.y,a=Math.abs(i.y)),this.velocity=new Mt.a.Vector(o,a),this.pos=r}},{key:"destroy",value:function(){kl(this.tick_index),this.tick_index=0,this.velocity=void 0,this.update_fn=void 0,this.is_stop=!1}}]),t}();function Pl(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ol(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ol(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ol(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Dl(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var zl="cast_fish",Ul=function(t){ae()(n,t);var e=Dl(n);function n(t,i){var r;it()(this,n),r=e.call(this);var o=t.show_cast,a=t.pos;return r.bullet_cost=i.bullet_cost,r.skin=i.skin,r.skin_level=i.skin_level,r.show_cast=o,r.pos=a,r.init(),r}return ot()(n,[{key:"body",get:function(){return this.getCom(Uc)}},{key:"init",value:function(){var t=this,e=this.show_cast,n=Ne("net"),i=new Uc(n);i.update(this.pos);var r=new $c,o=new un;this.addCom(o,r,i),this.event=o,e&&r.createTimeout((function(){var e,n=Je(i),r=Pl(n);try{for(r.s();!(e=r.n()).done;){e.value.beCast()}}catch(t){r.e(t)}finally{r.f()}t.event.emit(zl,n)}),0),r.createTimeout((function(){t.destroy()}),100)}},{key:"destroy",value:function(){this.event.emit(Nc),this.pos=void 0,this.bullet_cost=void 0,this.skin=void 0,this.skin_level=void 0,this.show_cast=!1,tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn);function Nl(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var jl="move",Fl="add_net",Rl=function(t){ae()(n,t);var e=Nl(n);function n(t){var i;return it()(this,n),(i=e.call(this)).need_detect_collision=!0,i.onMoveChange=function(t){var e=ic()(i).need_detect_collision,n=t.pos,r=t.velocity,o=i.body;if(o.update(n,r),i.pos=n,i.velocity=r,i.event.emit(jl,{pos:n,velocity:r}),i.need_detect_collision=!e,e){var a=function(t){var e,n=Re(Ge.app.game.getAllFish());try{for(n.s();!(e=n.n()).done;){var i=xt()(e.value,2)[1];if(Fe(t,i.body))return i}}catch(t){n.e(t)}finally{n.f()}}(o);a&&i.onHit(a)}},i.onLockMoveChange=function(t){var e=t.pos,n=t.velocity;i.pos=pe()({},t.pos),i.velocity=n,i.event.emit(jl,{pos:e,velocity:n})},i.onHit=function(t){var e=ic()(i),n=e.cast_fn,r=e.move_com;r.destroy(),i.delCom(r),i.move_com=void 0,i.getCom($c).createTimeout((function(){i.destroyed||n(t)}))},i.addNet=function(t){var e=ic()(i).pos,n=new Ul({pos:e,show_cast:t},ic()(i));i.event.emit(Fl,n)},Vo(ic()(i),pe()(pe()({},t),{velocity:t.velocity.scale(u.BulletSpeed)})),i.initCom(),i}return ot()(n,[{key:"initCom",value:function(){var t,e=this.pos,n=this.velocity,i=this.lock,r=new un,o=[r];if(i)t=new Ll(e,n,i,this.onHit),o.push(t),t.onUpdate(this.onLockMoveChange);else{var a=Ne("bullet"),u=new Uc(a);t=new El(e,n),o.push(t,u),t.onUpdate(this.onMoveChange),this.body=u}o.push(new $c),this.move_com=t,this.event=r,this.addCom.apply(this,o)}},{key:"init",value:function(){this.move_com.start()}},{key:"destroy",value:function(){this.event.emit(Nc),this.cast_fn=void 0,this.event=void 0,this.body=void 0,tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn);function Vl(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Gl(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Gl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Hl(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var $l={Destroy:Nc},Yl=function(t){ae()(n,t);var e=Hl(n);function n(t,i){var r;it()(this,n),(r=e.call(this)).bullet_map=new Bt.a,r.casted=!1,r.id=Math.random().toString().replace("0.",""),r.castFn=function(t){var e=ic()(r),n=e.gun,i=e.casted,o=e.bullet_map,a=e.bullet_cost;if(!i){var u=n.player,s=u.is_cur_player,c=u.need_emit;r.casted=!0,c&&n.castFish(t,a),n.removeBullet(ic()(r)),r.gun=void 0;var l,h=Vl(o);try{for(h.s();!(l=h.n()).done;){xt()(l.value,2)[1].addNet(s)}}catch(t){h.e(t)}finally{h.f()}r.destroy()}},r.bullet_cost=i.bullet_cost,r.gun=i;var o=new un;return r.event=o,r.addCom(o),r.initBullet(t),r}return ot()(n,[{key:"init",value:function(){var t,e=Vl(this.bullet_map);try{for(e.s();!(t=e.n()).done;){xt()(t.value,2)[1].init()}}catch(t){e.e(t)}finally{e.f()}}},{key:"initBullet",value:function(t){var e,n=t.bullets_pos,i=t.lock,r=t.velocity,o=this.gun,a=o.skin,u=o.bullet_cost,s=o.skin_level,c=Vl(Di()(n).call(n));try{for(c.s();!(e=c.n()).done;){var l=xt()(e.value,2),h=l[0],f={skin:a,pos:l[1],bullet_cost:u,lock:i,skin_level:s,velocity:r.clone(),cast_fn:this.castFn},v=new Rl(f);this.bullet_map.set(h,v)}}catch(t){c.e(t)}finally{c.f()}}},{key:"destroy",value:function(){if(!this.destroyed){var t,e=this.bullet_map,i=Vl(e);try{for(i.s();!(t=i.n()).done;){xt()(t.value,2)[1].destroy()}}catch(t){i.e(t)}finally{i.f()}e.clear(),this.event.emit($l.Destroy),this.event=void 0,this.gun=void 0,this.bullet_cost=0,tr()(le()(n.prototype),"destroy",this).call(this)}}}]),n}(rn);function Xl(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Kl(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Wl(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Ql,ql={WillAddBullet:"will_add_bullet",AddBullet:"add_bullet",DirectionChange:"direction_change",SwitchOn:"switch_on",SpeedUpStatus:"speed_up_status",CastFish:"cast_fish",LevelChange:"level_change",AutoShoot:"auto_shoot",NotEnoughBulletNum:"not_enough_bullet_num"};!function(t){t[t.Normal=0]="Normal",t[t.AutoShoot=1]="AutoShoot",t[t.LockFish=2]="LockFish"}(Ql||(Ql={}));var Jl,Zl=function(t){ae()(n,t);var e=Wl(n);function n(t,i,r){var o;return it()(this,n),(o=e.call(this)).direction=new Tt.Vector(0,-1),o.bullet_map=new Bt.a,o.status=Ql.Normal,o.is_speedup=!1,o.shoot_space=u.ShootTimeSpace,o.is_on=!0,o.rage=!1,o.pos=t,o.skin=i,o.player=r,o.initCom(),o}return ot()(n,[{key:"initCom",value:function(){var t=new un,e=new $c;this.addCom(t,e),this.event=t,this.timeout=e}},{key:"init",value:function(){this.initDirection(),this.setBulletCost(this.player.bullet_cost)}},{key:"initDirection",value:function(){this.player.server_index<2?this.setDirection(new Tt.Vector(0,-1)):this.setDirection(new Tt.Vector(0,1))}},{key:"setDirection",value:function(t){var e=this;t!==this.direction&&(this.direction=t,this.getCom($c).createTimeout((function(){e.event.emit(ql.DirectionChange,t)}),this.shoot_space))}},{key:"changeSkin",value:function(t){this.skin=t,this.setBulletCost(this.bullet_cost,!0)}},{key:"setBulletCost",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t!==this.bullet_cost||e){var n=this.skin,i=this.timeout,r=this.event,o=this.shoot_space,a=Qt(t),u=a.level_skin,s=a.hole_num;this.bullet_cost=t,this.skin_level=u,this.hole_num=s,i.createTimeout((function(){r.emit(ql.LevelChange,{bullet_cost:t,skin:n,level_skin:u,hole_num:s})}),o)}}},{key:"setStatus",value:function(t){t!==this.status&&(this.status=t)}},{key:"toggleSpeedUp",value:function(t){if(t!==this.is_speedup){var e=this.event;this.is_speedup=t,e.emit(ql.SpeedUpStatus,t),this.shoot_space=!0===t?u.ShootTimeSpace/2:u.ShootTimeSpace}}},{key:"autoShoot",get:function(){var t=this.getCom(Ml);return t||(t=new Ml(this),this.addCom(t)),t}},{key:"preAddBullet",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.status,r=this.is_on,o=this.event,a=this.shoot_space,u=this.player,s=this.bullet_cost;if(u.is_cur_player&&u.bullet_num-s<0)o.emit(ql.NotEnoughBulletNum);else if((n||i!==Ql.LockFish)&&(t=t.clone().normalize(),this.setDirection(t),(n||i!==Ql.AutoShoot)&&r)){o.emit(ql.WillAddBullet,t),this.is_on=!1;var c=this.getCom($c);c.createTimeout((function(){e.is_on=!0,o.emit(ql.SwitchOn)}),a)}}},{key:"addBullet",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.bullet_cost,r=this.skin,o=this.skin_level,a=this.lock_fish,u=this.player,s=this.event,c=this.bullet_map,l=t.x,h=t.y,f=new Tt.Vector(l,h).normalize();if(!(u.bullet_num<i&&u.is_cur_player)){n&&this.setDirection(f);var v=Jt(u.server_index,f.clone(),ht()(e="".concat(r)).call(e,o)),p={bullets_pos:v,velocity:f,lock:a},d=new Yl(p,this);c.set(d.id,d),s.emit(ql.AddBullet,{bullet_group:d,velocity:f,lock:a}),d.init(),u.updateInfo({bullet_num:u.bullet_num-i})}}},{key:"castFish",value:function(t,e){this.event.emit(ql.CastFish,{fish:t,level:e})}},{key:"getAllBulletCost",value:function(){var t,e=0,n=Xl(this.bullet_map);try{for(n.s();!(t=n.n()).done;){e+=xt()(t.value,2)[1].bullet_cost}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"removeBullet",value:function(t){this.bullet_map.delete(t.id)}},{key:"destroy",value:function(){var t,e=Xl(this.bullet_map);try{for(e.s();!(t=e.n()).done;){xt()(t.value,2)[1].destroy()}}catch(t){e.e(t)}finally{e.f()}this.player=void 0,this.lock_fish=void 0,this.setStatus(Ql.Normal),this.toggleSpeedUp(!1),this.bullet_map.clear(),tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn);function th(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}!function(t){t.Normal="normal",t.PreActive="pre_active",t.Disable="disable",t.Active="active"}(Jl||(Jl={}));var eh="update_info",nh="status_change",ih="update_radio",rh="active_skill",oh="destroy",ah=function(t){ae()(n,t);var e=th(n);function n(t){var i;return it()(this,n),(i=e.call(this)).cool_time=10,i.used_time=0,i.status=Jl.Normal,Vo(ic()(i),pe()({},t)),i.initCom(),i}return ot()(n,[{key:"initCom",value:function(){var t=new un;this.addCom(t),this.event=t}},{key:"init",value:function(){var t=this.used_time,e=this.num;t&&(this.active({used_time:t,num:e}),Vo(this,{used_time:0})),this.event.emit(eh)}},{key:"setNum",value:function(t){this.num=t,this.event.emit(eh)}},{key:"setStatus",value:function(t){this.status!==t&&(this.status=t,this.event.emit(nh,t))}},{key:"activeEvent",value:function(t){this.event.emit(rh,t)}},{key:"active",value:function(t,e){var n=this;if(this.status===Jl.Active)return!1;var i=this.cool_time,r=this.event,o=t.used_time,a=t.num,u=t.duration||o,s=i-o,c=u-o;c>s&&(c=s),this.setNum(a),this.setStatus(Jl.Active),this.count_index=mr(s,.05,(function(t){var o=(1-t)*s,a=t*(s/i);r.emit(ih,a),o>=c&&n.status!==Jl.Disable&&(n.disable(),Ro(e,n.status)),0===a&&(n.reset(),Ro(e,n.status))}))}},{key:"reset",value:function(){this.status!==Jl.Active&&(ja("SkillCoreCom:>reset:>"),this.setStatus(Jl.Normal),_r(this.count_index))}},{key:"disable",value:function(){this.setStatus(Jl.Disable)}},{key:"destroy",value:function(){this.event.emit(oh),this.setStatus(Jl.Normal),_r(this.count_index),tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn);function uh(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var sh=function(t){ae()(n,t);var e=uh(n);function n(t){var i;return it()(this,n),(i=e.call(this)).initCom(t),i}return ot()(n,[{key:"initCom",value:function(t){var e=new ah(t);this.addCom(e),this.skill_core=e}},{key:"toggle",value:function(){this.skill_core.status===Jl.Normal?this.active():this.disable()}},{key:"init",value:function(){this.skill_core.init()}},{key:"reset",value:function(){var t=this.skill_core;t.player.gun.autoShoot.clear(),t.reset()}},{key:"active",value:function(){var t=this.skill_core;this.skill_core.player.gun.autoShoot.active(),t.active({used_time:0})}},{key:"disable",value:function(){this.skill_core.reset(),this.reset()}}]),n}(rn),ch="fish_bomb",lh=function(){function t(e){it()(this,t),this.fish=e}return ot()(t,[{key:"active",value:function(t){var e,n=this.fish,i=n.pos,r=n.id,o={pos:i,player:t};t.need_emit&&(o.fish_list=Le()(e=yh(i)).call(e,(function(t){return t.id!==r})));n.event.emit(ch,o)}},{key:"destroy",value:function(){var t;null===(t=this.fish.event)||void 0===t||t.offAllCaller(this),this.fish=void 0}}]),t}();function hh(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return fh(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return fh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function fh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var vh=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},ph=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&St()(e).call(e,i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof fe.a){var r=0;for(i=fe()(t);r<i.length;r++)St()(e).call(e,i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function dh(t,e){var n=t.fishId,i=t.group,r=t.score,o=t.currencyFish,a=[],u=qt("fish",n).group;if(!u)return a;var s=fl(t),c=new wl(s),l=new Bt.a;c.onUpdate((function(t){var e,n=hh(l);try{for(n.s();!(e=n.n()).done;){(0,xt()(e.value,2)[1].update_fn)(t)}}catch(t){n.e(t)}finally{n.f()}}));for(var h=function(t){var n,s,h=u[t],f=h.type,v=h.pos,p=i[t].eid,d=(n=function(t){var e=t.pos,n=ph(t,["pos"]),i=pe()({},n);return e&&(i.pos={x:e.x+v.x,y:e.y+v.y}),i},s=t,[function(t){l.set(s,{update_fn:function(e){var i=n(e);t(i)},id:s,isStop:!1})},function(){l.delete(s),0===l.size&&c.destroy()},function(){var t;l.get(s).isStop=!1,gn()(t=et()(ke()(l).call(l))).call(t,(function(t){return!0===t.isStop}))||c.start()},function(){var t;l.get(s).isStop=!0,gn()(t=et()(ke()(l).call(l))).call(t,(function(t){return!1===t.isStop}))||c.stop()}]),y=xt()(d,4),g=y[0],m=y[1],_={start:y[2],stop:y[3],onUpdate:g,destroy:m},b=new Vc({id:p,type:f,score:r,currency:o},e);b.setMoveCom(_),te(b)&&b.addCom(new lh(b)),a.push(b)},f=0;f<i.length;f++)h(f);return a}function yh(t){var e,n=(e={shape:new Mt.a.Circle(new Mt.a.Vector(0,0),u.BombRadius),pos:new Mt.a.Vector(0,0)},new Uc([e],!1));n.update(t);var i=Je(n);return n.destroy(),i}function gh(t,e,n){return vh(this,void 0,void 0,ut.a.mark((function i(){var r,o,a;return ut.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return te(e)&&e.getCom(lh).active(t),i.next=3,e.beCapture();case 3:r=i.sent,o=n.drop,a=n.win,r||Fa("cant find fish pos"),t.captureFish(r,{win:a,drop:o});case 7:case"end":return i.stop()}}),i)})))}function mh(t){var e=this,n=t.event;return new ct.a((function(i,r){if(t.destroyed)return Te()(i);n.once(Rc.Destroy,(function(){Te()(i)}),e)}))}function _h(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return bh(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function bh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function kh(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var wh=function(t){ae()(n,t);var e=kh(n);function n(t){var i;return it()(this,n),(i=e.call(this)).initCom(t),i}return ot()(n,[{key:"initCom",value:function(t){var e=new ah(t);this.addCom(e),this.skill_core=e}},{key:"init",value:function(){this.skill_core.init()}},{key:"active",value:function(t){var e,n=t.num,i=t.fish_list,r=t.pos,o=t.used_time,a=t.is_bomb_fish,u=this.skill_core,s=u.player,c=_h(i);try{for(c.s();!(e=c.n()).done;){var l=e.value,h=l.eid,f=l.win,v=l.drop,p=We(h);p?gh(s,p,{win:f,drop:v}):s.updateInfo({bullet_num:s.bullet_num+f})}}catch(t){c.e(t)}finally{c.f()}u.activeEvent(r),a&&u.active({num:n,used_time:o})}},{key:"reset",value:function(){this.skill_core.reset()}},{key:"disable",value:function(){this.skill_core.disable()}}]),n}(rn);function xh(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Ch=function(t){ae()(n,t);var e=xh(n);function n(t){var i;return it()(this,n),(i=e.call(this)).initCom(t),i}return ot()(n,[{key:"initCom",value:function(t){var e=new ah(t);this.addCom(e),this.skill_core=e}},{key:"init",value:function(){this.skill_core.init()}},{key:"reset",value:function(){this.skill_core.reset()}},{key:"active",value:function(t){var e=this.skill_core,n=t.used_time,i=t.fish_list,r=t.duration;Ge.app.game.freezing_com.freezing(r-n,i),e.active(t)}},{key:"disable",value:function(){this.skill_core.disable()}}]),n}(rn);function Sh(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Ih(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ih(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ih(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ah(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Bh,Th=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&St()(e).call(e,i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof fe.a){var r=0;for(i=fe()(t);r<i.length;r++)St()(e).call(e,i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},Mh="stop_lock",Lh=function(t){ae()(n,t);var e=Ah(n);function n(t){var i;return it()(this,n),(i=e.call(this)).bullet_list=new Bt.a,i.onLockMove=function(){var t=ic()(i),e=t.gun,n=t.fish,r=t.skill_core;if(null==n?void 0:n.visible){var o=n.pos,a=o.x,u=o.y,s=e.pos,c=s.x,l=s.y;e.setDirection(new Mt.a.Vector(a-c,u-l)),r.player.need_emit&&(qe(n.pos)||(i.unLock(),i.tipLock()))}},i.unLock=function(){var t=ic()(i),e=t.fish,n=t.gun,r=t.bullet_list;if(e&&n){var o,a=n.player,u=0,s=Sh(r);try{for(s.s();!(o=s.n()).done;){var c=xt()(o.value,2)[1];u+=c.bullet_cost,n.removeBullet(c),c.destroy()}}catch(t){s.e(t)}finally{s.f()}a.updateInfo({bullet_num:a.bullet_num+u}),r.clear(),n.event.emit(Mh),n.setStatus(Ql.Normal),n.lock_fish=void 0,n.event.offAllCaller(ic()(i)),e.event.offAllCaller(ic()(i)),i.fish=null}},i.initCom(t),i}return ot()(n,[{key:"init",value:function(){var t=this,e=this.timeout,n=this.skill_core,i=this.init_info,r=i.lock_fish,o=i.lock_left,a=Th(i,["lock_fish","lock_left"]);o?e.createTimeout((function(){t.active(pe()(pe()({},a),{fish:r,duration:o+a.used_time,needActive:!0}))})):n.init(),this.gun=this.skill_core.player.gun}},{key:"reset",value:function(){this.skill_core.reset()}},{key:"initCom",value:function(t){var e=new ah(t),n=new $c;this.addCom(e,n),this.skill_core=e,this.timeout=n,this.init_info=t}},{key:"active",value:function(t){var e=this,n=this.skill_core,i=t.fish,r=t.needActive;if(n.status===Jl.Active||r){r&&n.active(t,(function(t){t===Jl.Disable&&(Na("test:>lockFish:>disable"),e.unLock())}));var o=We(i);if(!o)return Fa("cant find fish for eid=".concat(i));this.lock(o)}}},{key:"tipLock",value:function(){var t=this.gun,e=this.skill_core,n=Qe();n&&Na("test:>tipLock",n,n.destroyed),e.activeEvent({fish:n,is_tip:!0,gun_pos:t.pos})}},{key:"lock",value:function(t){var e=this.gun,n=this.skill_core;this.unLock(),this.bindLockFish(t),n.activeEvent({fish:t,is_tip:!1,gun_pos:e.pos})}},{key:"bindLockFish",value:function(t){var e=this,n=this.gun,i=(this.skill_core,n.event),r=t.event;this.fish=t,n.lock_fish=t,this.onLockMove(),r.on(Rc.Move,this.onLockMove,this),r.on(Rc.Destroy,(function(){e.unLock(),Te()((function(){e.tipLock()}))}),this),n.setStatus(Ql.LockFish),n.preAddBullet(n.direction,!0),i.on(ql.SwitchOn,(function(){n.preAddBullet(n.direction,!0)}),this);var o=0;i.on(ql.AddBullet,(function(t){if(t.lock){var n=t.bullet_group,i=o+"";o++,e.bullet_list.set(i,n),n.event.on($l.Destroy,(function(){e.bullet_list.delete(i)}),e)}}),this)}},{key:"disable",value:function(){this.skill_core.disable()}},{key:"destroy",value:function(){var t,e=this.fish;null===(t=null==e?void 0:e.event)||void 0===t||t.offAllCaller(this),this.unLock(),this.fish=void 0,this.skill_core=void 0,this.gun=void 0,tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn),Eh=(Bh={},a()(Bh,r.Freezing,Ch),a()(Bh,r.Bomb,wh),a()(Bh,r.LockFish,Lh),a()(Bh,r.Auto,sh),Bh);function Ph(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Oh(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Oh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Oh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Dh(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var zh=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Uh=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&St()(e).call(e,i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof fe.a){var r=0;for(i=fe()(t);r<i.length;r++)St()(e).call(e,i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},Nh={CaptureFish:Rc.BeCapture,UpdateInfo:"update_info",Destroy:Nc},jh=function(t){ae()(n,t);var e=Dh(n);function n(t,i){var r;return it()(this,n),(r=e.call(this)).skill_map=new Bt.a,r.game=i,r.addCom(new un),r.createGun(t),r}return ot()(n,[{key:"event",get:function(){return this.getCom(un)}},{key:"createGun",value:function(t){var e=t.gun_skin,n=t.skills,i=t.server_index,r=Uh(t,["gun_skin","skills","server_index"]),o=function(t){return{pos:Lt.gun_global_pos[t]}}(i).pos,a=new Zl(o,e,this);this.gun=a,this.updateInfo(pe()({server_index:i},r)),this.initSkill(n)}},{key:"init",value:function(){var t=this.skill_map;this.gun.init();var e,n=Ph(t);try{for(n.s();!(e=n.n()).done;){xt()(e.value,2)[1].init()}}catch(t){n.e(t)}finally{n.f()}}},{key:"updateInfo",value:function(t){var e,n=t.bullet_cost;t.bullet_num<0&&this.is_cur_player&&(Fa("test:> some thing case bullet num < 0"),t.bullet_num=0),Vo(this,t),t.bullet_cost&&this.gun.setBulletCost(n),null===(e=this.event)||void 0===e||e.emit(Nh.UpdateInfo)}},{key:"initSkill",value:function(t){var e=this.skill_map;for(var n in Eh)if(Eh.hasOwnProperty(n)){var i=Eh[n],r=t[n]||{},o=pe()({player:this},r);e.set(n,new i(o))}}},{key:"activeSkill",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.skill_map.get(t);n.active(e)}},{key:"disableSkill",value:function(t){this.skill_map.get(t).disable()}},{key:"resetSkill",value:function(t){this.skill_map.get(t).reset()}},{key:"getSkill",value:function(t){return this.skill_map.get(t)}},{key:"addSkillNum",value:function(t,e){var n=this.skill_map.get(t);n?(e=n.skill_core.num+e,n.skill_core.setNum(e)):Fa("cant find skill for ".concat(t))}},{key:"captureFish",value:function(t,e){return zh(this,void 0,void 0,ut.a.mark((function n(){var i,r,o,a,u,s,c=this;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new ct.a((function(n,i){var r;null===(r=c.event)||void 0===r||r.emit(Nh.CaptureFish,{pos:t,data:e,resolve:n})}));case 2:if(!this.destroyed){n.next=4;break}return n.abrupt("return");case 4:if(i=e.win,r=e.drop,o=this.bullet_num,this.updateInfo({bullet_num:o+i}),r){a=Ph(r);try{for(a.s();!(u=a.n()).done;)s=u.value,this.addSkillNum(s.itemId,s.itemNum)}catch(t){a.e(t)}finally{a.f()}}case 8:case"end":return n.stop()}}),n,this)})))}},{key:"changeSkin",value:function(t){this.gun.changeSkin(t)}},{key:"destroy",value:function(){var t,e=this.gun,i=this.skill_map,r=this.game,o=Ph(i);try{for(o.s();!(t=o.n()).done;){xt()(t.value,2)[1].destroy()}}catch(t){o.e(t)}finally{o.f()}e.destroy(),r.removePlayer(this),this.event.emit(Nh.Destroy),this.skill_map.clear(),this.gun=void 0,tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn);function Fh(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Rh(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Rh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Rh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Vh(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Gh={AddFish:"add_fish",AddPlayer:"add_player",Freezing:"freezing",Destroy:Nc},Hh=function(t){ae()(n,t);var e=Vh(n);function n(){var t;return it()(this,n),(t=e.call(this)).currency="",t.fish_map=new Bt.a,t.player_map=new Bt.a,t.initCom(),t}return ot()(n,[{key:"setCurrency",value:function(t){this.currency=t}},{key:"initCom",value:function(){this.addCom(new un,new $c)}},{key:"event",get:function(){return this.getCom(un)}},{key:"freezing_com",get:function(){var t=this.getCom(qc);return t||(t=new qc(this),this.addCom(t)),t}},{key:"addFish",value:function(t){var e=t.group,n=this.fish_map;if(e){var i,r=dh(t,this),o=Fh(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.set(a.id,a),this.event.emit(Gh.AddFish,a),a.init()}}catch(t){o.e(t)}finally{o.f()}return r}var u=function(t,e){var n=t.eid,i=t.fishId,r=t.score,o=t.currencyFish,a=fl(t);if(a){var u=new wl(a),s=new Vc({id:n,type:i,score:r,currency:o},e);return s.setMoveCom(u),te(s)&&s.addCom(new lh(s)),s}}(t,this);if(u)return n.set(u.id,u),this.event.emit(Gh.AddFish,u),u.init(),u}},{key:"removeFish",value:function(t){this.fish_map.delete(t.id)}},{key:"getFishById",value:function(t){return this.fish_map.get(t)}},{key:"getAllFish",value:function(){return this.fish_map}},{key:"captureFish",value:function(t){var e=t.userId,n=t.eid,i=t.backAmount,r=this.getPlayerById(e),o=this.getFishById(n);r?(i&&r.updateInfo({bullet_num:r.bullet_num+i}),o?gh(r,o,t):Fa("Game:>captureFish:> cant find fish for ".concat(n))):Fa("Game:>captureFish:> cant find player for ".concat(e))}},{key:"shoal_com",get:function(){var t=this.getCom(Al);return t||(t=new Al(this),this.addCom(t)),t}},{key:"addPlayer",value:function(t){var e=new jh(t,this);return this.player_map.set(t.user_id,e),this.event.emit(Gh.AddPlayer,e),e.init(),e}},{key:"getCurPlayer",value:function(){var t,e=Fh(this.player_map);try{for(e.s();!(t=e.n()).done;){var n=xt()(t.value,2)[1];if(n.is_cur_player)return n}}catch(t){e.e(t)}finally{e.f()}}},{key:"getPlayers",value:function(){return this.player_map}},{key:"getPlayerById",value:function(t){return this.player_map.get(t)}},{key:"removePlayer",value:function(t){this.player_map.delete(t.user_id)}},{key:"activeSkill",value:function(t,e){var n=this.getPlayerById(e.user_id);n?n.activeSkill(t,e):Fa("Game:>activeSkill:> cant find player:>".concat(e.user_id))}},{key:"disableSkill",value:function(t,e){var n=this.getPlayerById(e);n?n.disableSkill(t):Fa("Game:>resetSkill:> cant find player:>".concat(e))}},{key:"resetSkill",value:function(t,e){var n=this.getPlayerById(e);n?n.resetSkill(t):Fa("Game:>resetSkill:> cant find player:>".concat(e))}},{key:"shoot",value:function(t){var e=this.getPlayerById(t.userId);e?e.gun.addBullet(t.direction,!e.is_cur_player):Fa("Game:>resetSkill:> cant find player:>".concat(t.userId))}},{key:"shoalComingTip",value:function(t){this.shoal_com.preAddShoal(t)}},{key:"clear",value:function(){var t,e=this.fish_map,n=Fh(this.player_map);try{for(n.s();!(t=n.n()).done;){xt()(t.value,2)[1].destroy()}}catch(t){n.e(t)}finally{n.f()}var i,r=Fh(e);try{for(r.s();!(i=r.n()).done;){xt()(i.value,2)[1].destroy()}}catch(t){r.e(t)}finally{r.f()}this.currency="",this.fish_map.clear(),this.player_map.clear()}},{key:"destroy",value:function(){this.event.emit(Gh.Destroy),this.clear(),tr()(le()(n.prototype),"destroy",this).call(this)}}]),n}(rn);function $h(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Yh="voice_change",Xh="music_change",Kh=function(t){ae()(n,t);var e=$h(n);function n(){var t;return it()(this,n),(t=e.call(this)).addCom(new un),t}return ot()(n,[{key:"initUserInfo",value:function(t){var e=function(t){var e=vn("".concat(t,":voice")),n=vn("".concat(t,":music")),i=n?Number(n):.5,r=e?Number(e):.5;return Ae.setVoice(r),Ae.setMusic(i),[r,i]}(t.userId),n=xt()(e,2),i=n[0],r=n[1];this.voice=i,this.music=r}},{key:"event",get:function(){return this.getCom(un)}},{key:"setVoice",value:function(t){t!==this.voice&&(this.voice=t,function(t){var e=Ye();Ae.setVoice(t),fn("".concat(e,":voice"),t+"")}(t),this.event.emit(Yh,t))}},{key:"setMusic",value:function(t){t!==this.music&&(this.music=t,function(t){var e=Ye();Ae.setMusic(t),fn("".concat(e,":music"),t+"")}(t),this.event.emit(Xh,t))}}]),n}(rn);function Wh(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Qh,qh=function(t){ae()(n,t);var e=Wh(n);function n(){var t;return it()(this,n),t=e.call(this),Ge.app=ic()(t),t.setting=new Kh,t.user_info=new Pr,t.addCom(new un),t}return ot()(n,[{key:"init",value:function(){this.user_info.init()}},{key:"initUserInfo",value:function(t){this.user_info.initUserInfo(t),this.setting.initUserInfo(t)}},{key:"enterGame",value:function(){var t=this.game;return t&&!t.destroyed||(t=new Hh),this.game=t,t}}]),n}(rn),Jh=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function Zh(t){return Jh(this,void 0,void 0,ut.a.mark((function e(){var n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du();case 2:return e.next=4,new ct.a((function(e,n){ef(Qh=au(f),t),Qh.event.once(G,(function(){t.onUserAccount(),e(void 0)}),t),tf(G,{domain:u.Host})}));case 4:return e.next=6,nf(t);case 6:if(!(n=e.sent).isReplay){e.next=10;break}return t.enterGame(n),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))}function tf(){var t;(t=Qh).send.apply(t,arguments)}function ef(t,e){Ru(t,e),cu(t,e,a()({},Ka,(function(){tf(G)})))}function nf(t){return Jh(this,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ct.a((function(e,n){var i=au(f);i.event.once(x,(function(t){e(t)}),t),i.send(x)})));case 1:case"end":return e.stop()}}),e)})))}function rf(t,e){var n=this;return new ct.a((function(i,r){var o=au(f);o.event.once(k,(function(t,r,o){return Jh(n,void 0,void 0,ut.a.mark((function n(){var o;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r!==s.AlreadyInRoom){n.next=8;break}return n.next=3,nf(e);case 3:return(o=n.sent).isReplay&&i(pe()(pe()({},t),o)),n.abrupt("return");case 8:if(200===r){n.next=10;break}return n.abrupt("return",Gu(r,t));case 10:i(t);case 11:case"end":return n.stop()}}),n)})))}),e);var a=Ge.app.user_info.cur_balance;o.send(k,pe()(pe()({},t),{currency:a,domain:""}))}))}var of=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function af(t){var e=this,n=t.view,i=n.normal_box,r=n.match_box,o=n.header,a=n.btn_play_now,u=o.coin_menu.list,s=o.flag_menu.list,c=o.btn_coin_select,l=o.btn_get,h=o.btn_charge,f=o.btn_home,v=o.btn_app,p=o.btn_leave,d=o.btn_voice,y=o.flag_box,g=o.btn_login,m=o.coin_menu,_=o.flag_menu,b=o.btn_game_record,k=o.btn_item_record,w=o.btn_recharge,x=o.btn_withdraw;u.selectHandler=new Ft.a(u,t.selectCoin,void 0,!1),s.selectHandler=new Ft.a(u,t.selectFlag,void 0,!1);var C=Bn.a.CLICK,S=i.getChildByName("ani"),I=i.getChildByName("btn_try"),A=i.getChildByName("btn_play"),B=(r.getChildByName("ani"),r.getChildByName("btn_try")),T=r.getChildByName("btn_play");ua(A,C,(function(n){return of(e,void 0,void 0,ut.a.mark((function e(){var n,i,r,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae.play(ee.Click),n=Dr(),i=A.getChildByName("ani"),r=Yo(S,"active_".concat(n)),o=Yo(i,"active_".concat(n)),ct.a.all([o,r]).then((function(){t.roomIn({roomId:1,isTrial:0},t),$o(i,"standby_".concat(n),!0)}));case 6:case"end":return e.stop()}}),e)})))})),ua(I,C,(function(){return of(e,void 0,void 0,ut.a.mark((function e(){var n,i,r,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae.play(ee.Click),n=Dr(),i=I.getChildByName("ani"),r=Yo(i,"active_".concat(n)),o=Yo(S,"active_".concat(n)),ct.a.all([r,o]).then((function(){t.roomIn({roomId:1,isTrial:1},t),$o(i,"standby_".concat(n),!0)}));case 6:case"end":return e.stop()}}),e)})))})),ua(T,C,(function(){return of(e,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae.play(ee.Click),t.roomIn({roomId:2,isTrial:0},t);case 2:case"end":return e.stop()}}),e)})))})),ua(w,C,(function(){return of(e,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ae.play(ee.Click),Fr();case 2:case"end":return t.stop()}}),t)})))})),"CCTIP"===jr()&&(x.visible=!0,n.onResize(),ua(x,C,(function(){return of(e,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ae.play(ee.Click),e=void 0,n=void 0,i=void 0,r=void 0,o=void 0,i=Ge.app.user_info,r=i.account_map,o=i.cur_balance,r.get(o).hide||null===(e=window)||void 0===e||e.paladin.pay.withdraw({data:{currency:o,gameNo:null===(n=window)||void 0===n?void 0:n.paladin.sys.config.gameId,isHorizontal:!0}});case 2:case"end":return t.stop()}var e,n,i,r,o}),t)})))}))),ua(B,C,(function(){return of(e,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae.play(ee.Click),t.roomIn({roomId:2,isTrial:1},t);case 2:case"end":return e.stop()}}),e)})))})),ua(a,C,(function(){return of(e,void 0,void 0,ut.a.mark((function e(){var n,i,r,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dr(),i=a.getChildByName("ani"),Ae.play(ee.Click),r=Yo(S,"active_".concat(n)),o=Yo(i,"active_".concat(n)),ct.a.all([o,r]).then((function(){t.roomIn(uf(),t),$o(i,"standby_".concat(n),!0)}));case 6:case"end":return e.stop()}}),e)})))})),c.on(C,t,(function(t){Ae.play(ee.Click),ha(t.target,m)||n.toggleCoinMenu(!m.visible)})),y.on(C,t,(function(t){Ae.play(ee.Click),n.toggleFlagMenu(!_.visible)})),ua(l,C,(function(){Ae.play(ee.Click)})),ua(h,C,(function(){Ae.play(ee.Click)})),ua(f,C,(function(){Ae.play(ee.Click)})),ua(v,C,(function(){Ae.play(ee.Click)})),ua(g,C,(function(){zu(),Ae.play(ee.Click)})),ua(p,C,(function(){Ae.play(ee.Click),platform.logout()})),ua(d,C,(function(){Ae.play(ee.Click),Po.preEnter()})),ua(b,C,(function(){Ae.play(ee.Click),Ts.preEnter()})),ua(k,C,(function(){Ae.play(ee.Click),Fs.preEnter()}))}function uf(){try{var t=vn("roomIn");if(t)return JSON.parse(t)}catch(t){}return{roomId:1,isTrial:1}}function sf(t){fn("roomIn",Oa()(t))}function cf(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return lf(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function lf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var hf=[];function ff(t,e){var n,i=cf(hf);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.dep===e)return r.task}}catch(t){i.e(t)}finally{i.f()}var o=t();return o.then((function(){for(var t=hf.length-1;t>=0;t--){var e=hf[t].task;if(o===e)return void _e()(hf).call(hf,t)}})),hf.push({dep:e,task:o}),o}var vf=function(){function t(e){it()(this,t),this.name="pointer",this.view=e}return ot()(t,[{key:"moveToTarget",value:function(t,e){var n=this;e&&(this.target=e);var i=this.target;if(i){var r=this.view;this.showPointer("static"),fi(r,t,i,500).then((function(){n.showPointer("target")}))}}},{key:"show",value:function(t,e,n){var i=this.view;i.visible=!1,this.showPointer(e),i.pos(t.x,t.y),"target"===e&&(this.target={x:t.x,y:t.y}),ai(i,500).then(n)}},{key:"isShow",value:function(){return this.view.visible=!1}},{key:"showPointer",value:function(t){t=t||"static";var e=this.view,n=e.pointer_img,i=e.pointer_ani;this.resetView(),"static"===t?n.visible=!0:(i.visible=!0,i.play(0,!0))}},{key:"hidePointer",value:function(){this.resetView(),this.target=null,this.hide()}},{key:"resetView",value:function(){var t=this.view,e=this.view,n=e.pointer_img,i=e.pointer_ani;t.alpha=1,n.visible=!1,i.visible=!1,i.stop()}},{key:"hide",value:function(){var t=this.view;yi(t),t.visible=!1}}]),t}();function pf(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return df(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return df(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function df(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var yf=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&St()(e).call(e,i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof fe.a){var r=0;for(i=fe()(t);r<i.length;r++)St()(e).call(e,i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},gf={fontSize:25,color:"#ffe7a7"},mf=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};it()(this,t),this.auto_hide=!0,this.step=-1,this.is_going=!1,this.name="prompt",this.view=e,this.style=pe()(pe()({},gf),n);var i=e.html_div;i.style.width=579,i.style.whiteSpace="nowrap"}return ot()(t,[{key:"prompt",value:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new ct.a((function(r,o){n.reset(),n.view.pos(t.pos.x,t.pos.y),"string"==typeof e||e[0].color?n.tip_msg=[e]:n.tip_msg=e,n.complete_resolve=r,n.auto_hide=i,n.is_going=!0,n.step_map=n.analysisTip(n.tip_msg),n.showTip(),zt.a.stage.on(Bn.a.CLICK,n,(function(){n.jumpLevelLastStep()})),n.show(t.dir)}))}},{key:"jumpLevelLastStep",value:function(){var t,e=this.step_map,n=this.step,i=0,r=0,o=pf(e);try{for(o.s();!(t=o.n()).done;){if((r=(i+=t.value)-1)>n)break}}catch(t){o.e(t)}finally{o.f()}this.showTip(r)}},{key:"getStepInfo",value:function(t){for(var e=this.step_map,n=0,i=0,r=0,o=!1,a=!1,u=0;u<e.length;u++){var s=e[u];if(t<=(r+=s)-1){n=u,i=t-(r-s);break}}var c=e[n];return n>=e.length-1&&i>=c-1&&(o=!0),i>=c-1&&(a=!0),{level_index:n,level_step_index:i,is_level_last:a,is_last:o}}},{key:"showTip",value:function(t){var e=this,n=this.tip_msg;t=t||0,this.step=t;var i=this.getStepInfo(t),r=i.level_index,o=i.level_step_index,a=i.is_last,u=i.is_level_last,s=this.view.html_div,c=70,l=n[r];s.innerHTML=this.getTipByLen(l,o+1),clearTimeout(this.timeout),a?this.timeout=Te()((function(){e.complete()}),this.auto_hide?1e3:0):(u&&(c=1e3),this.timeout=Te()((function(){e.showTip(++t)}),c))}},{key:"getTipByLen",value:function(t,e){var n=[],i=this.style;if("string"==typeof t){var r,o=_f(t,e),a=pf(xt()(o,1)[0]);try{for(a.s();!(r=a.n()).done;){var u=r.value;n.push(pe()(pe()({},i),{msg:u}))}}catch(t){a.e(t)}finally{a.f()}}else{var s,c=pf(t);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=l.msg,f=yf(l,["msg"]),v=_f(h,e),p=xt()(v,2),d=p[0];e=p[1],f=pe()(pe()({},i),f);var y,g=pf(d);try{for(g.s();!(y=g.n()).done;){var m=y.value;n.push(pe()(pe()({},f),{msg:m}))}}catch(t){g.e(t)}finally{g.f()}if(e<=0)break}}catch(t){c.e(t)}finally{c.f()}}return this.jsonToHtml(n)}},{key:"jsonToHtml",value:function(t){var e,n="",i=pf(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,o='<span style="font-size:{fontSize}px;color:{color};">{msg}</span>';for(var a in r){if(r.hasOwnProperty(a))if("<br/>"===r[a])o="<br/>";else{var u=new RegExp("{"+a+"}","g");o=o.replace(u,r[a])}}n+=o}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"show",value:function(t){var e;switch(t){case"top":e=ci;break;case"right":e=li;break;case"bottom":e=si;break;case"left":default:e=hi}e(this.view,800)}},{key:"analysisTip",value:function(t){var e,n=[],i=pf(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,o=r.length;if("string"!=typeof r){o=0;var a,u=pf(r);try{for(u.s();!(a=u.n()).done;){o+=a.value.msg.length}}catch(t){u.e(t)}finally{u.f()}}n.push(o)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"showCompletedTip",value:function(){if(this.is_going){clearTimeout(this.timeout);var t=this.getCurTipCompleteStepInfo();t.is_complete?this.complete():t.in_wait?this.showTip(++t.step):this.showTip(t.step)}}},{key:"getCurTipCompleteStepInfo",value:function(){for(var t=this.step,e=this.step_map,n=0,i=!1,r=!1,o=0,a=e.length;o<a;o++){if(t<(n+=e[o])){t=n;break}if(t===n){i=!0,o===a-1&&(r=!0);break}}return{step:t,in_wait:i,is_complete:r}}},{key:"complete",value:function(){this.complete_resolve&&Ro(this.complete_resolve),this.auto_hide&&this.hide(),this.reset()}},{key:"getSize",value:function(){var t=this.view;return{width:t.width,height:t.height}}},{key:"setSize",value:function(t,e){var n=this.view;n.width=t,n.height=e}},{key:"reset",value:function(){this.tip_msg=null,this.complete_resolve=null,this.auto_hide=!0,this.step=-1,this.step_map=null,this.is_going=!1,zt.a.stage.offAllCaller(this)}},{key:"hide",value:function(){var t=this.view;t.html_div.innerHTML="",t.visible=!1}}]),t}();function _f(t,e){var n=t.split("<br/>"),i=[];if(1===t.length)i.push(vt()(t).call(t,0,e)),e=0;else for(var r=0;r<n.length;r++){var o=n[r],a=(e-=o.length)>0?o:vt()(o).call(o,0,o.length+e);if(i.push(a),r!==n.length-1&&e>0&&(i.push("<br/>"),e--),e<=0)break}return[i,e]}window.spliceStr=_f;var bf=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},kf=function(){function t(){it()(this,t),this.name="guide_main"}return ot()(t,[{key:"start",value:function(){return bf(this,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"onGuideUpdate",value:function(t,e){}},{key:"init",value:function(){return bf(this,void 0,void 0,ut.a.mark((function t(){var e,n,i,r,o,a;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.guide_dialog){t.next=4;break}return t.next=3,Ji.director.openDialog(this.guide_dialog);case 3:return t.abrupt("return");case 4:return t.next=6,pa.preEnter();case 6:e=t.sent,n=e.prompt_ui,i=e.pointer_ui,r=e.btn_next,o=new mf(n,{fontSize:25,color:"#ffe7a7"}),a=new vf(i),this.guide_dialog=e,this.prompt=o,this.pointer=a,pi(Oo,{guide_dialog:e,prompt:o,pointer:a,btn_next:r});case 14:case"end":return t.stop()}}),t,this)})))}},{key:"end",value:function(){return bf(this,void 0,void 0,ut.a.mark((function t(){var e,n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Oo.guide_dialog,n=Oo.prompt,t.next=3,n.hide();case 3:e.hide();case 4:case"end":return t.stop()}}),t)})))}}]),t}(),wf=n(378),xf=n.n(wf),Cf=n(45),Sf=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},If=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&St()(e).call(e,i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof fe.a){var r=0;for(i=fe()(t);r<i.length;r++)St()(e).call(e,i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function Af(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=n/2,r=t.localToGlobal(new Cf.a(-i,-i));r=e.globalToLocal(r,!0);var o=t.localToGlobal(new Cf.a(t.width+i,t.height+i));o=e.globalToLocal(o,!0);var a=r,u=a.x,s=a.y,c=o.x-u,l=o.y-s;return c<0&&(u=o.x,s=o.y,c=r.x-u,l=r.y-s),{x:u,y:s,width:c,height:l}}function Bf(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=Oo.prompt,o=r.getSize();if(t instanceof zo.a){var a=t.x,u=t.y,s=t.width,c=t.height;switch(e){case"top":n={x:a,y:u-o.height-i};break;case"right":n={x:a+s+i,y:u};break;case"bottom":n={x:a,y:u+c+i};break;case"left":n={x:a-o.width-i,y:u}}}else{var l=t.x,h=t.y,f=t.radius;switch(e){case"top":n={x:l-f,y:h-f-o.height-i};break;case"right":n={x:l+f+i,y:h-f};break;case"bottom":n={x:l-f,y:h+f+i};break;case"left":n={x:l-f-o.width-i,y:h-f}}}return n}function Tf(t){return Sf(this,void 0,void 0,ut.a.mark((function e(){var n,i,r;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=Oo.prompt).getSize(),r=xf()(t).call(t,(function(t,e){var n=e.split("<br/>").length;return 1===n&&(n=Math.ceil(Pi(e)/50)),n>t&&(t=n),t}),0),n.setSize(i.width,35*r),Na("test:>",r),e.next=7,oi(.5);case 7:case"end":return e.stop()}}),e)})))}function Mf(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"btn";return Sf(this,void 0,void 0,ut.a.mark((function o(){var a,u,s,c,l,h,f,v;return ut.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u="rect",t.sprite?(a=t.sprite,u=t.shape):a=t,s=Af(a,Oo.guide_dialog),c=s.x,l=s.y,h=s.width,f=s.height,v="rect"===u?new zo.a(c,l,h,f):{x:c+h/2,y:l+f/2,radius:Math.max(h,f)},o.next=7,Lf(v,e,n,i,r);case 7:case"end":return o.stop()}}),o)})))}function Lf(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"btn";return Sf(this,void 0,void 0,ut.a.mark((function o(){var a,u,s,c;return ut.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return 20,a=Oo.guide_dialog,u=Oo.prompt,Oo.btn_next,t=Ef(t,20),o.next=5,Tf(e);case 5:return s=Bf(t,n),c=u.prompt({pos:s,dir:n},e,!1),o.next=9,a.drawBlankWaitClick(t,i,r,c);case 9:return o.next=11,u.hide();case 11:a.clearBlank();case 12:case"end":return o.stop()}}),o)})))}function Ef(t,e){if(t instanceof zo.a){var n=t.x,i=t.y,r=t.width,o=t.height;return new zo.a(n-e/2,i-e/2,r+e,o+e)}var a=t.radius,u=If(t,["radius"]);return pe()(pe()({},u),{radius:a+e/2})}function Pf(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Of(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Of(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Of(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Df(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var zf=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Uf=function(t){ae()(n,t);var e=Df(n);function n(t,i){var r;return it()(this,n),(r=e.call(this)).view=t,r.model=i,r.onBomb=function(t){return zf(ic()(r),void 0,void 0,ut.a.mark((function e(){var n,i,r,o,a,u,s,c,l,h,f;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.model.id,i=t.pos,r=t.fish_list,o=t.player,a=o.need_emit,u=o.is_cur_player,a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,mh(this.model);case 7:s=[],c=Pf(r);try{for(c.s();!(l=c.n()).done;)(h=l.value).destroyed||s.push(h.id)}catch(t){c.e(t)}finally{c.f()}f={bombPoint:i,eid:n,fishList:s},u||(f.robotId=o.user_id),Su(D,f);case 13:case"end":return e.stop()}}),e,this)})))},r.setVisible=function(t){r.view.setVisible(t)},r.syncPos=function(){var t=ic()(r).view,e=r.model,n=e.pos,i=e.velocity,o=e.horizon_turn;e.visible;t.syncPos(n,i,o)},r.beCapture=function(t){Te()((function(){t()}),500)},r.init(),r}return ot()(n,[{key:"init",value:function(){this.addCom(new $c),this.initEvent()}},{key:"initEvent",value:function(){var t=this,e=this.model.visible;this.setVisible(e);var n=this.model.event,i=this.view;n.on(ch,this.onBomb,this),n.on(Rc.VisibleChange,this.setVisible,this),n.on(Rc.Move,this.syncPos),n.on(Rc.BeCast,(function(){i.beCastAni()}),this),n.on(Rc.BeCapture,this.beCapture,this),n.on(Rc.StatusChange,(function(t){t===Fc.Freezed?i.stopSwimAni():i.playSwimAni()}),this),n.on(Rc.Destroy,(function(){t.destroy()}),this)}},{key:"destroy",value:function(){var t,e,i=this.view;null===(e=null===(t=this.model)||void 0===t?void 0:t.event)||void 0===e||e.offAllCaller(this),i.destroy(),tr()(le()(n.prototype),"destroy",this).call(this),this.model=void 0}}]),n}(rn),Nf=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function jf(t,e,n,i){return Nf(this,void 0,void 0,ut.a.mark((function r(){var o,a;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,gi(t);case 2:return i=i||"circleIn",n=n||400,o={alpha:.2,scaleX:.2*e.x,scaleY:.2*e.y,visible:!0},a={alpha:1,scaleX:1*e.x,scaleY:1*e.y},r.abrupt("return",vi({sprite:t,start_props:o,end_props:a,time:n,ease_fn:i}));case 7:case"end":return r.stop()}}),r)})))}function Ff(t,e,n){var i=Qs.ani_overlay,r=Qs.game.upside_down,o=new nr.a;o.zOrder=10,o.font=n?"numYellow40":"numWhite40",o.text="+"+e,i.addChild(o);var a=o.getBounds();return o.pivot(a.width/2,a.height/2),o.pos(t.x,t.y),r&&(o.scaleY=-1),o}function Rf(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Vf(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Vf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Gf=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Hf=[];function $f(t){t.removeSelf(),t.unHighlight(),t.scaleY=1,Hf.push(t)}function Yf(){var t=Qs.ani_overlay,e=Qs.game.upside_down,n=Hf.pop();return n&&!n.destroyed||(n=new Sc).pivot(n.width/2,n.height/2),Vo(n,{scaleX:1,alpha:1,scaleY:e?-1:1}),t.addChild(n),n.highlight(),n}var Xf=function(){function t(e,n){it()(this,t),this.view=e,this.model=n,this.init()}return ot()(t,[{key:"init",value:function(){var t=this.view,e=this.model,n=e.skin_level,i=Qs.game.upside_down,r=e.pos,o=r.x,a=r.y;t.pos(o,a),i&&(t.scaleY=-1),$o(t,n,!1),this.initEvent(),t.zOrder=301}},{key:"initEvent",value:function(){var t=this,e=(this.view,this.model.event);e.on(Nc,(function(){var n=t.model.skin;Te()((function(){Ws("net",n,t.view)}),1e3),e.offAllCaller(t)}),this)}}]),t}(),Kf=function(){function t(e,n){var i=this;it()(this,t),this.view=e,this.model=n,this.syncPos=function(){var t=i.view;if(!t.destroyed){var e=i.model,n=e.pos,r=Ot(e.velocity)+90;t.rotation=r,t.pos(n.x,n.y)}},this.rage=function(){var t=i.view,e=i.model,n=e.pos,r=Ot(e.velocity)+90;t.rotation=r,t.pos(n.x,n.y)},this.init()}return ot()(t,[{key:"init",value:function(){this.initView(),this.initEvent()}},{key:"initView",value:function(){var t=this.view,e=this.model.skin_level;this.syncPos(),t.visible=!0,t.scale(.8,.8),$o(t,function(t){return Number(t)>3?0:t}(e),!0),t.zOrder=301}},{key:"initEvent",value:function(){var t=this,e=this.model.event;e.on(jl,this.syncPos,this),e.on(Fl,(function(t){var e,n=(e=t.skin,Qs.game.addNet(e));new Xf(n,t)}),this),e.on(Nc,(function(){t.destroy()}),this)}},{key:"destroy",value:function(){var t,e;Ws("bullet",this.model.skin,this.view),null===(e=null===(t=this.model)||void 0===t?void 0:t.event)||void 0===e||e.offAllCaller(this),this.model=void 0}}]),t}();var Wf={point_list:[],points_temp:[],aim_ani_map:new Bt.a};function Qf(t){var e=Zf("aim_big");$o(e,0,!0),e.pos(t.x,t.y)}function qf(t,e,n){if(t){var i=Zf("aim"),r=Wf.fish,o=t.pos;r&&(r.event.offAllCaller(i),Na(r.event.getBind("FishEvent.Move"),r.id)),Wf.fish=t,Wf.ori_pos=n,tv(),t.visible&&($o(i,0,!0),i.pos(o.x,o.y)),t.event.on(Rc.VisibleChange,(function(t){t?($o(i,0,!0),i.pos(o.x,o.y)):Ho(i)}),i),t.event.on(Rc.Move,(function(t){var r=t.pos,o=r.x,a=r.y;i.pos(o,a),e&&function(t,e){var n=Wf.point_list,i=Qs.ani_wrap,r=new Tt.Vector(t.x-e.x,t.y-e.y),o=r.len(),a=r.clone().normalize(),u=Math.ceil(o/50);!function(t){var e=Wf.point_list,n=Wf.points_temp,i=e.length;if(i<t)for(var r=i;r<t;r++){var o=n.pop()||Gt("image/game/aim_point");o.pivot(9.5,9.5),e.push(o)}else if(i>t)for(var a=i-1;a>=t;a--){var u=e[a];u.removeSelf(),n.push(u),_e()(e).call(e,a,1)}}(u);for(var s=0;s<u;s++){var c=n[s],l=a.clone().scale(50*s,50*s),h=e.x+l.x,f=e.y+l.y;c.x=h,c.y=f,i.addChild(c)}}({x:o,y:a},n)}),i),t.event.on(Rc.Destroy,(function(){Jf("aim"),t.event.offAllCaller(i)}),i)}}function Jf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aim",e=Wf.aim_ani_map,n=Wf.fish,i=Wf.point_list,r=e.get(t);r&&(r.stop(),r.removeSelf()),"aim"===t&&(i.length&&(Wf.ori_pos=void 0,tv()),n&&(n.event.offAllCaller(r),Wf.fish=void 0))}function Zf(t){var e=Wf.aim_ani_map,n=Qs.ani_wrap,i=e.get(t);return!i||i.destroyed?(i=Zt("other",t),n.addChild(i),e.set(t,i)):i.parent||n.addChild(i),i}function tv(){for(var t=Wf.point_list,e=Wf.points_temp,n=t.length-1;n>=0;n--){var i=t[n];i.removeSelf(),e.push(i),_e()(t).call(t,n,1)}}function ev(t){var e,n,i=(e=Qs.ani_wrap,(n=Ks("other","exploding")).scale(2,2),n.pos(e.width/2,e.height/2),e.addChild(n),n.alpha=.8,n);i.once(Bn.a.STOPPED,i,(function(){Ws("other","exploding",i)})),i.pos(t.x,t.y),$o(i,0,!1)}var nv=n(688),iv=n(376),rv=n(289);var ov=n(689);function av(t){var e,n,i,r,o=Dr(),a=Z[o],s=a.buySkillTip,c=a.posBombTip,l=a.aimFish;if(t.skill_core.num<=0)Hr.alert(s).then((function(t){"confirm"===t&&Hs.preEnter()}));else if(t.skill_core.status===Jl.Normal)if(t.skill_core.setStatus(Jl.PreActive),t instanceof Ch)Su(U);else if(t instanceof wh){To.tip(c,2);var h=Qs.game.pool;Qf({x:u.PoolWidth/2,y:u.PoolHeight/2}),e=h,n=function(t){return Qf(t)},i=Bn.a.MOUSE_MOVE,r=function(t){var i=e.getMousePoint(),r=i.x,o=i.y;n({x:r,y:o})},e.on(i,e,r),sa.push({item:e,off:function(){e.off(i,e,r)}}),function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Qs.game.onPoolClick(t)}(!0).subscribe((function(t){ca(h),Jf("aim_big");var e=function(t){var e;return Xn()(e=yh(t)).call(e,(function(t){return t.id}))}(t);Su(O,{bombPoint:t,fishList:e})}))}else if(t instanceof Lh){var f=t.skill_core.player,v=(f.user_id,f.is_cur_player),p=f.need_emit,d=Qe();if(!v&&p)return;var y=Ge.app.game.getCurPlayer();To.tip(l,2),qf(d,!1,y.gun.pos),tc(!0).subscribe((function(t){Su(P,{eid:t,needActive:!0})}))}}function uv(t,e){var n=112;t instanceof Lh?n=112:t instanceof Ch?n=113:t instanceof wh&&(n=114);var i,r,o,a=function(t){return Object(nv.a)(document.body,"keydown").pipe(Object(iv.a)((function(e){return e.keyCode===t})),Object(rv.a)((function(t){return t.preventDefault(),t})))}(n),u=(i=e,r=Bn.a.CLICK,new na.a((function(t){var e=function(e){e.stopPropagation(),t.next(e),o&&t.complete()};i.on(r,i,e),t.add((function(){i.off(r,i,e)}))})));return Object(ov.a)(a,u)}var sv=function(){function t(e,n,i){it()(this,t),this.view=i,this.model=e,this.player=n,this.initEvent(),this.setInfo()}return ot()(t,[{key:"initEvent",value:function(){var t=this,e=this.view,n=this.model,i=this.player,r=n.skill_core.event;if(r.on(rh,(function(t){!function(t,e,n){new ct.a((function(i,r){var o=Dr(),a=Z[o].aimFish;if(t instanceof Lh){var u=e.fish,s=e.is_tip,c=e.gun_pos;if(!n.is_cur_player)return ja("lock:>skill:>skillActiveHandler",s),void(n.need_emit&&s&&u&&Su(P,{robotId:n.user_id,eid:u.id}));s&&To.tip(a,2),qf(u,!s,c),tc().subscribe((function(t){Su(P,{eid:t})}))}else if(t instanceof wh){var l=Qs.game.pool;ev(e),ca(l),Ae.play(ee.Bomb),i()}}))}(n,t,i.model)}),this),e){r.on(nh,(function(t){t===Jl.Active?e.highlight():t===Jl.Disable||t===Jl.Normal?(e.unHighlight(),e.clearCoolTime(),function(t){new ct.a((function(e,n){t instanceof Lh?(Jf("aim"),ec()):t instanceof wh?Js():e()}))}(n)):t===Jl.PreActive&&(n instanceof wh||n instanceof Lh)&&e.highlight()}),this),r.on(eh,(function(){t.setInfo()}),this);var o=0;r.on(ih,(function(t){o%3&&1!==t?o++:(o++,1===t&&(o=0),e.showCoolTime(t))}),this),r.on(oh,(function(){t.destroy()}),this),this.bindTrigger=uv(n,e).subscribe((function(){n.skill_core.status===Jl.Normal?av(n):n.skill_core.status===Jl.PreActive&&function(t){if(t.skill_core.status===Jl.PreActive&&(t.skill_core.setStatus(Jl.Normal),t instanceof Lh&&(ec(),To.hide(),Jf("aim")),t instanceof wh)){var e=Qs.game.pool;To.hide(),Jf("aim_big"),Js(),ca(e)}}(n)}))}}},{key:"setInfo",value:function(){var t=this.view,e=this.model.skill_core,n=e.num,i=e.item_id;t&&(t.setId(i),t.setNum(n))}},{key:"destroy",value:function(){var t,e,n;null===(n=null===(e=null===(t=this.model)||void 0===t?void 0:t.skill_core)||void 0===e?void 0:e.event)||void 0===n||n.offAllCaller(this),this.bindTrigger.unsubscribe(),this.model=void 0}}]),t}();function cv(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return lv(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function lv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var hv=[1,2,3,4,5,10,15,20],fv=function(){function t(e,n,i){it()(this,t),this.view=e,this.model=n,this.game_ctrl=i,this.init()}return ot()(t,[{key:"init",value:function(){this.initGun(),this.initEvent()}},{key:"initGun",value:function(){var t=this.view,e=this.model,n=this.game_ctrl,i=e.server_index,r=e.gun,o=e.bullet_num,a=e.is_cur_player,u=r.pos;i>=2&&t.fixServerTopPos(),n.calcClientIndex(i)>=2&&t.fixClientTopPos(),t.setPos(u.x,u.y),a&&Zs(o)}},{key:"initEvent",value:function(){var t=this,e=this.view,n=this.model,i=n.user_id,r=n.gun,o=n.is_cur_player,a=n.skill_map,u=n.event,c=r.event,l=r.direction,h=r.pos,f=e.btn_minus,v=e.btn_add;u.on(Nh.CaptureFish,(function(t){var e=t.pos,n=t.data,i=n.win,a=n.drop,u=t.resolve,s=r.pos;if(e||u(),o){if(a)!function(t,e,n,i){Gf(this,void 0,void 0,ut.a.mark((function r(){var o,a,u;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=Rf(n),r.prev=1,u=ut.a.mark((function n(){var r,o,u,s,c;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.value,o=r.itemNum,u=r.itemId,s=Yf(),"3001"===u?(c=Ar(i),s.setIcon(c)):s.setId(u),s.setNum(o),s.pos(t.x,t.y),n.next=8,ai(s).then((function(){return oi(.5)})).then((function(){return vi({sprite:s,start_props:t,end_props:pe()(pe()({},e),{alpha:.2,scaleX:.4,scaleY:.4*s.scaleY}),time:2e3}).then((function(){$f(s)}))}));case 8:case"end":return n.stop()}}),n)})),o.s();case 4:if((a=o.n()).done){r.next=8;break}return r.delegateYield(u(),"t0",6);case 6:r.next=4;break;case 8:r.next=13;break;case 10:r.prev=10,r.t1=r.catch(1),o.e(r.t1);case 13:return r.prev=13,o.f(),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[1,10,13,16]])})))}(e,s,a,$e());Ae.play(ee.FlySkill)}i?o&&i>1e3?function(t,e,n,i,r){return Nf(this,void 0,void 0,ut.a.mark((function o(){var a=this;return ut.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new ct.a((function(o,u){return Nf(a,void 0,void 0,ut.a.mark((function a(){var u,s,c,l,h;return ut.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=Qs.ani_overlay,s=vc("award_circle"),c=Qs.game.upside_down,l=1,c?(s.scaleY=-1,l=-1):s.scaleY=1,t=cc(t,135,135),Ae.play(ee.FlySkill),h=Ff(t,e,n),u.addChild(s),$o(s,0,!1),s.pos(t.x,t.y),a.next=13,jf(h,{x:1.5*Math.abs(l),y:1.5*l},400,(function(t,e,n,o){return Sn.a.elasticOut(t,e,n,o,i,r)}));case 13:di({sprite:h,props_arr:[{rotation:0},{rotation:-30},{rotation:0},{rotation:30}],time:80,step_fn:function(t){10===t&&(pc("award_circle",s),h.destroy(),yi(h),o())}});case 14:case"end":return a.stop()}}),a)})))})));case 1:case"end":return o.stop()}}),o)})))}(e,i,o).then(u):function(t,e,n,i){return ac(this,void 0,void 0,ut.a.mark((function r(){var o,a,u;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=uc(t,n),a=o.coins,u=o.pos,oi(.5).then((function(){sc(u,n,i)})),r.next=4,lc(a,e);case 4:case"end":return r.stop()}}),r)})))}(e,s,i,o).then(u):u()}),this),u.on(Nh.Destroy,(function(){t.destroy()}),this),c.on(ql.AddBullet,(function(t){var n=t.bullet_group,a=t.velocity,u=r.rage;e.fire(a,i),o&&e.stopPosTip();var s,c=cv(n.bullet_map);try{for(c.s();!(s=c.n()).done;){var l=xt()(s.value,2)[1],h=e.addBullet(l.skin,u);new Kf(h,l)}}catch(t){c.e(t)}finally{c.f()}}),this),e.setDirection(l),c.on(ql.DirectionChange,(function(t){e.setDirection(t)}),this),c.on(ql.LevelChange,(function(n){o&&t.detectDisableChangeBulletCost(n.bullet_cost),e.setBulletCost(n)}),this),e.on(Bn.a.CLICK,e,(function(t){t.stopPropagation()}));var p,d,y=0,g=cv(a);try{for(g.s();!(p=g.n()).done;){var m=xt()(p.value,2)[1];if(m instanceof sh){if(o){var _=Qs.game.getAutoShootSkillItem();this.handleAutoShoot(m,_)}}else{if(o){var b=(d=y,Qs.game.getSkillItemByIndex(d));new sv(m,this,b)}else new sv(m,this);y++}}}catch(t){g.e(t)}finally{g.f()}c.on(ql.WillAddBullet,(function(e){if(t.model){var n=t.model,i=n.need_emit,r=n.user_id,o=n.is_cur_player;if(i){var a=e.x,u=e.y;o&&Ae.play(ee.Fire);var s={direction:{x:a,y:u},userId:r};o||(s.robotId=r,s.userId=Ke().user_id),Su(A,s)}}}),this),c.on(ql.CastFish,(function(e){var n=e.fish.id,i=e.level,r=t.model,o=r.user_id,a={eid:n,multiple:i};r.is_cur_player||(a.robotId=o),Su(B,a)}),this),o&&(e.setMySelfStyle(),this.resetGetBulletCost(),u.on(Nh.UpdateInfo,(function(){Zs(t.model.bullet_num)}),this),c.on(ql.NotEnoughBulletNum,(function(){t.game_ctrl.isTrial?Gu(s.TrialNotBullet):Gu(s.ReExchange)}),this),c.on(ql.AutoShoot,(function(t){var e;e=t,Qs.game.setAutoShootLight(e)}),this),qs().on(Bn.a.CLICK,e,(function(t){var e=Qs.game.getPoolMousePos(),n=new Mt.a.Vector(e.x-h.x,e.y-h.y);r.preAddBullet(n)})),f.on(Bn.a.CLICK,f,(function(e){e.stopPropagation(),t.sendChangeBulletCost("minus")})),v.on(Bn.a.CLICK,v,(function(e){e.stopPropagation(),t.sendChangeBulletCost("add")})))}},{key:"handleAutoShoot",value:function(t,e){e.on(Bn.a.CLICK,e,(function(e){e.stopPropagation(),Na("auto shoot"),t.toggle()}))}},{key:"detectDisableChangeBulletCost",value:function(t){var e=this.view,n=e.btn_minus,i=e.btn_add,r=St()(hv).call(hv,t);qo(n),qo(i),r<=0?Qo(n):r>=hv.length-1&&Qo(i)}},{key:"resetGetBulletCost",value:function(){var t,e,n=this.game_ctrl.isTrial,i=He().user_id,r=$e(),o=vn(ht()(t=ht()(e="".concat(i,":")).call(e,r,":")).call(t,n));o&&Su(T,{multiple:Number(o)})}},{key:"sendChangeBulletCost",value:function(t){var e,n,i=this.game_ctrl.isTrial,r=this.model.bullet_cost,o=St()(hv).call(hv,r),a="add"===t?o+1:o-1;if(!(a<0||a>hv.length-1)){Ae.play(ee.Click);var u=hv[a];this.detectDisableChangeBulletCost(u),Su(T,{multiple:u});var s=He().user_id,c=$e();fn(ht()(e=ht()(n="".concat(s,":")).call(n,c,":")).call(e,i),u+"")}}},{key:"destroy",value:function(){var t=this.view,e=this.model,n=e.gun.event,i=e.event;qs().offAllCaller(t),zt.a.stage.offAllCaller(t),i.offAllCaller(this),n.offAllCaller(this),t.destroy(),this.view=void 0,this.game_ctrl=void 0,this.model=void 0}}]),t}(),vv=function(){function t(e){var n=this;it()(this,t),this.event=new un,this.sendEvent=new un,this.status="OPEN",this.config=e,Te()((function(){n.event.emit(Ya)}))}return ot()(t,[{key:"reconnect",value:function(){}},{key:"setParams",value:function(t){Na(t)}},{key:"send",value:function(t,e){this.sendEvent.emit(t,e),Na("mockWebSocket:>",t,e)}},{key:"disconnect",value:function(){this.event.destroy(),this.sendEvent.destroy(),Na("disconnect")}}]),t}(),pv=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))};function dv(t){var e={eid:"001",fishId:"".concat(1),displaceType:"path",pathNo:"".concat(3),totalTime:12e8,usedTime:6e8};t.model.addFish(e)}function yv(){return pv(this,void 0,void 0,ut.a.mark((function t(){var e,n,i,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Ge.app.user_info.user_id,ou(vv),t.next=4,nu({url:"",publicKey:"",code:"",name:"game",host:""});case 4:return n=t.sent,i=n.sendEvent,r=n.event,i.on(A,(function(t){oi(.01).then((function(){r.emit(A,{userId:e,direction:t.direction},200)}))})),i.on(B,(function(t){oi(.1).then((function(){r.emit(B,{userId:e,eid:t.eid,win:2},200)}))})),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))}function gv(){return pv(this,void 0,void 0,ut.a.mark((function t(){var e,n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Ge.app.user_info.user_id,n=au(h),n.event.emit(A,{userId:e,direction:{x:1.3,y:-1}}),t.abrupt("return",oi(2));case 4:case"end":return t.stop()}}),t)})))}function mv(t){if(t){var e=t.model;uu(h),ou(void 0),e.destroy()}}function _v(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return bv(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function bv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var kv,wv=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},xv=function(){function t(e,n){it()(this,t),this.view=e,this.model=n,this.player_list=new tn.a,this.onModel(),function(t){var e,n=t.model,i=Ge.app.user_info.user_id,o={user_id:i,server_index:0,bullet_cost:1,bullet_num:1,gun_skin:"1",nickname:i,avatar:"test",need_emit:!0,is_cur_player:!0,skills:(e={},a()(e,r.Freezing,{item_id:r.Freezing,num:1,cool_time:10,used_time:0}),a()(e,r.LockFish,{item_id:r.LockFish,num:20,cool_time:10,used_time:0}),a()(e,r.Bomb,{item_id:r.Bomb,num:20,cool_time:10,used_time:0}),e)};n.addPlayer(o)}(this),Ge.app.game=n}return ot()(t,[{key:"onModel",value:function(){var t=this,e=this.model.event,n=this.view;e.on(Gh.AddFish,(function(e){var i=e.type,r=e.id,o=e.horizon_turn,a=e.currency,u=n.addFish({type:i,id:r,horizon_turn:o,currency:a});t.fish_view=u;new Uf(u,e)}),this),e.on(Gh.AddPlayer,(function(e){var i=n.addGun(),r=new fv(i,e,t);t.player_list.add(r)}),this),e.on(Gh.Destroy,(function(){t.destroy()}),this)}},{key:"calcClientIndex",value:function(){return 1}},{key:"onShoot",value:function(t){this.model.shoot(t)}},{key:"onHit",value:function(t){this.model.captureFish(t)}},{key:"addFish",value:function(t){var e,n=_v(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.model.addFish(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"removePlayerCtrl",value:function(t){this.player_list.delete(t)}},{key:"destroy",value:function(){var t,e;Cu(this),null===(e=null===(t=this.model)||void 0===t?void 0:t.event)||void 0===e||e.offAllCaller(this),this.model=void 0,this.view=void 0,Vo(Ta,{game:void 0}),this.player_list=new tn.a}}],[{key:"preEnter",value:function(){return wv(this,void 0,void 0,ut.a.mark((function e(){var n,i,r,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xc.preEnter(),i=Ji.director.load(Kr.gameTutorial),r=yv(),o=ct.a.all([n,r,i]).then((function(e){var n=xt()(e,2),i=n[0],r=n[1],o=new t(i,Ge.app.enterGame());return o.view.showBubbleRefresh(1),xu(r,o),o})),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))}}]),t}(),Cv=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Sv=function(){function t(){it()(this,t)}return ot()(t,[{key:"start",value:function(t){return Cv(this,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showStartPrompt();case 2:if(!t.sent){t.next=6;break}return t.next=6,this.next();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"showStartPrompt",value:function(){return Cv(this,void 0,void 0,ut.a.mark((function t(){var e,n,i,r,o,a,u,s,c,l,h,v,p,d,y,g,m,_,b,k;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Dr(),i=(n=Z[e]).tour1,r=n.tour2,o=n.tour3,a=n.tour4,u=n.tour5,s=n.tour6,t.prev=2,l=Oo.guide_dialog,h=Dv.instance){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,iu(f);case 9:return v=h.view,p=v.header.btn_coin_select,d=v.guide2,t.next=12,Mf(p,[i],"bottom",!0);case 12:return t.next=14,Mf(d,[r],"top",!0);case 14:return h.destroy(),t.next=17,xv.preEnter();case 17:return c=t.sent,Ji.director.openDialog(l),y=c.view.bullet_box,t.next=22,oi(1);case 22:return g=et()(c.player_list)[0],m=g.view,_=y.x>667?"left":"right",l.setBtnNextDir(_),m.stopPosTip(),t.next=29,Mf(y,[o],_,!0);case 29:return m.setMySelfStyle(),t.next=32,oi(1);case 32:return t.next=34,Mf(m,[a],"top",!0);case 34:return oi(2),dv(c),b=c.fish_view,t.next=39,Mf({sprite:b,shape:"circle"},[u],"top",!0,"point");case 39:return t.next=41,gv();case 41:return t.next=43,oi(1);case 43:return k=c.view.skill_box,l.setBtnNextDir("right"),t.next=47,Mf(k,[s],"top",!0,"start");case 47:return mv(c),t.abrupt("return",!0);case 51:if(t.prev=51,t.t0=t.catch(2),"skip"!==t.t0){t.next=58;break}return mv(c),t.abrupt("return",!0);case 58:Fa(t.t0);case 59:case"end":return t.stop()}}),t,null,[[2,51]])})))}},{key:"next",value:function(){return Cv(this,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Dv.instance){t.next=5;break}return Dv.instance.destroy(),Dv.leave(),t.next=5,oi(.1);case 5:return t.next=7,Dv.preEnter();case 7:case"end":return t.stop()}}),t)})))}}]),t}(),Iv=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Av=[],Bv=!1;function Tv(t,e){return Iv(this,void 0,void 0,ut.a.mark((function n(){return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Av.push({group_id:t,functionId:e}),Bv){n.next=5;break}return Bv=!0,n.next=5,Mv();case 5:case"end":return n.stop()}}),n)})))}function Mv(){return Iv(this,void 0,void 0,ut.a.mark((function t(){var e,n,i,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return kv||(kv=new kf),t.next=3,kv.start();case 3:if(!(Av.length>0)){t.next=11;break}return e=Av.shift(),n=e.group_id,i=e.functionId,r=Pv[n],t.next=8,r();case 8:kv.onGuideUpdate(n,i),t.next=3;break;case 11:Bv=!1,kv.end();case 13:case"end":return t.stop()}}),t)})))}window.gotoGuide=Tv;var Lv,Ev,Pv={1:function(){return Iv(void 0,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Sv,t.next=3,e.start("1");case 3:fn("guide","end");case 4:case"end":return t.stop()}}),t)})))}},Ov=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Dv=function(){function t(e){var n=this;it()(this,t),this.selectCoin=function(t){if(-1!==t){var e=n.view,i=e.header.coin_menu.list,r=Ge.app.user_info,o=i.array[t].coin_name;r.setCurBalance(o),e.toggleCoinMenu(!1)}},this.selectFlag=function(t){if(-1!==t){var e=n.view,i=e.header.flag_menu.list,r=Ge.app.user_info,o=i.array[t].flag_type;r.setLang(o),e.toggleFlagMenu(!1)}},this.view=e,this.init()}return ot()(t,[{key:"enterGame",value:function(t){return this.destroy(),Ta.app.enterGame(t)}},{key:"roomIn",value:function(){var t=this,e=arguments.length<=0?void 0:arguments[0];return rf(e,this).then((function(n){return sf(e),t.enterGame(n)}))}},{key:"init",value:function(){return Ov(this,void 0,void 0,ut.a.mark((function t(){var e=this;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zh(this).then((function(t){return Ov(e,void 0,void 0,ut.a.mark((function e(){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.abrupt("return",this.destroy());case 4:Ae.playBg(ee.HallBg);case 5:if(this.initModelEvent(),"end"===vn("guide")){e.next=8;break}return e.abrupt("return",Tv("1","1"));case 8:af(this);case 9:case"end":return e.stop()}}),e,this)})))}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"initModelEvent",value:function(){var t=this.view,e=Ge.app.user_info;!function(t,e){var n=Ge.app.user_info,i=n.cur_balance;n.event.on(Tr,e,t),Te()((function(){i&&e(i)}))}(this,(function(n){var i=e.account_map.get(n),r=i.num,o=i.icon,a=i.hide;t.setCurBalance(n,o,r),t.setRechargeBtnVisible(Boolean(!a))})),Or(this,(function(e){t.setFlag(e)})),Ur(this,(function(e){t.setCoinData(e)})),function(t,e){var n=Ge.app.user_info,i=n.event,r=n.nickname;i.on(Er,e,t),Te()((function(){var t=Dr(),n=Z[t].guest;r||(r=n),e(r)}))}(this,(function(e){t.setNickname(e)})),t.setFlagData(function(){var t=[];for(var e in b)b.hasOwnProperty(e)&&t.push(b[e]);return t}())}},{key:"onUserAccount",value:function(){this.view.onResize()}},{key:"destroy",value:function(){var e,n;Ae.stop(ee.HallBg),Nr(this),zr(this),n=e=this,Qh.event.offAllCaller(n),Vu(Qh,e),uu(f),Ji.director.closeAllDialogs(),t.leave()}}],[{key:"preEnter",value:function(){return Ov(this,void 0,void 0,ut.a.mark((function e(){var n=this;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.instance){e.next=2;break}return e.abrupt("return",this.instance);case 2:return e.abrupt("return",ff((function(){return Tc.preEnter().then((function(e){var i=new t(e);return n.instance=i,i}))}),this));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"leave",value:function(){this.instance=void 0}}]),t}(),zv=n(379),Uv=n.n(zv);function Nv(){var t=Qs.ani_wrap;!Lv||Lv.destroyed?((Lv=Zt("other","freezing")).pos(t.width/2,t.height/2),t.addChild(Lv),Lv.alpha=.8):Lv.parent||t.addChild(Lv)}function jv(){Nv(),Lv.once(Bn.a.STOPPED,Lv,(function(){Nv(),$o(Lv,1,!0)})),$o(Lv,0,!1)}function Fv(t){return new ct.a((function(e,n){var i;i=Qs.ani_wrap,!Ev||Ev.destroyed?((Ev=Zt("other","shoal_wave")).scale(2,2),Ev.pos(i.width/2,i.height/2),i.addChild(Ev),Ev.alpha=.8):Ev.parent||i.addChild(Ev),Ev.once(Bn.a.STOPPED,Ev,(function(){Ev.offAll(),Ev.stop(),Ev.removeSelf(),e()})),Ev.scaleX=t?2:-2,$o(Ev,0,!1)}))}function Rv(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Vv(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Vv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Gv=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},Hv=function(){function t(e,n){it()(this,t),this.player_list=new tn.a,this.view=e,this.model=n}return ot()(t,[{key:"init",value:function(t,e){var n=this;this.initEvent(),Ae.playBg(ee.GameBg),this.view.showBubbleRefresh(e),function(t){return Ou(this,void 0,void 0,ut.a.mark((function e(){var n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=au(h))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,Uu(t||u.SocketUrl);case 5:(n=e.sent).send(I);case 7:case"end":return e.stop()}}),e)})))}(t).then((function(){xu(au(h),n)}))}},{key:"initEvent",value:function(){var t=this.view,e=t.btn_help,n=t.btn_gift,i=t.btn_voice,r=t.btn_leave,o=t.btn_shop,a=Bn.a.CLICK;this.onModel(),Ta.app.bg_monitor.event.on(Bu,(function(t){t||vu()}),this),e.on(a,this,(function(t){t.stopPropagation(),Ia.preEnter()})),n.on(a,this,(function(t){t.stopPropagation(),hs.preEnter()})),i.on(a,this,(function(t){t.stopPropagation(),Po.preEnter()})),o.on(a,this,(function(t){t.stopPropagation(),Hs.preEnter()})),r.on(a,this,(function(t){var e=Dr(),n=Z[e].leaveTip;t.stopPropagation(),Hr.alert(n).then((function(t){"confirm"===t&&Su(w)}))}))}},{key:"onModel",value:function(){var t=this,e=this.model.event,n=this.view;e.on(Gh.AddFish,(function(t){var e=t.type,i=t.id,r=t.horizon_turn,o={type:e,currency:t.currency,id:i,horizon_turn:r},a=n.addFish(o);new Uf(a,t)}),this),e.on(Gh.AddPlayer,(function(e){var i=e.server_index;if(e.is_cur_player){i>1&&n.upSideDown();var r="left";1!==i&&2!==i||(r="right"),n.setBulletBoxPos(r)}var o=n.addGun(),a=new fv(o,e,t);t.player_list.add(a)}),this),e.on(Wc,(function(){Ae.play(ee.Freeze),jv()}),this),e.on(Qc,(function(){Lv.offAll(),Lv.stop(),Lv.removeSelf()}),this),e.on(Il,(function(t){Ae.play(ee.ShoalComing),Fv(t)}),this),e.on(Gh.Destroy,(function(){t.destroy()}),this)}},{key:"onEnterGame",value:function(t){var e=this.model,n=this.view,i=t.isTrial,r=t.fish,o=t.users,a=t.frozen,u=t.frozen_left,s=t.fish_list,c=t.exchange_rate,l=t.currency;this.isTrial=i,i&&n.setTrialStyle(),this.addPlayers(o),this.addFish(r),a&&e.freezing_com.freezing(u,s),n.setExchangeRate(c,l)}},{key:"calcClientIndex",value:function(t){return this.model.getCurPlayer().server_index<=1?t:3-t}},{key:"onShoot",value:function(t){var e=t.direction;$n()(e).length&&(t.robotId&&(t.userId=t.robotId),this.model.shoot(t))}},{key:"onHit",value:function(t){this.model.captureFish(t)}},{key:"shoalComingTip",value:function(t){this.model.shoalComingTip(t)}},{key:"activeSkill",value:function(t,e){this.model.activeSkill(t,e)}},{key:"disableSkill",value:function(t,e){this.model.disableSkill(t,e)}},{key:"resetSkill",value:function(t,e){this.model.resetSkill(t,e)}},{key:"addFish",value:function(t){var e,n=Rv(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.model.addFish(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"addPlayers",value:function(t){var e,n=Rv(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.model.addPlayer(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"setPlayersEmit",value:function(t){var e,n=Rv(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=this.model.getPlayerById(i);r&&r.updateInfo({need_emit:!0})}}catch(t){n.e(t)}finally{n.f()}}},{key:"changeBulletCost",value:function(t){var e=t.userId,n=t.multiple;this.model.getPlayerById(e).updateInfo({bullet_cost:n})}},{key:"changeUserNumInfo",value:function(t){var e,n=t.userId,i=t.change_arr,r=this.model.getPlayerById(n),o=Rv(i);try{for(o.s();!(e=o.n()).done;){var a=e.value,u=a.type,s=a.num,c=a.id;"skill"===u?r.addSkillNum(c,s):r.updateInfo({bullet_num:r.bullet_num+s})}}catch(t){o.e(t)}finally{o.f()}}},{key:"changeSkin",value:function(t){var e=t.skinId,n=t.userId;e=e.charAt(e.length-1);var i=this.model.getPlayerById(n);Na("接收到use skin",e),i.changeSkin(e)}},{key:"tableOut",value:function(t){var e=this,n=this.model,i=t.userId,o=t.isTimeOut;if(Xe(i)){var a=Dr(),u=Z[a].kickedTip,c=Z[a][s.TrialTimeGame],l=o?c:u;!function(){var t,e=lu(Ge.app.game.getPlayers());try{for(e.s();!(t=e.n()).done;){var n=xt()(t.value,2),i=(n[0],n[1]);if(i.need_emit)i.disableSkill(r.Auto),i.getSkill(r.LockFish).unLock()}}catch(t){e.e(t)}finally{e.f()}}(),Cu(this),uu(h),Hr.alert(l,{hide_cancel:!0}).then((function(){e.roomOut({userId:i})}))}else{var f=n.getPlayerById(i);if(!f)return Fa("Game:>captureFish:> cant find player for userId=".concat(i,"!"));f.destroy()}}},{key:"roomOut",value:function(t){var e=this.model;Xe(t.userId)&&(Cu(this),uu(h),e.destroy(),Dv.preEnter())}},{key:"reset",value:function(){this.model.clear()}},{key:"destroy",value:function(){var e,n=Ta.app.bg_monitor;null===(e=this.model)||void 0===e||e.event.offAllCaller(this),n.event.offAllCaller(this),this.view=void 0,this.model=void 0,t.instance=void 0,Ji.director.closeAllDialogs(),Vo(Ta,{game:void 0})}}],[{key:"preEnter",value:function(e,n){return Gv(this,void 0,void 0,ut.a.mark((function i(){var r=this;return ut.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.instance){i.next=2;break}return i.abrupt("return",this.instance);case 2:return i.abrupt("return",ff((function(){var i,o=xc.preEnter(),a=r.genBgNum(),u=xt()(a,2),s=u[0],c=u[1],l=ht()(i=[c]).call(i,et()(Kr.game)),h=Ji.director.load(l,"Scene");return console.log("test:>1",e),e.currency?pu().then((function(t){var n=xt()(t,2),i=n[0],o=n[1];return Gv(r,void 0,void 0,ut.a.mark((function t(){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:if("YOUCHAIN"!==jr()||o.isTrial){t.next=6;break}return n=Dr(),t.next=6,Hr.alert(Z[n].delayUpdateAccount);case 6:yu(e);case 7:case"end":return t.stop()}}),t)})))})):pu().then((function(t){var e=xt()(t,2),n=e[0],i=e[1];return Gv(r,void 0,void 0,ut.a.mark((function t(){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&!i.isTrial&&i.currency){t.next=2;break}return t.abrupt("return");case 2:e=i.currency,r=void 0,r=Dr(),e!==paladin.getCurrency()&&Sr.tip(Z[r].platformDiffCurrencyEnterGameErr);case 3:case"end":return t.stop()}var e,r}),t)})))})),ct.a.all([o,h]).then((function(i){var o=new t(xt()(i,1)[0],n);return r.instance=o,o.init(e.socketUrl,s),Vo(Ta,{game:o}),o}))}),this));case 3:case"end":return i.stop()}}),i,this)})))}},{key:"genBgNum",value:function(){var t=Uv()(1,3);return[t,{url:"image/game/normal_bg/bg".concat(t,".jpg"),type:ne.a.IMAGE}]}}]),t}();function $v(t,e){var n=void 0!==gt.a&&_t()(t)||t["@@iterator"];if(!n){if(kt()(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return Yv(t,e);var i=vt()(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return dt()(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Yv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Xv(t){var e=function(){if("undefined"==typeof Reflect||!re.a)return!1;if(re.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(re()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=le()(t);if(e){var r=le()(this).constructor;n=re()(i,arguments,r)}else n=i.apply(this,arguments);return se()(this,n)}}var Kv={confirm:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAWlBMVEUAAADMQkLLQkLLQkL9Y2PLQkLLQkL9Y2PMQkL9Y2PLQkLLQkLdTk75YGD7YmL9Y2P2Xl77YmL9Y2P9Y2P9Y2PLQkL9Y2PLQkL3Xl7cTU3tWFj5YGDoVVXmVFTAQB7jAAAAFnRSTlMA4qyPiltUU9sGBvr59e3cyl/fplYHf9H6ogAAAJVJREFUKM/lzFkOhCAQRdEHCs5TD1WAuv9ttm00xii1Ae/vSS7Wis/7Ree6DHtZRzelm6Z0XyrpUvY/U7S2QNFSvAEDCfXoJW7QkBTooTzK7CR1CBIH1BLXyIX7qKB9nL2G4TmmMxuUiqd7nVh9Acvs3RWdZ7ZYSpjZB3eysCAnwOaXDgVsfsXcAnul0ao6qFLalCv8AOM4RjeBMUEAAAAAAElFTkSuQmCC",delete:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAb1BMVEUAAADLy8ttbGzMzMzMzMxtbGzMzMxtbGzMzMxtbGzMzMxubW3MzMxtbGxtbGyQj4/MzMxtbGxtbGzMzMzMzMzMzMzMzMzMzMzMzMxwb29tbGzMzMxtbGzBwcGtra2NjIy/vr6goKCPjo6kpKSko6Pen5mzAAAAG3RSTlMA/N2piVtVVAYGA+ParPr54ZSKW1Hz5OPf2quDrJY6AAAAqklEQVQoz9XPSQ6DMBBE0TKEeR4yum0Dyf3PGCARLLA76/ztk0oqrMWhfxNy65z7YYytPpeH8v6L6UlaO6Urz+rwRUPpLATiq5svMTrJ1MHn2EfNcQ3BsYBk+2P+8XvgWEFzrFFxXOGumO0MD+NmUyCg0aUjBUgyetn1SVkCRETG8m4wRBHmWiKatBI7CaUnImqxlDZkrUnxKfKO6EXYSoLCK3cqvSJIVngDsvlU0+yaOfMAAAAASUVORK5CYII=",number:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAeFBMVEUAAADGxsa3t7f///////////////////+3t7e3t7fo6Oi3t7fT09P///////+3t7e6urr///+3t7f///+3t7e3t7f///////////////+3t7e3t7f///+3t7fQ0ND29vb19fX7+/v39/fo6Ojh4eHe3t65ubm4uLiqIy5xAAAAHHRSTlMABeKJVQb64VtV/Prp5NvbrqysppSKW1Hz11xTZZ6wfwAAAKVJREFUKM/d00cSgzAQRNEWOefgIIkM97+hMbhwuUBzAP/tq1nMorFlGrlt8aPbPTdMHNURPxXVH2Q6v0xnG6+q8LcaXJkBmKGaQxMVJ6qQUpzCptiGRbEFTva/3FHaoaW4gUexh4DiAEmv1j6BI9UsH2DapNJJY4C7jNc6Li7WSiHbM7ZSlPsMCjHLofn5d5CzKBj2nrE4Fbs4Yk6m+V/ytczZT1+rJlhgr8lBXAAAAABJRU5ErkJggg=="},Wv=[{text:"1",skin:"number",x:20,y:15},{text:"2",skin:"number",x:280,y:15},{text:"3",skin:"number",x:545,y:15},{text:"4",skin:"number",x:20,y:125},{text:"5",skin:"number",x:280,y:125},{text:"6",skin:"number",x:545,y:125},{text:"7",skin:"number",x:20,y:235},{text:"8",skin:"number",x:280,y:235},{text:"9",skin:"number",x:545,y:235},{text:"0",skin:"number",x:810,y:15},{text:"00",skin:"number",x:810,y:125},{text:".",skin:"number",x:810,y:235},{text:"",skin:"confirm",x:1070,y:15},{text:"",skin:"delete",x:1070,y:235}],Qv=Bn.a.CLICK,qv={config:{caller:null,closeOnSide:!0,shadowAlpha:.3,shadowColor:"#000000",nullMsg:"输入的值不能为空",length:11,float:!1,fixed:4,delTxt:"删除",confirmTxt:"确定",input:function(t){},close:function(t,e){}}},Jv=function(t){ae()(n,t);var e=Xv(n);function n(){var t;return it()(this,n),(t=e.call(this)).textValue="",t.firstInput=!1,t.init(),t}return ot()(n,[{key:"destroy",value:function(){zt.a.stage.off(zt.a.Event.RESIZE,this,this.onResize),this.keyBoardMask=null,this.keyBoardPanel=null,this.textValue=null,tr()(le()(n.prototype),"destroy",this).call(this,!0)}},{key:"init",value:function(){this.size(zt.a.stage.width,zt.a.stage.height),this.zOrder=1e3;var t=new np;t.on("input",this,this.onInput),t.on("exit",this,this.onExit);var e=new Zv;e.on("exit",this,(function(e){t.exit(e)})),this.keyBoardMask=e,this.keyBoardPanel=t,this.addChildren(e,t),zt.a.stage.on(zt.a.Event.RESIZE,this,this.onResize)}},{key:"onExit",value:function(t){this.removeSelf(),qv.config.close&&qv.config.close.call(qv.config.caller,t,"confirm"===t?this.textValue+"":null),this.textValue=""}},{key:"onInput",value:function(t){var e=qv.config,n=e.delTxt,i=e.confirmTxt,r=e.nullMsg,o=e.input,a=e.float,u=e.fixed,s=e.length;switch(t){case n:var c=this.textValue.split("");c.pop(),this.textValue=c.join(""),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(r,"#ff0000"),o&&o.call(qv.config.caller,this.textValue);break;case i:this.keyBoardPanel.exit("confirm");break;default:if(this.firstInput&&(this.textValue="",this.firstInput=!1),"."===t){var l;if(!0!==a)return;if(""===this.textValue&&(t="0."),-1!==St()(l=this.textValue).call(l,"."))return}if(!0===a){var h=this.textValue.split(".")[1];if(h&&h.length>=u)return}if((this.textValue+t).length>s)return;this.textValue=this.textValue+t,this.textValue=this.textValue.replace(/^0+/,""),o&&o.call(qv.config.caller,this.textValue),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(r,"#ff0000")}}},{key:"enter",value:function(t,e){var n=this;qv.config=pe()(pe()({},qv.config),e),this.textValue=t,this.firstInput=!0,zt.a.timer.callLater(this,(function(){n.keyBoardMask.update(n.width,n.height,qv.config.shadowAlpha,qv.config.shadowColor,qv.config.closeOnSide),n.keyBoardPanel.enter(n.textValue)})),zt.a.stage.addChild(this)}},{key:"close",value:function(){this.removeSelf(),this.textValue="",this.keyBoardPanel.exit("force")}},{key:"onResize",value:function(){var t=zt.a.stage.width,e=zt.a.stage.height;this.size(t,e),this.keyBoardMask.resize(t,e),this.keyBoardPanel.resize(t,e)}}]),n}(Yt.a),Zv=function(t){ae()(n,t);var e=Xv(n);function n(){var t;return it()(this,n),(t=e.call(this)).configAlpha=null,t.configColor=null,t.closeOnSide=!1,t.on(Qv,ic()(t),(function(){t.closeOnSide&&t.event("exit",["mask",null])})),t}return ot()(n,[{key:"update",value:function(t,e,n,i,r){this.alpha=this.configAlpha=n,this.configColor=i,this.closeOnSide=r,this.resize(t,e)}},{key:"resize",value:function(t,e){this.size(t,e),this.graphics.clear(),this.graphics.drawRect(0,0,this.width,this.height,this.configColor),this.alpha=this.configAlpha}}]),n}(jt.a),tp=function(t){ae()(n,t);var e=Xv(n);function n(){var t;return it()(this,n),(t=e.call(this)).init(),t}return ot()(n,[{key:"destroy",value:function(){tr()(le()(n.prototype),"destroy",this).call(this),this.Mask=null,this.textValue=null,this.originHeight=null}},{key:"init",value:function(){this.originHeight=60;var t=new Zv;t.update(this.width,this.height,.5,"#000000",!1);var e=new nr.a;e.height=30,e.fontSize=30,e.align="center",this.Mask=t,this.textValue=e,this.addChildren(t,e)}},{key:"update",value:function(t,e){this.textValue.color=e,this.textValue.text=t}},{key:"resize",value:function(t,e){var n=e/1334;this.size(t,this.originHeight*n),this.Mask.resize(this.width,this.height),this.textValue.width=t,this.textValue.bottom=0,this.top=-this.height}}]),n}(Yt.a),ep=function(t){ae()(n,t);var e=Xv(n);function n(t,i){var r;return it()(this,n),(r=e.call(this)).init(t,i),r}return ot()(n,[{key:"destroy",value:function(){tr()(le()(n.prototype),"destroy",this).call(this,!0),this.config=null,this.label=null}},{key:"init",value:function(t,e){var n=this;t.width=240,t.height="confirm"===t.skin?210:100,this.config=t,this.skin=Kv[t.skin],this.sizeGrid="15,15,15,15",this.resize(zt.a.stage.width,zt.a.stage.height),this.create(),this.on(Qv,this,(function(){e(n.config.text)}))}},{key:"create",value:function(){var t=this.config,e=t.text,n=t.skin,i=e;"confirm"===n?i=qv.config.confirmTxt:"delete"===n&&(i=qv.config.delTxt),this.config.text=i;var r=new nr.a(i);r.color="confirm"===n?"#ffffff":"#1c1c1c",r.font="arial",r.align="center",r.fontSize=40,r.size(this.width,r.fontSize),r.centerY=0,this.label=r,this.addChild(r)}},{key:"enter",value:function(){var t=this.config,e=t.text,n=t.skin,i=e;"confirm"===n?i=qv.config.confirmTxt:"delete"===n&&(i=qv.config.delTxt),this.config.text=i,this.label.text=i}},{key:"resize",value:function(t,e){var n=t/1334,i=e/1334;this.size(this.config.width*n,this.config.height*i),this.pos(this.config.x*n,this.config.y*i),this.label&&(this.label.width=this.width)}}]),n}(Nt.a),np=function(t){ae()(n,t);var e=Xv(n);function n(){var t;return it()(this,n),(t=e.call(this)).keys=[],t.init(),t}return ot()(n,[{key:"init",value:function(){var t=zt.a.stage.height;t=t<750?750:t,this.size(zt.a.stage.width,t/1334*350),this.bottom=-this.height;var e=new Zv;e.update(this.width,this.height,.5,"#000000",!1);var n=new tp;n.resize(this.width,t),this.inputText=n,this.panelMask=e,this.addChildren(e,n);var i,r=$v(Wv);try{for(r.s();!(i=r.n()).done;){var o,a=i.value;cn()(this).push(new ep(a,dn()(o=this.onClick).call(o,this)))}}catch(t){r.e(t)}finally{r.f()}this.addChildren.apply(this,et()(cn()(this)))}},{key:"onClick",value:function(t){this.event("input",[t])}},{key:"update",value:function(t,e){this.inputText.update(t,e)}},{key:"enter",value:function(t){this.inputText.update(t,"#ffffff"),Cn.a.to(this,{bottom:0},200,Sn.a.cubicOut);var e,n=$v(cn()(this));try{for(n.s();!(e=n.n()).done;){e.value.enter()}}catch(t){n.e(t)}finally{n.f()}}},{key:"exit",value:function(t){var e=this;"force"!==t?Cn.a.to(this,{bottom:-this.height},150,Sn.a.cubicOut,zt.a.Handler.create(this,(function(){e.event("exit",[t])}))):this.bottom=-this.height}},{key:"resize",value:function(t,e){var n=(e=e<750?750:e)/1334;this.size(t,350*n),this.panelMask.resize(this.width,this.height),this.inputText.resize(t,e);for(var i=0,r=$n()(cn()(this));i<r.length;i++){var o=r[i];cn()(this)[o].resize(t,e)}}}]),n}(Yt.a),ip=function(t,e,n,i){return new(n||(n=ct.a))((function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},rp=function(){function t(){it()(this,t),this.bg_monitor=new Tu,this.startApp()}return ot()(t,[{key:"startApp",value:function(){return ip(this,void 0,void 0,ut.a.mark((function t(){var e;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ta.app=this,e=new qh,this.model=e,e.init(),ru(f).subscribe((function(t){t.event.on(G,(function(t){e.initUserInfo(t)}))})),t.next=7,this.startHonor();case 7:return this.keyboard_number=new Jv,t.next=10,oi(.5).then((function(){platform.hideLoading()}));case 10:return t.next=12,Dv.preEnter();case 12:Ae.init();case 13:case"end":return t.stop()}}),t,this)})))}},{key:"startHonor",value:function(){return ip(this,void 0,void 0,ut.a.mark((function t(){var e,n,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.run(Oc,{defaultVersion:u.CdnVersion,versionPath:"./version.json?v=".concat(u.CdnVersion),basePath:u.cndUrl});case 2:return n=Ji.director.setLoadPageForScene("scenes/loading.scene"),i=Ji.director.load(ht()(e=[]).call(e,et()(Kr.common),et()(Kr.font)),"Scene").then((function(){Ji.utils.registerFontSize(go)})),t.next=6,ct.a.all([n,i]);case 6:case"end":return t.stop()}}),t)})))}},{key:"enterGame",value:function(t){var e=this.model.enterGame();return Hv.preEnter(t,e)}}]),t}(),op=n(220),ap=n.n(op);function up(){var t=platform.getInfo();u.SocketUrl=t.socket_url,u.token=t.token,u.isLogin=t.isLogin,u.cndUrl=t.cdn,u.lang=sp(t.lang)}function sp(t){var e=t,n=b.En;return"en"===e?n="en":"zh-Hant"===e?n="hk":"zh-Hans"===e?n="zh":"ja"===e?n="jp":"ko"===e&&(n="kor"),n}Math.log2=ap.a||function(t){return Math.log(t)*Math.LOG2E},up(),new rp}});