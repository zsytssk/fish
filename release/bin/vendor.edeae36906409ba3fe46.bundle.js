!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=948)}([function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=function(){function t(){r()(this,t)}return s()(t,null,[{key:"regClass",value:function(e){t.__classMap[e.name]=e}}]),t}();o.Laya=null,o.Timer=null,o.WorkerLoader=null,o.Dragging=null,o.GraphicsBounds=null,o.Sprite=null,o.TextRender=null,o.TextAtlas=null,o.timer=null,o.systemTimer=null,o.startTimer=null,o.updateTimer=null,o.lateTimer=null,o.physicsTimer=null,o.stage=null,o.Loader=null,o.loader=null,o.TTFLoader=null,o.SoundManager=null,o.WebAudioSound=null,o.AudioSound=null,o.ShaderCompile=null,o.ClassUtils=null,o.SceneUtils=null,o.Context=null,o.Render=null,o.MouseManager=null,o.Text=null,o.Browser=null,o.WebGL=null,o.Pool=null,o.Utils=null,o.Graphics=null,o.Submit=null,o.Stage=null,o.Resource=null,o.__classMap={}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){var n=i(615),r=i(434);function a(e){return t.exports=a=r?n:function(t){return t.__proto__||n(t)},a(e)}t.exports=a},function(t,e,i){t.exports=i(605)},function(t,e,i){var n=i(352);function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),n(t,r.key,r)}}t.exports=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(42),h=i(0),l=function(){function t(){r()(this,t)}return s()(t,[{key:"setTo",value:function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this}},{key:"stopPropagation",value:function(){this._stoped=!0}},{key:"touches",get:function(){if(!this.nativeEvent)return null;var t=this.nativeEvent.touches;if(t)for(var e=h.a.stage,i=0,n=t.length;i<n;i++){var r=t[i],a=o.a.TEMP;a.setTo(r.clientX,r.clientY),e._canvasTransform.invertTransformPoint(a),e.transform.invertTransformPoint(a),r.stageX=a.x,r.stageY=a.y}return t}},{key:"altKey",get:function(){return this.nativeEvent.altKey}},{key:"ctrlKey",get:function(){return this.nativeEvent.ctrlKey}},{key:"shiftKey",get:function(){return this.nativeEvent.shiftKey}},{key:"charCode",get:function(){return this.nativeEvent.charCode}},{key:"keyLocation",get:function(){return this.nativeEvent.location||this.nativeEvent.keyLocation}},{key:"stageX",get:function(){return h.a.stage.mouseX}},{key:"stageY",get:function(){return h.a.stage.mouseY}}]),t}();l.EMPTY=new l,l.MOUSE_DOWN="mousedown",l.MOUSE_UP="mouseup",l.CLICK="click",l.RIGHT_MOUSE_DOWN="rightmousedown",l.RIGHT_MOUSE_UP="rightmouseup",l.RIGHT_CLICK="rightclick",l.MOUSE_MOVE="mousemove",l.MOUSE_OVER="mouseover",l.MOUSE_OUT="mouseout",l.MOUSE_WHEEL="mousewheel",l.ROLL_OVER="mouseover",l.ROLL_OUT="mouseout",l.DOUBLE_CLICK="doubleclick",l.CHANGE="change",l.CHANGED="changed",l.RESIZE="resize",l.ADDED="added",l.REMOVED="removed",l.DISPLAY="display",l.UNDISPLAY="undisplay",l.ERROR="error",l.COMPLETE="complete",l.LOADED="loaded",l.READY="ready",l.PROGRESS="progress",l.INPUT="input",l.RENDER="render",l.OPEN="open",l.MESSAGE="message",l.CLOSE="close",l.KEY_DOWN="keydown",l.KEY_PRESS="keypress",l.KEY_UP="keyup",l.FRAME="enterframe",l.DRAG_START="dragstart",l.DRAG_MOVE="dragmove",l.DRAG_END="dragend",l.ENTER="enter",l.SELECT="select",l.BLUR="blur",l.FOCUS="focus",l.VISIBILITY_CHANGE="visibilitychange",l.FOCUS_CHANGE="focuschange",l.PLAYED="played",l.PAUSED="paused",l.STOPPED="stopped",l.START="start",l.END="end",l.COMPONENT_ADDED="componentadded",l.COMPONENT_REMOVED="componentremoved",l.RELEASED="released",l.LINK="link",l.LABEL="label",l.FULL_SCREEN_CHANGE="fullscreenchange",l.DEVICE_LOST="devicelost",l.TRANSFORM_CHANGED="transformchanged",l.ANIMATION_CHANGED="animationchanged",l.TRAIL_FILTER_CHANGE="trailfilterchange",l.TRIGGER_ENTER="triggerenter",l.TRIGGER_STAY="triggerstay",l.TRIGGER_EXIT="triggerexit"},function(t,e,i){var n=i(626),r=i(630);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=n(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,i){var n=i(432),r=i(622),a=i(433);function s(e,i,o){return"undefined"!=typeof Reflect&&r?t.exports=s=r:t.exports=s=function(t,e,i){var r=a(t,e);if(r){var s=n(r,e);return s.get?s.get.call(i):s.value}},s(e,i,o||e)}t.exports=s},function(t,e,i){var n=i(210),r=i(43);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e}},function(t,e,i){t.exports=i(506)},function(t,e,i){"use strict";i.d(e,"a",(function(){return _}));var n=i(79),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(18),u=i(110),c=i(0),f=i(356),_=function(){function t(){s()(this,t)}return h()(t,null,[{key:"regClass",value:function(e,i){t._classMap[e]=i}},{key:"regShortClassName",value:function(e){for(var i=0;i<e.length;i++){var n=e[i],r=n.name;t._classMap[r]=n}}},{key:"getRegClass",value:function(e){return t._classMap[e]}},{key:"getClass",value:function(e){var i=t._classMap[e]||t._classMap["Laya."+e]||e,n=c.a.Laya;return"string"==typeof i?c.a.__classMap[i]||n[e]:i}},{key:"getInstance",value:function(e){var i=t.getClass(e);return i?new i:(console.warn("[error] Undefined class:",e),null)}},{key:"createByJson",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"==typeof e&&(e=JSON.parse(e));var s=e.props;if(!i&&!(i=a?a.runWith(e):t.getInstance(s.runtime||e.type)))return null;var o=e.child;if(o)for(var h=0,l=o.length;h<l;h++){var u=o[h];if("render"!==u.props.name&&"render"!==u.props.renderType||!i._$set_itemRender)if("Graphic"==u.type)t._addGraphicsToSprite(u,i);else if(t._isDrawType(u.type))t._addGraphicToSprite(u,i,!0);else{var c=t.createByJson(u,null,n,r,a);"Script"===u.type?"owner"in c?c.owner=i:"target"in c&&(c.target=i):"mask"==u.props.renderType?i.mask=c:i.addChild(c)}else i.itemRender=u}if(s)for(var f in s){var _=s[f];"var"===f&&n?n[_]=i:_ instanceof Array&&i[f]instanceof Function?i[f].apply(i,_):i[f]=_}return r&&e.customProps&&r.runWith([i,e]),i.created&&i.created(),i}},{key:"_addGraphicsToSprite",value:function(e,i){var n=e.child;if(n&&!(n.length<1)){var r,a,s=t._getGraphicsFromSprite(e,i),o=0,h=0;for(e.props&&(o=t._getObjVar(e.props,"x",0),h=t._getObjVar(e.props,"y",0)),0!=o&&0!=h&&s.translate(o,h),a=n.length,r=0;r<a;r++)t._addGraphicToGraphics(n[r],s);0!=o&&0!=h&&s.translate(-o,-h)}}},{key:"_addGraphicToSprite",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?t._getGraphicsFromSprite(e,i):i.graphics;t._addGraphicToGraphics(e,r)}},{key:"_getGraphicsFromSprite",value:function(t,e){if(!t||!t.props)return e.graphics;var i=t.props.renderType;if("hit"===i||"unHit"===i){var n=e._style.hitArea||(e.hitArea=new f.a);n[i]||(n[i]=new u.a);var r=n[i]}return r||(r=e.graphics),r}},{key:"_getTransformData",value:function(e){var i;("pivotX"in e||"pivotY"in e)&&(i=i||new l.a).translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0));var n=t._getObjVar(e,"scaleX",1),r=t._getObjVar(e,"scaleY",1),a=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0);return 1==n&&1==r&&0==a||((i=i||new l.a).scale(n,r),i.rotate(.0174532922222222*a)),i}},{key:"_addGraphicToGraphics",value:function(e,i){var n,r;if((n=e.props)&&(r=t.DrawTypeDic[e.type])){var a=i,s=t._getParams(n,r[1],r[2],r[3]),o=t._tM;(o||1!=t._alpha)&&(a.save(),o&&a.transform(o),1!=t._alpha&&a.alpha(t._alpha)),a[r[0]].apply(a,s),(o||1!=t._alpha)&&a.restore()}}},{key:"_adptLineData",value:function(t){return t[2]=r()(t[0])+r()(t[2]),t[3]=r()(t[1])+r()(t[3]),t}},{key:"_adptTextureData",value:function(t){return t[0]=c.a.Loader.getRes(t[0]),t}},{key:"_adptLinesData",value:function(e){return e[2]=t._getPointListByStr(e[2]),e}},{key:"_isDrawType",value:function(e){return"Image"!==e&&e in t.DrawTypeDic}},{key:"_getParams",value:function(e,i){var n,r,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=t._temParam;for(h.length=i.length,r=i.length,n=0;n<r;n++)h[n]=t._getObjVar(e,i[n][0],i[n][1]);return t._alpha=t._getObjVar(e,"alpha",1),(a=t._getTransformData(e))?(s||(s=0),a.translate(h[s],h[s+1]),h[s]=h[s+1]=0,t._tM=a):t._tM=null,o&&t[o]&&(h=t[o](h)),h}},{key:"_getPointListByStr",value:function(t){var e,i,n=t.split(",");for(i=n.length,e=0;e<i;e++)n[e]=r()(n[e]);return n}},{key:"_getObjVar",value:function(t,e,i){return e in t?t[e]:i}}]),t}();_.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]},_._temParam=[],_._classMap={}},function(t,e,i){t.exports=i(507)},function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i(82),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(0),f=function(){function t(){h()(this,t)}return u()(t,null,[{key:"__init__",value:function(){var e=window.Laya||c.a.Laya;if(t._window)return t._window;var i=t._window=window,n=t._document=i.document,r=t.userAgent=i.navigator.userAgent,a=i.navigator.maxTouchPoints||0,o=i.navigator.platform;s()(r).call(r,"AlipayMiniGame")>-1&&"my"in t.window&&(window.aliPayMiniGame(e,e),e.ALIMiniAdapter?e.ALIMiniAdapter.enable():console.error("请先添加阿里小游戏适配库")),-1==s()(r).call(r,"OPPO")&&s()(r).call(r,"MiniGame")>-1&&"wx"in t.window&&("bl"in t.window?(window.biliMiniGame(e,e),e.BLMiniAdapter?e.BLMiniAdapter.enable():console.error("请引入bilibili小游戏的适配库：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")):"qq"in t.window?(window.qqMiniGame(e,e),e.QQMiniAdapter?e.QQMiniAdapter.enable():console.error("请引入手机QQ小游戏的适配库：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")):(window.wxMiniGame(e,e),e.MiniAdpter?e.MiniAdpter.enable():console.error("请先添加小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0"))),s()(r).call(r,"MiniGame")>-1&&"qq"in t.window&&(window.qqMiniGame(e,e),e.QQMiniAdapter?e.QQMiniAdapter.enable():console.error("请先添加小游戏适配库,详细教程")),s()(r).call(r,"SwanGame")>-1&&(window.bdMiniGame(e,e),e.BMiniAdapter?e.BMiniAdapter.enable():console.error("请先添加百度小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")),s()(r).call(r,"QuickGame")>-1&&(window.miMiniGame(e,e),e.KGMiniAdapter?e.KGMiniAdapter.enable():console.error("请先添加小米小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")),s()(r).call(r,"OPPO")>-1&&s()(r).call(r,"MiniGame")>-1&&(window.qgMiniGame(e,e),e.QGMiniAdapter?e.QGMiniAdapter.enable():console.error("请先添加OPPO小游戏适配库")),s()(r).call(r,"VVGame")>-1&&(window.vvMiniGame(e,e),e.VVMiniAdapter?e.VVMiniAdapter.enable():console.error("请先添加VIVO小游戏适配库")),i.trace=console.log,i.requestAnimationFrame=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(t){return i.setTimeout(t,1e3/60)};var h=n.body.style;h.margin=0,h.overflow="hidden",h["-webkit-user-select"]="none",h["-webkit-tap-highlight-color"]="rgba(200,200,200,0)";for(var l=n.getElementsByTagName("meta"),u=0,f=!1,_="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";u<l.length;){var d=l[u];if("viewport"==d.name){d.content=_,f=!0;break}u++}return f||((d=n.createElement("meta")).name="viewport",d.content=_,n.getElementsByTagName("head")[0].appendChild(d)),t.onMobile=!!window.isConchApp||s()(r).call(r,"Mobile")>-1,t.onIOS=!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t.onIPhone=s()(r).call(r,"iPhone")>-1,t.onMac=s()(r).call(r,"Mac OS X")>-1,t.onIPad=s()(r).call(r,"iPad")>-1||"MacIntel"===o&&a>1,t.onAndroid=s()(r).call(r,"Android")>-1||s()(r).call(r,"Adr")>-1,t.onWP=s()(r).call(r,"Windows Phone")>-1,t.onQQBrowser=s()(r).call(r,"QQBrowser")>-1,t.onMQQBrowser=s()(r).call(r,"MQQBrowser")>-1||s()(r).call(r,"Mobile")>-1&&s()(r).call(r,"QQ")>-1,t.onIE=!!i.ActiveXObject||"ActiveXObject"in i,t.onWeiXin=s()(r).call(r,"MicroMessenger")>-1,t.onSafari=s()(r).call(r,"Safari")>-1,t.onPC=!t.onMobile,t.onMiniGame=s()(r).call(r,"MiniGame")>-1,t.onBDMiniGame=s()(r).call(r,"SwanGame")>-1,t.onLayaRuntime=!!t.window.conch,s()(r).call(r,"OPPO")>-1&&s()(r).call(r,"MiniGame")>-1?(t.onQGMiniGame=!0,t.onMiniGame=!1):"qq"in t.window&&s()(r).call(r,"MiniGame")>-1?(t.onQQMiniGame=!0,t.onMiniGame=!1):"bl"in t.window&&s()(r).call(r,"MiniGame")>-1&&(t.onBLMiniGame=!0,t.onMiniGame=!0),t.onVVMiniGame=s()(r).call(r,"VVGame")>-1,t.onKGMiniGame=s()(r).call(r,"QuickGame")>-1,s()(r).call(r,"AlipayMiniGame")>-1&&(t.onAlipayMiniGame=!0,t.onMiniGame=!1),i}},{key:"createElement",value:function(e){return t.__init__(),t._document.createElement(e)}},{key:"getElementById",value:function(e){return t.__init__(),t._document.getElementById(e)}},{key:"removeElement",value:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"now",value:function(){return r()()}},{key:"clientWidth",get:function(){return t.__init__(),t._window.innerWidth||t._document.body.clientWidth}},{key:"clientHeight",get:function(){return t.__init__(),t._window.innerHeight||t._document.body.clientHeight||t._document.documentElement.clientHeight}},{key:"width",get:function(){return t.__init__(),(c.a.stage&&c.a.stage.canvasRotation?t.clientHeight:t.clientWidth)*t.pixelRatio}},{key:"height",get:function(){return t.__init__(),(c.a.stage&&c.a.stage.canvasRotation?t.clientWidth:t.clientHeight)*t.pixelRatio}},{key:"pixelRatio",get:function(){var e;t._pixelRatio<0&&(t.__init__(),s()(e=t.userAgent).call(e,"Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?t._pixelRatio=2:(t._pixelRatio=t._window.devicePixelRatio||1,t._pixelRatio<1&&(t._pixelRatio=1)));return t._pixelRatio}},{key:"container",get:function(){return t._container||(t.__init__(),t._container=t.createElement("div"),t._container.id="layaContainer",t._document.body.appendChild(t._container)),t._container},set:function(e){t._container=e}},{key:"window",get:function(){return t._window||t.__init__()}},{key:"document",get:function(){return t.__init__(),t._document}}]),t}();f._pixelRatio=-1,f.mainCanvas=null,f.hanzi=new RegExp("^[一-龥]$"),f.fontMap=[],f.measureText=function(t,e){var i=f.hanzi.test(t);if(i&&f.fontMap[e])return f.fontMap[e];var n=f.context;n.font=e;var r=n.measureText(t);return i&&(f.fontMap[e]=r),r}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=function(){function t(){r()(this,t)}return s()(t,null,[{key:"getPoolBySign",value:function(e){return t._poolDic[e]||(t._poolDic[e]=[])}},{key:"clearBySign",value:function(e){t._poolDic[e]&&(t._poolDic[e].length=0)}},{key:"recover",value:function(e,i){i[t.POOLSIGN]||(i[t.POOLSIGN]=!0,t.getPoolBySign(e).push(i))}},{key:"recoverByClass",value:function(e){if(e){var i=e.__className||e.constructor._$gid;i&&t.recover(i,e)}}},{key:"_getClassSign",value:function(e){var i=e.__className||e._$gid;return i||(e._$gid=i=t._CLSID+"",t._CLSID++),i}},{key:"createByClass",value:function(e){return t.getItemByClass(t._getClassSign(e),e)}},{key:"getItemByClass",value:function(e,i){if(!t._poolDic[e])return new i;var n=t.getPoolBySign(e);if(n.length){var r=n.pop();r[t.POOLSIGN]=!1}else r=new i;return r}},{key:"getItemByCreateFun",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.getPoolBySign(e),a=r.length?r.pop():i.call(n);return a[t.POOLSIGN]=!1,a}},{key:"getItem",value:function(e){var i=t.getPoolBySign(e),n=i.length?i.pop():null;return n&&(n[t.POOLSIGN]=!1),n}}]),t}();o._CLSID=0,o.POOLSIGN="__InPool",o._poolDic={}},function(t,e,i){t.exports=i(511)},function(t,e,i){t.exports=i(551)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.ARRAY_BUFFER_TYPE_DATA=0,a.ARRAY_BUFFER_TYPE_CMD=1,a.ARRAY_BUFFER_REF_REFERENCE=0,a.ARRAY_BUFFER_REF_COPY=1,a.UPLOAD_SHADER_UNIFORM_TYPE_ID=0,a.UPLOAD_SHADER_UNIFORM_TYPE_DATA=1},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(0),h=i(16),l=function(){function t(){r()(this,t)}return s()(t,null,[{key:"__init__",value:function(){var e=h.a.instance;t._depthFunc=e.LESS,t._blendEquation=e.FUNC_ADD,t._blendEquationRGB=e.FUNC_ADD,t._blendEquationAlpha=e.FUNC_ADD,t._sFactor=e.ONE,t._dFactor=e.ZERO,t._sFactorAlpha=e.ONE,t._dFactorAlpha=e.ZERO,t._activedTextureID=e.TEXTURE0,t._glTextureIDs=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5,e.TEXTURE6,e.TEXTURE7]}},{key:"useProgram",value:function(e,i){return t._useProgram!==i&&(e.useProgram(i),t._useProgram=i,!0)}},{key:"setDepthTest",value:function(e,i){i!==t._depthTest&&(t._depthTest=i,i?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST))}},{key:"setDepthMask",value:function(e,i){i!==t._depthMask&&(t._depthMask=i,e.depthMask(i))}},{key:"setDepthFunc",value:function(e,i){i!==t._depthFunc&&(t._depthFunc=i,e.depthFunc(i))}},{key:"setBlend",value:function(e,i){i!==t._blend&&(t._blend=i,i?e.enable(e.BLEND):e.disable(e.BLEND))}},{key:"setBlendEquation",value:function(e,i){i!==t._blendEquation&&(t._blendEquation=i,t._blendEquationRGB=t._blendEquationAlpha=null,e.blendEquation(i))}},{key:"setBlendEquationSeparate",value:function(e,i,n){i===t._blendEquationRGB&&n===t._blendEquationAlpha||(t._blendEquationRGB=i,t._blendEquationAlpha=n,t._blendEquation=null,e.blendEquationSeparate(i,n))}},{key:"setBlendFunc",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(r||i!==t._sFactor||n!==t._dFactor)&&(t._sFactor=i,t._dFactor=n,t._sFactorRGB=null,t._dFactorRGB=null,t._sFactorAlpha=null,t._dFactorAlpha=null,e.blendFunc(i,n))}},{key:"setBlendFuncSeperate",value:function(e,i,n,r,a){i===t._sFactorRGB&&n===t._dFactorRGB&&r===t._sFactorAlpha&&a===t._dFactorAlpha||(t._sFactorRGB=i,t._dFactorRGB=n,t._sFactorAlpha=r,t._dFactorAlpha=a,t._sFactor=null,t._dFactor=null,e.blendFuncSeparate(i,n,r,a))}},{key:"setCullFace",value:function(e,i){i!==t._cullFace&&(t._cullFace=i,i?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE))}},{key:"setFrontFace",value:function(e,i){i!==t._frontFace&&(t._frontFace=i,e.frontFace(i))}},{key:"activeTexture",value:function(e,i){t._activedTextureID!==i&&(e.activeTexture(i),t._activedTextureID=i)}},{key:"bindTexture",value:function(e,i,n){t._activeTextures[t._activedTextureID-e.TEXTURE0]!==n&&(e.bindTexture(i,n),t._activeTextures[t._activedTextureID-e.TEXTURE0]=n)}},{key:"__init_native",value:function(){if(o.a.Render.supportWebGLPlusRendering){var e=t;e.activeTexture=e.activeTextureForNative,e.bindTexture=e.bindTextureForNative}}},{key:"useProgramForNative",value:function(t,e){return t.useProgram(e),!0}},{key:"setDepthTestForNative",value:function(t,e){e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}},{key:"setDepthMaskForNative",value:function(t,e){t.depthMask(e)}},{key:"setDepthFuncForNative",value:function(t,e){t.depthFunc(e)}},{key:"setBlendForNative",value:function(t,e){e?t.enable(t.BLEND):t.disable(t.BLEND)}},{key:"setBlendFuncForNative",value:function(t,e,i){t.blendFunc(e,i)}},{key:"setCullFaceForNative",value:function(t,e){e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE)}},{key:"setFrontFaceForNative",value:function(t,e){t.frontFace(e)}},{key:"activeTextureForNative",value:function(t,e){t.activeTexture(e)}},{key:"bindTextureForNative",value:function(t,e,i){t.bindTexture(e,i)}},{key:"bindVertexArrayForNative",value:function(t,e){t.bindVertexArray(e)}}]),t}();l._activeTextures=new Array(8),l._useProgram=null,l._depthTest=!0,l._depthMask=!0,l._blend=!1,l._cullFace=!1,l.mainContext=null},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(r()(this,t),this._bTransform=!1,null!=t._createFun)return t._createFun(e,i,n,a,s,o,h);this.a=e,this.b=i,this.c=n,this.d=a,this.tx=s,this.ty=o,this._checkTransform()}return s()(t,[{key:"identity",value:function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this._bTransform=!1,this}},{key:"_checkTransform",value:function(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d}},{key:"setTranslate",value:function(t,e){return this.tx=t,this.ty=e,this}},{key:"translate",value:function(t,e){return this.tx+=t,this.ty+=e,this}},{key:"scale",value:function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this._bTransform=!0,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this._bTransform=!0,this}},{key:"skew",value:function(t,e){var i=Math.tan(t),n=Math.tan(e),r=this.a,a=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*r,this.d+=i*a,this}},{key:"invertTransformPoint",value:function(t){var e=this.a,i=this.b,n=this.c,r=this.d,a=this.tx,s=e*r-i*n,o=r/s,h=-i/s,l=-n/s,u=e/s,c=(n*this.ty-r*a)/s,f=-(e*this.ty-i*a)/s;return t.setTo(o*t.x+l*t.y+c,h*t.x+u*t.y+f)}},{key:"transformPoint",value:function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)}},{key:"transformPointN",value:function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)}},{key:"getScaleX",value:function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)}},{key:"getScaleY",value:function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)}},{key:"invert",value:function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*r)/a,this.ty=-(t*this.ty-e*r)/a,this}},{key:"setTo",value:function(t,e,i,n,r,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=a,this}},{key:"concat",value:function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}},{key:"scaleEx",value:function(t,e){var i=this.a,n=this.b,r=this.c,a=this.d;0!==n||0!==r?(this.a=t*i,this.b=t*n,this.c=e*r,this.d=e*a):(this.a=t*i,this.b=0*a,this.c=0*i,this.d=e*a),this._bTransform=!0}},{key:"rotateEx",value:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.b,a=this.c,s=this.d;0!==r||0!==a?(this.a=e*n+i*a,this.b=e*r+i*s,this.c=-i*n+e*a,this.d=-i*r+e*s):(this.a=e*n,this.b=i*s,this.c=-i*n,this.d=e*s),this._bTransform=!0}},{key:"clone",value:function(){var e=t.create();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e._bTransform=this._bTransform,e}},{key:"copyTo",value:function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t._bTransform=this._bTransform,t}},{key:"toString",value:function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty}},{key:"destroy",value:function(){this.recover()}},{key:"recover",value:function(){o.a.recover("Matrix",this.identity())}}],[{key:"mul",value:function(t,e,i){var n=t.a,r=t.b,a=t.c,s=t.d,o=t.tx,h=t.ty,l=e.a,u=e.b,c=e.c,f=e.d,_=e.tx,d=e.ty;return 0!==u||0!==c?(i.a=n*l+r*c,i.b=n*u+r*f,i.c=a*l+s*c,i.d=a*u+s*f,i.tx=l*o+c*h+_,i.ty=u*o+f*h+d):(i.a=n*l,i.b=r*f,i.c=a*l,i.d=s*f,i.tx=l*o+_,i.ty=f*h+d),i}},{key:"mul16",value:function(t,e,i){var n=t.a,r=t.b,a=t.c,s=t.d,o=t.tx,h=t.ty,l=e.a,u=e.b,c=e.c,f=e.d,_=e.tx,d=e.ty;return 0!==u||0!==c?(i[0]=n*l+r*c,i[1]=n*u+r*f,i[4]=a*l+s*c,i[5]=a*u+s*f,i[12]=l*o+c*h+_,i[13]=u*o+f*h+d):(i[0]=n*l,i[1]=r*f,i[4]=a*l,i[5]=s*f,i[12]=l*o+_,i[13]=f*h+d),i}},{key:"create",value:function(){return o.a.getItemByClass("Matrix",t)}}]),t}();h.EMPTY=new h,h.TEMP=new h,h._createFun=null},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(38),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s()(this,t),this.once=!1,this._id=0,this.setTo(e,i,n,r)}return h()(t,[{key:"setTo",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=r,this}},{key:"run",value:function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e}},{key:"runWith",value:function(t){var e;if(null==this.method)return null;var i=this._id;if(null==t)var n=this.method.apply(this.caller,this.args);else n=this.args||t.unshift?this.args?this.method.apply(this.caller,r()(e=this.args).call(e,t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===i&&this.once&&this.recover(),n}},{key:"clear",value:function(){return this.caller=null,this.method=null,this.args=null,this}},{key:"recover",value:function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))}}],[{key:"create",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return t._pool.length?t._pool.pop().setTo(e,i,n,r):new t(e,i,n,r)}}]),t}();l._pool=[],l._gid=1},,function(t,e,i){"use strict";i.d(e,"a",(function(){return X}));var n=i(3),r=i.n(n),a=i(88),s=i.n(a),o=i(79),h=i.n(o),l=i(152),u=i.n(l),c=i(148),f=i.n(c),_=i(11),d=i.n(_),v=i(1),p=i.n(v),y=i(4),g=i.n(y),m=i(6),x=i.n(m),k=i(8),T=i.n(k),b=i(2),C=i.n(b),w=i(0),S=i(312),E=i(75),A=i(5),M=i(66),R=i(117),I=i(202),D=i(57),P=i(107),L=i(12),B=i(139),O=i(19),F=i(34),N=i(313),U=i(258),G=i(40),Y=i(25),W=i(114);function V(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=C()(t);if(e){var a=C()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return T()(this,i)}}var X=function(t){x()(i,t);var e=V(i);function i(){var t;return p()(this,i),(t=e.apply(this,arguments))._customParse=!1,t}return g()(i,[{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:w.a.WorkerLoader.enable;if(t){var o;if(i.setGroup(t,"666"),this._url=t,0===d()(t).call(t,"data:image")?e=i.IMAGE:t=G.a.formatURL(t),this._type=e||(e=i.getTypeFromUrl(this._url)),this._cache=n,this._useWorkerLoader=s,this._data=null,s&&w.a.WorkerLoader.enableWorkerLoader(),o=e==i.IMAGE?i.textureMap[t]:i.loadedMap[t],!a&&o)return this._data=o,this.event(A.a.PROGRESS,1),void this.event(A.a.COMPLETE,this._data);if(r&&i.setGroup(t,r),null!=i.parserMap[e])return this._customParse=!0,void(i.parserMap[e]instanceof O.a?i.parserMap[e].runWith(this):i.parserMap[e].call(null,this));this._loadResourceFilter(e,t)}else this.onLoaded(null)}},{key:"_loadResourceFilter",value:function(t,e){this._loadResource(t,e)}},{key:"_loadResource",value:function(t,e){switch(t){case i.IMAGE:case"htmlimage":case"nativeimage":this._loadImage(e);break;case i.SOUND:this._loadSound(e);break;case i.TTF:this._loadTTF(e);break;case i.ATLAS:case i.PREFAB:case i.PLF:this._loadHttpRequestWhat(e,i.JSON);break;case i.FONT:this._loadHttpRequestWhat(e,i.XML);break;case i.PLFB:this._loadHttpRequestWhat(e,i.BUFFER);break;default:this._loadHttpRequestWhat(e,t)}}},{key:"_loadHttpRequest",value:function(t,e,i,n,r,a,s,o){L.a.onVVMiniGame?this._http=new U.a:this._http||(this._http=new U.a),a&&this._http.on(A.a.PROGRESS,r,a),n&&this._http.on(A.a.COMPLETE,i,n),this._http.on(A.a.ERROR,s,o),this._http.send(t,null,"get",e)}},{key:"_loadHtmlImage",value:function(t,e,n,r,a){var s;function o(){var e=s;e.onload=null,e.onerror=null,delete i._imgCache[t]}(s=new L.a.window.Image).crossOrigin="",s.onload=function(){o(),n.call(e,s)},s.onerror=function(){o(),a.call(r)},s.src=t,i._imgCache[t]=s}},{key:"_loadHttpRequestWhat",value:function(t,e){i.preLoadedMap[t]?this.onLoaded(i.preLoadedMap[t]):this._loadHttpRequest(t,e,this,this.onLoaded,this,this.onProgress,this,this.onError)}},{key:"_loadTTF",value:function(t){t=G.a.formatURL(t);var e=new w.a.TTFLoader;e.complete=O.a.create(this,this.onLoaded),e.load(t)}},{key:"_loadImage",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;e&&(t=G.a.formatURL(t));var r=function(){n.event(A.a.ERROR,"Load image failed")};if("nativeimage"===this._type)this._loadHtmlImage(t,this,this.onLoaded,this,r);else{var a=F.a.getFileExtension(t);"ktx"===a||"pvr"===a?this._loadHttpRequest(t,i.BUFFER,this,this.onLoaded,this,this.onProgress,this,this.onError):this._loadHtmlImage(t,this,this.onLoaded,this,r)}}},{key:"_loadSound",value:function(t){var e=new R.a._soundClass,i=this;function n(){e.offAll()}e.on(A.a.COMPLETE,this,(function(){n(),i.onLoaded(e)})),e.on(A.a.ERROR,this,(function(){n(),e.dispose(),i.event(A.a.ERROR,"Load sound failed")})),e.load(t)}},{key:"onProgress",value:function(t){this._type===i.ATLAS?this.event(A.a.PROGRESS,.3*t):this.event(A.a.PROGRESS,t)}},{key:"onError",value:function(t){this.event(A.a.ERROR,t)}},{key:"onLoaded",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._type;if(e==i.PLFB)this.parsePLFBData(t),this.complete(t);else if(e==i.PLF)this.parsePLFData(t),this.complete(t);else if(e===i.IMAGE){if(t instanceof ArrayBuffer){var n,r=F.a.getFileExtension(this._url);switch(r){case"ktx":n=Y.a.ETC1RGB;break;case"pvr":n=Y.a.PVRTCRGBA_4BPPV;break;default:return void console.error("unknown format",r)}(m=new P.a(0,0,n,!1,!1)).wrapModeU=W.a.Clamp,m.wrapModeV=W.a.Clamp,m.setCompressData(t),m._setCreateURL(this.url)}else if(!(t instanceof P.a)){(m=new P.a(t.width,t.height,1,!1,!1)).wrapModeU=W.a.Clamp,m.wrapModeV=W.a.Clamp,m.loadImageSource(t,!0),m._setCreateURL(t.src)}var a=new D.a(m);a.url=this._url,this.complete(a)}else if(e===i.SOUND||"nativeimage"===e)this.complete(t);else if("htmlimage"===e){(m=new P.a(t.width,t.height,1,!1,!1)).wrapModeU=W.a.Clamp,m.wrapModeV=W.a.Clamp,m.loadImageSource(t,!0),m._setCreateURL(t.src),this.complete(m)}else if(e===i.ATLAS){if(t.frames){var s=[];if(!this._data){if(this._data=t,t.meta&&t.meta.image){var o,l;s=t.meta.image.split(",");var c=d()(o=this._url).call(o,"/")>=0?"/":"\\",_=f()(l=this._url).call(l,c),v=_>=0?this._url.substr(0,_+1):"",p=null;L.a.onAndroid&&t.meta.compressTextureAndroid&&(p=".ktx"),L.a.onIOS&&t.meta.compressTextureIOS&&(p=".pvr");for(var y=0,g=s.length;y<g;y++)s[y]=p?v+s[y].replace(".png",p):v+s[y]}else s=[this._url.replace(".json",".png")];u()(s).call(s),t.toLoads=s,t.pics=[]}return this.event(A.a.PROGRESS,.3+1/s.length*.6),this._loadResourceFilter(i.IMAGE,s.pop())}var m;if(t instanceof P.a||((m=new P.a(t.width,t.height,1,!1,!1)).wrapModeU=I.a.WARPMODE_CLAMP,m.wrapModeV=I.a.WARPMODE_CLAMP,m.loadImageSource(t,!0),m._setCreateURL(t.src),t=m),this._data.pics.push(t),this._data.toLoads.length>0)return this.event(A.a.PROGRESS,.3+1/this._data.toLoads.length*.6),this._loadResourceFilter(i.IMAGE,this._data.toLoads.pop());var x=this._data.frames,k=this._url.split("?")[0],T=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:k.substring(0,f()(k).call(k,"."))+"/",b=this._data.pics,C=G.a.formatURL(this._url),w=i.atlasMap[C]||(i.atlasMap[C]=[]);w.dir=T;var M=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var R in M=h()(this._data.meta.scale),x){var B,O=x[R],U=b[O.frame.idx?O.frame.idx:0],V=G.a.formatURL(T+R);U.scaleRate=M,B=D.a._create(U,O.frame.x,O.frame.y,O.frame.w,O.frame.h,O.spriteSourceSize.x,O.spriteSourceSize.y,O.sourceSize.w,O.sourceSize.h,i.getRes(V)),i.cacheTexture(V,B),B.url=V,w.push(V)}else for(R in x)U=b[(O=x[R]).frame.idx?O.frame.idx:0],V=G.a.formatURL(T+R),B=D.a._create(U,O.frame.x,O.frame.y,O.frame.w,O.frame.h,O.spriteSourceSize.x,O.spriteSourceSize.y,O.sourceSize.w,O.sourceSize.h,i.getRes(V)),i.cacheTexture(V,B),B.url=V,w.push(V);delete this._data.pics,this.complete(this._data)}else if(e===i.FONT){if(!t._source)return this._data=t,this.event(A.a.PROGRESS,.5),this._loadResourceFilter(i.IMAGE,this._url.replace(".fnt",".png"));var X=new N.a;X.parseFont(this._data,new D.a(t));var H=this._url.split(".fnt")[0].split("/"),z=H[H.length-1];E.a.registerBitmapFont(z,X),this._data=X,this.complete(this._data)}else if(e===i.PREFAB){var j=new S.a;j.json=t,this.complete(j)}else this.complete(t)}},{key:"parsePLFData",value:function(t){var e,n,r;for(e in t)switch(r=t[e],e){case"json":case"text":for(n in r)i.preLoadedMap[G.a.formatURL(n)]=r[n];break;default:for(n in r)i.preLoadedMap[G.a.formatURL(n)]=r[n]}}},{key:"parsePLFBData",value:function(t){var e,i,n;for(n=(e=new B.a(t)).getInt32(),i=0;i<n;i++)this.parseOnePLFBFile(e)}},{key:"parseOnePLFBFile",value:function(t){var e,n,r;n=t.getUTFString(),e=t.getInt32(),r=t.readArrayBuffer(e),i.preLoadedMap[G.a.formatURL(n)]=r}},{key:"complete",value:function(t){this._data=t,this._customParse?this.event(A.a.LOADED,t instanceof Array?[t]:t):(i._loaders.push(this),i._isWorking||i.checkNext())}},{key:"endLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this._data=t),this._cache&&i.cacheRes(this._url,this._data),this.event(A.a.PROGRESS,1),this.event(A.a.COMPLETE,this.data instanceof Array?[this.data]:this.data)}},{key:"url",get:function(){return this._url}},{key:"type",get:function(){return this._type}},{key:"cache",get:function(){return this._cache}},{key:"data",get:function(){return this._data}}],[{key:"getTypeFromUrl",value:function(t){var e=F.a.getFileExtension(t);return e?i.typeMap[e]:(console.warn("Not recognize the resources suffix",t),"text")}},{key:"checkNext",value:function(){i._isWorking=!0;for(var t=L.a.now();i._startIndex<i._loaders.length;)if(i._loaders[i._startIndex].endLoad(),i._startIndex++,L.a.now()-t>i.maxTimeOut)return console.warn("loader callback cost a long time:"+(L.a.now()-t)+" url="+i._loaders[i._startIndex-1].url),void w.a.systemTimer.frameOnce(1,null,i.checkNext);i._loaders.length=0,i._startIndex=0,i._isWorking=!1}},{key:"clearRes",value:function(t){t=G.a.formatURL(t);var e=i.getAtlas(t);if(e){for(var n=0,r=e.length;n<r;n++){var a=e[n],s=i.getRes(a);delete i.textureMap[a],s&&s.destroy()}e.length=0,delete i.atlasMap[t]}var o=i.textureMap[t];o&&(o.destroy(),delete i.textureMap[t]),i.loadedMap[t]&&delete i.loadedMap[t]}},{key:"clearTextureRes",value:function(t){t=G.a.formatURL(t);var e=i.getAtlas(t);if(e&&e.length>0)s()(e).call(e,(function(t){var e=i.getRes(t);e instanceof D.a&&e.disposeBitmap()}));else{var n=i.getRes(t);n instanceof D.a&&n.disposeBitmap()}}},{key:"getRes",value:function(t){var e=i.textureMap[G.a.formatURL(t)];return e||i.loadedMap[G.a.formatURL(t)]}},{key:"getAtlas",value:function(t){return i.atlasMap[G.a.formatURL(t)]}},{key:"cacheRes",value:function(t,e){t=G.a.formatURL(t),null!=i.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e instanceof D.a?(i.loadedMap[t]=e.bitmap,i.textureMap[t]=e):i.loadedMap[t]=e}},{key:"cacheTexture",value:function(t,e){t=G.a.formatURL(t),null!=i.textureMap[t]?console.warn("Resources already exist,is repeated loading:",t):i.textureMap[t]=e}},{key:"setGroup",value:function(t,e){i.groupMap[e]||(i.groupMap[e]=[]),i.groupMap[e].push(t)}},{key:"clearResByGroup",value:function(t){if(i.groupMap[t]){var e,n=i.groupMap[t],r=n.length;for(e=0;e<r;e++)i.clearRes(n[e]);n.length=0}}}]),i}(M.a);X.TEXT="text",X.JSON="json",X.PREFAB="prefab",X.XML="xml",X.BUFFER="arraybuffer",X.IMAGE="image",X.SOUND="sound",X.ATLAS="atlas",X.FONT="font",X.TTF="ttf",X.PLF="plf",X.PLFB="plfb",X.HIERARCHY="HIERARCHY",X.MESH="MESH",X.MATERIAL="MATERIAL",X.TEXTURE2D="TEXTURE2D",X.TEXTURECUBE="TEXTURECUBE",X.ANIMATIONCLIP="ANIMATIONCLIP",X.AVATAR="AVATAR",X.TERRAINHEIGHTDATA="TERRAINHEIGHTDATA",X.TERRAINRES="TERRAIN",X.typeMap={ttf:"ttf",png:"image",jpg:"image",jpeg:"image",ktx:"image",pvr:"image",txt:"text",json:"json",prefab:"prefab",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",plf:"plf",plfb:"plfb",scene:"json",ani:"json",sk:"arraybuffer"},X.parserMap={},X.maxTimeOut=100,X.groupMap={},X.loadedMap={},X.atlasMap={},X.textureMap={},X.preLoadedMap={},X._imgCache={},X._loaders=[],X._isWorking=!1,X._startIndex=0},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=function(){function t(){r()(this,t)}return s()(t,null,[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t._StatRender.show(e,i)}},{key:"enable",value:function(){t._StatRender.enable()}},{key:"hide",value:function(){t._StatRender.hide()}},{key:"clear",value:function(){t.trianglesFaces=t.renderBatches=t.savedRenderBatches=t.shaderCall=t.spriteRenderUseCacheCount=t.frustumCulling=t.octreeNodeCulling=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0}},{key:"onclick",set:function(e){t._StatRender.set_onclick(e)}}]),t}();o.FPS=0,o.loopCount=0,o.shaderCall=0,o.renderBatches=0,o.savedRenderBatches=0,o.trianglesFaces=0,o.spriteCount=0,o.spriteRenderUseCacheCount=0,o.frustumCulling=0,o.octreeNodeCulling=0,o.canvasNormal=0,o.canvasBitmap=0,o.canvasReCache=0,o.renderSlow=!1,o._fpsData=[],o._timer=0,o._count=0,o._StatRender=null},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.ALPHA=1,a.TRANSFORM=2,a.BLEND=4,a.CANVAS=8,a.FILTERS=16,a.MASK=32,a.CLIP=64,a.STYLE=128,a.TEXTURE=256,a.GRAPHICS=512,a.LAYAGL3D=1024,a.CUSTOM=2048,a.ONECHILD=4096,a.CHILDS=8192,a.REPAINT_NONE=0,a.REPAINT_NODE=1,a.REPAINT_CACHE=2,a.REPAINT_ALL=3},function(t,e,i){t.exports=i(526)},function(t,e,i){"use strict";var n;i.d(e,"a",(function(){return n})),function(t){t[t.R8G8B8=0]="R8G8B8",t[t.R8G8B8A8=1]="R8G8B8A8",t[t.R5G6B5=16]="R5G6B5",t[t.Alpha8=2]="Alpha8",t[t.DXT1=3]="DXT1",t[t.DXT5=4]="DXT5",t[t.ETC1RGB=5]="ETC1RGB",t[t.PVRTCRGB_2BPPV=9]="PVRTCRGB_2BPPV",t[t.PVRTCRGBA_2BPPV=10]="PVRTCRGBA_2BPPV",t[t.PVRTCRGB_4BPPV=11]="PVRTCRGB_4BPPV",t[t.PVRTCRGBA_4BPPV=12]="PVRTCRGBA_4BPPV",t[t.R32G32B32A32=15]="R32G32B32A32"}(n||(n={}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return St})),i.d(e,"c",(function(){return Rt})),i.d(e,"b",(function(){return It}));var n=i(53),r=i.n(n),a=i(137),s=i.n(a),o=i(270),h=i.n(o),l=i(15),u=i.n(l),c=i(88),f=i.n(c),_=i(1),d=i.n(_),v=i(4),p=i.n(v),y=i(0),g=i(110),m=i(246),x=i(103),k=i(163),T=i(44),b=i(160),C=i(75),w=i(358),S=i(144),E=i(16),A=i(185),M=i(117),R=i(157),I=i(21),D=i(249),P=i(271),L=i(359),B=i(40),O=i(47),F=i(173),N=i(105),U=i(125),G=i(116),Y=i(98),W=i(12),V=i(248),X=i(10),H=i(81),z=i(360),j=i(13),K=i(168),q=i(22),Z=i(368),Q=i(130),$=i(34),J=i(132),tt=i(49),et=i(361),it=i(362),nt=i(272),rt=i(60),at=i(121),st=i(247),ot=i(172),ht=i(36),lt=i(274),ut=i(133),ct=i(17),ft=i(363),_t=i(364),dt=i(156),vt=i(365),pt=i(134),yt=i(164),gt=i(198),mt=i(66),xt=i(19),kt=i(250),Tt=i(18),bt=i(366),Ct=i(5),wt=i(99),St=function(){function t(){d()(this,t)}return p()(t,null,[{key:"__init",value:function(t){f()(t).call(t,(function(t){t.__init$&&t.__init$()}))}},{key:"init",value:function(e,i){if(!t._isinit){t._isinit=!0,u()(ArrayBuffer.prototype)||(ArrayBuffer.prototype.slice=t._arrayBufferSlice),W.a.__init__();var n=W.a.mainCanvas=new U.a(!0),r=n.source.style;r.position="absolute",r.top=r.left="0px",r.background="#000000",W.a.onKGMiniGame||W.a.onAlipayMiniGame||W.a.container.appendChild(n.source),W.a.canvas=new U.a(!0),W.a.context=W.a.canvas.getContext("2d"),W.a.supportWebAudio=M.a.__init__(),W.a.supportLocalStorage=P.a.__init__(),t.systemTimer=new Q.a(!1),Q.a.gSysTimer=t.systemTimer,t.startTimer=new Q.a(!1),t.physicsTimer=new Q.a(!1),t.updateTimer=new Q.a(!1),t.lateTimer=new Q.a(!1),t.timer=new Q.a(!1),y.a.startTimer=t.startTimer,y.a.lateTimer=t.lateTimer,y.a.updateTimer=t.updateTimer,y.a.systemTimer=t.systemTimer,Rt=y.a.timer=t.timer,y.a.physicsTimer=t.physicsTimer,t.loader=new D.a,y.a.Laya=t,It=y.a.loader=t.loader,J.a.__init__(),K.a.__init(),_t.a.__init__(),ut.a.inner_enable();for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];if(s)for(var h=0,l=s.length;h<l;h++)s[h]&&s[h].enable&&s[h].enable();return y.a.Render.isConchApp&&t.enableNative(),t.enableWebGLPlus(),V.a.beginCheck(),t.stage=new b.a,y.a.stage=t.stage,$.a.gStage=t.stage,B.a.rootPath=B.a._basePath=t._getUrlPath(),pt.a.__int__(),dt.a.__init__(),yt.a.__init__(),t.render=new O.a(0,0,W.a.mainCanvas),t.render,t.stage.size(e,i),window.stage=t.stage,ct.a.__init__(),vt.a.__init__(),lt.a.__init__(),F.a.__init__(),w.a.__init__(),S.a.instance.__init__(t.stage,O.a.canvas),x.a.__init__(),M.a.autoStopMusic=!0,q.a._StatRender=new Z.a,rt.a._initone(tt.a.TEXTURE2D,nt.a),rt.a._initone(tt.a.TEXTURE2D|tt.a.FILTERGLOW,nt.a),rt.a._initone(tt.a.PRIMITIVE,it.a),rt.a._initone(tt.a.SKINMESH,et.a),O.a.canvas}}},{key:"_getUrlPath",value:function(){var t=W.a.window.location,e=t.pathname;return e=":"==e.charAt(2)?e.substring(1):e,B.a.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname)}},{key:"_arrayBufferSlice",value:function(t,e){var i=new Uint8Array(this,t,e-t),n=new Uint8Array(i.length);return n.set(i),n.buffer}},{key:"alertGlobalError",value:function(t){var e=0;W.a.window.onerror=t?function(t,i,n,r,a){e++<5&&a&&this.alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+a.stack)}:null}},{key:"_runScript",value:function(e){return W.a.window[t._evcode](e)}},{key:"enableDebugPanel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"libs/laya.debugtool.js";if(window.Laya.DebugPanel)window.Laya.DebugPanel.enable();else{var e=W.a.createElement("script");e.onload=function(){window.Laya.DebugPanel.enable()},e.src=t,W.a.document.body.appendChild(e)}}},{key:"enableWebGLPlus",value:function(){ct.a.__init_native()}},{key:"enableNative",value:function(){t.isNativeRender_enable||(t.isNativeRender_enable=!0,O.a.supportWebGLPlusRendering&&(at.a.prototype.uploadTexture2D=function(t){var e=E.a.instance;e.bindTexture(e.TEXTURE_2D,t)}),ht.a.width=W.a.window.innerWidth,ht.a.height=W.a.window.innerHeight,W.a.measureText=function(t,e){return window.conchTextCanvas.font=e,window.conchTextCanvas.measureText(t)},b.a.clear=function(t){N.a.set2DRenderConfig();var e=H.a.create(t).arrColor,i=E.a.instance;e&&i.clearColor(e[0],e[1],e[2],e[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT),ht.a.clear()},T.a.drawToCanvas=T.a.drawToTexture=function(t,e,i,n,r,a){r-=t.x,a-=t.y,r|=0,a|=0,i|=0,n|=0;var s=new U.a(!1),o=s.getContext("2d");return s.size(i,n),o.asBitmap=!0,o._targets.start(),F.a.renders[e]._fun(t,o,r,a),o.flush(),o._targets.end(),o._targets.restore(),s},h()(G.a.prototype,"uv",{get:function(){return this._uv},set:function(t){this._uv=t}}),U.a.prototype.getTexture=function(){return this._texture||(this._texture=this.context._targets,this._texture.uv=G.a.flipyuv,this._texture.bitmap=this._texture),this._texture})}}]),t}();St.stage=null,St.systemTimer=null,St.startTimer=null,St.physicsTimer=null,St.updateTimer=null,St.lateTimer=null,St.timer=null,St.loader=null,St.version="2.6.0",St._isinit=!1,St.isWXOpenDataContext=!1,St.isWXPosMsg=!1,St.__classmap=null,St.Config=wt.a,St.TextRender=ot.a,St.EventDispatcher=mt.a,St.SoundChannel=gt.a,St.Stage=b.a,St.Render=O.a,St.Browser=W.a,St.Sprite=T.a,St.Node=k.a,St.Context=N.a,St.WebGL=ut.a,St.Handler=xt.a,St.RunDriver=kt.a,St.Utils=$.a,St.Input=x.a,St.Loader=I.a,St.LocalStorage=P.a,St.SoundManager=M.a,St.URL=B.a,St.Event=Ct.a,St.Matrix=Tt.a,St.HTMLImage=bt.a,St.Laya=St,St._evcode="eval",St.isNativeRender_enable=!1,St.__classmap=y.a.__classMap,y.a.Timer=Q.a,y.a.Dragging=z.a,y.a.GraphicsBounds=m.a,y.a.Sprite=T.a,y.a.TextRender=ot.a,y.a.Loader=I.a,y.a.TTFLoader=L.a,y.a.WebAudioSound=R.a,y.a.SoundManager=M.a,y.a.ShaderCompile=lt.a,y.a.ClassUtils=X.a,y.a.SceneUtils=K.a,y.a.Context=N.a,y.a.Render=O.a,y.a.MouseManager=S.a,y.a.Text=C.a,y.a.Browser=W.a,y.a.WebGL=ut.a,y.a.AudioSound=A.a,y.a.Pool=j.a,y.a.Utils=$.a,y.a.Graphics=g.a,y.a.Submit=st.a,y.a.Stage=b.a,y.a.Resource=Y.a,y.a.WorkerLoader=ft.a;var Et=window._layalibs;if(Et){s()(Et).call(Et,(function(t,e){return t.i-e.i}));for(var At=0;At<Et.length;At++)Et[At].f(window,window.document,St)}var Mt=window;Mt.Laya?(Mt.Laya.Laya=St,r()(Mt.Laya,St)):Mt.Laya=St;var Rt,It;St.__init,St.init,St.version,St.alertGlobalError,St.enableDebugPanel},function(t,e,i){t.exports=i(528)},function(t,e,i){t.exports=i(530)},function(t,e,i){t.exports=i(531)},function(t,e,i){t.exports=i(548)},,function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=i(42),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r()(this,t),this.x=e,this.y=i,this.width=n,this.height=a}return s()(t,[{key:"setTo",value:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this}},{key:"reset",value:function(){return this.x=this.y=this.width=this.height=0,this}},{key:"recover",value:function(){this!=t.TEMP&&this!=t.EMPTY?o.a.recover("Rectangle",this.reset()):console.log("recover Temp or Empty:",this)}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"contains",value:function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom)}},{key:"intersects",value:function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)}},{key:"intersection",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null}},{key:"union",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}},{key:"toString",value:function(){return this.x+","+this.y+","+this.width+","+this.height}},{key:"equals",value:function(t){return!(!t||t.x!==this.x||t.y!==this.y||t.width!==this.width||t.height!==this.height)}},{key:"addPoint",value:function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this}},{key:"_getBoundPoints",value:function(){var e=t._temB;return e.length=0,0==this.width||0==this.height||e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"create",value:function(){return o.a.getItemByClass("Rectangle",t)}},{key:"_getBoundPointS",value:function(e,i,n,r){var a=t._temA;return a.length=0,0==n||0==r||a.push(e,i,e+n,i,e,i+r,e+n,i+r),a}},{key:"_getWrapRec",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);i=i||t.create();var n,r,a,s,o,l=e.length,u=h.a.TEMP;for(a=o=-(r=s=99999),n=0;n<l;n+=2)u.x=e[n],u.y=e[n+1],r=r<u.x?r:u.x,s=s<u.y?s:u.y,a=a>u.x?a:u.x,o=o>u.y?o:u.y;return i.setTo(r,s,a-r,o-s)}}]),t}();l.EMPTY=new l,l.TEMP=new l,l._temB=[],l._temA=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.NOT_ACTIVE=1,a.ACTIVE_INHIERARCHY=2,a.AWAKED=4,a.NOT_READY=8,a.DISPLAY=16,a.HAS_ZORDER=32,a.HAS_MOUSE=64,a.DISPLAYED_INSTAGE=128,a.DRAWCALL_OPTIMIZE=256},function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(11),r=i.n(n),a=i(148),s=i.n(a),o=i(37),h=i.n(o),l=i(67),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(42),p=i(32),y=i(0),g=function(){function t(){f()(this,t)}return d()(t,null,[{key:"toRadian",value:function(e){return e*t._pi2}},{key:"toAngle",value:function(e){return e*t._pi}},{key:"toHexColor",value:function(t){if(t<0||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e}},{key:"getGID",value:function(){return t._gid++}},{key:"concatArray",value:function(t,e){if(!e)return t;if(!t)return e;var i,n=e.length;for(i=0;i<n;i++)t.push(e[i]);return t}},{key:"clearArray",value:function(t){return t?(t.length=0,t):t}},{key:"copyArray",value:function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i,n=e.length;for(i=0;i<n;i++)t[i]=e[i];return t}},{key:"getGlobalRecByPoints",value:function(t,e,i,n,r){var a,s;a=v.a.create().setTo(e,i),a=t.localToGlobal(a),s=v.a.create().setTo(n,r),s=t.localToGlobal(s);var o=p.a._getWrapRec([a.x,a.y,s.x,s.y]);return a.recover(),s.recover(),o}},{key:"getGlobalPosAndScale",value:function(e){return t.getGlobalRecByPoints(e,0,0,1,1)}},{key:"bind",value:function(t,e){return u()(t).call(t,e)}},{key:"updateOrder",value:function(t){if(!t||t.length<2)return!1;for(var e,i,n,r=1,a=t.length;r<a;){for(n=t[e=r],i=t[e]._zOrder;--e>-1&&t[e]._zOrder>i;)t[e+1]=t[e];t[e+1]=n,r++}return!0}},{key:"transPointList",value:function(t,e,i){var n,r=t.length;for(n=0;n<r;n+=2)t[n]+=e,t[n+1]+=i}},{key:"parseInt",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=h()(t,e);return isNaN(i)?0:i}))},{key:"getFileExtension",value:function(e){t._extReg.lastIndex=s()(e).call(e,".");var i=t._extReg.exec(e);return i&&i.length>1?i[1].toLowerCase():null}},{key:"getTransformRelativeToWindow",value:function(e,i,n){var r=t.gStage,a=t.getGlobalPosAndScale(e),s=r._canvasTransform.clone(),o=s.tx,h=s.ty;s.rotate(-Math.PI/180*r.canvasDegree),s.scale(r.clientScaleX,r.clientScaleY);var l,u,c,f,_=r.canvasDegree%180!=0;return _?(l=n+a.y,u=i+a.x,l*=s.d,u*=s.a,90==r.canvasDegree?(l=o-l,u+=h):(l+=o,u=h-u)):(l=i+a.x,u=n+a.y,l*=s.a,u*=s.d,l+=o,u+=h),u+=r._safariOffsetY,_?(c=s.d*a.height,f=s.a*a.width):(c=s.a*a.width,f=s.d*a.height),{x:l,y:u,scaleX:c,scaleY:f}}},{key:"fitDOMElementInArea",value:function(e,i,n,r,a,s){e._fitLayaAirInitialized||(e._fitLayaAirInitialized=!0,e.style.transformOrigin=e.style.webKittransformOrigin="left top",e.style.position="absolute");var o=t.getTransformRelativeToWindow(i,n,r);e.style.transform=e.style.webkitTransform="scale("+o.scaleX+","+o.scaleY+") rotate("+t.gStage.canvasDegree+"deg)",e.style.width=a+"px",e.style.height=s+"px",e.style.left=o.x+"px",e.style.top=o.y+"px"}},{key:"isOkTextureList",value:function(t){if(!t)return!1;var e,i,n=t.length;for(e=0;e<n;e++)if(!(i=t[e])||!i._getSource())return!1;return!0}},{key:"isOKCmdList",value:function(t){if(!t)return!1;var e,i=t.length;for(e=0;e<i;e++)t[e];return!0}},{key:"getQueryString",value:function(t){if(y.a.Browser.onMiniGame)return null;if(!window.location||!window.location.search)return null;var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}}]),t}();g.gStage=null,g._gid=1,g._pi=180/Math.PI,g._pi2=Math.PI/180,g._extReg=/\.(\w+)\??/g,g.parseXMLFromString=function(t){var e,i;if(t=t.replace(/>\s+</g,"><"),i=(new DOMParser).parseFromString(t,"text/xml"),r()(e=i.firstChild.textContent).call(e,"This page contains the following errors")>-1)throw new Error(i.firstChild.firstChild.textContent);return i}},function(t,e,i){var n=i(352),r=i(432),a=i(611),s=i(433),o=i(48);function h(t,e,i,l){return(h="undefined"!=typeof Reflect&&a?a:function(t,e,i,a){var h,l=s(t,e);if(l){if((h=r(l,e)).set)return h.set.call(a,i),!0;if(!h.writable)return!1}if(h=r(a,e)){if(!h.writable)return!1;h.value=i,n(a,e,h)}else o(a,e,i);return!0})(t,e,i,l)}t.exports=function(t,e,i,n,r){if(!h(t,e,i,n||t)&&r)throw new Error("failed to set property");return i}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(18),h=function(){function t(){r()(this,t)}return s()(t,null,[{key:"mat2MatArray",value:function(e,i){var n=e,r=i;return r[0]=n.a,r[1]=n.b,r[2]=t.EMPTYMAT4_ARRAY[2],r[3]=t.EMPTYMAT4_ARRAY[3],r[4]=n.c,r[5]=n.d,r[6]=t.EMPTYMAT4_ARRAY[6],r[7]=t.EMPTYMAT4_ARRAY[7],r[8]=t.EMPTYMAT4_ARRAY[8],r[9]=t.EMPTYMAT4_ARRAY[9],r[10]=t.EMPTYMAT4_ARRAY[10],r[11]=t.EMPTYMAT4_ARRAY[11],r[12]=n.tx,r[13]=n.ty,r[14]=t.EMPTYMAT4_ARRAY[14],r[15]=t.EMPTYMAT4_ARRAY[15],i}},{key:"restoreTempArray",value:function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0}},{key:"clear",value:function(){t.worldScissorTest=!1,t.worldAlpha=1}}]),t}();h._MAXSIZE=99999999,h.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h.worldMatrix4=h.TEMPMAT4_ARRAY,h.worldMatrix=new o.a,h.matWVP=null,h.worldAlpha=1,h.worldScissorTest=!1,h.width=0,h.height=0},function(t,e,i){t.exports=i(601)},function(t,e,i){t.exports=i(585)},function(t,e,i){t.exports=i(567)},function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i(148),r=i.n(n),a=i(39),s=i.n(a),o=i(11),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(0),d=function(){function t(e){u()(this,t),this._url=t.formatURL(e),this._path=t.getPath(e)}return f()(t,[{key:"url",get:function(){return this._url}},{key:"path",get:function(){return this._path}}],[{key:"formatURL",value:function(e){if(!e)return"null path";if(h()(e).call(e,":")>0)return e;if(null!=t.customFormat&&(e=t.customFormat(e)),h()(e).call(e,":")>0)return e;var i=e.charAt(0);if("."===i)return t._formatRelativePath(t._basePath+e);if("~"===i)return t.rootPath+e.substring(1);if("d"===i){if(0===h()(e).call(e,"data:image"))return e}else if("/"===i)return e;return t._basePath+e}},{key:"_formatRelativePath",value:function(t){for(var e=t.split("/"),i=0,n=e.length;i<n;i++)".."==e[i]&&(s()(e).call(e,i-1,2),i-=2);return e.join("/")}},{key:"getPath",value:function(t){var e=r()(t).call(t,"/");return e>0?t.substr(0,e+1):""}},{key:"getFileName",value:function(t){var e=r()(t).call(t,"/");return e>0?t.substr(e+1):t}},{key:"getAdptedFilePath",value:function(e){if(!t.exportSceneToJson||!e)return e;var i,n,r;for(n=t._adpteTypeList.length,i=0;i<n;i++)r=t._adpteTypeList[i],e=e.replace(r[0],r[1]);return e}},{key:"basePath",set:function(e){t._basePath=_.a.Laya._getUrlPath(),t._basePath=t.formatURL(e)},get:function(){return t._basePath}}]),t}();d.version={},d.exportSceneToJson=!1,d._basePath="",d.rootPath="",d.customFormat=function(t){var e=d.version[t];return!window.conch&&e&&(t+="?v="+e),t},d._adpteTypeList=[[".scene3d",".json"],[".scene",".json"],[".taa",".json"],[".prefab",".json"]]},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(178),h=i(60),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.TYPE_2D;r()(this,t),this.clipInfoID=-1,this._mesh=null,this._blendFn=null,this._id=0,this._renderType=0,this._parent=null,this._key=new o.a,this._startIdx=0,this._numEle=0,this._ref=1,this.shaderValue=null,this._renderType=e,this._id=++t.ID}return s()(t,[{key:"getID",value:function(){return this._id}},{key:"getRenderType",value:function(){return this._renderType}},{key:"toString",value:function(){return"ibindex:"+this._startIdx+" num:"+this._numEle+" key="+this._key}},{key:"renderSubmit",value:function(){return 1}},{key:"releaseRender",value:function(){}}],[{key:"__init__",value:function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new h.a(0,0),e.shaderValue.ALPHA=1,e._ref=4294967295}}]),t}();l.TYPE_2D=1e4,l.TYPE_CANVAS=10003,l.TYPE_CMDSETRT=10004,l.TYPE_CUSTOM=10005,l.TYPE_BLURRT=10006,l.TYPE_CMDDESTORYPRERT=10007,l.TYPE_DISABLESTENCIL=10008,l.TYPE_OTHERIBVB=10009,l.TYPE_PRIMITIVE=10010,l.TYPE_RT=10011,l.TYPE_BLUR_RT=10012,l.TYPE_TARGET=10013,l.TYPE_CHANGE_VALUE=10014,l.TYPE_SHAPE=10015,l.TYPE_TEXTURE=10016,l.TYPE_FILLTEXTURE=10017,l.KEY_ONCE=-1,l.KEY_FILLRECT=1,l.KEY_DRAWTEXTURE=2,l.KEY_VG=3,l.KEY_TRIANGLES=4,l.ID=1,l.preRender=null},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r()(this,t),this.x=e,this.y=i}return s()(t,[{key:"setTo",value:function(t,e){return this.x=t,this.y=e,this}},{key:"reset",value:function(){return this.x=this.y=0,this}},{key:"recover",value:function(){o.a.recover("Point",this.reset())}},{key:"distance",value:function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))}},{key:"toString",value:function(){return this.x+","+this.y}},{key:"normalize",value:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}}},{key:"copy",value:function(t){return this.setTo(t.x,t.y)}}],[{key:"create",value:function(){return o.a.getItemByClass("Point",t)}}]),t}();h.TEMP=new h,h.EMPTY=new h},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return H}));var n=i(3),r=i.n(n),a=i(79),s=i.n(a),o=i(15),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(7),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(0),T=i(33),b=i(5),C=i(146),w=i(150),S=i(305),E=i(18),A=i(42),M=i(32),R=i(173),I=i(105),D=i(125),P=i(57),L=i(10),B=i(34),O=i(13),F=function(){function t(){u()(this,t)}return f()(t,[{key:"reset",value:function(){return this.bounds&&this.bounds.recover(),this.userBounds&&this.userBounds.recover(),this.bounds=null,this.userBounds=null,this.temBM=null,this}},{key:"recover",value:function(){O.a.recover("BoundsStyle",this.reset())}}],[{key:"create",value:function(){return O.a.getItemByClass("BoundsStyle",t)}}]),t}(),N=function(){function t(){u()(this,t),this.reset()}return f()(t,[{key:"needBitmapCache",value:function(){return this.cacheForFilters||!!this.mask}},{key:"needEnableCanvasRender",value:function(){return"none"!=this.userSetCache||this.cacheForFilters||!!this.mask}},{key:"releaseContext",value:function(){if(this.canvas&&this.canvas.size){O.a.recover("CacheCanvas",this.canvas),this.canvas.size(1,1);try{this.canvas.width=0,this.canvas.height=0}catch(t){}}this.canvas=null}},{key:"createContext",value:function(){if(!this.canvas){this.canvas=O.a.getItem("CacheCanvas")||new D.a(!1);var t=this.canvas.context;t||(t=this.canvas.getContext("2d"))}}},{key:"releaseFilterCache",value:function(){var t=this.filterCache;t&&(t.destroy(),t.recycle(),this.filterCache=null)}},{key:"recover",value:function(){this!==t.EMPTY&&O.a.recover("SpriteCache",this.reset())}},{key:"reset",value:function(){return this.releaseContext(),this.releaseFilterCache(),this.cacheAs="none",this.enableCanvasRender=!1,this.userSetCache="none",this.cacheForFilters=!1,this.staticCache=!1,this.reCache=!0,this.mask=null,this.maskParent=null,this.filterCache=null,this.filters=null,this.hasGlowFilter=!1,this.cacheRect&&this.cacheRect.recover(),this.cacheRect=null,this}},{key:"_calculateCacheRect",value:function(e,i,n,r){var a,s=e._cacheStyle;if(s.cacheRect||(s.cacheRect=M.a.create()),"bitmap"===i?((a=e.getSelfBounds()).width=a.width+2*t.CANVAS_EXTEND_EDGE,a.height=a.height+2*t.CANVAS_EXTEND_EDGE,a.x=a.x-e.pivotX,a.y=a.y-e.pivotY,a.x=a.x-t.CANVAS_EXTEND_EDGE,a.y=a.y-t.CANVAS_EXTEND_EDGE,a.x=Math.floor(a.x+n)-n,a.y=Math.floor(a.y+r)-r,a.width=Math.floor(a.width),a.height=Math.floor(a.height),s.cacheRect.copyFrom(a)):s.cacheRect.setTo(-e._style.pivotX,-e._style.pivotY,1,1),a=s.cacheRect,e._style.scrollRect){var o=e._style.scrollRect;a.x-=o.x,a.y-=o.y}return t._scaleInfo.setTo(1,1),t._scaleInfo}}],[{key:"create",value:function(){return O.a.getItemByClass("SpriteCache",t)}}]),t}();N.EMPTY=new N,N._scaleInfo=new A.a,N.CANVAS_EXTEND_EDGE=16;var U=i(228),G=i(110),Y=i(163),W=i(23),V=i(40);function X(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var H=function(t){p()(i,t);var e=X(i);function i(){var t;return u()(this,i),(t=e.call(this))._x=0,t._y=0,t._width=0,t._height=0,t._visible=!0,t._mouseState=0,t._zOrder=0,t._renderType=0,t._transform=null,t._tfChanged=!1,t._repaint=W.a.REPAINT_NONE,t._texture=null,t._style=U.a.EMPTY,t._cacheStyle=N.EMPTY,t._boundStyle=null,t._graphics=null,t.mouseThrough=!1,t.autoSize=!1,t.hitTestPrior=!1,t}return f()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d()(x()(i.prototype),"destroy",this).call(this,t),this._style&&this._style.recover(),this._cacheStyle&&this._cacheStyle.recover(),this._boundStyle&&this._boundStyle.recover(),this._style=null,this._cacheStyle=null,this._boundStyle=null,this._transform=null,this._graphics&&this._graphics.autoDestroy&&this._graphics.destroy(),this._graphics=null,this.texture=null}},{key:"updateZOrder",value:function(){B.a.updateOrder(this._children)&&this.repaint()}},{key:"_getBoundsStyle",value:function(){return this._boundStyle||(this._boundStyle=F.create()),this._boundStyle}},{key:"_setCustomRender",value:function(){}},{key:"_setCacheAs",value:function(t){}},{key:"_checkCanvasEnable",value:function(){var t=this._cacheStyle.needEnableCanvasRender();this._getCacheStyle().enableCanvasRender=t,t?(this._cacheStyle.needBitmapCache()?this._cacheStyle.cacheAs="bitmap":this._cacheStyle.cacheAs=this._cacheStyle.userSetCache,this._cacheStyle.reCache=!0,this._renderType|=W.a.CANVAS):(this._cacheStyle.cacheAs="none",this._cacheStyle.releaseContext(),this._renderType&=~W.a.CANVAS),this._setCacheAs(this._cacheStyle.cacheAs),this._setRenderType(this._renderType)}},{key:"reCache",value:function(){this._cacheStyle.reCache=!0,this._repaint|=W.a.REPAINT_CACHE}},{key:"getRepaint",value:function(){return this._repaint}},{key:"_setX",value:function(t){this._x=t}},{key:"_setY",value:function(t){this._y=t}},{key:"_setWidth",value:function(t,e){}},{key:"_setHeight",value:function(t,e){}},{key:"set_width",value:function(t){this._width!==t&&(this._width=t,this._setWidth(this.texture,t),this._setTranformChange())}},{key:"get_width",value:function(){return this.autoSize?this.texture?this.texture.width:this._graphics||0!==this._children.length?this.getSelfBounds().width:0:this._width||(this.texture?this.texture.width:0)}},{key:"set_height",value:function(t){this._height!==t&&(this._height=t,this._setHeight(this.texture,t),this._setTranformChange())}},{key:"get_height",value:function(){return this.autoSize?this.texture?this.texture.height:this._graphics||0!==this._children.length?this.getSelfBounds().height:0:this._height||(this.texture?this.texture.height:0)}},{key:"setSelfBounds",value:function(t){this._getBoundsStyle().userBounds=t}},{key:"getBounds",value:function(){return this._getBoundsStyle().bounds=M.a._getWrapRec(this._boundPointsToParent())}},{key:"getSelfBounds",value:function(){return this._boundStyle&&this._boundStyle.userBounds?this._boundStyle.userBounds:this._graphics||0!==this._children.length||this._texture?this._getBoundsStyle().bounds=M.a._getWrapRec(this._getBoundPointsM(!1)):M.a.TEMP.setTo(0,0,this.width,this.height)}},{key:"_boundPointsToParent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0,i=0;this._style&&(e=this.pivotX,i=this.pivotY,t=t||0!==this._style.rotation,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?S.a.scanPList(n):M.a._getWrapRec(n,M.a.TEMP)._getBoundPoints()),!this.transform)return B.a.transPointList(n,this._x-e,this._y-i),n;var r,a=A.a.TEMP,s=n.length;for(r=0;r<s;r+=2)a.x=n[r],a.y=n[r+1],this.toParentPoint(a),n[r]=a.x,n[r+1]=a.y;return n}},{key:"getGraphicBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._graphics?this._graphics.getBounds(t):M.a.TEMP.setTo(0,0,0,0)}},{key:"_getBoundPointsM",value:function(){var t,e,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._boundStyle&&this._boundStyle.userBounds)return this._boundStyle.userBounds._getBoundPoints();if(this._boundStyle||this._getBoundsStyle(),this._boundStyle.temBM||(this._boundStyle.temBM=[]),this._style.scrollRect){var s=B.a.clearArray(this._boundStyle.temBM),o=M.a.TEMP;return o.copyFrom(this._style.scrollRect),B.a.concatArray(s,o._getBoundPoints()),s}this._graphics?t=this._graphics.getBoundPoints():(t=B.a.clearArray(this._boundStyle.temBM),this._texture&&((o=M.a.TEMP).setTo(0,0,this.width||this._texture.width,this.height||this._texture.height),B.a.concatArray(t,o._getBoundPoints())));for(var h=0,l=(r=this._children).length;h<l;h++)(e=r[h])instanceof i&&!0===e._visible&&(n=e._boundPointsToParent(a))&&(t=t?B.a.concatArray(t,n):n);return t}},{key:"_getCacheStyle",value:function(){return this._cacheStyle===N.EMPTY&&(this._cacheStyle=N.create()),this._cacheStyle}},{key:"getStyle",value:function(){return this._style===U.a.EMPTY&&(this._style=U.a.create()),this._style}},{key:"setStyle",value:function(t){this._style=t}},{key:"_setScaleX",value:function(t){this._style.scaleX=t}},{key:"_setScaleY",value:function(t){this._style.scaleY=t}},{key:"set_scaleX",value:function(t){this.getStyle().scaleX!==t&&(this._setScaleX(t),this._setTranformChange())}},{key:"get_scaleX",value:function(){return this._style.scaleX}},{key:"set_scaleY",value:function(t){this.getStyle().scaleY!==t&&(this._setScaleY(t),this._setTranformChange())}},{key:"get_scaleY",value:function(){return this._style.scaleY}},{key:"_setRotation",value:function(t){this._style.rotation=t}},{key:"_setSkewX",value:function(t){this._style.skewX=t}},{key:"_setSkewY",value:function(t){this._style.skewY=t}},{key:"_createTransform",value:function(){return E.a.create()}},{key:"_adjustTransform",value:function(){this._tfChanged=!1;var t=this._style,e=t.scaleX,i=t.scaleY,n=t.skewX,r=t.skewY,a=t.rotation,s=this._transform||(this._transform=this._createTransform());if(a||1!==e||1!==i||0!==n||0!==r){s._bTransform=!0;var o=.0174532922222222*(a-n),h=.0174532922222222*(a+r),l=Math.cos(h),u=Math.sin(h),c=Math.sin(o),f=Math.cos(o);s.a=e*l,s.b=e*u,s.c=-i*c,s.d=i*f,s.tx=s.ty=0}else s.identity(),this._renderType&=~W.a.TRANSFORM,this._setRenderType(this._renderType);return s}},{key:"_setTransform",value:function(t){}},{key:"get_transform",value:function(){return this._tfChanged?this._adjustTransform():this._transform}},{key:"set_transform",value:function(t){this._tfChanged=!1;var e=this._transform||(this._transform=this._createTransform());t.copyTo(e),this._setTransform(e),t&&(this._x=e.tx,this._y=e.ty,e.tx=e.ty=0),t?this._renderType|=W.a.TRANSFORM:this._renderType&=~W.a.TRANSFORM,this._setRenderType(this._renderType),this.parentRepaint()}},{key:"_setPivotX",value:function(t){this.getStyle().pivotX=t}},{key:"_getPivotX",value:function(){return this._style.pivotX}},{key:"_setPivotY",value:function(t){this.getStyle().pivotY=t}},{key:"_getPivotY",value:function(){return this._style.pivotY}},{key:"_setAlpha",value:function(t){this._style.alpha!==t&&(this.getStyle().alpha=t,1!==t?this._renderType|=W.a.ALPHA:this._renderType&=~W.a.ALPHA,this._setRenderType(this._renderType),this.parentRepaint())}},{key:"_getAlpha",value:function(){return this._style.alpha}},{key:"get_visible",value:function(){return this._visible}},{key:"set_visible",value:function(t){this._visible!==t&&(this._visible=t,this.parentRepaint(W.a.REPAINT_ALL))}},{key:"_setBlendMode",value:function(t){}},{key:"_setGraphics",value:function(t){}},{key:"_setGraphicsCallBack",value:function(){}},{key:"_setScrollRect",value:function(t){}},{key:"pos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._setX(t),this._setY(e),this.parentRepaint(W.a.REPAINT_CACHE);var n=this._cacheStyle.maskParent;n&&n.repaint(W.a.REPAINT_CACHE)}else this.x=t,this.y=e}return this}},{key:"pivot",value:function(t,e){return this.pivotX=t,this.pivotY=e,this}},{key:"size",value:function(t,e){return this.width=t,this.height=e,this}},{key:"scale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getStyle();if(n.scaleX!=t||n.scaleY!=e){if(this.destroyed)return this;i?(this._setScaleX(t),this._setScaleY(e),this._setTranformChange()):(this.scaleX=t,this.scaleY=e)}return this}},{key:"skew",value:function(t,e){return this.skewX=t,this.skewY=e,this}},{key:"render",value:function(t,e,i){R.a.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0}},{key:"drawToCanvas",value:function(t,e,n,r){return i.drawToCanvas(this,this._renderType,t,e,n,r)}},{key:"drawToTexture",value:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return i.drawToTexture(this,this._renderType,t,e,n,r,a)}},{key:"drawToTexture3D",value:function(t,e,i){throw"not implement"}},{key:"customRender",value:function(t,e,i){this._repaint=W.a.REPAINT_ALL}},{key:"_applyFilters",value:function(){}},{key:"_setColorFilter",value:function(t){}},{key:"_isHaveGlowFilter",value:function(){var t,e;if(this.filters)for(t=0;t<this.filters.length;t++)if(this.filters[t].type==w.a.GLOW)return!0;for(t=0,e=this._children.length;t<e;t++)if(this._children[t]._isHaveGlowFilter())return!0;return!1}},{key:"localToGlobal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!0===e&&(t=new A.a(t.x,t.y));var n=this;for(i=i||k.a.stage;n&&!n.destroyed&&n!=i;)t=n.toParentPoint(t),n=n.parent;return t}},{key:"globalToLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&(t=new A.a(t.x,t.y));var n=this,r=[];for(i=i||k.a.stage;n&&!n.destroyed&&n!=i;)r.push(n),n=n.parent;for(var a=r.length-1;a>=0;)t=(n=r[a]).fromParentPoint(t),a--;return t}},{key:"toParentPoint",value:function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t}},{key:"fromParentPoint",value:function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t}},{key:"fromStagePoint",value:function(t){return t}},{key:"on",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return 1!==this._mouseState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(T.a.HAS_MOUSE,!0),this._parent&&this._onDisplay(),this._createListener(t,e,n,r,!1)):d()(x()(i.prototype),"on",this).call(this,t,e,n,r)}},{key:"once",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return 1!==this._mouseState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(T.a.HAS_MOUSE,!0),this._parent&&this._onDisplay(),this._createListener(t,e,n,r,!0)):d()(x()(i.prototype),"once",this).call(this,t,e,n,r)}},{key:"_onDisplay",value:function(t){if(1!==this._mouseState){var e=this;for(e=e.parent;e&&1!==e._mouseState&&!e._getBit(T.a.HAS_MOUSE);)e.mouseEnabled=!0,e._setBit(T.a.HAS_MOUSE,!0),e=e.parent}}},{key:"_setParent",value:function(t){d()(x()(i.prototype),"_setParent",this).call(this,t),t&&this._getBit(T.a.HAS_MOUSE)&&this._onDisplay()}},{key:"loadImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var i=k.a.Loader.textureMap[V.a.formatURL(t)];i||((i=new P.a).load(t),k.a.Loader.cacheTexture(t,i)),this.texture=i,i.getIsReady()?n.call(this):i.once(b.a.READY,this,n)}else this.texture=null,n.call(this);function n(){this.repaint(W.a.REPAINT_ALL),e&&e.run()}return this}},{key:"repaint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.a.REPAINT_CACHE;this._repaint&t||(this._repaint|=t,this.parentRepaint(t)),this._cacheStyle&&this._cacheStyle.maskParent&&this._cacheStyle.maskParent.repaint(t)}},{key:"_needRepaint",value:function(){return this._repaint&W.a.REPAINT_CACHE&&this._cacheStyle.enableCanvasRender&&this._cacheStyle.reCache}},{key:"_childChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._children.length?this._renderType|=W.a.CHILDS:this._renderType&=~W.a.CHILDS,this._setRenderType(this._renderType),t&&this._getBit(T.a.HAS_ZORDER)&&k.a.systemTimer.callLater(this,this.updateZOrder),this.repaint(W.a.REPAINT_ALL)}},{key:"parentRepaint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.a.REPAINT_CACHE,e=this._parent;!e||e._repaint&t||(e._repaint|=t,e.parentRepaint(t))}},{key:"_setMask",value:function(t){}},{key:"startDrag",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.92;this._style.dragging||(this.getStyle().dragging=new k.a.Dragging),this._style.dragging.start(this,t,e,i,n,r,a,s)}},{key:"stopDrag",value:function(){this._style.dragging&&this._style.dragging.stop()}},{key:"_setDisplay",value:function(t){t||this._cacheStyle&&(this._cacheStyle.releaseContext(),this._cacheStyle.releaseFilterCache(),this._cacheStyle.hasGlowFilter&&(this._cacheStyle.hasGlowFilter=!1)),d()(x()(i.prototype),"_setDisplay",this).call(this,t)}},{key:"hitTestPoint",value:function(t,e){var i=this.globalToLocal(A.a.TEMP.setTo(t,e));return t=i.x,e=i.y,(this._style.hitArea?this._style.hitArea:this._width>0&&this._height>0?M.a.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(t,e)}},{key:"getMousePoint",value:function(){return this.globalToLocal(A.a.TEMP.setTo(k.a.stage.mouseX,k.a.stage.mouseY))}},{key:"_setTexture",value:function(t){}},{key:"_setRenderType",value:function(t){}},{key:"_setTranformChange",value:function(){this._tfChanged=!0,this._renderType|=W.a.TRANSFORM,this.parentRepaint(W.a.REPAINT_CACHE)}},{key:"_setBgStyleColor",value:function(t,e,i,n,r){}},{key:"_setBorderStyleColor",value:function(t,e,i,n,r,a){}},{key:"captureMouseEvent",value:function(t){k.a.MouseManager.instance.setCapture(this,t)}},{key:"releaseMouseEvent",value:function(){k.a.MouseManager.instance.releaseCapture()}},{key:"customRenderEnable",set:function(t){t&&(this._renderType|=W.a.CUSTOM,this._setRenderType(this._renderType),this._setCustomRender())}},{key:"cacheAs",get:function(){return this._cacheStyle.cacheAs},set:function(t){t!==this._cacheStyle.userSetCache&&(this.mask&&"normal"===t||(this._setCacheAs(t),this._getCacheStyle().userSetCache=t,this._checkCanvasEnable(),this.repaint()))}},{key:"staticCache",get:function(){return this._cacheStyle.staticCache},set:function(t){this._getCacheStyle().staticCache=t,t||this.reCache()}},{key:"x",get:function(){return this._x},set:function(t){if(!this.destroyed&&this._x!==t){this._setX(t),this.parentRepaint(W.a.REPAINT_CACHE);var e=this._cacheStyle.maskParent;e&&e.repaint(W.a.REPAINT_CACHE)}}},{key:"y",get:function(){return this._y},set:function(t){if(!this.destroyed&&this._y!==t){this._setY(t),this.parentRepaint(W.a.REPAINT_CACHE);var e=this._cacheStyle.maskParent;e&&e.repaint(W.a.REPAINT_CACHE)}}},{key:"width",get:function(){return this.get_width()},set:function(t){this.set_width(t)}},{key:"height",get:function(){return this.get_height()},set:function(t){this.set_height(t)}},{key:"displayWidth",get:function(){return this.width*this.scaleX}},{key:"displayHeight",get:function(){return this.height*this.scaleY}},{key:"scaleX",get:function(){return this._style.scaleX},set:function(t){this.set_scaleX(t)}},{key:"scaleY",get:function(){return this._style.scaleY},set:function(t){this.set_scaleY(t)}},{key:"rotation",get:function(){return this._style.rotation},set:function(t){this.getStyle().rotation!==t&&(this._setRotation(t),this._setTranformChange())}},{key:"skewX",get:function(){return this._style.skewX},set:function(t){this.getStyle().skewX!==t&&(this._setSkewX(t),this._setTranformChange())}},{key:"skewY",get:function(){return this._style.skewY},set:function(t){this.getStyle().skewY!==t&&(this._setSkewY(t),this._setTranformChange())}},{key:"transform",get:function(){return this._tfChanged?this._adjustTransform():this._transform},set:function(t){this.set_transform(t)}},{key:"pivotX",get:function(){return this._getPivotX()},set:function(t){this._setPivotX(t),this.repaint()}},{key:"pivotY",get:function(){return this._getPivotY()},set:function(t){this._setPivotY(t),this.repaint()}},{key:"alpha",get:function(){return this._getAlpha()},set:function(t){t=t<0?0:t>1?1:t,this._setAlpha(t)}},{key:"visible",get:function(){return this.get_visible()},set:function(t){this.set_visible(t)}},{key:"blendMode",get:function(){return this._style.blendMode},set:function(t){this._setBlendMode(t),this.getStyle().blendMode=t,t&&"source-over"!=t?this._renderType|=W.a.BLEND:this._renderType&=~W.a.BLEND,this._setRenderType(this._renderType),this.parentRepaint()}},{key:"graphics",get:function(){return this._graphics||(this.graphics=new G.a,this._graphics.autoDestroy=!0),this._graphics},set:function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._setGraphics(t),this._renderType|=W.a.GRAPHICS,t._sp=this):this._renderType&=~W.a.GRAPHICS,this._setRenderType(this._renderType),this.repaint()}},{key:"scrollRect",get:function(){return this._style.scrollRect},set:function(t){this.getStyle().scrollRect=t,this._setScrollRect(t),this.repaint(),t?this._renderType|=W.a.CLIP:this._renderType&=~W.a.CLIP,this._setRenderType(this._renderType)}},{key:"filters",get:function(){return this._cacheStyle.filters},set:function(t){t&&0===t.length&&(t=null),this._cacheStyle.filters!=t&&(this._getCacheStyle().filters=t?h()(t).call(t):null,t&&t.length?(this._setColorFilter(t[0]),this._renderType|=W.a.FILTERS):(this._setColorFilter(null),this._renderType&=~W.a.FILTERS),this._setRenderType(this._renderType),t&&t.length>0?(this._getBit(T.a.DISPLAY)||this._setBitUp(T.a.DISPLAY),1==t.length&&t[0]instanceof C.a||(this._getCacheStyle().cacheForFilters=!0,this._checkCanvasEnable())):this._cacheStyle.cacheForFilters&&(this._cacheStyle.cacheForFilters=!1,this._checkCanvasEnable()),this._getCacheStyle().hasGlowFilter=this._isHaveGlowFilter(),this.repaint())}},{key:"stage",get:function(){return k.a.stage}},{key:"hitArea",get:function(){return this._style.hitArea},set:function(t){this.getStyle().hitArea=t}},{key:"mask",get:function(){return this._cacheStyle.mask},set:function(t){t&&this.mask&&this.mask._cacheStyle.maskParent||(this._getCacheStyle().mask=t,this._setMask(t),this._checkCanvasEnable(),t?t._getCacheStyle().maskParent=this:this.mask&&(this.mask._getCacheStyle().maskParent=null),this._renderType|=W.a.MASK,this._setRenderType(this._renderType),this.parentRepaint(W.a.REPAINT_ALL))}},{key:"mouseEnabled",get:function(){return this._mouseState>1},set:function(t){this._mouseState=t?2:1}},{key:"globalScaleX",get:function(){for(var t=1,e=this;e&&e!==k.a.stage;)t*=e.scaleX,e=e.parent;return t}},{key:"globalRotation",get:function(){for(var t=0,e=this;e&&e!==k.a.stage;)t+=e.rotation,e=e.parent;return t}},{key:"globalScaleY",get:function(){for(var t=1,e=this;e&&e!==k.a.stage;)t*=e.scaleY,e=e.parent;return t}},{key:"mouseX",get:function(){return this.getMousePoint().x}},{key:"mouseY",get:function(){return this.getMousePoint().y}},{key:"zOrder",get:function(){return this._zOrder},set:function(t){this._zOrder!=t&&(this._zOrder=t,this._parent&&(t&&this._parent._setBit(T.a.HAS_ZORDER,!0),k.a.systemTimer.callLater(this._parent,this.updateZOrder)))}},{key:"texture",get:function(){return this._texture},set:function(t){"string"==typeof t?this.loadImage(t):this._texture!=t&&(this._texture&&this._texture._removeReference(),this._texture=t,t&&t._addReference(),this._setTexture(t),this._setWidth(this._texture,this.width),this._setHeight(this._texture,this.height),t?this._renderType|=W.a.TEXTURE:this._renderType&=~W.a.TEXTURE,this._setRenderType(this._renderType),this.repaint())}},{key:"viewport",get:function(){return this._style.viewport},set:function(t){var e;"string"==typeof t&&((e=t.split(",")).length>3&&(t=new M.a(s()(e[0]),s()(e[1]),s()(e[2]),s()(e[3]))));this.getStyle().viewport=t}},{key:"drawCallOptimize",set:function(t){this._setBit(T.a.DRAWCALL_OPTIMIZE,t)},get:function(){return this._getBit(T.a.DRAWCALL_OPTIMIZE)}}],[{key:"drawToCanvas",value:function(t,e,i,n,r,a){r-=t.x,a-=t.y,r|=0,a|=0,i|=0,n|=0;var s=new I.a;s.size(i,n),s.asBitmap=!0,s._targets.start(),s._targets.clear(0,0,0,0),R.a.renders[e]._fun(t,s,r,a),s.flush(),s._targets.end(),s._targets.restore();var o=s._targets.getData(0,0,i,n);s.destroy();for(var h=new ImageData(i,n),l=4*i,u=(new Uint8Array(l),h.data),c=n-1,f=c*l,_=0;c>=0;c--)u.set(o.subarray(_,_+l),f),f-=l,_+=l;var d=new D.a(!0);return d.size(i,n),d.getContext("2d").putImageData(h,0,0),d}},{key:"drawToTexture",value:function(t,e,n,r,a,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;i.drawtocanvCtx||(i.drawtocanvCtx=new I.a),a-=t.x,s-=t.y,a|=0,s|=0,n|=0,r|=0;var h=o?i.drawtocanvCtx:new I.a;if(h.clear(),h.size(n,r),o?h._targets=o:h.asBitmap=!0,h._targets.start(),h._targets.clear(0,0,0,0),R.a.renders[e]._fun(t,h,a,s),h.flush(),h._targets.end(),h._targets.restore(),!o){var l=new P.a(h._targets,P.a.INV_UV);return h.destroy(!0),l}return t._repaint=0,o}},{key:"fromImage",value:function(t){return(new i).loadImage(t)}}]),i}(Y.a);L.a.regClass("laya.display.Sprite",H),L.a.regClass("Laya.Sprite",H)},,,function(t,e,i){"use strict";i.d(e,"a",(function(){return R}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(0),h=i(99),l=i(16),u=i(105),c=i(133),f=i(17),_=i(68),d=i(257),v=i(49),p=i(60),y=i(224),g=i(41),m=i(11),x=i.n(m),k=i(39),T=i.n(k),b=i(37),C=i.n(b);!function(){var t={};function e(e,i){var n;t[e]=!0,void 0!==i&&(n=i,window.console&&window.console.error&&window.console.error(n))}var i=function t(e){var i=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var r=new t.VertexAttrib(i);this.attribs[n]=r}this.maxAttrib=0};(i.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=t.FLOAT,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var n=function(e){var i=this;this.gl=e,function(e){var i=e.getError;e.getError=function(){var n;do{(n=i.apply(e))!=e.NO_ERROR&&(t[n]=!0)}while(n!=e.NO_ERROR);for(var r in t)if(t[r])return delete t[r],C()(r);return e.NO_ERROR}}(e);var n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(t){return t==i.VERTEX_ARRAY_BINDING_OES?i.currentVertexArrayObject==i.defaultVertexArrayObject?null:i.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(t){var e=i.currentVertexArrayObject;e.maxAttrib=Math.max(e.maxAttrib,t);var r=e.attribs[t];return r.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(t){var e=i.currentVertexArrayObject;e.maxAttrib=Math.max(e.maxAttrib,t);var r=e.attribs[t];return r.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(t,r){switch(t){case e.ARRAY_BUFFER:i.currentArrayBuffer=r;break;case e.ELEMENT_ARRAY_BUFFER:i.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(t,r){var a=i.currentVertexArrayObject,s=a.attribs[t];switch(r){case e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return s.buffer;case e.VERTEX_ATTRIB_ARRAY_ENABLED:return s.enabled;case e.VERTEX_ATTRIB_ARRAY_SIZE:return s.size;case e.VERTEX_ATTRIB_ARRAY_STRIDE:return s.stride;case e.VERTEX_ATTRIB_ARRAY_TYPE:return s.type;case e.VERTEX_ATTRIB_ARRAY_NORMALIZED:return s.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(t,e,r,a,s,o){var h=i.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,t);var l=h.attribs[t];return l.buffer=i.currentArrayBuffer,l.size=e,l.type=r,l.normalized=a,l.stride=s,l.offset=o,l.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",window.console&&window.console.log&&window.console.log(t),i.reset_()}),!0),this.reset_()};n.prototype.VERTEX_ARRAY_BINDING_OES=34229,n.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.defaultVertexArrayObject=new i(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},n.prototype.createVertexArrayOES=function(){var t=new i(this);return this.vertexArrayObjects.push(t),t},n.prototype.deleteVertexArrayOES=function(t){var e,i;t.isAlive=!1,T()(e=this.vertexArrayObjects).call(e,x()(i=this.vertexArrayObjects).call(i,t),1),this.currentVertexArrayObject==t&&this.bindVertexArrayOES(null)},n.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof i&&t.hasBeenBound&&t.ext==this)},n.prototype.bindVertexArrayOES=function(t){var i=this.gl;if(!t||t.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var a=this.currentVertexArrayObject;if(r!=a){r&&a.elementArrayBuffer==r.elementArrayBuffer||n.bindBuffer.call(i,i.ELEMENT_ARRAY_BUFFER,a.elementArrayBuffer);for(var s=this.currentArrayBuffer,o=Math.max(r?r.maxAttrib:0,a.maxAttrib),h=0;h<=o;h++){var l=a.attribs[h],u=r?r.attribs[h]:null;if(r&&l.enabled==u.enabled||(l.enabled?n.enableVertexAttribArray.call(i,h):n.disableVertexAttribArray.call(i,h)),l.enabled){var c=!1;r&&l.buffer==u.buffer||(s!=l.buffer&&(n.bindBuffer.call(i,i.ARRAY_BUFFER,l.buffer),s=l.buffer),c=!0),(c||l.cached!=u.cached)&&n.vertexAttribPointer.call(i,h,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!=s&&n.bindBuffer.call(i,i.ARRAY_BUFFER,this.currentArrayBuffer)}}else e(i.INVALID_OPERATION,"bindVertexArrayOES: attempt to bind deleted arrayObject")},window._setupVertexArrayObject=function(t){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return x()(t).call(t,"OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var i=t.getExtension;t.getExtension=function(t){var e=i.call(this,t);return e||("OES_vertex_array_object"!==t?null:(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new n(this)),this.__OESVertexArrayObject))}}}();var w=i(25),S=i(112),E=function(){function t(){r()(this,t)}return s()(t,null,[{key:"supportTextureFormat",value:function(t){switch(t){case w.a.R32G32B32A32:return!(!l.a.layaGPUInstance._isWebGL2&&!l.a.layaGPUInstance._oesTextureFloat);default:return!0}}},{key:"supportRenderTextureFormat",value:function(t){switch(t){case S.b.R16G16B16A16:return!!(l.a.layaGPUInstance._isWebGL2||l.a.layaGPUInstance._oesTextureHalfFloat&&l.a.layaGPUInstance._oesTextureHalfFloatLinear);case S.b.Depth:return!(!l.a.layaGPUInstance._isWebGL2&&!l.a.layaGPUInstance._webgl_depth_texture);case S.b.ShadowMap:return!!l.a.layaGPUInstance._isWebGL2;default:return!0}}},{key:"maxTextureCount",get:function(){return this._maxTextureCount}},{key:"maxTextureSize",get:function(){return this._maxTextureSize}},{key:"shaderCapailityLevel",get:function(){return this._shaderCapailityLevel}}]),t}(),A=function(){function t(e,i){r()(this,t),this._gl=null,this._vaoExt=null,this._angleInstancedArrays=null,this._isWebGL2=!1,this._oesTextureHalfFloat=null,this._oes_element_index_uint=null,this._oesTextureHalfFloatLinear=null,this._oesTextureFloat=null,this._extShaderTextureLod=null,this._extTextureFilterAnisotropic=null,this._compressedTextureS3tc=null,this._compressedTexturePvrtc=null,this._compressedTextureEtc1=null,this._webgl_depth_texture=null,this._gl=e,this._isWebGL2=i;var n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),a=e.getParameter(e.MAX_TEXTURE_SIZE);i?(this._getExtension("EXT_color_buffer_float"),E._shaderCapailityLevel=35):(o.a.Render.isConchApp||window._setupVertexArrayObject&&window._setupVertexArrayObject(e),this._vaoExt=this._getExtension("OES_vertex_array_object"),this._angleInstancedArrays=this._getExtension("ANGLE_instanced_arrays"),this._oesTextureHalfFloat=this._getExtension("OES_texture_half_float"),this._oesTextureHalfFloatLinear=this._getExtension("OES_texture_half_float_linear"),this._oesTextureFloat=this._getExtension("OES_texture_float"),this._oes_element_index_uint=this._getExtension("OES_element_index_uint"),this._extShaderTextureLod=this._getExtension("EXT_shader_texture_lod"),this._webgl_depth_texture=this._getExtension("WEBGL_depth_texture"),E._shaderCapailityLevel=30),this._extTextureFilterAnisotropic=this._getExtension("EXT_texture_filter_anisotropic"),this._compressedTextureS3tc=this._getExtension("WEBGL_compressed_texture_s3tc"),this._compressedTexturePvrtc=this._getExtension("WEBGL_compressed_texture_pvrtc"),this._compressedTextureEtc1=this._getExtension("WEBGL_compressed_texture_etc1"),E._maxTextureCount=n,E._maxTextureSize=a}return s()(t,[{key:"_getExtension",value:function(e){var i=t._extentionVendorPrefixes;for(var n in i){var r=this._gl.getExtension(i[n]+e);if(r)return r}return null}},{key:"createVertexArray",value:function(){return this._isWebGL2?this._gl.createVertexArray():this._vaoExt.createVertexArrayOES()}},{key:"bindVertexArray",value:function(t){this._isWebGL2?this._gl.bindVertexArray(t):this._vaoExt.bindVertexArrayOES(t)}},{key:"deleteVertexArray",value:function(t){this._isWebGL2?this._gl.deleteVertexArray(t):this._vaoExt.deleteVertexArrayOES(t)}},{key:"isVertexArray",value:function(t){this._isWebGL2?this._gl.isVertexArray(t):this._vaoExt.isVertexArrayOES(t)}},{key:"drawElementsInstanced",value:function(t,e,i,n,r){this._isWebGL2?this._gl.drawElementsInstanced(t,e,i,n,r):this._angleInstancedArrays.drawElementsInstancedANGLE(t,e,i,n,r)}},{key:"drawArraysInstanced",value:function(t,e,i,n){this._isWebGL2?this._gl.drawArraysInstanced(t,e,i,n):this._angleInstancedArrays.drawArraysInstancedANGLE(t,e,i,n)}},{key:"vertexAttribDivisor",value:function(t,e){this._isWebGL2?this._gl.vertexAttribDivisor(t,e):this._angleInstancedArrays.vertexAttribDivisorANGLE(t,e)}},{key:"supportInstance",value:function(){return!(!this._isWebGL2&&!this._angleInstancedArrays||!h.a.allowGPUInstanceDynamicBatch)}},{key:"supportElementIndexUint32",value:function(){return!(!this._isWebGL2&&!this._oes_element_index_uint)}}]),t}();A._extentionVendorPrefixes=["","WEBKIT_","MOZ_"];var M=i(12),R=function(){function t(e,i,n){r()(this,t),this._timeId=0,t._mainCanvas=n;var a=t._mainCanvas.source;a.id="layaCanvas",a.width=e,a.height=i,t.isConchApp&&document.body.appendChild(a),this.initRender(t._mainCanvas,e,i),window.requestAnimationFrame((function t(e){o.a.stage._loop(),window.requestAnimationFrame(t)})),o.a.stage.on("visibilitychange",this,this._onVisibilitychange)}return s()(t,[{key:"_onVisibilitychange",value:function(){o.a.stage.isVisibility?0!=this._timeId&&window.clearInterval(this._timeId):this._timeId=window.setInterval(this._enterFrame,1e3)}},{key:"initRender",value:function(e,i,n){var r=l.a.instance=f.a.mainContext=function(t){var e,i=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];h.a.useWebGL2&&!M.a.onBDMiniGame||i.shift();for(var n=0;n<i.length;n++){try{e=t.getContext(i[n],{stencil:h.a.isStencil,alpha:h.a.isAlpha,antialias:h.a.isAntialias,premultipliedAlpha:h.a.premultipliedAlpha,preserveDrawingBuffer:h.a.preserveDrawingBuffer})}catch(t){}if(e)return"webgl2"===i[n]&&(c.a._isWebGL2=!0),new l.a,e}return null}(t._mainCanvas.source);if(!r)return!1;l.a.instance=r,l.a.layaGPUInstance=new A(r,c.a._isWebGL2),e.size(i,n),u.a.__init__(),g.a.__init__();var a=new u.a;return a.isMain=!0,t._context=a,e._setContext(a),v.a.__init__(),p.a.__init__(),d.a.__init__(),y.a.__int__(r),_.a._init_(r),!0}},{key:"_enterFrame",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];o.a.stage._loop()}}],[{key:"context",get:function(){return t._context}},{key:"canvas",get:function(){return t._mainCanvas.source}}]),t}();R.supportWebGLPlusCulling=!1,R.supportWebGLPlusAnimation=!1,R.supportWebGLPlusRendering=!1,R.isConchApp=!1,R.isConchApp=null!=window.conch,(R.isConchApp||null!=window.qq&&null!=window.qq.webglPlus)&&(R.supportWebGLPlusCulling=!1,R.supportWebGLPlusAnimation=!1,R.supportWebGLPlusRendering=!1)},function(t,e,i){var n=i(352);t.exports=function(t,e,i){return e in t?n(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_);function v(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var p=function(t){u()(i,t);var e=v(i);function i(){return s()(this,i),e.call(this,i.__name2int,i.__int2name,i.__int2nameMap)}return h()(i,null,[{key:"__init__",value:function(){i.reg("TEXTURE2D",i.TEXTURE2D),i.reg("PRIMITIVE",i.PRIMITIVE),i.reg("GLOW_FILTER",i.FILTERGLOW),i.reg("BLUR_FILTER",i.FILTERBLUR),i.reg("COLOR_FILTER",i.FILTERCOLOR),i.reg("COLOR_ADD",i.COLORADD),i.reg("WORLDMAT",i.WORLDMAT),i.reg("FILLTEXTURE",i.FILLTEXTURE),i.reg("MVP3D",i.MVP3D)}},{key:"reg",value:function(t,e){this._reg(t,e,i.__name2int,i.__int2name)}},{key:"toText",value:function(t,e,i){return this._toText(t,e,i)}},{key:"toInt",value:function(t){return this._toInt(t,i.__name2int)}}]),i}(function(){function t(e,i,n){s()(this,t),this._value=0,this._name2int=e,this._int2name=i,this._int2nameMap=n}return h()(t,[{key:"add",value:function(t){return this._value|="string"==typeof t?this._name2int[t]:t,this._value}},{key:"addInt",value:function(t){return this._value|=t,this._value}},{key:"remove",value:function(t){return this._value&="string"==typeof t?~this._name2int[t]:~t,this._value}},{key:"isDefine",value:function(t){return(this._value&t)===t}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){this._value=t}},{key:"toNameDic",value:function(){var e=this._int2nameMap[this._value];return e||t._toText(this._value,this._int2name,this._int2nameMap)}}],[{key:"_reg",value:function(t,e,i,n){i[t]=e,n[e]=t}},{key:"_toText",value:function(t,e,i){var n=i[t];if(n)return n;for(var r={},a=1,s=0;s<32&&!((a=1<<s)>t);s++)if(t&a){var o=e[a];o&&(r[o]="")}return i[t]=r,r}},{key:"_toInt",value:function(t,e){for(var i=t.split("."),n=0,r=0,a=i.length;r<a;r++){var s=e[i[r]];if(!s)throw new Error("Defines to int err:"+t+"/"+i[r]);n|=s}return n}}]),t}());p.TEXTURE2D=1,p.PRIMITIVE=4,p.FILTERGLOW=8,p.FILTERBLUR=16,p.FILTERCOLOR=32,p.COLORADD=64,p.WORLDMAT=128,p.FILLTEXTURE=256,p.SKINMESH=512,p.MVP3D=2048,p.NOOPTMASK=p.FILTERGLOW|p.FILTERBLUR|p.FILTERCOLOR|p.FILLTEXTURE,p.__name2int={},p.__int2name=[],p.__int2nameMap=[]},,function(t,e,i){"use strict";var n=i(86),r=i(214).f,a=i(399),s=i(65),o=i(217),h=i(154),l=i(119),u=function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var i,c,f,_,d,v,p,y,g=t.target,m=t.global,x=t.stat,k=t.proto,T=m?n:x?n[g]:(n[g]||{}).prototype,b=m?s:s[g]||(s[g]={}),C=b.prototype;for(f in e)i=!a(m?f:g+(x?".":"#")+f,t.forced)&&T&&l(T,f),d=b[f],i&&(v=t.noTargetGet?(y=r(T,f))&&y.value:T[f]),_=i&&v?v:e[f],i&&typeof d==typeof _||(p=t.bind&&i?o(_,n):t.wrap&&i?u(_):k&&"function"==typeof _?o(Function.call,_):_,(t.sham||_&&_.sham||d&&d.sham)&&h(p,"sham",!0),b[f]=p,k&&(l(s,c=g+"Prototype")||h(s,c,{}),s[c][f]=_,t.real&&C&&!C[f]&&h(C,f,_)))}},function(t,e,i){"use strict";i.d(e,"f",(function(){return D})),i.d(e,"b",(function(){return P})),i.d(e,"c",(function(){return L})),i.d(e,"j",(function(){return B})),i.d(e,"g",(function(){return O})),i.d(e,"h",(function(){return F})),i.d(e,"i",(function(){return N})),i.d(e,"d",(function(){return U})),i.d(e,"l",(function(){return G})),i.d(e,"e",(function(){return Y})),i.d(e,"m",(function(){return W})),i.d(e,"k",(function(){return V})),i.d(e,"a",(function(){return X}));var n=i(24),r=i.n(n),a=i(27),s=i.n(a),o=i(28),h=i.n(o),l=i(29),u=i.n(l),c=i(30),f=i.n(c),_=i(15),d=i.n(_),v=i(39),p=i.n(v),y=(i(210),i(229)),g=i.n(y),m=i(9),x=i.n(m),k=i(56),T=i.n(k),b=i(14),C=i.n(b),w=i(328),S=i(72),E=i(78),A=i(19);function M(t){if(void 0===u.a||null==h()(t)){if(s()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return R(t,e);var n=d()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return f()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=r()(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var I=function(t,e,i,n){return new(i||(i=C.a))((function(r,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}h((n=n.apply(t,e||[])).next())}))};function D(t){return new C.a((function(e,i){T()((function(){e(t)}),1e3*t)}))}function P(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return I(this,void 0,void 0,x.a.mark((function r(){var a,s;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,X(t);case 2:return a={alpha:0,visible:!0},e=e||700,i=i||"circleOut",s={alpha:n},r.abrupt("return",G({ease_fn:i,end_props:s,sprite:t,start_props:a,time:e}));case 7:case"end":return r.stop()}}),r)})))}function L(t,e,i){return I(this,void 0,void 0,x.a.mark((function n(){var r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(t);case 2:return e=e||700,i=i||"circleOut",r={alpha:0},n.abrupt("return",G({ease_fn:i,end_props:r,sprite:t,time:e}).then((function(){t.visible=!1,t.alpha=1})));case 6:case"end":return n.stop()}}),n)})))}function B(t,e,i,n){return I(this,void 0,void 0,x.a.mark((function r(){var a,s,o,h;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n||(a=t.getBounds().height,n=a>50?50:a),r.next=3,X(t);case 3:return i=i||"circleOut",e=e||200,Y(t,{alpha:.2,visible:!0}),s=t.y,o={y:s+n},h={alpha:1,y:s},r.abrupt("return",G({sprite:t,start_props:o,end_props:h,time:e,ease_fn:i}));case 10:case"end":return r.stop()}}),r)})))}function O(t,e,i,n){return I(this,void 0,void 0,x.a.mark((function r(){var a,s,o,h;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n||(a=t.getBounds().height,n=a>50?50:a),r.next=3,X(t);case 3:return i=i||"circleOut",e=e||200,Y(t,{alpha:.2,visible:!0}),s=t.y,o={y:s-n},h={alpha:1,y:s},r.next=11,G({sprite:t,start_props:o,end_props:h,time:e,ease_fn:i});case 11:case"end":return r.stop()}}),r)})))}function F(t,e,i,n){return I(this,void 0,void 0,x.a.mark((function r(){var a,s,o,h;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n||(a=t.getBounds().width,n=a>50?50:a),r.next=3,X(t);case 3:return i=i||"easeIn",e=e||200,Y(t,{alpha:.2,visible:!0}),s=t.x,o={x:s+n},h={alpha:1,x:s},r.abrupt("return",G({sprite:t,start_props:o,end_props:h,time:e,ease_fn:i}));case 10:case"end":return r.stop()}}),r)})))}function N(t,e,i,n){return I(this,void 0,void 0,x.a.mark((function r(){var a,s,o,h;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n||(a=t.getBounds().width,n=a>50?50:a),r.next=3,X(t);case 3:return i=i||"circleOut",e=e||200,Y(t,{alpha:.2,visible:!0}),s=t.x,o={x:s-n},h={alpha:1,x:s},r.abrupt("return",G({sprite:t,start_props:o,end_props:h,time:e,ease_fn:i}));case 10:case"end":return r.stop()}}),r)})))}function U(t,e,i,n,r){return I(this,void 0,void 0,x.a.mark((function a(){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,X(t);case 2:return Y(t,e),a.abrupt("return",G({sprite:t,end_props:i,time:n,ease_fn:r}));case 4:case"end":return a.stop()}}),a)})))}function G(t){var e=this;return new C.a((function(i,n){return I(e,void 0,void 0,x.a.mark((function e(){var r,a,s,o,h,l,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sprite,a=t.start_props,s=t.end_props,!r.destroyed){e.next=3;break}return e.abrupt("return",n());case 3:return e.next=5,X(r);case 5:if(o=t.ease_fn,h=t.time,l=new S.a,"string"==typeof(o=o||E.a.linearNone)&&(o=E.a[o]),Y(r,a),0!==h&&!r.is_stop){e.next=15;break}return Y(r,s),i(),e.abrupt("return");case 15:for(u in h=h||300,s)r[u]===s[u]&&delete s[u];g()(s).length||i(),r.tween=l.to(r,s,h,o,A.a.create(r,(function(){r.destroyed?n():i()})));case 19:case"end":return e.stop()}}),e)})))}))}function Y(t,e){if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function W(t){var e=t.sprite,i=t.props_arr,n=t.time,r=t.ease_fn,a=t.is_jump,s=t.end_jump,o=t.step_fn,h=i.length,l=0,u=0;V(e),function t(){if(!e.destroyed){if(a)!function(t,e,i){new C.a((function(n,r){T()((function(){Y(t,e),n()}),i)}))}(e,i[l],n);else{var c=l+1;c>=h&&(s?(l=0,c=1):c=0);var f=i[l],_=i[c];G({ease_fn:r,end_props:_,sprite:e,start_props:f,time:n}).then((function(){o(u),T()(t,0)}))}l++,u++,l>=h&&(l=0)}}()}!function(){var t=[];function e(t,e,i){return t+(e-t)*i}function i(e,i){for(var n=t.length-1;n>=0;n--){var r=t[n].caller,a=t[n].off,s=t[n].callback;r===e&&(i&&s&&"function"==typeof s&&s(),a&&"function"==typeof a&&a(),p()(t).call(t,n,1))}}}();function V(t){if(t)return"function"==typeof t?t():t.time_out?clearTimeout(t.time_out):void(t.tween&&(t.tween.complete(),t.tween.clear()))}function X(t){return new C.a((function(e,i){t&&(t.tween&&(t.tween.complete(),t.tween.clear(),t.tween=void 0),T()((function(){e()})))}))}},function(t,e,i){t.exports=i(563)},function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(7),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(84),g=i(5),m=i(0),x=i(10);function k(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var T=function(t){f()(i,t);var e=k(i);function i(){return s()(this,i),e.apply(this,arguments)}return h()(i,[{key:"_onResize",value:function(t){this.graphics.clear(),this.graphics.drawRect(0,0,this.width,this.height,this._bgColor)}},{key:"dataSource",set:function(t){for(var e in this._dataSource=t,t){var i=this.getChildByName(e);i?i.dataSource=t[e]:!(e in this)||this[e]instanceof Function||(this[e]=t[e])}},get:function(){return u()(p()(i.prototype),"dataSource",this)}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,t?(this._onResize(null),this.on(g.a.RESIZE,this,this._onResize)):(this.graphics.clear(),this.off(g.a.RESIZE,this,this._onResize))}}]),i}(y.a);m.a.regClass(T),x.a.regClass("laya.ui.Box",T),x.a.regClass("Laya.Box",T)},,function(t,e,i){t.exports=i(687)},function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i(3),r=i.n(n),a=i(15),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(5),g=i(66),m=i(32),x=i(19),k=i(0);function T(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var b=function(t){f()(i,t);var e=T(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return h()(this,i),(t=e.call(this)).uvrect=[0,0,1,1],t._destroyed=!1,t._referenceCount=0,t.$_GID=0,t.offsetX=0,t.offsetY=0,t._w=0,t._h=0,t.sourceWidth=0,t.sourceHeight=0,t.url=null,t.scaleRate=1,t.setTo(n,r,a,s),t}return u()(i,[{key:"_addReference",value:function(){this._bitmap&&this._bitmap._addReference(),this._referenceCount++}},{key:"_removeReference",value:function(){this._bitmap&&this._bitmap._removeReference(),this._referenceCount--}},{key:"_getSource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._destroyed||!this._bitmap?null:(this.recoverBitmap(t),this._bitmap.destroyed?null:this.bitmap._getSource())}},{key:"_onLoaded",value:function(t,e){if(e)if(e==this);else if(e instanceof i){var n=e;i._create(e,0,0,n.width,n.height,0,0,n.sourceWidth,n.sourceHeight,this)}else this.bitmap=e,this.sourceWidth=this._w=e.width,this.sourceHeight=this._h=e.height;else;t&&t.run(),this.event(y.a.READY,this)}},{key:"getIsReady",value:function(){return!this._destroyed&&!!this._bitmap}},{key:"setTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.bitmap=t,this.sourceWidth=n,this.sourceHeight=r,t&&(this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||t.width,this.sourceHeight=this.sourceHeight||t.height),this.uv=e||i.DEF_UV}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._destroyed||k.a.loader.load(t,x.a.create(this,this._onLoaded,[e]),null,"htmlimage",1,!0)}},{key:"getTexturePixels",value:function(t,e,i,n){var r,a,o,h=this.bitmap,l=this._w,u=this._h,c=this.sourceWidth,f=this.sourceHeight,_=h.width,d=h.height,v=this.offsetX,p=this.offsetY,y=i,g=n;if(t+i>l+v&&(y-=t+i-l-v),t+i>c&&(i-=t+i-c),e+n>u+p&&(g-=e+n-u-p),e+n>f&&(n-=e+n-f),i<=0||n<=0)return null;var m=v>t?v-t:0,x=p>e?p-e:0,T=t>v?t-v:0,b=e>p?e-p:0;y-=m,g-=x;var C=4*i,w=null;try{w=h.getPixels()}catch(t){}if(w){var S;if(0==t&&0==e&&i==_&&n==d)return w;var E=s()(S=this._uv).call(S),A=Math.round(E[0]*_),M=Math.round(E[1]*d),R=new Uint8Array(i*n*4);for(r=4*A+4*T+(a=(M+b)*(C=4*_)),o=0;o<g;o++)R.set(s()(w).call(w,r,r+4*y),4*i*(o+x)+4*m),r+=C;return R}var I=new k.a.Context;I.size(i,n),I.asBitmap=!0;var D=null;if(0!=t||0!=e||i!=_||n!=d){var P,L=(D=s()(P=this._uv).call(P))[0],B=D[1],O=(D[2]-L)/l,F=(D[7]-B)/u;D=[L+T*O,B+b*F,L+(T+y)*O,B+b*F,L+(T+y)*O,B+(b+g)*F,L+T*O,B+(b+g)*F]}I._drawTextureM(this,m,x,y,g,null,1,D),I._targets.start(),I.flush(),I._targets.end(),I._targets.restore();var N=I._targets.getData(0,0,i,n);for(I.destroy(),R=new Uint8Array(i*n*4),r=0,a=(n-1)*C,o=n-1;o>=0;o--)R.set(s()(N).call(N,a,a+C),r),r+=C,a-=C;return R}},{key:"getPixels",value:function(t,e,i,n){return window.conch?this._nativeObj.getImageData(t,e,i,n):this.getTexturePixels(t,e,i,n)}},{key:"recoverBitmap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._bitmap.url;this._destroyed||this._bitmap&&!this._bitmap.destroyed||!e||k.a.loader.load(e,x.a.create(this,(function(e){this.bitmap=e,t&&t()})),null,"htmlimage",1,!0)}},{key:"disposeBitmap",value:function(){!this._destroyed&&this._bitmap&&this._bitmap.destroy()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._destroyed){this._destroyed=!0;var e=this._bitmap;e&&(e._removeReference(this._referenceCount),(0===e.referenceCount||t)&&e.destroy(),e=null),this.url&&this===k.a.loader.getRes(this.url)&&k.a.Loader.clearRes(this.url)}}},{key:"uv",get:function(){return this._uv},set:function(t){this.uvrect[0]=Math.min(t[0],t[2],t[4],t[6]),this.uvrect[1]=Math.min(t[1],t[3],t[5],t[7]),this.uvrect[2]=Math.max(t[0],t[2],t[4],t[6])-this.uvrect[0],this.uvrect[3]=Math.max(t[1],t[3],t[5],t[7])-this.uvrect[1],this._uv=t}},{key:"width",get:function(){return this._w?this._w:this.bitmap?this.uv&&this.uv!==i.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width:0},set:function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}},{key:"height",get:function(){return this._h?this._h:this.bitmap?this.uv&&this.uv!==i.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height:0},set:function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}},{key:"bitmap",get:function(){return this._bitmap},set:function(t){this._bitmap&&this._bitmap._removeReference(this._referenceCount),this._bitmap=t,t&&t._addReference(this._referenceCount)}},{key:"destroyed",get:function(){return this._destroyed}}],[{key:"moveUV",value:function(t,e,i){for(var n=0;n<8;n+=2)i[n]+=t,i[n+1]+=e;return i}},{key:"create",value:function(t,e,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return i._create(t,e,n,r,a,s,o,h,l)}},{key:"_create",value:function(t,e,n,r,a){var s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,f=t instanceof i,_=f?t.uv:i.DEF_UV,d=f?t.bitmap:t;d.width&&e+r>d.width&&(r=d.width-e),d.height&&n+a>d.height&&(a=d.height-n),c?(s=c).setTo(d,null,l||r,u||a):s=new i(d,null,l||r,u||a),s.width=r,s.height=a,s.offsetX=o,s.offsetY=h;var v=1/d.width,p=1/d.height;e*=v,n*=p,r*=v,a*=p;var y=s.uv[0],g=s.uv[1],m=s.uv[4],x=s.uv[5],k=m-y,T=x-g,b=i.moveUV(_[0],_[1],[e,n,e+r,n,e+r,n+a,e,n+a]);s.uv=new Float32Array([y+b[0]*k,g+b[1]*T,m-(1-b[2])*k,g+b[3]*T,m-(1-b[4])*k,x-(1-b[5])*T,y+b[6]*k,x-(1-b[7])*T]);var C=d.scaleRate;return C&&1!=C?(s.sourceWidth/=C,s.sourceHeight/=C,s.width/=C,s.height/=C,s.scaleRate=C):s.scaleRate=1,s}},{key:"createFromTexture",value:function(t,e,n,r,a){var s=t.scaleRate;1!=s&&(e*=s,n*=s,r*=s,a*=s);var o=m.a.TEMP.setTo(e-t.offsetX,n-t.offsetY,r,a),h=o.intersection(i._rect1.setTo(0,0,t.width,t.height),i._rect2);return h?i.create(t,h.x,h.y,h.width,h.height,h.x-o.x,h.y-o.y,r,a):null}}]),i}(g.a);b.DEF_UV=new Float32Array([0,0,1,0,1,1,0,1]),b.NO_UV=new Float32Array([0,0,0,0,0,0,0,0]),b.INV_UV=new Float32Array([0,1,1,1,1,0,0,0]),b._rect1=new m.a,b._rect2=new m.a},,,function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(121),h=i(3),l=i.n(h),u=i(7),c=i.n(u),f=i(6),_=i.n(f),d=i(8),v=i.n(d),p=i(2),y=i.n(p);function g(t){var e=function(){if("undefined"==typeof Reflect||!l.a)return!1;if(l.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(l()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=l()(n,arguments,r)}else i=n.apply(this,arguments);return v()(this,i)}}var m=function(t){_()(i,t);var e=g(i);function i(t,n){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return r()(this,i),(a=e.call(this,t,n,s,o,h))._params2dQuick2=null,a._shaderValueWidth=0,a._shaderValueHeight=0,a}return s()(i,[{key:"_disposeResource",value:function(){c()(y()(i.prototype),"_disposeResource",this).call(this),this._params2dQuick2=null}},{key:"upload2dQuick2",value:function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())}},{key:"_make2dQuick2",value:function(){if(!this._params2dQuick2){this._params2dQuick2=[];for(var t,e=this._params,i=0,n=e.length;i<n;i++)"size"!==(t=e[i]).name&&this._params2dQuick2.push(t)}return this._params2dQuick2}}],[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new i(t,e,n,r,a)}}]),i}(o.a),x=i(49),k=i(36),T=i(0),b=function(){function t(e,i){r()(this,t),this.defines=new x.a,this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this.ref=1,this._cacheID=0,this.clipMatDir=[T.a.Context._MAXSIZE,0,0,T.a.Context._MAXSIZE],this.clipMatPos=[0,0],this.clipOff=[0,0],this.mainID=e,this.subID=i,this.textureHost=null,this.texture=null,this.color=null,this.colorAdd=null,this.u_mmat2=null,this._cacheID=e|i,this._inClassCache=t._cache[this._cacheID],e>0&&!this._inClassCache&&(this._inClassCache=t._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}return s()(t,[{key:"setValue",value:function(t){}},{key:"_ShaderWithCompile",value:function(){return o.a.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,m.create,this._attribLocation)}},{key:"upload",value:function(){var t=k.a;k.a.worldMatrix4===k.a.TEMPMAT4_ARRAY||this.defines.addInt(x.a.WORLDMAT),this.mmat=t.worldMatrix4,k.a.matWVP&&(this.defines.addInt(x.a.MVP3D),this.u_MvpMatrix=k.a.matWVP.elements);var e=o.a.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();e._shaderValueWidth!==t.width||e._shaderValueHeight!==t.height?(this.size[0]=t.width,this.size[1]=t.height,e._shaderValueWidth=t.width,e._shaderValueHeight=t.height,e.upload(this,null)):e.upload(this,e._params2dQuick2||e._make2dQuick2())}},{key:"setFilters",value:function(t){if(this.filters=t,t)for(var e,i=t.length,n=0;n<i;n++)(e=t[n])&&(this.defines.add(e.type),e.action.setValue(this))}},{key:"clear",value:function(){this.defines._value=this.subID,this.clipOff[0]=0}},{key:"release",value:function(){--this.ref<1&&(this._inClassCache&&(this._inClassCache[this._inClassCache._length++]=this),this.clear(),this.filters=null,this.ref=1,this.clipOff[0]=0)}}],[{key:"_initone",value:function(e,i){t._typeClass[e]=i,t._cache[e]=[],t._cache[e]._length=0}},{key:"__init__",value:function(){}},{key:"create",value:function(e,i){var n=t._cache[e|i];return n._length?n[--n._length]:new t._typeClass[e|i](i)}}]),t}();b._cache=[],b._typeClass=[],b.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},function(t,e,i){"use strict";i.r(e);var n=i(9),r=i.n(n),a=i(11),s=i.n(a),o=i(14),h=i.n(o),l=i(183),u=i(153);var c=i(251),f=i(24),_=i.n(f),d=i(27),v=i.n(d),p=i(28),y=i.n(p),g=i(29),m=i.n(g),x=i(30),k=i.n(x),T=i(15),b=i.n(T),C=i(38),w=i.n(C),S=i(71),E=i.n(S),A=i(268),M=i.n(A);function R(t){if(void 0===m.a||null==y()(t)){if(v()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return I(t,e);var n=b()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return k()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,s=!1;return{s:function(){n=_()(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function D(t){return t>9?t+"":"0"+t}var P=i(227),L=i(313),B=i(26),O=i(75);function F(t){if(void 0===m.a||null==y()(t)){if(v()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return N(t,e);var n=b()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return k()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,s=!1;return{s:function(){n=_()(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var U={createSkeleton:u.c,cutStr:function(t,e){var i=/[^\x00-\xff]/g;if((t+="").replace(i,"mm").length<=e)return t;for(var n=Math.floor(e/2);n<t.length;n++)if(t.substr(0,n).replace(i,"mm").length>=e)return t.substr(0,n)+"...";return t},getStringLength:c.a,formatTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["小时","分钟","秒"],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="",r=0,a=0,s=t%60;"string"==typeof e&&(e=[e,e,""]),t>=60&&(a=t/60|0),a>=60&&(r=a/60|0,a%=60);for(var o=[r,a,s],h=0,l=o.length;h<l;h++){var u=o[h];i&&!u||(i=!1,n+=D(u)+e[h])}return n},formatTimeLight:function(t){var e="",i=0,n=0,r=0;t>60&&(r=t/60|0),r>60&&(n=r/60|0,r%=60),n>24&&(i=n/24|0,n%=24);var a,s=[i,n,r,t%60],o=["天","小时","分","秒"],h=R(M()(s).call(s));try{for(h.s();!(a=h.n()).done;){var l,u,c=E()(a.value,2),f=c[0],_=c[1];if(_>0)e=w()(l=w()(u="".concat(e)).call(u,_)).call(l,o[f])}}catch(t){h.e(t)}finally{h.f()}return e},loadRes:P.a,registerFontSize:function(t){var e,i=F(t);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=new L.a,a=n.split("/"),s=a[a.length-1],o="".concat(n,".fnt"),h="".concat(n,".png");r.parseFont(B.b.getRes(o),B.b.getRes(h)),O.a.registerBitmapFont(s,r)}}catch(t){i.e(t)}finally{i.f()}}},G=i(22),Y=i(225),W=i(19),V=i(133),X=i(160),H=i(34),z=i(40),j=function(t,e,i,n){return new(i||(i=h.a))((function(r,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}h((n=n.apply(t,e||[])).next())}))},K=!1;e.default={name:"Honor",version:"1.0.0-beta",run:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(this,void 0,void 0,r.a.mark((function i(){var n,a,o,u,c=this;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return B.a.Config.isAntialias=!0,B.a.Config.useRetinalCanvas=!0,B.a.init(t.width,t.height,V.a),B.a.stage.frameRate=X.a.FRAME_SLOW,B.a.DebugPanel&&B.a.DebugPanel.enable(),z.a.basePath=e.basePath||z.a.basePath,B.a.stage.scaleMode=t.scaleMode,B.a.stage.screenMode=t.screenMode,B.a.stage.alignV=t.alignV,B.a.stage.alignH=t.alignH,z.a.exportSceneToJson=t.exportSceneToJson,t.debug||"true"===H.a.getQueryString("debug")?(K=!0,B.a.enableDebugPanel()):K=!1,t.stat&&G.a.show(0,0),B.a.alertGlobalError(!1),n=(n=e.defaultVersion)||"0",z.a.customFormat=function(t){var e=z.a.version||{};if(s()(t).call(t,"data:image")<0&&s()(t).call(t,"?")<0&&s()(t).call(t,"?v=")<0){var i=e[t];!i&&n&&(i=n),t+="?v="+i}return t},a=[],o=new h.a((function(t,e){Y.a.enable("fileconfig.json",W.a.create(null,(function(){return j(c,void 0,void 0,r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})))})))})),a.push(o),(u=e.versionPath)&&a.push(Object(P.a)([u])),i.next=24,h.a.all(a);case 24:u&&(z.a.version=B.b.getRes(u)),Object(l.c)();case 26:case"end":return i.stop()}}),i)})))},director:l.b,utils:U,DEBUG_MODE:K}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return L}));var n=i(3),r=i.n(n),a=i(37),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(84),x=i(76),k=i(33),T=i(75),b=i(5),C=i(21),w=i(57),S=i(145),E=i(73),A=i(19),M=i(34),R=i(132),I=i(0),D=i(10);function P(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var L=function(t){d()(i,t);var e=P(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return h()(this,i),(t=e.call(this))._labelColors=x.a.buttonLabelColors,t._state=0,t._autoSize=!0,t._stateNum=x.a.buttonStateNum,t._stateChanged=!1,t.skin=n,t.label=r,t}return u()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f()(g()(i.prototype),"destroy",this).call(this,t),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(t),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null}},{key:"createChildren",value:function(){this.graphics=this._bitmap=new S.a}},{key:"createText",value:function(){this._text||(this._text=new T.a,this._text.overflow=T.a.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)}},{key:"initialize",value:function(){1!==this._mouseState&&(this.mouseEnabled=!0,this._setBit(k.a.HAS_MOUSE,!0)),this._createListener(b.a.MOUSE_OVER,this,this.onMouse,null,!1,!1),this._createListener(b.a.MOUSE_OUT,this,this.onMouse,null,!1,!1),this._createListener(b.a.MOUSE_DOWN,this,this.onMouse,null,!1,!1),this._createListener(b.a.MOUSE_UP,this,this.onMouse,null,!1,!1),this._createListener(b.a.CLICK,this,this.onMouse,null,!1,!1)}},{key:"onMouse",value:function(t){if(!1!==this.toggle||!this._selected)return t.type===b.a.CLICK?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=i.stateMap[t.type]))}},{key:"_skinLoaded",value:function(){this.callLater(this.changeClips),this._setStateChanged(),this._sizeChanged(),this.event(b.a.LOADED)}},{key:"changeClips",value:function(){var t=C.a.getRes(this._skin);if(t){var e=t.sourceWidth,i=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=M.a.getGID());var n=t.$_GID+"-"+this._stateNum,r=R.a.I.get(n);if(M.a.isOkTextureList(r)||(r=null),r)this._sources=r;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var a=0;a<this._stateNum;a++)this._sources.push(w.a.createFromTexture(t,0,i*a,e,i));R.a.I.set(n,this._sources)}this._autoSize?(this._bitmap.width=this._width||e,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e)}else console.log("lose skin",this._skin)}},{key:"measureWidth",value:function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}},{key:"measureHeight",value:function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}},{key:"changeState",value:function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))}},{key:"_setStateChanged",value:function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,t?C.a.getRes(t)?this._skinLoaded():I.a.loader.load(this._skin,A.a.create(this,this._skinLoaded),null,C.a.IMAGE,1):this._skinLoaded())}},{key:"stateNum",get:function(){return this._stateNum},set:function(t){"string"==typeof t&&(t=s()(t)),this._stateNum!=t&&(this._stateNum=t<1?1:t>3?3:t,this.callLater(this.changeClips))}},{key:"label",get:function(){return this._text?this._text.text:null},set:function(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event(b.a.CHANGE))}},{key:"state",get:function(){return this._state},set:function(t){this._state!=t&&(this._state=t,this._setStateChanged())}},{key:"labelColors",get:function(){return this._labelColors.join(",")},set:function(t){this._labelColors=E.a.fillArray(x.a.buttonLabelColors,t,String),this._setStateChanged()}},{key:"strokeColors",get:function(){return this._strokeColors?this._strokeColors.join(","):""},set:function(t){this._strokeColors=E.a.fillArray(x.a.buttonLabelColors,t,String),this._setStateChanged()}},{key:"labelPadding",get:function(){return this.createText(),this._text.padding.join(",")},set:function(t){this.createText(),this._text.padding=E.a.fillArray(x.a.labelPadding,t,Number)}},{key:"labelSize",get:function(){return this.createText(),this._text.fontSize},set:function(t){this.createText(),this._text.fontSize=t}},{key:"labelStroke",get:function(){return this.createText(),this._text.stroke},set:function(t){this.createText(),this._text.stroke=t}},{key:"labelStrokeColor",get:function(){return this.createText(),this._text.strokeColor},set:function(t){this.createText(),this._text.strokeColor=t}},{key:"labelBold",get:function(){return this.createText(),this._text.bold},set:function(t){this.createText(),this._text.bold=t}},{key:"labelFont",get:function(){return this.createText(),this._text.font},set:function(t){this.createText(),this._text.font=t}},{key:"labelAlign",get:function(){return this.createText(),this._text.align},set:function(t){this.createText(),this._text.align=t}},{key:"clickHandler",get:function(){return this._clickHandler},set:function(t){this._clickHandler=t}},{key:"text",get:function(){return this.createText(),this._text}},{key:"sizeGrid",get:function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},set:function(t){this._bitmap.sizeGrid=E.a.fillArray(x.a.defaultSizeGrid,t,Number)}},{key:"width",set:function(t){f()(g()(i.prototype),"set_width",this).call(this,t),this._autoSize&&(this._bitmap.width=t,this._text&&(this._text.width=t))},get:function(){return f()(g()(i.prototype),"get_width",this).call(this)}},{key:"height",set:function(t){f()(g()(i.prototype),"set_height",this).call(this,t),this._autoSize&&(this._bitmap.height=t,this._text&&(this._text.height=t))},get:function(){return f()(g()(i.prototype),"get_height",this).call(this)}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.label=t+"":f()(g()(i.prototype),"set_dataSource",this).call(this,t)},get:function(){return f()(g()(i.prototype),"get_dataSource",this).call(this)}},{key:"iconOffset",get:function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},set:function(t){this._bitmap._offset=t?E.a.fillArray([1,1],t,Number):[]}}]),i}(m.a);L.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0},I.a.regClass(L),D.a.regClass("laya.ui.Button",L),D.a.regClass("Laya.Button",L)},,function(t,e){t.exports={}},function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var n=i(3),r=i.n(n),a=i(6),s=i.n(a),o=i(8),h=i.n(o),l=i(2),u=i.n(l),c=i(39),f=i.n(c),_=i(1),d=i.n(_),v=i(4),p=i.n(v),y=i(19);function g(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=u()(t);if(e){var a=u()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}var m=function(){function t(){d()(this,t)}return p()(t,[{key:"hasListener",value:function(t){return!!(this._events&&this._events[t])}},{key:"event",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,r=i.length;n<r;n++){var a=i[n];a&&(null!=e?a.runWith(e):a.run()),a&&!a.once||(f()(i).call(i,n,1),n--,r--)}0===i.length&&this._events&&delete this._events[t]}return!0}},{key:"on",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._createListener(t,e,i,n,!1)}},{key:"once",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._createListener(t,e,i,n,!0)}},{key:"_createListener",value:function(t,e,i,n,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];a&&this.off(t,e,i,r);var s=x.create(e||this,i,n,r);this._events||(this._events={});var o=this._events;return o[t]?o[t].run?o[t]=[o[t],s]:o[t].push(s):o[t]=s,this}},{key:"off",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this._events||!this._events[t])return this;var r=this._events[t];if(null!=r)if(r.run)e&&r.caller!==e||null!=i&&r.method!==i||n&&!r.once||(delete this._events[t],r.recover());else{for(var a=0,s=0,o=r.length;s<o;s++){var h=r[s];h?!h||e&&h.caller!==e||null!=i&&h.method!==i||n&&!h.once||(a++,r[s]=null,h.recover()):a++}a===o&&delete this._events[t]}return this}},{key:"offAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this}},{key:"offAllCaller",value:function(t){if(t&&this._events)for(var e in this._events)this.off(e,t,null);return this}},{key:"_recoverHandlers",value:function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)}},{key:"isMouseEvent",value:function(e){return t.MOUSE_EVENTS[e]||!1}}]),t}();m.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0};var x=function(t){s()(i,t);var e=g(i);function i(t,n,r,a){return d()(this,i),e.call(this,t,n,r,a)}return p()(i,[{key:"recover",value:function(){this._id>0&&(this._id=0,i._pool.push(this.clear()))}}],[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return i._pool.length?i._pool.pop().setTo(t,e,n,r):new i(t,e,n,r)}}]),i}(y.a);x._pool=[]},function(t,e,i){t.exports=i(575)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(17),h=function(){function t(){r()(this,t)}return s()(t,null,[{key:"_init_",value:function(e){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut]}},{key:"BlendNormal",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE_MINUS_SRC_ALPHA,!0)}},{key:"BlendAdd",value:function(t){o.a.setBlendFunc(t,t.ONE,t.DST_ALPHA,!0)}},{key:"BlendMultiply",value:function(t){o.a.setBlendFunc(t,t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,!0)}},{key:"BlendScreen",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE,!0)}},{key:"BlendOverlay",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE_MINUS_SRC_COLOR,!0)}},{key:"BlendLight",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE,!0)}},{key:"BlendNormalTarget",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE_MINUS_SRC_ALPHA,!0)}},{key:"BlendAddTarget",value:function(t){o.a.setBlendFunc(t,t.ONE,t.DST_ALPHA,!0)}},{key:"BlendMultiplyTarget",value:function(t){o.a.setBlendFunc(t,t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,!0)}},{key:"BlendScreenTarget",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE,!0)}},{key:"BlendOverlayTarget",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE_MINUS_SRC_COLOR,!0)}},{key:"BlendLightTarget",value:function(t){o.a.setBlendFunc(t,t.ONE,t.ONE,!0)}},{key:"BlendMask",value:function(t){o.a.setBlendFunc(t,t.ZERO,t.SRC_ALPHA,!0)}},{key:"BlendDestinationOut",value:function(t){o.a.setBlendFunc(t,t.ZERO,t.ZERO,!0)}}]),t}();h.activeBlendFunction=null,h.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],h.TOINT={normal:0,add:1,multiply:2,screen:3,overlay:4,light:5,mask:6,"destination-out":7,lighter:1},h.NORMAL="normal",h.ADD="add",h.MULTIPLY="multiply",h.SCREEN="screen",h.OVERLAY="overlay",h.LIGHT="light",h.MASK="mask",h.DESTINATIONOUT="destination-out",h.LIGHTER="lighter",h.fns=[],h.targetFns=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return M}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(35),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(76),x=i(5),k=i(21),T=i(145),b=i(84),C=i(73),w=i(19),S=i(0),E=i(10);function A(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var M=function(t){d()(i,t);var e=A(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s()(this,i),(t=e.call(this)).skin=n,t}return h()(i,[{key:"destroy",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f()(g()(i.prototype),"destroy",this).call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null}},{key:"dispose",value:function(){this.destroy(!0),S.a.loader.clearRes(this._skin)}},{key:"createChildren",value:function(){this.graphics=this._bitmap=new T.a,this._bitmap.autoCacheCmd=!1}},{key:"setSource",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t===this._skin&&e&&(this.source=e,this.onCompResize())}},{key:"measureWidth",value:function(){return this._bitmap.width}},{key:"measureHeight",value:function(){return this._bitmap.height}},{key:"skin",get:function(){return this._skin},set:function(t){if(this._skin!=t)if(this._skin=t,t){var e=k.a.getRes(t);e?(this.source=e,this.onCompResize()):S.a.loader.load(this._skin,w.a.create(this,this.setSource,[this._skin]),null,k.a.IMAGE,1,!0,this._group)}else this.source=null}},{key:"source",get:function(){return this._bitmap.source},set:function(t){this._bitmap&&(this._bitmap.source=t,this.event(x.a.LOADED),this.repaint())}},{key:"group",get:function(){return this._group},set:function(t){t&&this._skin&&k.a.setGroup(this._skin,t),this._group=t}},{key:"width",set:function(t){u()(g()(i.prototype),"width",t,this,!0),this._bitmap.width=0==t?1e-7:t},get:function(){return f()(g()(i.prototype),"width",this)}},{key:"height",set:function(t){u()(g()(i.prototype),"height",t,this,!0),this._bitmap.height=0==t?1e-7:t},get:function(){return f()(g()(i.prototype),"height",this)}},{key:"sizeGrid",get:function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},set:function(t){this._bitmap.sizeGrid=C.a.fillArray(m.a.defaultSizeGrid,t,Number)}},{key:"dataSource",set:function(t){this._dataSource=t,"string"==typeof t?this.skin=t:u()(g()(i.prototype),"dataSource",t,this,!0)},get:function(){return f()(g()(i.prototype),"dataSource",this)}}]),i}(b.a);S.a.regClass(M),E.a.regClass("laya.ui.Image",M),E.a.regClass("Laya.Image",M)},function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(35),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(76),x=i(75),k=i(5),T=i(84),b=i(73),C=i(0),w=i(10);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var E=function(t){d()(i,t);var e=S(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s()(this,i),(t=e.call(this)).text=n,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f()(g()(i.prototype),"destroy",this).call(this,t),this._tf=null}},{key:"createChildren",value:function(){this.addChild(this._tf=new x.a)}},{key:"changeText",value:function(t){this._tf.changeText(t)}},{key:"measureWidth",value:function(){return this._tf.width}},{key:"measureHeight",value:function(){return this._tf.height}},{key:"text",get:function(){return this._tf.text},set:function(t){this._tf.text!=t&&(t&&(t=b.a.adptString(t+"")),this._tf.text=t,this.event(k.a.CHANGE),this._width&&this._height||this.onCompResize())}},{key:"wordWrap",get:function(){return this._tf.wordWrap},set:function(t){this._tf.wordWrap=t}},{key:"color",get:function(){return this._tf.color},set:function(t){this._tf.color=t}},{key:"font",get:function(){return this._tf.font},set:function(t){this._tf.font=t}},{key:"align",get:function(){return this._tf.align},set:function(t){this._tf.align=t}},{key:"valign",get:function(){return this._tf.valign},set:function(t){this._tf.valign=t}},{key:"bold",get:function(){return this._tf.bold},set:function(t){this._tf.bold=t}},{key:"italic",get:function(){return this._tf.italic},set:function(t){this._tf.italic=t}},{key:"leading",get:function(){return this._tf.leading},set:function(t){this._tf.leading=t}},{key:"fontSize",get:function(){return this._tf.fontSize},set:function(t){this._tf.fontSize=t}},{key:"padding",get:function(){return this._tf.padding.join(",")},set:function(t){this._tf.padding=b.a.fillArray(m.a.labelPadding,t,Number)}},{key:"bgColor",get:function(){return this._tf.bgColor},set:function(t){this._tf.bgColor=t}},{key:"borderColor",get:function(){return this._tf.borderColor},set:function(t){this._tf.borderColor=t}},{key:"stroke",get:function(){return this._tf.stroke},set:function(t){this._tf.stroke=t}},{key:"strokeColor",get:function(){return this._tf.strokeColor},set:function(t){this._tf.strokeColor=t}},{key:"textField",get:function(){return this._tf}},{key:"width",get:function(){return this._width||this._tf.text?f()(g()(i.prototype),"width",this):0},set:function(t){u()(g()(i.prototype),"width",t,this,!0),this._tf.width=t}},{key:"height",get:function(){return this._height||this._tf.text?f()(g()(i.prototype),"height",this):0},set:function(t){u()(g()(i.prototype),"height",t,this,!0),this._tf.height=t}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.text=t+"":u()(g()(i.prototype),"dataSource",t,this,!0)},get:function(){return f()(g()(i.prototype),"dataSource",this)}},{key:"overflow",get:function(){return this._tf.overflow},set:function(t){this._tf.overflow=t}},{key:"underline",get:function(){return this._tf.underline},set:function(t){this._tf.underline=t}},{key:"underlineColor",get:function(){return this._tf.underlineColor},set:function(t){this._tf.underlineColor=t}}]),i}(T.a);C.a.regClass(E),w.a.regClass("laya.ui.Label",E),w.a.regClass("Laya.Label",E)},function(t,e,i){var n=i(692),r=i(694),a=i(463),s=i(700);t.exports=function(t,e){return n(t)||r(t,e)||a(t,e)||s()}},function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i(39),r=i.n(n),a=i(252),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(13),f=i(12),_=i(34),d=i(0),v=function(){function t(){h()(this,t),this.gid=0,this.repeat=1,this._count=0}return u()(t,[{key:"to",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return this._create(t,e,i,n,r,a,s,!0,!1,!0)}},{key:"from",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return this._create(t,e,i,n,r,a,s,!1,!1,!0)}},{key:"_create",value:function(e,i,n,r,a,s,o,h,l,u){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=n,this._ease=r||i.ease||t.easeNone,this._complete=a||i.complete,this._delay=s,this._props=[],this._usedTimer=0,this._startTimer=f.a.now(),this._usedPool=l,this._delayParam=null,this.update=i.update;var c=e.$_GID||(e.$_GID=_.a.getGID());return t.tweenMap[c]?(o&&t.clearTween(e),t.tweenMap[c].push(this)):t.tweenMap[c]=[this],u?s<=0?this.firstStart(e,i,h):(this._delayParam=[e,i,h],d.a.timer.once(s,this,this.firstStart,this._delayParam)):this._initProps(e,i,h),this}},{key:"firstStart",value:function(t,e,i){this._delayParam=null,t.destroyed?this.clear():(this._initProps(t,e,i),this._beginLoop())}},{key:"_initProps",value:function(t,e,i){for(var n in e)if("number"==typeof t[n]){var r=i?t[n]:e[n],a=i?e[n]:t[n];this._props.push([n,r,a-r]),i||(t[n]=r)}}},{key:"_beginLoop",value:function(){d.a.timer.frameLoop(1,this,this._doEase)}},{key:"_doEase",value:function(){this._updateEase(f.a.now())}},{key:"_updateEase",value:function(e){var i=this._target;if(i){if(i.destroyed)return t.clearTween(i);var n=this._usedTimer=e-this._startTimer-this._delay;if(!(n<0)){if(n>=this._duration)return this.complete();for(var r=n>0?this._ease(n,0,1,this._duration):0,a=this._props,s=0,o=a.length;s<o;s++){var h=a[s];i[h[0]]=h[1]+r*h[2]}this.update&&this.update.run()}}}},{key:"complete",value:function(){if(this._target){d.a.timer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,i=this._complete,n=0,r=e.length;n<r;n++){var a=e[n];t[a[0]]=a[1]+a[2]}this.update&&this.update.run(),this._count++,0!=s()(this)&&this._count>=s()(this)?(this.clear(),i&&i.run()):this.restart()}}},{key:"pause",value:function(){var t;d.a.timer.clear(this,this._beginLoop),d.a.timer.clear(this,this._doEase),d.a.timer.clear(this,this.firstStart),(t=f.a.now()-this._startTimer-this._delay)<0&&(this._usedTimer=t)}},{key:"setStartTime",value:function(t){this._startTimer=t}},{key:"clear",value:function(){this._target&&(this._remove(),this._clear())}},{key:"_clear",value:function(){this.pause(),d.a.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this.repeat=1,this._usedPool&&(this.update=null,c.a.recover("tween",this))}},{key:"recover",value:function(){this._usedPool=!0,this._clear()}},{key:"_remove",value:function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,n=e.length;i<n;i++)if(e[i]===this){r()(e).call(e,i,1);break}}},{key:"restart",value:function(){if(this.pause(),this._usedTimer=0,this._startTimer=f.a.now(),this._delayParam)d.a.timer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var t=this._props,e=0,i=t.length;e<i;e++){var n=t[e];this._target[n[0]]=n[1]}d.a.timer.once(this._delay,this,this._beginLoop)}}},{key:"resume",value:function(){this._usedTimer>=this._duration||(this._startTimer=f.a.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?d.a.timer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())}},{key:"progress",set:function(t){var e=t*this._duration;this._startTimer=f.a.now()-this._delay-e}}],[{key:"to",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return c.a.getItemByClass("tween",t)._create(e,i,n,r,a,s,o,!0,h,!0)}},{key:"from",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return c.a.getItemByClass("tween",t)._create(e,i,n,r,a,s,o,!1,h,!0)}},{key:"clearAll",value:function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var n=0,r=i.length;n<r;n++)i[n]._clear();i.length=0}}}},{key:"clear",value:function(t){t.clear()}},{key:"clearTween",value:function(e){t.clearAll(e)}},{key:"easeNone",value:function(t,e,i,n){return i*t/n+e}}]),t}();v.tweenMap=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i(39),r=i.n(n),a=i(38),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(146),f=i(34),_=i(132),d=i(10),v=function(){function t(){h()(this,t)}return u()(t,null,[{key:"fillArray",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=s()(t).call(t);if(e)for(var r=e.split(","),a=0,o=Math.min(n.length,r.length);a<o;a++){var h=r[a];n[a]="true"==h||"false"!=h&&h,null!=i&&(n[a]=i(h))}return n}},{key:"toColor",value:function(t){return f.a.toHexColor(t)}},{key:"gray",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i?t.addFilter(e,t.grayFilter):t.clearFilter(e,c.a)}},{key:"addFilter",value:function(t,e){var i=t.filters||[];i.push(e),t.filters=i}},{key:"clearFilter",value:function(t,e){var i=t.filters;if(null!=i&&i.length>0){for(var n=i.length-1;n>-1;n--){i[n]instanceof e&&r()(i).call(i,n,1)}t.filters=i}}},{key:"_getReplaceStr",value:function(e){return t.escapeSequence[e]}},{key:"adptString",value:function(e){return e.replace(/\\(\w)/g,t._getReplaceStr)}},{key:"getBindFun",value:function(e){t._funMap||(t._funMap=new _.a);var i=t._funMap.get(e);if(null==i){var n='"'+e+'"',r="(function(data){if(data==null)return;with(data){try{\nreturn "+(n=n.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";i=window.Laya._runScript(r),t._funMap.set(e,i)}return i}}]),t}();v.grayFilter=new c.a([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]),v.escapeSequence={"\\n":"\n","\\t":"\t"},v._funMap=null,d.a.regClass("laya.ui.UIUtils",v),d.a.regClass("Laya.UIUtils",v)},,function(t,e,i){"use strict";i.d(e,"a",(function(){return L}));var n=i(3),r=i.n(n),a=i(79),s=i.n(a),o=i(88),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(7),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(44),T=i(23),b=i(228),C=i(13);function w(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var S=function(t){p()(i,t);var e=w(i);function i(){var t;return u()(this,i),(t=e.apply(this,arguments)).italic=!1,t}return f()(i,[{key:"reset",value:function(){return d()(x()(i.prototype),"reset",this).call(this),this.italic=!1,this.align="left",this.wordWrap=!1,this.leading=0,this.padding=[0,0,0,0],this.bgColor=null,this.borderColor=null,this.asPassword=!1,this.stroke=0,this.strokeColor="#000000",this.bold=!1,this.underline=!1,this.underlineColor=null,this.currBitmapFont=null,this}},{key:"recover",value:function(){this!==i.EMPTY&&C.a.recover("TextStyle",this.reset())}},{key:"render",value:function(t,e,i,n){(this.bgColor||this.borderColor)&&e.drawRect(i,n,t.width,t.height,this.bgColor,this.borderColor,1)}}],[{key:"create",value:function(){return C.a.getItemByClass("TextStyle",i)}}]),i}(b.a);S.EMPTY=new S;var E=i(5),A=i(42),M=i(32),R=i(200),I=i(0),D=i(10);function P(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var L=function(t){p()(i,t);var e=P(i);function i(){var t;return u()(this,i),(t=e.call(this))._textWidth=0,t._textHeight=0,t._lines=[],t._lineWidths=[],t._startX=0,t._startY=0,t._charSize={},t._valign="top",t._fontSize=i.defaultFontSize,t._font=i.defaultFont,t._color="#000000",t._singleCharRender=!1,t.overflow=i.VISIBLE,t._style=S.EMPTY,t}return f()(i,[{key:"getStyle",value:function(){return this._style===S.EMPTY&&(this._style=S.create()),this._style}},{key:"_getTextStyle",value:function(){return this._style===S.EMPTY&&(this._style=S.create()),this._style}},{key:"destroy",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d()(x()(i.prototype),"destroy",this).call(this,e),this._clipPoint=null,this._lines=null,this._lineWidths=null,this._words&&h()(t=this._words).call(t,(function(t){t.cleanCache()})),this._words=null,this._charSize=null}},{key:"_getBoundPointsM",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=M.a.TEMP;return t.setTo(0,0,this.width,this.height),t._getBoundPoints()}},{key:"getGraphicBounds",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=M.a.TEMP;return t.setTo(0,0,this.width,this.height),t}},{key:"_getCSSStyle",value:function(){return this._style}},{key:"get_text",value:function(){return this._text||""}},{key:"set_text",value:function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event(E.a.CHANGE),this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}},{key:"lang",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7],arguments.length>8&&void 0!==arguments[8]&&arguments[8],arguments.length>9&&void 0!==arguments[9]&&arguments[9],arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(t=i.langPacks&&i.langPacks[t]?i.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var e=0,n=arguments.length;e<n;e++)t=t.replace("{"+e+"}",arguments[e+1]);this._text=t}}},{key:"get_color",value:function(){return this._color}},{key:"set_color",value:function(t){this._color!=t&&(this._color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}},{key:"set_bgColor",value:function(t){this._getTextStyle().bgColor=t,this._renderType|=T.a.STYLE,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType),this.isChanged=!0}},{key:"get_bgColor",value:function(){return this._style.bgColor}},{key:"_getContextFont",value:function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(I.a.Browser.onIPhone&&i.fontFamilyMap[this.font]||this.font)}},{key:"_isPassWordMode",value:function(){var t=this._style.asPassword;return"prompt"in this&&this.prompt==this._text&&(t=!1),t}},{key:"_getPassWordTxt",value:function(t){var e;e="";for(var i=t.length;i>0;i--)e+="●";return e}},{key:"_renderText",value:function(){var t=this.padding,e=this._lines.length;this.overflow!=i.VISIBLE&&(e=Math.min(e,Math.floor((this.height-t[0]-t[2])/(this.leading+this._charSize.height))+1));var n=this.scrollY/(this._charSize.height+this.leading)|0,r=this.graphics;r.clear(!0);var a=this._getContextFont();I.a.Browser.context.font=a;var s=t[3],o="left",h=this._lines,l=this.leading+this._charSize.height,u=this._style.currBitmapFont;u&&(l=this.leading+u.getMaxHeight());var c=t[0];if(!u&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(o="right",s=this._width-t[1]):"center"==this.align&&(o="center",s=.5*this._width+t[3]-t[1])),this._height>0){var f=this._textHeight>this._height?"top":this.valign;"middle"===f?c=.5*(this._height-e*l)+t[0]-t[2]:"bottom"===f&&(c=this._height-e*l-t[2])}var _=this._style;if(u&&u.autoScaleSize)var d=u.fontSize/this.fontSize;if(this._clipPoint){var v,p;if(r.save(),u&&u.autoScaleSize)v=this._width?this._width-t[3]-t[1]:this._textWidth,p=this._height?this._height-t[0]-t[2]:this._textHeight,v*=d,p*=d,r.clipRect(t[3],t[0],v,p);else r.clipRect(t[3],t[0],this._width?this._width-t[3]-t[1]:this._textWidth,this._height?this._height-t[0]-t[2]:this._textHeight);this.repaint()}var y=_.asPassword;"prompt"in this&&this.prompt==this._text&&(y=!1);for(var g=0,m=0,x=Math.min(this._lines.length,e+n)||1,k=n;k<x;k++){var T,b=h[k];if(y){var C=b.length;b="";for(var w=C;w>0;w--)b+="●"}if(null==b&&(b=""),g=s-(this._clipPoint?this._clipPoint.x:0),m=c+l*k-(this._clipPoint?this._clipPoint.y:0),this.underline&&this._drawUnderline(o,g,m,k),u){var S=this.width;u.autoScaleSize&&(S=this.width*d),u._drawText(b,this,g,m,this.align,S)}else this._words||(this._words=[]),this._words.length>k-n?T=this._words[k-n]:(T=new R.a,this._words.push(T)),T.setText(b),T.splitRender=this._singleCharRender,_.stroke?r.fillBorderText(T,g,m,a,this.color,_.strokeColor,_.stroke,o):r.fillText(T,g,m,a,this.color,o)}if(u&&u.autoScaleSize){var E=1/d;this.scale(E,E)}this._clipPoint&&r.restore(),this._startX=s,this._startY=c}},{key:"_drawUnderline",value:function(t,e,i,n){var r=this._lineWidths[n];switch(t){case"center":e-=r/2;break;case"right":e-=r}i+=this._charSize.height,this._graphics.drawLine(e,i,e+r,i,this.underlineColor||this.color,1)}},{key:"typeset",value:function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);I.a.Render.isConchApp?window.conchTextCanvas.font=this._getContextFont():I.a.Browser.context.font=this._getContextFont(),this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this._parseLines(this._getPassWordTxt(this._text)):this._parseLines(this._text),this._evalTextSize(),this._checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new A.a(0,0)):this._clipPoint=null,this._renderText()}},{key:"_evalTextSize",value:function(){var t,e;t=Math.max.apply(this,this._lineWidths),e=this._style.currBitmapFont?this._lines.length*(this._style.currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t==this._textWidth&&e==this._textHeight||(this._textWidth=t,this._textHeight=e)}},{key:"_checkEnabledViewportOrNot",value:function(){return this.overflow==i.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)}},{key:"changeText",value:function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())}},{key:"_parseLines",value:function(t){var e=this.wordWrap||this.overflow==i.HIDDEN;if(e)var n=this._getWordWrapWidth();var r=this._style.currBitmapFont;if(r)this._charSize.width=r.getMaxWidth(),this._charSize.height=r.getMaxHeight();else{var a=null;(a=I.a.Render.isConchApp?window.conchTextCanvas.measureText(i._testWord):I.a.Browser.context.measureText(i._testWord))||(a={width:100}),this._charSize.width=a.width,this._charSize.height=a.height||this.fontSize}for(var s=t.replace(/\r\n/g,"\n").split("\n"),o=0,h=s.length;o<h;o++){var l=s[o];e?this._parseLine(l,n):(this._lineWidths.push(this._getTextWidth(l)),this._lines.push(l))}}},{key:"_parseLine",value:function(t,e){var n=this._lines,r=0,a=0,s=0,o=0;if((a=this._getTextWidth(t))<=e)return n.push(t),void this._lineWidths.push(a);a=this._charSize.width,0==(r=Math.floor(e/a))&&(r=1),s=a=this._getTextWidth(t.substring(0,r));for(var h=r,l=t.length;h<l;h++)if((s+=a=this._getTextWidth(t.charAt(h)))>e)if(this.wordWrap){var u=t.substring(o,h);if(u.charCodeAt(u.length-1)<255){var c=/(?:\w|-)+$/.exec(u);c&&(h=c.index+o,0==c.index?h+=u.length:u=t.substring(o,h))}if(n.push(u),this._lineWidths.push(s-a),o=h,!(h+r<l)){n.push(t.substring(o,l)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),o=-1;break}h+=r,s=a=this._getTextWidth(t.substring(o,h)),h--}else if(this.overflow==i.HIDDEN)return n.push(t.substring(0,h)),void this._lineWidths.push(this._getTextWidth(n[n.length-1]));this.wordWrap&&-1!=o&&(n.push(t.substring(o,l)),this._lineWidths.push(this._getTextWidth(n[n.length-1])))}},{key:"_getTextWidth",value:function(t){var e=this._style.currBitmapFont;return e?e.getTextWidth(t):I.a.Render.isConchApp?window.conchTextCanvas.measureText(t).width:(I.a.Browser.context.measureText(t)||{width:100}).width}},{key:"_getWordWrapWidth",value:function(){var t,e=this.padding,i=this._style.currBitmapFont;return(t=i&&i.autoScaleSize?this._width*(i.fontSize/this.fontSize):this._width)<=0&&(t=this.wordWrap?100:I.a.Browser.width),t<=0&&(t=100),t-e[3]-e[1]}},{key:"getCharPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._isChanged&&I.a.systemTimer.runCallLater(this,this.typeset);for(var i=0,n=this._lines,r=0,a=0,s=n.length;a<s;a++){if(t<(i+=n[a].length)){var o=a;break}r=i}var h=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;I.a.Browser.context.font=h;var l=this._getTextWidth(this._text.substring(r,t)),u=e||new A.a;return u.setTo(this._startX+l-(this._clipPoint?this._clipPoint.x:0),this._startY+o*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))}},{key:"width",get:function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},set:function(t){t!=this._width&&(d()(x()(i.prototype),"set_width",this).call(this,t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}},{key:"height",get:function(){return this._height?this._height:this.textHeight},set:function(t){t!=this._height&&(d()(x()(i.prototype),"set_height",this).call(this,t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}},{key:"textWidth",get:function(){return this._isChanged&&I.a.systemTimer.runCallLater(this,this.typeset),this._textWidth}},{key:"textHeight",get:function(){return this._isChanged&&I.a.systemTimer.runCallLater(this,this.typeset),this._textHeight}},{key:"text",get:function(){return this._text||""},set:function(t){this.set_text(t)}},{key:"font",get:function(){return this._font},set:function(t){this._style.currBitmapFont&&(this._getTextStyle().currBitmapFont=null,this.scale(1,1)),i._bitmapFonts&&i._bitmapFonts[t]&&(this._getTextStyle().currBitmapFont=i._bitmapFonts[t]),this._font=t,this.isChanged=!0}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!=t&&(this._fontSize=t,this.isChanged=!0)}},{key:"bold",get:function(){return this._style.bold},set:function(t){this._getTextStyle().bold=t,this.isChanged=!0}},{key:"color",get:function(){return this._color},set:function(t){this.set_color(t)}},{key:"italic",get:function(){return this._style.italic},set:function(t){this._getTextStyle().italic=t,this.isChanged=!0}},{key:"align",get:function(){return this._style.align},set:function(t){this._getTextStyle().align=t,this.isChanged=!0}},{key:"valign",get:function(){return this._valign},set:function(t){this._valign=t,this.isChanged=!0}},{key:"wordWrap",get:function(){return this._style.wordWrap},set:function(t){this._getTextStyle().wordWrap=t,this.isChanged=!0}},{key:"leading",get:function(){return this._style.leading},set:function(t){this._getTextStyle().leading=t,this.isChanged=!0}},{key:"padding",get:function(){return this._style.padding},set:function(t){if("string"==typeof t){var e,i,n;for(n=(e=t.split(",")).length;e.length<4;)e.push(0);for(i=0;i<n;i++)e[i]=s()(e[i])||0;t=e}this._getTextStyle().padding=t,this.isChanged=!0}},{key:"bgColor",get:function(){return this._style.bgColor},set:function(t){this.set_bgColor(t)}},{key:"borderColor",get:function(){return this._style.borderColor},set:function(t){this._getTextStyle().borderColor=t,this._renderType|=T.a.STYLE,this._setBorderStyleColor(0,0,this.width,this.height,t,1),this._setRenderType(this._renderType),this.isChanged=!0}},{key:"stroke",get:function(){return this._style.stroke},set:function(t){this._getTextStyle().stroke=t,this.isChanged=!0}},{key:"strokeColor",get:function(){return this._style.strokeColor},set:function(t){this._getTextStyle().strokeColor=t,this.isChanged=!0}},{key:"isChanged",set:function(t){this._isChanged!==t&&(this._isChanged=t,t&&I.a.systemTimer.callLater(this,this.typeset))}},{key:"scrollX",set:function(t){if(!(this.overflow!=i.SCROLL||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var e=this._textWidth-this._width;t=t>e?e:t,this._clipPoint.x=t,this._renderText()}},get:function(){return this._clipPoint?this._clipPoint.x:0}},{key:"scrollY",set:function(t){if(!(this.overflow!=i.SCROLL||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var e=this._textHeight-this._height;t=t>e?e:t,this._clipPoint.y=t,this._renderText()}},get:function(){return this._clipPoint?this._clipPoint.y:0}},{key:"maxScrollX",get:function(){return this.textWidth<this._width?0:this._textWidth-this._width}},{key:"maxScrollY",get:function(){return this.textHeight<this._height?0:this._textHeight-this._height}},{key:"lines",get:function(){return this._isChanged&&this.typeset(),this._lines}},{key:"underlineColor",get:function(){return this._style.underlineColor},set:function(t){this._getTextStyle().underlineColor=t,this._isChanged||this._renderText()}},{key:"underline",get:function(){return this._style.underline},set:function(t){this._getTextStyle().underline=t}},{key:"singleCharRender",set:function(t){this._singleCharRender=t},get:function(){return this._singleCharRender}}],[{key:"defaultFontStr",value:function(){return i.defaultFontSize+"px "+i.defaultFont}},{key:"registerBitmapFont",value:function(t,e){i._bitmapFonts||(i._bitmapFonts={}),i._bitmapFonts[t]=e}},{key:"unregisterBitmapFont",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(i._bitmapFonts&&i._bitmapFonts[t]){var n=i._bitmapFonts[t];e&&n.destroy(),delete i._bitmapFonts[t]}}}]),i}(k.a);L.VISIBLE="visible",L.SCROLL="scroll",L.HIDDEN="hidden",L.defaultFontSize=12,L.defaultFont="Arial",L.isComplexText=!1,L.fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"},L._testWord="游",L.CharacterCache=!0,L.RightToLeft=!1,I.a.regClass(L),D.a.regClass("laya.display.Text",L),D.a.regClass("Laya.Text",L)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.defaultSizeGrid=[4,4,4,4,0],a.labelColor="#000000",a.labelPadding=[2,2,2,2],a.inputLabelPadding=[1,1,1,3],a.buttonStateNum=3,a.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"],a.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"],a.scrollBarMinNum=15,a.scrollBarDelayTime=500},function(t,e,i){t.exports=i(652)},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=function(){function t(){r()(this,t)}return s()(t,null,[{key:"linearNone",value:function(t,e,i,n){return i*t/n+e}},{key:"linearIn",value:function(t,e,i,n){return i*t/n+e}},{key:"linearInOut",value:function(t,e,i,n){return i*t/n+e}},{key:"linearOut",value:function(t,e,i,n){return i*t/n+e}},{key:"bounceIn",value:function(e,i,n,r){return n-t.bounceOut(r-e,0,n,r)+i}},{key:"bounceInOut",value:function(e,i,n,r){return e<.5*r?.5*t.bounceIn(2*e,0,n,r)+i:.5*t.bounceOut(2*e-r,0,n,r)+.5*n+i}},{key:"bounceOut",value:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}},{key:"backIn",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return i*(t/=n)*t*((r+1)*t-r)+e}},{key:"backInOut",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return(t/=.5*n)<1?.5*i*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}},{key:"backOut",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e}},{key:"elasticIn",value:function(e,i,n,r){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return 0==e?i:1==(e/=r)?i+n:(o||(o=.3*r),!s||n>0&&s<n||n<0&&s<-n?(s=n,a=o/4):a=o/t.PI2*Math.asin(n/s),-s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*t.PI2/o)+i)}},{key:"elasticInOut",value:function(e,i,n,r){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return 0==e?i:2==(e/=.5*r)?i+n:(o||(o=r*(.3*1.5)),!s||n>0&&s<n||n<0&&s<-n?(s=n,a=o/4):a=o/t.PI2*Math.asin(n/s),e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*t.PI2/o)*-.5+i:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*t.PI2/o)*.5+n+i)}},{key:"elasticOut",value:function(e,i,n,r){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return 0==e?i:1==(e/=r)?i+n:(o||(o=.3*r),!s||n>0&&s<n||n<0&&s<-n?(s=n,a=o/4):a=o/t.PI2*Math.asin(n/s),s*Math.pow(2,-10*e)*Math.sin((e*r-a)*t.PI2/o)+n+i)}},{key:"strongIn",value:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e}},{key:"strongInOut",value:function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e}},{key:"strongOut",value:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}},{key:"sineInOut",value:function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e}},{key:"sineIn",value:function(e,i,n,r){return-n*Math.cos(e/r*t.HALF_PI)+n+i}},{key:"sineOut",value:function(e,i,n,r){return n*Math.sin(e/r*t.HALF_PI)+i}},{key:"quintIn",value:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e}},{key:"quintInOut",value:function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e}},{key:"quintOut",value:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}},{key:"quartIn",value:function(t,e,i,n){return i*(t/=n)*t*t*t+e}},{key:"quartInOut",value:function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e}},{key:"quartOut",value:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}},{key:"cubicIn",value:function(t,e,i,n){return i*(t/=n)*t*t+e}},{key:"cubicInOut",value:function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e}},{key:"cubicOut",value:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}},{key:"quadIn",value:function(t,e,i,n){return i*(t/=n)*t+e}},{key:"quadInOut",value:function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e}},{key:"quadOut",value:function(t,e,i,n){return-i*(t/=n)*(t-2)+e}},{key:"expoIn",value:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i}},{key:"expoInOut",value:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(2-Math.pow(2,-10*--t))+e}},{key:"expoOut",value:function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e}},{key:"circIn",value:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}},{key:"circInOut",value:function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e}},{key:"circOut",value:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}}]),t}();o.HALF_PI=.5*Math.PI,o.PI2=2*Math.PI},function(t,e,i){t.exports=i(631)},,function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i(37),r=i.n(n),a=i(79),s=i.n(a),o=i(11),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(34),d=function(){function t(e){var i,n,a,o;if(u()(this,t),this.arrColor=[],null==e)return this.strColor="#00000000",this.numColor=0,void(this.arrColor=[0,0,0,0]);if("string"==typeof e)if(h()(e).call(e,"rgba(")>=0||h()(e).call(e,"rgb(")>=0){var l,c,f=e;for(l=h()(f).call(f,"("),c=h()(f).call(f,")"),f=f.substring(l+1,c),this.arrColor=f.split(","),a=this.arrColor.length,n=0;n<a;n++)this.arrColor[n]=s()(this.arrColor[n]),n<3&&(this.arrColor[n]=Math.round(this.arrColor[n]));o=4==this.arrColor.length?256*(256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2])+Math.round(255*this.arrColor[3]):256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2],this.strColor=e}else{if(this.strColor=e,"#"===e.charAt(0)&&(e=e.substr(1)),3===(a=e.length)||4===a){var d="";for(n=0;n<a;n++)d+=e[n]+e[n];e=d}o=r()(e,16)}else o=e,this.strColor=_.a.toHexColor(o);h()(i=this.strColor).call(i,"rgba")>=0||9===this.strColor.length?(this.arrColor=[((4278190080&o)>>>24)/255,((16711680&o)>>16)/255,((65280&o)>>8)/255,(255&o)/255],this.numColor=(4278190080&o)>>>24|(16711680&o)>>8|(65280&o)<<8|(255&o)<<24):(this.arrColor=[((16711680&o)>>16)/255,((65280&o)>>8)/255,(255&o)/255,1],this.numColor=4278190080|(16711680&o)>>16|65280&o|(255&o)<<16),this.arrColor.__id=++t._COLODID}return f()(t,null,[{key:"_initDefault",value:function(){for(var e in t._DEFAULT={},t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT}},{key:"_initSaveMap",value:function(){for(var e in t._SAVE_SIZE=0,t._SAVE={},t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]}},{key:"create",value:function(e){var i=e+"",n=t._SAVE[i];return null!=n?n:(t._SAVE_SIZE<1e3&&t._initSaveMap(),t._SAVE[i]=new t(e))}}]),t}();d._SAVE={},d._SAVE_SIZE=0,d._COLOR_MAP={purple:"#800080",orange:"#ffa500",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#808080"},d._DEFAULT=d._initDefault(),d._COLODID=1},function(t,e,i){t.exports=i(593)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(7),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(166),g=i(5),m=i(0),x=i(10);function k(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var T=function(t){f()(i,t);var e=k(i);function i(){return s()(this,i),e.apply(this,arguments)}return i}(g.a);T.SHOW_TIP="showtip",T.HIDE_TIP="hidetip",m.a.regClass(T),x.a.regClass("laya.ui.UIEvent",T),x.a.regClass("Laya.UIEvent",T);var b=i(73);function C(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var w=function(t){f()(i,t);var e=C(i);function i(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return s()(this,i),(t=e.call(this))._anchorX=NaN,t._anchorY=NaN,t._widget=y.a.EMPTY,n&&(t.preinitialize(),t.createChildren(),t.initialize()),t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._dataSource=null,this._tag=null,this._toolTip=null}},{key:"preinitialize",value:function(){}},{key:"createChildren",value:function(){}},{key:"initialize",value:function(){}},{key:"get_width",value:function(){return this._width?this._width:this.measureWidth()}},{key:"measureWidth",value:function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._x+i.width*i.scaleX,t))}return t}},{key:"commitMeasure",value:function(){}},{key:"get_height",value:function(){return this._height?this._height:this.measureHeight()}},{key:"measureHeight",value:function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._y+i.height*i.scaleY,t))}return t}},{key:"get_dataSource",value:function(){return this._dataSource}},{key:"set_dataSource",value:function(t){for(var e in this._dataSource=t,this._dataSource)e in this&&"function"!=typeof this[e]&&(this[e]=this._dataSource[e])}},{key:"get_top",value:function(){return this._widget.top}},{key:"set_top",value:function(t){t!=this._widget.top&&(this._getWidget().top=t)}},{key:"get_bottom",value:function(){return this._widget.bottom}},{key:"set_bottom",value:function(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}},{key:"_sizeChanged",value:function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event(g.a.RESIZE),this._widget!==y.a.EMPTY&&this._widget.resetLayout()}},{key:"onMouseOver",value:function(t){m.a.stage.event(T.SHOW_TIP,this._toolTip)}},{key:"onMouseOut",value:function(t){m.a.stage.event(T.HIDE_TIP,this._toolTip)}},{key:"_getWidget",value:function(){return this._widget===y.a.EMPTY&&(this._widget=this.addComponent(y.a)),this._widget}},{key:"set_scaleX",value:function(t){u()(p()(i.prototype),"get_scaleX",this).call(this)!=t&&(u()(p()(i.prototype),"set_scaleX",this).call(this,t),this.event(g.a.RESIZE))}},{key:"set_scaleY",value:function(t){u()(p()(i.prototype),"get_scaleY",this).call(this)!=t&&(u()(p()(i.prototype),"set_scaleY",this).call(this,t),this.event(g.a.RESIZE))}},{key:"onCompResize",value:function(){this._sizeChanged()}},{key:"set_width",value:function(t){u()(p()(i.prototype),"get_width",this).call(this)!=t&&(u()(p()(i.prototype),"set_width",this).call(this,t),this.callLater(this._sizeChanged))}},{key:"set_height",value:function(t){u()(p()(i.prototype),"get_height",this).call(this)!=t&&(u()(p()(i.prototype),"set_height",this).call(this,t),this.callLater(this._sizeChanged))}},{key:"get_anchorX",value:function(){return this._anchorX}},{key:"set_anchorX",value:function(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}},{key:"get_anchorY",value:function(){return this._anchorY}},{key:"set_anchorY",value:function(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}},{key:"_childChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.callLater(this._sizeChanged),u()(p()(i.prototype),"_childChanged",this).call(this,t)}},{key:"width",get:function(){return this.get_width()},set:function(t){this.set_width(t)}},{key:"height",get:function(){return this.get_height()},set:function(t){this.set_height(t)}},{key:"dataSource",get:function(){return this.get_dataSource()},set:function(t){this.set_dataSource(t)}},{key:"top",get:function(){return this.get_top()},set:function(t){this.set_top(t)}},{key:"bottom",get:function(){return this.get_bottom()},set:function(t){this.set_bottom(t)}},{key:"left",get:function(){return this._widget.left},set:function(t){t!=this._widget.left&&(this._getWidget().left=t)}},{key:"right",get:function(){return this._widget.right},set:function(t){t!=this._widget.right&&(this._getWidget().right=t)}},{key:"centerX",get:function(){return this._widget.centerX},set:function(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}},{key:"centerY",get:function(){return this._widget.centerY},set:function(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}},{key:"tag",get:function(){return this._tag},set:function(t){this._tag=t}},{key:"toolTip",get:function(){return this._toolTip},set:function(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on(g.a.MOUSE_OVER,this,this.onMouseOver),this.on(g.a.MOUSE_OUT,this,this.onMouseOut)):(this.off(g.a.MOUSE_OVER,this,this.onMouseOver),this.off(g.a.MOUSE_OUT,this,this.onMouseOut)))}},{key:"gray",get:function(){return this._gray},set:function(t){t!==this._gray&&(this._gray=t,b.a.gray(this,t))}},{key:"disabled",get:function(){return this._disabled},set:function(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}},{key:"scaleX",set:function(t){this.set_scaleX(t)},get:function(){return u()(p()(i.prototype),"scaleX",this)}},{key:"scaleY",set:function(t){this.set_scaleY(t)},get:function(){return u()(p()(i.prototype),"scaleY",this)}},{key:"anchorX",get:function(){return this.get_anchorX()},set:function(t){this.set_anchorX(t)}},{key:"anchorY",get:function(){return this.get_anchorY()},set:function(t){this.set_anchorY(t)}}]),i}(i(44).a);m.a.regClass(w),x.a.regClass("laya.ui.UIComponent",w),x.a.regClass("Laya.UIComponent",w)},,function(t,e,i){(function(e){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||Function("return this")()}).call(this,i(174))},function(t,e,i){var n=i(86),r=i(340),a=i(119),s=i(283),o=i(342),h=i(404),l=r("wks"),u=n.Symbol,c=h?u:u&&u.withoutSetter||s;t.exports=function(t){return a(l,t)||(o&&a(u,t)?l[t]=u[t]:l[t]=c("Symbol."+t)),l[t]}},function(t,e,i){t.exports=i(638)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.loopStTm=0,a.loopCount=0},,,,function(t,e,i){var n=i(65);t.exports=function(t){return n[t+"Prototype"]}},function(t,e,i){"use strict";i.d(e,"d",(function(){return o})),i.d(e,"e",(function(){return l})),i.d(e,"c",(function(){return u})),i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return f}));var n=i(14),r=i.n(n),a=i(38),s=i.n(a);function o(t,e,i){var n=t[e];return t[e]=function(){for(var t,e=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var l=n.apply(this,s()(t=[]).call(t,a));return h(l,(function(){var t;i.apply(void 0,s()(t=[e,l]).call(t,a))})),l},function(){t[e]=n}}function h(t,e){t instanceof r.a?t.then((function(t){h(t,e)})):e()}function l(t,e,i,n){var a=t.prototype[e];return t.prototype[e]=function(){for(var o,h=this,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f,_=a.apply(this,s()(o=[]).call(o,u));_ instanceof r.a?_.then((function(){var t;i.apply(void 0,s()(t=[h,_]).call(t,u))})):i.apply(void 0,s()(f=[this,_]).call(f,u));return n&&(t.prototype[e]=a),_},function(){t.prototype[e]=a}}function u(t){return new r.a((function(e,i){return e(new t)}))}function c(t){var e=this;return new r.a((function(i,n){if(t.active)return i();t.once("onViewCreated",e,(function(){return i()}))}))}function f(t){return new r.a((function(e,i){if(t.active)return e();o(t,"onEnable",(function(){e()})),o(t,"onDestroy",(function(){i()}))}))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return N}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(43),u=i.n(l),c=i(35),f=i.n(c),_=i(7),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(113),T=i(124),b=i(33),C=i(44),w=i(5),S=i(54),E=i(78),A=i(19),M=i(72),R=function t(){s()(this,t)};R.Dialog=null;var I=i(10),D=i(0);function P(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var L=function(t){p()(i,t);var e=P(i);function i(){var t;return s()(this,i),(t=e.call(this)).maskLayer=new C.a,t.popupEffect=function(e){e.scale(1,1),e._effectTween=M.a.from(e,{x:D.a.stage.width/2,y:D.a.stage.height/2,scaleX:0,scaleY:0},300,E.a.backOut,A.a.create(u()(t),t.doOpen,[e]),0,!1,!1)},t.closeEffect=function(e){e._effectTween=M.a.to(e,{x:D.a.stage.width/2,y:D.a.stage.height/2,scaleX:0,scaleY:0},300,E.a.strongOut,A.a.create(u()(t),t.doClose,[e]),0,!1,!1)},t.popupEffectHandler=new A.a(u()(t),t.popupEffect),t.closeEffectHandler=new A.a(u()(t),t.closeEffect),t.mouseEnabled=t.maskLayer.mouseEnabled=!0,t.zOrder=1e3,D.a.stage.addChild(u()(t)),D.a.stage.on(w.a.RESIZE,u()(t),t._onResize),T.a.closeDialogOnSide&&t.maskLayer.on("click",u()(t),t._closeOnSide),t._onResize(null),t}return h()(i,[{key:"_closeOnSide",value:function(){var t=this.getChildAt(this.numChildren-1);t instanceof R.Dialog&&t.close()}},{key:"setLockView",value:function(t){this.lockLayer||(this.lockLayer=new S.a,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(D.a.stage.width,D.a.stage.height)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))}},{key:"_onResize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this.maskLayer.width=D.a.stage.width,e=this.maskLayer.height=D.a.stage.height;this.lockLayer&&this.lockLayer.size(t,e),this.maskLayer.graphics.clear(!0),this.maskLayer.graphics.drawRect(0,0,t,e,T.a.popupBgColor),this.maskLayer.alpha=T.a.popupBgAlpha;for(var i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n.isPopupCenter&&this._centerDialog(n)}}},{key:"_centerDialog",value:function(t){t.x=Math.round((D.a.stage.width-t.width>>1)+t.pivotX),t.y=Math.round((D.a.stage.height-t.height>>1)+t.pivotY)}},{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&this._closeAll(),this._clearDialogEffect(t),t.isPopupCenter&&this._centerDialog(t),this.addChild(t),(t.isModal||this._getBit(b.a.HAS_ZORDER))&&D.a.timer.callLater(this,this._checkMask),i&&null!=t.popupEffect?t.popupEffect.runWith(t):this.doOpen(t),this.event(w.a.OPEN)}},{key:"_clearDialogEffect",value:function(t){t._effectTween&&(M.a.clear(t._effectTween),t._effectTween=null)}},{key:"doOpen",value:function(t){t.onOpened(t._param)}},{key:"lock",value:function(t){this.lockLayer&&(t?this.addChild(this.lockLayer):this.lockLayer.removeSelf())}},{key:"close",value:function(t){this._clearDialogEffect(t),t.isShowEffect&&null!=t.closeEffect?t.closeEffect.runWith([t]):this.doClose(t),this.event(w.a.CLOSE)}},{key:"doClose",value:function(t){t.removeSelf(),t.isModal&&this._checkMask(),t.closeHandler&&t.closeHandler.runWith(t.closeType),t.onClosed(t.closeType),t.autoDestroyAtClosed&&t.destroy()}},{key:"closeAll",value:function(){this._closeAll(),this.event(w.a.CLOSE)}},{key:"_closeAll",value:function(){for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);e&&null!=e.close&&this.doClose(e)}}},{key:"getDialogsByGroup",value:function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===t&&e.push(n)}return e}},{key:"closeByGroup",value:function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===t&&(n.close(),e.push(n))}return e}},{key:"_checkMask",value:function(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);if(e&&e.isModal)return void this.addChildAt(this.maskLayer,t)}}}]),i}(C.a);I.a.regClass("laya.ui.DialogManager",L),I.a.regClass("Laya.DialogManager",L);var B=i(73),O=i(32);function F(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var N=function(t){p()(i,t);var e=F(i);function i(){var t;return s()(this,i),(t=e.call(this)).isShowEffect=!0,t.isPopupCenter=!0,t.popupEffect=i.manager.popupEffectHandler,t.closeEffect=i.manager.closeEffectHandler,t._dealDragArea(),t.on(w.a.CLICK,u()(t),t._onClick),t}return h()(i,[{key:"_dealDragArea",value:function(){var t=this.getChildByName("drag");t&&(this.dragArea=t._x+","+t._y+","+t.width+","+t.height,t.removeSelf())}},{key:"_onMouseDown",value:function(t){var e=this.getMousePoint();this._dragArea.contains(e.x,e.y)?this.startDrag():this.stopDrag()}},{key:"_onClick",value:function(t){var e=t.target;if(e)switch(e.name){case i.CLOSE:case i.CANCEL:case i.SURE:case i.NO:case i.OK:case i.YES:return void this.close(e.name)}}},{key:"open",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._dealDragArea(),this._param=e,i.manager.open(this,t,this.isShowEffect),i.manager.lock(!1)}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.closeType=t,i.manager.close(this)}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this._dragArea=null,d()(x()(i.prototype),"destroy",this).call(this,t)}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._open(!1,t,e)}},{key:"popup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._open(!0,t,e)}},{key:"_open",value:function(t,e,n){this.isModal=t,this.isShowEffect=n,i.manager.lock(!0),this.open(e)}},{key:"dragArea",get:function(){return this._dragArea?this._dragArea.toString():null},set:function(t){if(t){var e=B.a.fillArray([0,0,0,0],t,Number);this._dragArea=new O.a(e[0],e[1],e[2],e[3]),this.on(w.a.MOUSE_DOWN,this,this._onMouseDown)}else this._dragArea=null,this.off(w.a.MOUSE_DOWN,this,this._onMouseDown)}},{key:"isPopup",get:function(){return null!=this.parent}},{key:"zOrder",set:function(t){f()(x()(i.prototype),"zOrder",t,this,!0),i.manager._checkMask()},get:function(){return d()(x()(i.prototype),"zOrder",this)}}],[{key:"setLockView",value:function(t){i.manager.setLockView(t)}},{key:"lock",value:function(t){i.manager.lock(t)}},{key:"closeAll",value:function(){i.manager.closeAll()}},{key:"getDialogsByGroup",value:function(t){return i.manager.getDialogsByGroup(t)}},{key:"closeByGroup",value:function(t){return i.manager.closeByGroup(t)}},{key:"manager",get:function(){return i._manager=i._manager||new L},set:function(t){i._manager=t}}]),i}(k.a);N.CLOSE="close",N.CANCEL="cancel",N.SURE="sure",N.NO="no",N.YES="yes",N.OK="ok",R.Dialog=N,D.a.regClass(N),I.a.regClass("laya.ui.Dialog",N),I.a.regClass("Laya.Dialog",N)},function(t,e,i){var n=i(65),r=i(119),a=i(351),s=i(136).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:a.f(t)})}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var n=i(3),r=i.n(n),a=i(11),s=i.n(a),o=i(39),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(43),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(0),T=i(66),b=i(40);function C(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var w=function(t){p()(i,t);var e=C(i);function i(){var t;return u()(this,i),(t=e.call(this))._id=0,t._url=null,t._cpuMemory=0,t._gpuMemory=0,t._destroyed=!1,t._referenceCount=0,t.lock=!1,t.name=null,t._id=++i._uniqueIDCounter,t._destroyed=!1,t._referenceCount=0,i._idResourcesMap[t.id]=d()(t),t.lock=!1,t}return f()(i,[{key:"_setCPUMemory",value:function(t){var e=t-this._cpuMemory;this._cpuMemory=t,i._addCPUMemory(e)}},{key:"_setGPUMemory",value:function(t){var e=t-this._gpuMemory;this._gpuMemory=t,i._addGPUMemory(e)}},{key:"_setCreateURL",value:function(t){var e;(t=b.a.formatURL(t),this._url!==t)&&(this._url&&(e=i._urlResourcesMap[this._url],h()(e).call(e,s()(e).call(e,this),1),0===e.length&&delete i._urlResourcesMap[this._url]),t&&((e=i._urlResourcesMap[t])||(i._urlResourcesMap[t]=e=[]),e.push(this)),this._url=t)}},{key:"_addReference",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._referenceCount+=t}},{key:"_removeReference",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._referenceCount-=t}},{key:"_clearReference",value:function(){this._referenceCount=0}},{key:"_recoverResource",value:function(){}},{key:"_disposeResource",value:function(){}},{key:"_activeResource",value:function(){}},{key:"destroy",value:function(){var t;this._destroyed||(this._destroyed=!0,this.lock=!1,this._disposeResource(),delete i._idResourcesMap[this.id],this._url&&((t=i._urlResourcesMap[this._url])&&(h()(t).call(t,s()(t).call(t,this),1),0===t.length&&delete i._urlResourcesMap[this._url]),k.a.Loader.loadedMap[this._url]==this&&delete k.a.Loader.loadedMap[this._url]))}},{key:"id",get:function(){return this._id}},{key:"url",get:function(){return this._url}},{key:"cpuMemory",get:function(){return this._cpuMemory}},{key:"gpuMemory",get:function(){return this._gpuMemory}},{key:"destroyed",get:function(){return this._destroyed}},{key:"referenceCount",get:function(){return this._referenceCount}}],[{key:"_addCPUMemory",value:function(t){i._cpuMemory+=t}},{key:"_addGPUMemory",value:function(t){i._gpuMemory+=t}},{key:"_addMemory",value:function(t,e){i._cpuMemory+=t,i._gpuMemory+=e}},{key:"getResourceByID",value:function(t){return i._idResourcesMap[t]}},{key:"getResourceByURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i._urlResourcesMap[t][e]}},{key:"destroyUnusedResources",value:function(){for(var t in i._idResourcesMap){var e=i._idResourcesMap[t];e.lock||0!==e._referenceCount||e.destroy()}}},{key:"cpuMemory",get:function(){return i._cpuMemory}},{key:"gpuMemory",get:function(){return i._gpuMemory}}]),i}(T.a);w._uniqueIDCounter=0,w._idResourcesMap={},w._urlResourcesMap={},w._cpuMemory=0,w._gpuMemory=0},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.animationInterval=50,a.isAntialias=!1,a.isAlpha=!1,a.premultipliedAlpha=!0,a.isStencil=!0,a.preserveDrawingBuffer=!1,a.webGL2D_MeshAllocMaxMem=!0,a.is2DPixelArtGame=!1,a.useWebGL2=!0,a.allowGPUInstanceDynamicBatch=!0,a.useRetinalCanvas=!1,window.Config=a},,function(t,e,i){t.exports=i(579)},,function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i(3),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(43),f=i.n(c),_=i(7),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(75),T=i(5),b=i(34),C=i(0),w=i(10);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var E=function(t){p()(i,t);var e=S(i);function i(){var t;return h()(this,i),(t=e.call(this))._multiline=!1,t._editable=!0,t._maxChars=1e5,t._type="text",t._prompt="",t._promptColor="#A9A9A9",t._originColor="#000000",t._content="",i.IOS_IFRAME=C.a.Browser.onIOS&&C.a.Browser.window.top!=C.a.Browser.window.self,t._width=100,t._height=20,t.multiline=!1,t.overflow=k.a.SCROLL,t.on(T.a.MOUSE_DOWN,f()(t),t._onMouseDown),t.on(T.a.UNDISPLAY,f()(t),t._onUnDisplay),t}return u()(i,[{key:"setSelection",value:function(t,e){this.focus=!0,i.inputElement.selectionStart=t,i.inputElement.selectionEnd=e}},{key:"_onUnDisplay",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.focus=!1}},{key:"_onMouseDown",value:function(t){this.focus=!0}},{key:"_syncInputTransform",value:function(){var t=this.nativeInput,e=b.a.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),n=this._width-this.padding[1]-this.padding[3],r=this._height-this.padding[0]-this.padding[2];C.a.Render.isConchApp?(t.setScale(e.scaleX,e.scaleY),t.setSize(n,r),t.setPos(e.x,e.y)):(i.inputContainer.style.transform=i.inputContainer.style.webkitTransform="scale("+e.scaleX+","+e.scaleY+") rotate("+C.a.stage.canvasDegree+"deg)",t.style.width=n+"px",t.style.height=r+"px",i.inputContainer.style.left=e.x+"px",i.inputContainer.style.top=e.y+"px")}},{key:"select",value:function(){this.nativeInput.select()}},{key:"_setInputMethod",value:function(){i.input.parentElement&&i.inputContainer.removeChild(i.input),i.area.parentElement&&i.inputContainer.removeChild(i.area),i.inputElement=this._multiline?i.area:i.input,i.inputContainer.appendChild(i.inputElement),k.a.RightToLeft&&(i.inputElement.style.direction="rtl")}},{key:"_focusIn",value:function(){i.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,C.a.Render.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.value=this._content,t.placeholder=this._prompt,C.a.stage.off(T.a.KEY_DOWN,this,this._onKeyDown),C.a.stage.on(T.a.KEY_DOWN,this,this._onKeyDown),C.a.stage.focus=this,this.event(T.a.FOCUS),C.a.Browser.onPC&&t.focus(),!(C.a.Browser.onMiniGame||C.a.Browser.onBDMiniGame||C.a.Browser.onQGMiniGame||C.a.Browser.onKGMiniGame||C.a.Browser.onVVMiniGame||C.a.Browser.onAlipayMiniGame||C.a.Browser.onQQMiniGame||C.a.Browser.onBLMiniGame)){this._text;this._text=null}this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(C.a.Browser.onIPhone&&k.a.fontFamilyMap[this.font]||this.font),C.a.Render.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!C.a.Render.isConchApp&&C.a.Browser.onPC&&C.a.systemTimer.frameLoop(1,this,this._syncInputTransform)}},{key:"_setPromptColor",value:function(){i.promptStyleDOM=C.a.Browser.getElementById("promptStyle"),i.promptStyleDOM||(i.promptStyleDOM=C.a.Browser.createElement("style"),i.promptStyleDOM.setAttribute("id","promptStyle"),C.a.Browser.document.head.appendChild(i.promptStyleDOM)),i.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"}},{key:"_focusOut",value:function(){i.isInputting&&(i.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(d()(x()(i.prototype),"set_text",this).call(this,this._content),d()(x()(i.prototype),"set_color",this).call(this,this._originColor)):(d()(x()(i.prototype),"set_text",this).call(this,this._prompt),d()(x()(i.prototype),"set_color",this).call(this,this._promptColor)),C.a.stage.off(T.a.KEY_DOWN,this,this._onKeyDown),C.a.stage.focus=null,this.event(T.a.BLUR),this.event(T.a.CHANGE),C.a.Render.isConchApp&&this.nativeInput.blur(),C.a.Browser.onPC&&C.a.systemTimer.clear(this,this._syncInputTransform))}},{key:"_onKeyDown",value:function(t){13===t.keyCode&&(C.a.Browser.onMobile&&!this._multiline&&(this.focus=!1),this.event(T.a.ENTER))}},{key:"changeText",value:function(t){this._content=t,this._focus?(this.nativeInput.value=t||"",this.event(T.a.CHANGE)):d()(x()(i.prototype),"changeText",this).call(this,t)}},{key:"multiline",get:function(){return this._multiline},set:function(t){this._multiline=t,this.valign=t?"top":"middle"}},{key:"nativeInput",get:function(){return this._multiline?i.area:i.input}},{key:"focus",get:function(){return this._focus},set:function(t){var e=this.nativeInput;this._focus!==t&&(t?(e.target?e.target._focusOut():this._setInputMethod(),e.target=this,this._focusIn()):(e.target=null,this._focusOut(),C.a.Browser.document.body.scrollTop=0,e.blur(),C.a.Render.isConchApp?e.setPos(-1e4,-1e4):i.inputContainer.contains(e)&&i.inputContainer.removeChild(e)))}},{key:"text",set:function(t){d()(x()(i.prototype),"set_color",this).call(this,this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event(T.a.CHANGE)):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?d()(x()(i.prototype),"set_text",this).call(this,t):(d()(x()(i.prototype),"set_text",this).call(this,this._prompt),d()(x()(i.prototype),"set_color",this).call(this,this.promptColor)))},get:function(){return this._focus?this.nativeInput.value:this._content||""}},{key:"color",set:function(t){this._focus&&this.nativeInput.setColor(t),d()(x()(i.prototype),"set_color",this).call(this,this._content?t:this._promptColor),this._originColor=t},get:function(){return d()(x()(i.prototype),"color",this)}},{key:"bgColor",set:function(t){d()(x()(i.prototype),"set_bgColor",this).call(this,t),C.a.Render.isConchApp&&this.nativeInput.setBgColor(t)},get:function(){return d()(x()(i.prototype),"bgColor",this)}},{key:"restrict",get:function(){return this._restrictPattern?this._restrictPattern.source:""},set:function(t){t?(t="[^"+t+"]",s()(t).call(t,"^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}},{key:"editable",set:function(t){this._editable=t,C.a.Render.isConchApp&&i.input.setForbidEdit(!t)},get:function(){return this._editable}},{key:"maxChars",get:function(){return this._maxChars},set:function(t){t<=0&&(t=1e5),this._maxChars=t}},{key:"prompt",get:function(){return this._prompt},set:function(t){!this._text&&t&&d()(x()(i.prototype),"set_color",this).call(this,this._promptColor),this.promptColor=this._promptColor,this._text?d()(x()(i.prototype),"set_text",this).call(this,this._text==this._prompt?t:this._text):d()(x()(i.prototype),"set_text",this).call(this,t),this._prompt=k.a.langPacks&&k.a.langPacks[t]?k.a.langPacks[t]:t}},{key:"promptColor",get:function(){return this._promptColor},set:function(t){this._promptColor=t,this._content||d()(x()(i.prototype),"set_color",this).call(this,t)}},{key:"type",get:function(){return this._type},set:function(t){this._getTextStyle().asPassword="password"===t,this._type=t}}],[{key:"__init__",value:function(){if(i._createInputElement(),C.a.Browser.onMobile){var t=!1;(C.a.Browser.onMiniGame||C.a.Browser.onBDMiniGame||C.a.Browser.onQGMiniGame||C.a.Browser.onKGMiniGame||C.a.Browser.onVVMiniGame||C.a.Browser.onAlipayMiniGame||C.a.Browser.onQQMiniGame||C.a.Browser.onBLMiniGame)&&(t=!0),C.a.Render.canvas.addEventListener(i.IOS_IFRAME?t?"touchend":"click":"touchend",i._popupInputMethod)}}},{key:"_popupInputMethod",value:function(t){i.isInputting&&i.inputElement.focus()}},{key:"_createInputElement",value:function(){i._initInput(i.area=C.a.Browser.createElement("textarea")),i._initInput(i.input=C.a.Browser.createElement("input")),i.inputContainer=C.a.Browser.createElement("div"),i.inputContainer.style.position="absolute",i.inputContainer.style.zIndex=1e5,C.a.Browser.container.appendChild(i.inputContainer),i.inputContainer.setPos=function(t,e){i.inputContainer.style.left=t+"px",i.inputContainer.style.top=e+"px"}}},{key:"_initInput",value:function(t){var e=t.style;e.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",e.resize="none",e.backgroundColor="transparent",e.border="none",e.outline="none",e.zIndex=1,t.addEventListener("input",i._processInputting),t.addEventListener("mousemove",i._stopEvent),t.addEventListener("mousedown",i._stopEvent),t.addEventListener("touchmove",i._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e},C.a.Render.isConchApp||(t.setColor=function(e){t.style.color=e},t.setFontSize=function(e){t.style.fontSize=e+"px"})}},{key:"_processInputting",value:function(t){var e=i.inputElement.target;if(e){var n=i.inputElement.value;e._restrictPattern&&(n=n.replace(/\u2006|\x27/g,""),e._restrictPattern.test(n)&&(n=n.replace(e._restrictPattern,""),i.inputElement.value=n)),e._text=n,e.event(T.a.INPUT)}}},{key:"_stopEvent",value:function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}}]),i}(k.a);E.TYPE_TEXT="text",E.TYPE_PASSWORD="password",E.TYPE_EMAIL="email",E.TYPE_URL="url",E.TYPE_NUMBER="number",E.TYPE_RANGE="range",E.TYPE_DATE="date",E.TYPE_MONTH="month",E.TYPE_WEEK="week",E.TYPE_TIME="time",E.TYPE_DATE_TIME="datetime",E.TYPE_DATE_TIME_LOCAL="datetime-local",E.TYPE_SEARCH="search",E.IOS_IFRAME=!1,E.inputHeight=45,E.isInputting=!1,w.a.regClass("laya.display.Input",E),w.a.regClass("Laya.Input",E)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return xt}));var n=i(88),r=i.n(n),a=i(38),s=i.n(a),o=i(256),h=i.n(o),l=i(15),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(0),p=i(16),y=i(223),g=i(18),m=i(42),x=i(32),k=i(22),T=i(68),b=i(186),C=function(){function t(){f()(this,t),this._lastOriX=0,this._lastOriY=0,this.paths=[],this._curPath=null}return d()(t,[{key:"beginPath",value:function(t){this.paths.length=1,this._curPath=this.paths[0]=new w,this._curPath.convex=t}},{key:"closePath",value:function(){this._curPath.loop=!0}},{key:"newPath",value:function(){this._curPath=new w,this.paths.push(this._curPath)}},{key:"addPoint",value:function(t,e){this._curPath.path.push(t,e)}},{key:"push",value:function(t,e){this._curPath?this._curPath.path.length>0&&(this._curPath=new w,this.paths.push(this._curPath)):(this._curPath=new w,this.paths.push(this._curPath));var i=this._curPath;i.path=u()(t).call(t),i.convex=e}},{key:"reset",value:function(){this.paths.length=0}}]),t}(),w=function t(){f()(this,t),this.path=[],this.loop=!1,this.convex=!1},S=i(41),E=function(){function t(){f()(this,t)}return d()(t,[{key:"isSaveMark",value:function(){return!1}},{key:"restore",value:function(e){this._dataObj[this._valueName]=this._value,t.POOL[t.POOL._length++]=this,this._newSubmit&&(e._curSubmit=S.a.RENDERBASE)}}],[{key:"_createArray",value:function(){var t=[];return t._length=0,t}},{key:"_init",value:function(){var e=t._namemap={};return e[t.TYPE_ALPHA]="ALPHA",e[t.TYPE_FILESTYLE]="fillStyle",e[t.TYPE_FONT]="font",e[t.TYPE_LINEWIDTH]="lineWidth",e[t.TYPE_STROKESTYLE]="strokeStyle",e[t.TYPE_ENABLEMERGE]="_mergeID",e[t.TYPE_MARK]=e[t.TYPE_TRANSFORM]=e[t.TYPE_TRANSLATE]=[],e[t.TYPE_TEXTBASELINE]="textBaseline",e[t.TYPE_TEXTALIGN]="textAlign",e[t.TYPE_GLOBALCOMPOSITEOPERATION]="_nBlendType",e[t.TYPE_SHADER]="shader",e[t.TYPE_FILTERS]="filters",e[t.TYPE_COLORFILTER]="_colorFiler",e}},{key:"save",value:function(e,i,n,r){if((e._saveMark._saveuse&i)!==i){e._saveMark._saveuse|=i;var a=t.POOL,s=a._length>0?a[--a._length]:new t;s._value=n[s._valueName=t._namemap[i]],s._dataObj=n,s._newSubmit=r;var o=e._save;o[o._length++]=s}}}]),t}();E.TYPE_ALPHA=1,E.TYPE_FILESTYLE=2,E.TYPE_FONT=8,E.TYPE_LINEWIDTH=256,E.TYPE_STROKESTYLE=512,E.TYPE_MARK=1024,E.TYPE_TRANSFORM=2048,E.TYPE_TRANSLATE=4096,E.TYPE_ENABLEMERGE=8192,E.TYPE_TEXTBASELINE=16384,E.TYPE_TEXTALIGN=32768,E.TYPE_GLOBALCOMPOSITEOPERATION=65536,E.TYPE_CLIPRECT=131072,E.TYPE_CLIPRECT_STENCIL=262144,E.TYPE_IBVB=524288,E.TYPE_SHADER=1048576,E.TYPE_FILTERS=2097152,E.TYPE_FILTERS_TYPE=4194304,E.TYPE_COLORFILTER=8388608,E.POOL=E._createArray(),E._namemap=E._init();var A=function(){function t(){f()(this,t),this._globalClipMatrix=new g.a,this._clipInfoID=-1,this._clipRect=new x.a,this.incache=!1}return d()(t,[{key:"isSaveMark",value:function(){return!1}},{key:"restore",value:function(e){this._globalClipMatrix.copyTo(e._globalClipMatrix),this._clipRect.clone(e._clipRect),e._clipInfoID=this._clipInfoID,t.POOL[t.POOL._length++]=this,e._clipInCache=this.incache}}],[{key:"save",value:function(e){if((e._saveMark._saveuse&E.TYPE_CLIPRECT)!=E.TYPE_CLIPRECT){e._saveMark._saveuse|=E.TYPE_CLIPRECT;var i=t.POOL,n=i._length>0?i[--i._length]:new t;e._globalClipMatrix.copyTo(n._globalClipMatrix),e._clipRect.clone(n._clipRect),n._clipInfoID=e._clipInfoID,n.incache=e._clipInCache;var r=e._save;r[r._length++]=n}}}]),t}();A.POOL=E._createArray();var M=function(){function t(){f()(this,t),this._saveuse=0}return d()(t,[{key:"isSaveMark",value:function(){return!0}},{key:"restore",value:function(e){e._saveMark=this._preSaveMark,t.POOL[t.POOL._length++]=this}}],[{key:"Create",value:function(e){var i=t.POOL,n=i._length>0?i[--i._length]:new t;return n._saveuse=0,n._preSaveMark=e._saveMark,e._saveMark=n,n}}]),t}();M.POOL=E._createArray();var R=function(){function t(){f()(this,t),this._matrix=new g.a}return d()(t,[{key:"isSaveMark",value:function(){return!1}},{key:"restore",value:function(e){e._curMat=this._savematrix,t.POOL[t.POOL._length++]=this}}],[{key:"save",value:function(e){var i=e._saveMark;if((i._saveuse&E.TYPE_TRANSFORM)!==E.TYPE_TRANSFORM){i._saveuse|=E.TYPE_TRANSFORM;var n=t.POOL,r=n._length>0?n[--n._length]:new t;r._savematrix=e._curMat,e._curMat=e._curMat.copyTo(r._matrix);var a=e._save;a[a._length++]=r}}}]),t}();R.POOL=E._createArray();var I=function(){function t(){f()(this,t),this._mat=new g.a}return d()(t,[{key:"isSaveMark",value:function(){return!1}},{key:"restore",value:function(e){this._mat.copyTo(e._curMat),t.POOL[t.POOL._length++]=this}}],[{key:"save",value:function(e){var i=t.POOL,n=i._length>0?i[--i._length]:new t;e._curMat.copyTo(n._mat);var r=e._save;r[r._length++]=n}}]),t}();I.POOL=E._createArray();var D=i(306),P=i(106),L=i(257),B=i(49),O=i(307),F=i(308),N=function(){function t(){f()(this,t);var e=p.a.instance;this.ib=O.a.create(e.DYNAMIC_DRAW),this.vb=F.a.create(8)}return d()(t,[{key:"addSkinMesh",value:function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32)}},{key:"reset",value:function(){this.vb.clear(),this.ib.clear()}}],[{key:"getInstance",value:function(){return t.instance=t.instance||new t}}]),t}(),U=i(60),G=function(){function t(){f()(this,t)}return d()(t,null,[{key:"createLine2",value:function(e,i,n,r,a,s){if(e.length<4)return null;var o=t.tempData.length>e.length+2?t.tempData:new Array(e.length+2);o[0]=e[0],o[1]=e[1];var h=2,l=0,u=e.length;for(l=2;l<u;l+=2)Math.abs(e[l]-e[l-2])+Math.abs(e[l+1]-e[l-1])>.01&&(o[h++]=e[l],o[h++]=e[l+1]);s&&Math.abs(e[0]-o[h-2])+Math.abs(e[1]-o[h-1])>.01&&(o[h++]=e[0],o[h++]=e[1]);var c=a;u=h/2;var f,_,d,v,p,y,g,m,x,k,T,b,C,w,S,E,A,M,R,I,D=n/2;for(d=o[0],v=o[1],k=d-(p=o[2]),x=(x=-(v-(y=o[3])))/(I=Math.sqrt(x*x+k*k))*D,k=k/I*D,c.push(d-x,v-k,d+x,v+k),l=1;l<u-1;l++)d=o[2*(l-1)],v=o[2*(l-1)+1],p=o[2*l],y=o[2*l+1],g=o[2*(l+1)],m=o[2*(l+1)+1],k=d-p,b=p-g,S=(-(x=(x=-(v-y))/(I=Math.sqrt(x*x+k*k))*D)+d)*(-(k=k/I*D)+y)-(-x+p)*(-k+v),M=(-(T=(T=-(y-m))/(I=Math.sqrt(T*T+b*b))*D)+g)*(-(b=b/I*D)+y)-(-T+p)*(-b+m),R=(C=-k+v-(-k+y))*(A=-T+p-(-T+g))-(E=-b+m-(-b+y))*(w=-x+p-(-x+d)),Math.abs(R)<.1?(R+=10.1,c.push(p-x,y-k,p+x,y+k)):(((f=(w*M-A*S)/R)-p)*(f-p)+((_=(E*S-C*M)/R)-y)+(_-y),c.push(f,_,p-(f-p),y-(_-y)));for(d=o[h-4],v=o[h-3],k=d-(p=o[h-2]),x=(x=-(v-(y=o[h-1])))/(I=Math.sqrt(x*x+k*k))*D,k=k/I*D,c.push(p-x,y-k,p+x,y+k),l=1;l<u;l++)i.push(r+2*(l-1),r+2*(l-1)+1,r+2*l+1,r+2*l+1,r+2*l,r+2*(l-1));return c}},{key:"createLineTriangle",value:function(t,e,i,n,r,a,s){var o=u()(t).call(t),h=o.length,l=o[0],c=o[1],f=o[2],_=(o[2],0),d=0,v=0,p=0,y=h/2;if(!(y<=1)&&2!=y){for(var g=new Array(4*y),m=0,x=0,k=0;k<y-1;k++)l=o[x++],c=o[x++],f=o[x++],p=o[x++]-c,0!=(v=f-l)&&0!=p&&(_=Math.sqrt(v*v+p*p))>.001&&(g[d=4*m]=l,g[d+1]=c,g[d+2]=v/_,g[d+3]=p/_,m++);for(n?(l=o[h-2],c=o[h-1],f=o[0],p=o[1]-c,0!=(v=f-l)&&0!=p&&(_=Math.sqrt(v*v+p*p))>.001&&(g[d=4*m]=l,g[d+1]=c,g[d+2]=v/_,g[d+3]=p/_,m++)):(g[d=4*m]=l,g[d+1]=c,g[d+2]=v/_,g[d+3]=p/_,m++),x=0,k=0;k<y;k++)l=o[x],c=o[x+1],f=o[x+2],o[x+3]}}}]),t}();G.tempData=new Array(256);var Y=i(137),W=i.n(Y),V=function t(e,i,n){f()(this,t),this.i=e,this.x=i,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},X=function(){function t(){f()(this,t)}return d()(t,null,[{key:"earcut",value:function(e,i,n){n=n||2;var r,a,s,o,h,l,u,c=i&&i.length,f=c?i[0]*n:e.length,_=t.linkedList(e,0,f,n,!0),d=[];if(!_)return d;if(c&&(_=t.eliminateHoles(e,i,_,n)),e.length>80*n){r=s=e[0],a=o=e[1];for(var v=n;v<f;v+=n)(h=e[v])<r&&(r=h),(l=e[v+1])<a&&(a=l),h>s&&(s=h),l>o&&(o=l);u=0!==(u=Math.max(s-r,o-a))?1/u:0}return t.earcutLinked(_,d,n,r,a,u),d}},{key:"linkedList",value:function(e,i,n,r,a){var s,o;if(a===t.signedArea(e,i,n,r)>0)for(s=i;s<n;s+=r)o=t.insertNode(s,e[s],e[s+1],o);else for(s=n-r;s>=i;s-=r)o=t.insertNode(s,e[s],e[s+1],o);return o&&t.equals(o,o.next)&&(t.removeNode(o),o=o.next),o}},{key:"filterPoints",value:function(e,i){if(!e)return e;i||(i=e);var n,r=e;do{if(n=!1,r.steiner||!t.equals(r,r.next)&&0!==t.area(r.prev,r,r.next))r=r.next;else{if(t.removeNode(r),(r=i=r.prev)===r.next)break;n=!0}}while(n||r!==i);return i}},{key:"earcutLinked",value:function(e,i,n,r,a,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e){!o&&s&&t.indexCurve(e,r,a,s);for(var h,l,u=e;e.prev!==e.next;)if(h=e.prev,l=e.next,s?t.isEarHashed(e,r,a,s):t.isEar(e))i.push(h.i/n),i.push(e.i/n),i.push(l.i/n),t.removeNode(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?(e=t.cureLocalIntersections(e,i,n),t.earcutLinked(e,i,n,r,a,s,2)):2===o&&t.splitEarcut(e,i,n,r,a,s):t.earcutLinked(t.filterPoints(e,null),i,n,r,a,s,1);break}}}},{key:"isEar",value:function(e){var i=e.prev,n=e,r=e.next;if(t.area(i,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(t.pointInTriangle(i.x,i.y,n.x,n.y,r.x,r.y,a.x,a.y)&&t.area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}},{key:"isEarHashed",value:function(e,i,n,r){var a=e.prev,s=e,o=e.next;if(t.area(a,s,o)>=0)return!1;for(var h=a.x<s.x?a.x<o.x?a.x:o.x:s.x<o.x?s.x:o.x,l=a.y<s.y?a.y<o.y?a.y:o.y:s.y<o.y?s.y:o.y,u=a.x>s.x?a.x>o.x?a.x:o.x:s.x>o.x?s.x:o.x,c=a.y>s.y?a.y>o.y?a.y:o.y:s.y>o.y?s.y:o.y,f=t.zOrder(h,l,i,n,r),_=t.zOrder(u,c,i,n,r),d=e.nextZ;d&&d.z<=_;){if(d!==e.prev&&d!==e.next&&t.pointInTriangle(a.x,a.y,s.x,s.y,o.x,o.y,d.x,d.y)&&t.area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&t.pointInTriangle(a.x,a.y,s.x,s.y,o.x,o.y,d.x,d.y)&&t.area(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}},{key:"cureLocalIntersections",value:function(e,i,n){var r=e;do{var a=r.prev,s=r.next.next;!t.equals(a,s)&&t.intersects(a,r,r.next,s)&&t.locallyInside(a,s)&&t.locallyInside(s,a)&&(i.push(a.i/n),i.push(r.i/n),i.push(s.i/n),t.removeNode(r),t.removeNode(r.next),r=e=s),r=r.next}while(r!==e);return r}},{key:"splitEarcut",value:function(e,i,n,r,a,s){var o=e;do{for(var h=o.next.next;h!==o.prev;){if(o.i!==h.i&&t.isValidDiagonal(o,h)){var l=t.splitPolygon(o,h);return o=t.filterPoints(o,o.next),l=t.filterPoints(l,l.next),t.earcutLinked(o,i,n,r,a,s),void t.earcutLinked(l,i,n,r,a,s)}h=h.next}o=o.next}while(o!==e)}},{key:"eliminateHoles",value:function(e,i,n,r){var a,s,o,h,l,u=[];for(a=0,s=i.length;a<s;a++)o=i[a]*r,h=a<s-1?i[a+1]*r:e.length,(l=t.linkedList(e,o,h,r,!1))===l.next&&(l.steiner=!0),u.push(t.getLeftmost(l));for(W()(u).call(u,t.compareX),a=0;a<u.length;a++)t.eliminateHole(u[a],n),n=t.filterPoints(n,n.next);return n}},{key:"compareX",value:function(t,e){return t.x-e.x}},{key:"eliminateHole",value:function(e,i){if(i=t.findHoleBridge(e,i)){var n=t.splitPolygon(i,e);t.filterPoints(n,n.next)}}},{key:"findHoleBridge",value:function(e,i){var n,r=i,a=e.x,s=e.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=a&&h>o){if(o=h,h===a){if(s===r.y)return r;if(s===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==i);if(!n)return null;if(a===o)return n.prev;var l,u=n,c=n.x,f=n.y,_=1/0;for(r=n.next;r!==u;)a>=r.x&&r.x>=c&&a!==r.x&&t.pointInTriangle(s<f?a:o,s,c,f,s<f?o:a,s,r.x,r.y)&&((l=Math.abs(s-r.y)/(a-r.x))<_||l===_&&r.x>n.x)&&t.locallyInside(r,e)&&(n=r,_=l),r=r.next;return n}},{key:"indexCurve",value:function(e,i,n,r){var a=e;do{null===a.z&&(a.z=t.zOrder(a.x,a.y,i,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,t.sortLinked(a)}},{key:"sortLinked",value:function(t){var e,i,n,r,a,s,o,h,l=1;do{for(i=t,t=null,a=null,s=0;i;){for(s++,n=i,o=0,e=0;e<l&&(o++,n=n.nextZ);e++);for(h=l;o>0||h>0&&n;)0!==o&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,h--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=n}a.nextZ=null,l*=2}while(s>1);return t}},{key:"zOrder",value:function(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}},{key:"getLeftmost",value:function(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}},{key:"pointInTriangle",value:function(t,e,i,n,r,a,s,o){return(r-s)*(e-o)-(t-s)*(a-o)>=0&&(t-s)*(n-o)-(i-s)*(e-o)>=0&&(i-s)*(a-o)-(r-s)*(n-o)>=0}},{key:"isValidDiagonal",value:function(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!t.intersectsPolygon(e,i)&&t.locallyInside(e,i)&&t.locallyInside(i,e)&&t.middleInside(e,i)}},{key:"area",value:function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}},{key:"intersects",value:function(e,i,n,r){return!!(t.equals(e,i)&&t.equals(n,r)||t.equals(e,r)&&t.equals(n,i))||t.area(e,i,n)>0!=t.area(e,i,r)>0&&t.area(n,r,e)>0!=t.area(n,r,i)>0}},{key:"intersectsPolygon",value:function(e,i){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==i.i&&n.next.i!==i.i&&t.intersects(n,n.next,e,i))return!0;n=n.next}while(n!==e);return!1}},{key:"locallyInside",value:function(e,i){return t.area(e.prev,e,e.next)<0?t.area(e,i,e.next)>=0&&t.area(e,e.prev,i)>=0:t.area(e,i,e.prev)<0||t.area(e,e.next,i)<0}},{key:"middleInside",value:function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}},{key:"splitPolygon",value:function(t,e){var i=new V(t.i,t.x,t.y),n=new V(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}},{key:"insertNode",value:function(t,e,i,n){var r=new V(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}},{key:"removeNode",value:function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}},{key:"signedArea",value:function(t,e,i,n){for(var r=0,a=e,s=i-n;a<i;a+=n)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}}]),t}(),H=i(247),z=i(3),j=i.n(z),K=i(6),q=i.n(K),Z=i(8),Q=i.n(Z),$=i(2),J=i.n($),tt=i(138),et=i(36);function it(t){var e=function(){if("undefined"==typeof Reflect||!j.a)return!1;if(j.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(j()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=J()(t);if(e){var r=J()(this).constructor;i=j()(n,arguments,r)}else i=n.apply(this,arguments);return Q()(this,i)}}var nt=function(t){q()(i,t);var e=it(i);function i(){var t,n;return f()(this,i),(n=e.call(this,S.a.TYPE_2D))._matrix=new g.a,n._matrix4=s()(t=tt.a.defaultMatrix4).call(t),n.shaderValue=new U.a(0,0),n}return d()(i,[{key:"renderSubmit",value:function(){var t=et.a.worldAlpha,e=et.a.worldMatrix4,i=et.a.worldMatrix,n=et.a.worldFilters,r=et.a.worldShaderDefines,a=this.shaderValue,s=this._matrix,o=this._matrix4,h=g.a.TEMP;return g.a.mul(s,i,h),o[0]=h.a,o[1]=h.b,o[4]=h.c,o[5]=h.d,o[12]=h.tx,o[13]=h.ty,et.a.worldMatrix=h.clone(),et.a.worldMatrix4=o,et.a.worldAlpha=et.a.worldAlpha*a.alpha,a.filters&&a.filters.length&&(et.a.worldFilters=a.filters,et.a.worldShaderDefines=a.defines),this.canv.flushsubmit(),et.a.worldAlpha=t,et.a.worldMatrix4=e,et.a.worldMatrix.destroy(),et.a.worldMatrix=i,et.a.worldFilters=n,et.a.worldShaderDefines=r,1}},{key:"releaseRender",value:function(){if(--this._ref<1){var t=i.POOL;this._mesh=null,t[t._length++]=this}}},{key:"getRenderType",value:function(){return S.a.TYPE_CANVAS}}],[{key:"create",value:function(t,e,n){var r=i.POOL._length?i.POOL[--i.POOL._length]:new i;r.canv=t,r._ref=1,r._numEle=0;var a=r.shaderValue;return a.alpha=e,a.defines.setValue(0),n&&n.length&&a.setFilters(n),r}}]),i}(S.a);nt.POOL=[],nt.POOL._length=0;var rt=i(123),at=i(178),st=i(17),ot=function(){function t(){f()(this,t),this.blendType=0,this._ref=1,this._key=new at.a}return d()(t,[{key:"renderSubmit",value:function(){var t=st.a.mainContext;this._mesh.useMesh(t);var e=this.srcRT;return e&&(this.shaderValue.texture=e._getSource(),this.shaderValue.upload(),this.blend(),k.a.renderBatches++,k.a.trianglesFaces+=this._numEle/3,t.drawElements(t.TRIANGLES,this._numEle,t.UNSIGNED_SHORT,this._startIdx)),1}},{key:"blend",value:function(){if(T.a.activeBlendFunction!==T.a.fns[this.blendType]){var t=st.a.mainContext;t.enable(t.BLEND),T.a.fns[this.blendType](t),T.a.activeBlendFunction=T.a.fns[this.blendType]}}},{key:"getRenderType",value:function(){return 0}},{key:"releaseRender",value:function(){if(--this._ref<1){var e=t.POOL;e[e._length++]=this}}}],[{key:"create",value:function(e,i,n,r){var a=t.POOL._length?t.POOL[--t.POOL._length]:new t;if(a._mesh=i,a.srcRT=r,a._startIdx=i.indexNum*tt.a.BYTES_PIDX,a._ref=1,a._key.clear(),a._numEle=0,a.blendType=e._nBlendType,a._key.blendShader=a.blendType,a.shaderValue=n,a.shaderValue.setValue(e._shader2D),e._colorFiler){var s=e._colorFiler;n.defines.add(s.type),n.colorMat=s._mat,n.colorAlpha=s._alpha}return a}}]),t}();function ht(t){var e=function(){if("undefined"==typeof Reflect||!j.a)return!1;if(j.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(j()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=J()(t);if(e){var r=J()(this).constructor;i=j()(n,arguments,r)}else i=n.apply(this,arguments);return Q()(this,i)}}ot.POOL=[],ot.POOL._length=0;var lt=function(t){q()(i,t);var e=ht(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.a.TYPE_2D;return f()(this,i),e.call(this,t)}return d()(i,[{key:"releaseRender",value:function(){--this._ref<1&&(i.POOL[i._poolSize++]=this,this.shaderValue.release(),this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))}},{key:"renderSubmit",value:function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t?t._getSource():null;if(!e)return 1}var i=st.a.mainContext;this._mesh.useMesh(i);var n=S.a.preRender,r=S.a.preRender._key;return 0===this._key.blendShader&&this._key.submitType===r.submitType&&this._key.blendShader===r.blendShader&&P.a.activeShader&&S.a.preRender.clipInfoID==this.clipInfoID&&n.shaderValue.defines._value===this.shaderValue.defines._value&&0==(this.shaderValue.defines._value&B.a.NOOPTMASK)?P.a.activeShader.uploadTexture2D(e):(T.a.activeBlendFunction!==this._blendFn&&(st.a.setBlend(i,!0),this._blendFn(i),T.a.activeBlendFunction=this._blendFn),this.shaderValue.texture=e,this.shaderValue.upload()),i.drawElements(i.TRIANGLES,this._numEle,i.UNSIGNED_SHORT,this._startIdx),k.a.renderBatches++,k.a.trianglesFaces+=this._numEle/3,1}}],[{key:"create",value:function(t,e,n){var r=i._poolSize?i.POOL[--i._poolSize]:new i(S.a.TYPE_TEXTURE);r._mesh=e,r._key.clear(),r._key.submitType=S.a.KEY_DRAWTEXTURE,r._ref=1,r._startIdx=e.indexNum*tt.a.BYTES_PIDX,r._numEle=0;var a=t._nBlendType;if(r._key.blendShader=a,r._blendFn=t._targets?T.a.targetFns[a]:T.a.fns[a],r.shaderValue=n,t._colorFiler){var s=t._colorFiler;n.defines.add(s.type),n.colorMat=s._mat,n.colorAlpha=s._alpha}return r}}]),i}(S.a);lt._poolSize=0,lt.POOL=[];var ut=i(89),ct=function(){function t(){f()(this,t),this._data=[],this._ndata=0,this._clipid=-1,this._clipMatrix=new g.a,this._enable=!1}return d()(t,[{key:"clear",value:function(){this._tex=null,this._imgId=-1,this._ndata=0,this._enable=!1,this._colorFiler=null}},{key:"destroy",value:function(){this.clear(),this._data.length=0,this._data=null}},{key:"add",value:function(t,e,i,n,r,a){this._ndata>0&&(this._tex!=e||this._imgId!=i||this._clipid>=0&&this._clipid!=t._clipInfoID)&&this.submit(t),this._clipid=t._clipInfoID,t._globalClipMatrix.copyTo(this._clipMatrix),this._tex=e,this._imgId=i,this._colorFiler=t._colorFiler,this._data[this._ndata]=n,this._data[this._ndata+1]=r,this._data[this._ndata+2]=a,this._ndata+=3}},{key:"getPos",value:function(){return 0==t.__nPosPool?new Array(8):t.__posPool[--t.__nPosPool]}},{key:"enable",value:function(t,e){t!==this._enable&&(this._enable=t,this._enable||this.submit(e))}},{key:"submit",value:function(e){var i=this._ndata;if(i){var n=e._mesh,r=e._colorFiler;e._colorFiler=this._colorFiler;var a=lt.create(e,n,U.a.create(B.a.TEXTURE2D,0));e._submits[e._submits._length++]=e._curSubmit=a,a.shaderValue.textureHost=this._tex,a._key.other=this._imgId,e._colorFiler=r,e._copyClipInfo(a,this._clipMatrix),a.clipInfoID=this._clipid;for(var s=0;s<i;s+=3)n.addQuad(this._data[s],this._data[s+1],this._data[s+2],!0),t.__posPool[t.__nPosPool++]=this._data[s];i/=3,a._numEle+=6*i,n.indexNum+=6*i,n.vertNum+=4*i,e._drawCount+=i,this._ndata=0,ut.a.loopCount%100==0&&(this._data.length=0)}}}]),t}();ct.__posPool=[],ct.__nPosPool=0;var ft=i(172),_t=i(134),dt=i(164),vt=i(156),pt=i(116),yt=i(112),gt=i(57),mt=i(107),xt=function(){function t(){if(f()(this,t),this._tmpMatrix=new g.a,this._drawTexToDrawTri_Vert=new Float32Array(8),this._drawTexToDrawTri_Index=new Uint16Array([0,1,2,0,2,3]),this._tempUV=new Float32Array(8),this._drawTriUseAbsMatrix=!1,this._id=++t._COUNT,this._other=null,this._renderNextSubmitIndex=0,this._path=null,this._drawCount=1,this._width=t._MAXSIZE,this._height=t._MAXSIZE,this._renderCount=0,this._submits=null,this._curSubmit=null,this._submitKey=new at.a,this._mesh=null,this._pathMesh=null,this._triangleMesh=null,this.meshlist=[],this._transedPoints=new Array(8),this._temp4Points=new Array(8),this._clipRect=t.MAXCLIPRECT,this._globalClipMatrix=new g.a(t._MAXSIZE,0,0,t._MAXSIZE,0,0),this._clipInCache=!1,this._clipInfoID=0,this._clipID_Gen=0,this._lastMatScaleX=1,this._lastMatScaleY=1,this._lastMat_a=1,this._lastMat_b=0,this._lastMat_c=0,this._lastMat_d=1,this._nBlendType=0,this._save=null,this._targets=null,this._charSubmitCache=null,this._saveMark=null,this._shader2D=new L.a,this.sprite=null,this._italicDeg=0,this._lastTex=null,this._fillColor=0,this._flushCnt=0,this.defTexture=null,this._colorFiler=null,this.drawTexAlign=!1,this._incache=!1,this.isMain=!1,t._contextcount++,t._textRender=t._textRender||new ft.a,!this.defTexture){var e=new mt.a(2,2);e.setPixels(new Uint8Array(16)),e.lock=!0,this.defTexture=new gt.a(e)}this._lastTex=this.defTexture,this.clear()}return d()(t,[{key:"drawImage",value:function(){}},{key:"getImageData",value:function(){}},{key:"measureText",value:function(t){return null}},{key:"setTransform",value:function(){}},{key:"$transform",value:function(t,e,i,n,r,a){}},{key:"clearRect",value:function(t,e,i,n){}},{key:"_drawRect",value:function(t,e,i,n,r){k.a.renderBatches++,r&&(this.fillStyle=r),this.fillRect(t,e,i,n,null)}},{key:"drawTexture2",value:function(t,e,i,n,r,a){}},{key:"transformByMatrix",value:function(t,e,i){this.transform(t.a,t.b,t.c,t.d,t.tx+e,t.ty+i)}},{key:"saveTransform",value:function(t){this.save()}},{key:"restoreTransform",value:function(t){this.restore()}},{key:"drawRect",value:function(t,e,i,n,r,a,s){null!=r&&(this.fillStyle=r,this.fillRect(t,e,i,n)),null!=a&&(this.strokeStyle=a,this.lineWidth=s,this.strokeRect(t,e,i,n))}},{key:"alpha",value:function(t){this.globalAlpha*=t}},{key:"_transform",value:function(t,e,i){this.translate(e,i),this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),this.translate(-e,-i)}},{key:"_rotate",value:function(t,e,i){this.translate(e,i),this.rotate(t),this.translate(-e,-i)}},{key:"_scale",value:function(t,e,i,n){this.translate(i,n),this.scale(t,e),this.translate(-i,-n)}},{key:"_drawLine",value:function(t,e,i,n,r,a,s,o,h){this.beginPath(),this.strokeStyle=s,this.lineWidth=o,this.moveTo(t+i,e+n),this.lineTo(t+r,e+a),this.stroke()}},{key:"_drawLines",value:function(t,e,i,n,r,a){this.beginPath(),this.strokeStyle=n,this.lineWidth=r,this.addPath(u()(i).call(i),!1,!1,t,e),this.stroke()}},{key:"drawCurves",value:function(t,e,i,n,r){this.beginPath(),this.strokeStyle=n,this.lineWidth=r,this.moveTo(t+i[0],e+i[1]);for(var a=2,s=i.length;a<s;)this.quadraticCurveTo(t+i[a++],e+i[a++],t+i[a++],e+i[a++]);this.stroke()}},{key:"_fillAndStroke",value:function(t,e,i){var n;arguments.length>3&&void 0!==arguments[3]&&arguments[3];null!=t&&(this.fillStyle=t,h()(n=this).call(n));null!=e&&i>0&&(this.strokeStyle=e,this.lineWidth=i,this.stroke())}},{key:"_drawCircle",value:function(e,i,n,r,a,s,o){k.a.renderBatches++,this.beginPath(!0),this.arc(e,i,n,0,t.PI2),this.closePath(),this._fillAndStroke(r,a,s)}},{key:"_drawPie",value:function(t,e,i,n,r,a,s,o,h){this.beginPath(),this.moveTo(t,e),this.arc(t,e,i,n,r),this.closePath(),this._fillAndStroke(a,s,o)}},{key:"_drawPoly",value:function(t,e,i,n,r,a,s,o){this.beginPath(),this.addPath(u()(i).call(i),!0,s,t,e),this.closePath(),this._fillAndStroke(n,r,a,s)}},{key:"_drawPath",value:function(t,e,i,n,r){this.beginPath();for(var a=0,s=i.length;a<s;a++){var o=i[a];switch(o[0]){case"moveTo":this.moveTo(t+o[1],e+o[2]);break;case"lineTo":this.lineTo(t+o[1],e+o[2]);break;case"arcTo":this.arcTo(t+o[1],e+o[2],t+o[3],e+o[4],o[5]);break;case"closePath":this.closePath()}}var l;null!=n&&(this.fillStyle=n.fillStyle,h()(l=this).call(l));null!=r&&(this.strokeStyle=r.strokeStyle,this.lineWidth=r.lineWidth||1,this.lineJoin=r.lineJoin,this.lineCap=r.lineCap,this.miterLimit=r.miterLimit,this.stroke())}},{key:"clearBG",value:function(t,e,i,n){var r=st.a.mainContext;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT)}},{key:"_getSubmits",value:function(){return this._submits}},{key:"_releaseMem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._submits){this._curMat&&this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null,this._charSubmitCache.clear();for(var e=0,i=this._submits._length;e<i;e++)this._submits[e].releaseRender();var n;for(this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path=null,this._save=null,e=0,n=this.meshlist.length;e<n;e++){var r=this.meshlist[e];r.destroy()}this.meshlist.length=0,this.sprite=null,t||(this._targets&&this._targets.destroy(),this._targets=null)}}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];--t._contextcount,this.sprite=null,this._releaseMem(e),this._charSubmitCache.destroy(),this._mesh.destroy(),e||(this._targets&&this._targets.destroy(),this._targets=null)}},{key:"clear",value:function(){this._submits||(this._other=kt.DEFAULT,this._curMat=g.a.create(),this._charSubmitCache=new ct,this._mesh=_t.a.getAMesh(this.isMain),this.meshlist.push(this._mesh),this._pathMesh=vt.a.getAMesh(this.isMain),this.meshlist.push(this._pathMesh),this._triangleMesh=dt.a.getAMesh(this.isMain),this.meshlist.push(this._triangleMesh),this._submits=[],this._save=[M.Create(this)],this._save.length=10,this._shader2D=new L.a),this._submitKey.clear(),this._mesh.clearVB(),this._drawCount=1,this._other=kt.DEFAULT,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=t.MAXCLIPRECT,this._curSubmit=S.a.RENDERBASE,S.a.RENDERBASE._ref=16777215,S.a.RENDERBASE._numEle=0,this._shader2D.fillStyle=this._shader2D.strokeStyle=b.a.DEFAULT;for(var e=0,i=this._submits._length;e<i;e++)this._submits[e].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1}},{key:"size",value:function(t,e){this._width==t&&this._height==e||(this._width=t,this._height=e,this._targets&&(this._targets.destroy(),this._targets=new pt.a(t,e,yt.b.R8G8B8A8,-1)),this.isMain&&(st.a.mainContext.viewport(0,0,t,e),et.a.width=t,et.a.height=e)),0===t&&0===e&&this._releaseMem()}},{key:"getMatScaleX",value:function(){return this._lastMat_a==this._curMat.a&&this._lastMat_b==this._curMat.b||(this._lastMatScaleX=this._curMat.getScaleX(),this._lastMat_a=this._curMat.a,this._lastMat_b=this._curMat.b),this._lastMatScaleX}},{key:"getMatScaleY",value:function(){return this._lastMat_c==this._curMat.c&&this._lastMat_d==this._curMat.d||(this._lastMatScaleY=this._curMat.getScaleY(),this._lastMat_c=this._curMat.c,this._lastMat_d=this._curMat.d),this._lastMatScaleY}},{key:"setFillColor",value:function(t){this._fillColor=t}},{key:"getFillColor",value:function(){return this._fillColor}},{key:"translate",value:function(t,e){0===t&&0===e||(I.save(this),this._curMat._bTransform?(R.save(this),this._curMat.tx+=t*this._curMat.a+e*this._curMat.c,this._curMat.ty+=t*this._curMat.b+e*this._curMat.d):(this._curMat.tx=t,this._curMat.ty=e))}},{key:"save",value:function(){this._save[this._save._length++]=M.Create(this)}},{key:"restore",value:function(){var t=this._save._length,e=this._nBlendType;if(!(t<1)){for(var i=t-1;i>=0;i--){var n=this._save[i];if(n.restore(this),n.isSaveMark())return void(this._save._length=i)}e!=this._nBlendType&&(this._curSubmit=S.a.RENDERBASE)}}},{key:"fillText",value:function(e,i,n,r,a,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";t._textRender.filltext(this,e,i,n,r,a,h,o,s)}},{key:"drawText",value:function(e,i,n,r,a,s){t._textRender.filltext(this,e,i,n,r,a,null,0,s)}},{key:"fillWords",value:function(e,i,n,r,a){t._textRender.fillWords(this,e,i,n,r,a,null,0)}},{key:"strokeWord",value:function(e,i,n,r,a,s,o){t._textRender.filltext(this,e,i,n,r,null,a,s,o)}},{key:"fillBorderText",value:function(e,i,n,r,a,s,o,h){t._textRender.filltext(this,e,i,n,r,a,s,o,h)}},{key:"fillBorderWords",value:function(e,i,n,r,a,s,o){t._textRender.fillWords(this,e,i,n,r,a,s,o)}},{key:"_fast_filltext",value:function(e,i,n,r,a,s,o,h){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;t._textRender._fast_filltext(this,e,null,i,n,r,a,s,o,h,l)}},{key:"_fillRect",value:function(e,i,n,r,a){var s=this._curSubmit,o=s&&s._key.submitType===S.a.KEY_DRAWTEXTURE&&s._key.blendShader===this._nBlendType;this._mesh.vertNum+4>t._MAXVERTNUM&&(this._mesh=_t.a.getAMesh(this.isMain),this.meshlist.push(this._mesh),o=!1),o&&(o=o&&this.isSameClipInfo(s)),this.transformQuad(e,i,n,r,0,this._curMat,this._transedPoints),this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,gt.a.NO_UV,a,!1),o||(s=this._curSubmit=lt.create(this,this._mesh,U.a.create(B.a.TEXTURE2D,0)),this._submits[this._submits._length++]=s,this._copyClipInfo(s,this._globalClipMatrix),s.shaderValue.textureHost=this._lastTex,s._key.other=this._lastTex&&this._lastTex.bitmap?this._lastTex.bitmap.id:-1,s._renderType=S.a.TYPE_TEXTURE),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)}},{key:"fillRect",value:function(t,e,i,n,r){var a=r?b.a.create(r):this._shader2D.fillStyle,s=this.mixRGBandAlpha(a.toInt());this._fillRect(t,e,i,n,s)}},{key:"fillTexture",value:function(t,e,i,n,r,a,s,o){t._getSource()?this._fillTexture(t,t.width,t.height,t.uvrect,e,i,n,r,a,s.x,s.y):this.sprite&&v.a.systemTimer.callLater(this,this._repaintSprite)}},{key:"_fillTexture",value:function(e,i,n,r,a,o,h,l,u,c,f){var _=this._curSubmit;this._mesh.vertNum+4>t._MAXVERTNUM&&(this._mesh=_t.a.getAMesh(this.isMain),this.meshlist.push(this._mesh));var d=!0,v=!0;switch(u){case"repeat":break;case"repeat-x":v=!1;break;case"repeat-y":d=!1;break;case"no-repeat":d=v=!1}var p=this._temp4Points,y=0,g=0,m=0,x=0,k=0,T=0;if(c<0?(m=a,y=-c%i/i):m=a+c,f<0?(x=o,g=-f%n/n):x=o+f,k=a+h,T=o+l,!d&&(k=Math.min(k,a+c+i)),!v&&(T=Math.min(T,o+f+n)),!(k<a||T<o||m>k||x>T)){var b=(k-a-c)/i,C=(T-o-f)/n;if(this.transformQuad(m,x,k-m,T-x,0,this._curMat,this._transedPoints),p[0]=y,p[1]=g,p[2]=b,p[3]=g,p[4]=b,p[5]=C,p[6]=y,p[7]=C,!this.clipedOff(this._transedPoints)){var w=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA);this._mesh.addQuad(this._transedPoints,p,w,!0);var E=U.a.create(B.a.TEXTURE2D,0);E.defines.add(B.a.FILLTEXTURE),E.u_TexRange=s()(r).call(r),_=this._curSubmit=lt.create(this,this._mesh,E),this._submits[this._submits._length++]=_,this._copyClipInfo(_,this._globalClipMatrix),_.shaderValue.textureHost=e,_._renderType=S.a.TYPE_TEXTURE,this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4}this.breakNextMerge()}}},{key:"setColorFilter",value:function(t){E.save(this,E.TYPE_COLORFILTER,this,!0),this._colorFiler=t,this._curSubmit=S.a.RENDERBASE}},{key:"drawTexture",value:function(t,e,i,n,r){this._drawTextureM(t,e,i,n,r,null,1,null)}},{key:"drawTextures",value:function(t,e,i,n){if(t._getSource())for(var r=e.length/2,a=0,s=t.bitmap.id,o=0;o<r;o++)this._inner_drawTexture(t,s,e[a++]+i,e[a++]+n,0,0,null,null,1,!1);else this.sprite&&v.a.systemTimer.callLater(this,this._repaintSprite)}},{key:"_drawTextureAddSubmit",value:function(t,e){var i=null;i=lt.create(this,this._mesh,U.a.create(B.a.TEXTURE2D,0)),this._submits[this._submits._length++]=i,i.shaderValue.textureHost=e,i._key.other=t,i._renderType=S.a.TYPE_TEXTURE,this._curSubmit=i}},{key:"_drawTextureM",value:function(t,e,i,n,r,a,s,o){var h=this.sprite;return!!t._getSource((function(){h&&h.repaint()}))&&this._inner_drawTexture(t,t.bitmap.id,e,i,n,r,a,o,s,!1)}},{key:"_drawRenderTexture",value:function(t,e,i,n,r,a,s,o){return this._inner_drawTexture(t,-1,e,i,n,r,a,o,1,!1)}},{key:"submitDebugger",value:function(){this._submits[this._submits._length++]=rt.a.create([],(function(){}),this)}},{key:"_copyClipInfo",value:function(t,e){var i=t.shaderValue.clipMatDir;i[0]=e.a,i[1]=e.b,i[2]=e.c,i[3]=e.d;var n=t.shaderValue.clipMatPos;n[0]=e.tx,n[1]=e.ty,t.clipInfoID=this._clipInfoID,this._clipInCache&&(t.shaderValue.clipOff[0]=1)}},{key:"isSameClipInfo",value:function(t){return t.clipInfoID===this._clipInfoID}},{key:"_useNewTex2DSubmit",value:function(e,i){this._mesh.vertNum+i>t._MAXVERTNUM&&(this._mesh=_t.a.getAMesh(this.isMain),this.meshlist.push(this._mesh));var n=lt.create(this,this._mesh,U.a.create(B.a.TEXTURE2D,0));this._submits[this._submits._length++]=this._curSubmit=n,n.shaderValue.textureHost=e,this._copyClipInfo(n,this._globalClipMatrix)}},{key:"_drawTexRect",value:function(t,e,i,n,r){this.transformQuad(t,e,i,n,this._italicDeg,this._curMat,this._transedPoints);var a=this._transedPoints;a[0]=a[0]+.5|0,a[1]=a[1]+.5|0,a[2]=a[2]+.5|0,a[3]=a[3]+.5|0,a[4]=a[4]+.5|0,a[5]=a[5]+.5|0,a[6]=a[6]+.5|0,a[7]=a[7]+.5|0,this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,r,this._fillColor,!0),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)}},{key:"drawCallOptimize",value:function(t){return this._charSubmitCache.enable(t,this),t}},{key:"_inner_drawTexture",value:function(e,i,n,r,a,s,o,h,l,u){if(!(a<=0||s<=0)){var c=this._curSubmit._key;if(h=h||e._uv,c.submitType===S.a.KEY_TRIANGLES&&c.other===i){var f=this._drawTexToDrawTri_Vert;f[0]=n,f[1]=r,f[2]=n+a,f[3]=r,f[4]=n+a,f[5]=r+s,f[6]=n,f[7]=r+s,this._drawTriUseAbsMatrix=!0;var _=this._tempUV;return _[0]=h[0],_[1]=h[1],_[2]=h[2],_[3]=h[3],_[4]=h[4],_[5]=h[5],_[6]=h[6],_[7]=h[7],this.drawTriangles(e,0,0,f,_,this._drawTexToDrawTri_Index,o,l,null,null),this._drawTriUseAbsMatrix=!1,!0}var d=this._mesh,v=this._curSubmit,p=u?this._charSubmitCache.getPos():this._transedPoints;if(this.transformQuad(n,r,a||e.width,s||e.height,this._italicDeg,o||this._curMat,p),this.drawTexAlign){var y=Math.round;p[0]=y(p[0]),p[1]=y(p[1]),p[2]=y(p[2]),p[3]=y(p[3]),p[4]=y(p[4]),p[5]=y(p[5]),p[6]=y(p[6]),p[7]=y(p[7]),this.drawTexAlign=!1}var g=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*l);if(u)return this._charSubmitCache.add(this,e,i,p,h,g),!0;this._drawCount++;var m=i>=0&&c.submitType===S.a.KEY_DRAWTEXTURE&&c.other===i;return m&&(m=m&&this.isSameClipInfo(v)),this._lastTex=e,d.vertNum+4>t._MAXVERTNUM&&(d=this._mesh=_t.a.getAMesh(this.isMain),this.meshlist.push(d),m=!1),d.addQuad(p,h,g,!0),m||(this._submits[this._submits._length++]=this._curSubmit=v=lt.create(this,d,U.a.create(B.a.TEXTURE2D,0)),v.shaderValue.textureHost=e,v._key.other=i,this._copyClipInfo(v,this._globalClipMatrix)),v._numEle+=6,d.indexNum+=6,d.vertNum+=4,!0}}},{key:"transform4Points",value:function(t,e,i){var n=e.tx,r=e.ty,a=e.a,s=e.b,o=e.c,h=e.d,l=t[0],u=t[1],c=t[2],f=t[3],_=t[4],d=t[5],v=t[6],p=t[7];e._bTransform?(i[0]=l*a+u*o+n,i[1]=l*s+u*h+r,i[2]=c*a+f*o+n,i[3]=c*s+f*h+r,i[4]=_*a+d*o+n,i[5]=_*s+d*h+r,i[6]=v*a+p*o+n,i[7]=v*s+p*h+r):(i[0]=l+n,i[1]=u+r,i[2]=c+n,i[3]=f+r,i[4]=_+n,i[5]=d+r,i[6]=v+n,i[7]=p+r)}},{key:"clipedOff",value:function(t){return this._clipRect.width<=0||this._clipRect.height<=0}},{key:"transformQuad",value:function(t,e,i,n,r,a,s){var o=0;0!=r&&(o=Math.tan(r*Math.PI/180)*n);var h=t+i,l=e+n,u=a.tx,c=a.ty,f=a.a,_=a.b,d=a.c,v=a.d,p=t+o,y=e,g=h+o,m=e,x=h,k=l,T=t,b=l;a._bTransform?(s[0]=p*f+y*d+u,s[1]=p*_+y*v+c,s[2]=g*f+m*d+u,s[3]=g*_+m*v+c,s[4]=x*f+k*d+u,s[5]=x*_+k*v+c,s[6]=T*f+b*d+u,s[7]=T*_+b*v+c):(s[0]=p+u,s[1]=y+c,s[2]=g+u,s[3]=m+c,s[4]=x+u,s[5]=k+c,s[6]=T+u,s[7]=b+c)}},{key:"pushRT",value:function(){this.addRenderObject(rt.a.create(null,pt.a.pushRT,this))}},{key:"popRT",value:function(){this.addRenderObject(rt.a.create(null,pt.a.popRT,this)),this.breakNextMerge()}},{key:"useRT",value:function(t){this.addRenderObject(rt.a.create([t],(function(t){if(!t)throw"error useRT";t.start(),t.clear(0,0,0,0)}),this)),this.breakNextMerge()}},{key:"RTRestore",value:function(t){this.addRenderObject(rt.a.create([t],(function(t){t.restore()}),this)),this.breakNextMerge()}},{key:"breakNextMerge",value:function(){this._curSubmit=S.a.RENDERBASE}},{key:"_repaintSprite",value:function(){this.sprite&&this.sprite.repaint()}},{key:"drawTextureWithTransform",value:function(t,e,i,n,r,a,s,o,h,l){var u,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,f=arguments.length>11?arguments[11]:void 0,_=this._curMat;l&&(u=this.globalCompositeOperation,this.globalCompositeOperation=l);var d=this._colorFiler;if(c&&this.setColorFilter(c),!a)return this._drawTextureM(t,e+s,i+o,n,r,_,h,f),l&&(this.globalCompositeOperation=u),void(c&&this.setColorFilter(d));var v=this._tmpMatrix;v.a=a.a,v.b=a.b,v.c=a.c,v.d=a.d,v.tx=a.tx+s,v.ty=a.ty+o,v._bTransform=a._bTransform,a&&_._bTransform?(g.a.mul(v,_,v),(a=v)._bTransform=!0):(v.tx+=_.tx,v.ty+=_.ty,a=v),this._drawTextureM(t,e,i,n,r,a,h,f),l&&(this.globalCompositeOperation=u),c&&this.setColorFilter(d)}},{key:"_flushToTarget",value:function(t,e){et.a.worldScissorTest=!1;var i=p.a.instance;i.disable(i.SCISSOR_TEST);var n=et.a.worldAlpha,r=et.a.worldMatrix4,a=et.a.worldMatrix;et.a.worldShaderDefines;et.a.worldMatrix=g.a.EMPTY,et.a.restoreTempArray(),et.a.worldMatrix4=et.a.TEMPMAT4_ARRAY,et.a.worldAlpha=1,P.a.activeShader=null,e.start(),t._submits._length>0&&e.clear(0,0,0,0),t._curSubmit=S.a.RENDERBASE,t.flush(),t.clear(),e.restore(),t._curSubmit=S.a.RENDERBASE,P.a.activeShader=null,et.a.worldAlpha=n,et.a.worldMatrix4=r,et.a.worldMatrix=a}},{key:"drawCanvas",value:function(t,e,i,n,a){if(t){var s,o=t.context;if(o._targets)o._submits._length>0&&(s=rt.a.create([o,o._targets],this._flushToTarget,this),this._submits[this._submits._length++]=s),this._drawRenderTexture(o._targets,e,i,n,a,null,1,pt.a.flipyuv),this._curSubmit=S.a.RENDERBASE;else{var h,l=t;if(l.touches)r()(h=l.touches).call(h,(function(t){t.touch()}));s=nt.create(t,this._shader2D.ALPHA,this._shader2D.filters),this._submits[this._submits._length++]=s,s._key.clear();var u=s._matrix;this._curMat.copyTo(u);var c=u.tx,f=u.ty;u.tx=u.ty=0,u.transformPoint(m.a.TEMP.setTo(e,i)),u.translate(m.a.TEMP.x+c,m.a.TEMP.y+f),g.a.mul(l.invMat,u,u),this._curSubmit=S.a.RENDERBASE}}}},{key:"drawTarget",value:function(e,i,n,r,a,s,o){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;this._drawCount++;if(this._mesh.vertNum+4>t._MAXVERTNUM&&(this._mesh=_t.a.getAMesh(this.isMain),this.meshlist.push(this._mesh)),this.transformQuad(i,n,r,a,0,s||this._curMat,this._transedPoints),!this.clipedOff(this._transedPoints)){this._mesh.addQuad(this._transedPoints,h||gt.a.DEF_UV,4294967295,!0);var u=this._curSubmit=ot.create(this,this._mesh,o,e);return u.blendType=-1==l?this._nBlendType:l,this._copyClipInfo(u,this._globalClipMatrix),u._numEle=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,this._submits[this._submits._length++]=u,this._curSubmit=S.a.RENDERBASE,!0}return this._curSubmit=S.a.RENDERBASE,!1}},{key:"drawTriangles",value:function(e,i,n,r,a,s,o,h,l,u){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:4294967295;if(e._getSource()){var f=null;u&&(f=this.globalCompositeOperation,this.globalCompositeOperation=u),this._drawCount++;var _=this._tmpMatrix,d=this._triangleMesh,p=null,y=!1;l&&(p=this._colorFiler,this._colorFiler=l,this._curSubmit=S.a.RENDERBASE,y=p!=l);var m=e.bitmap,x=this._curSubmit._key,k=x.submitType===S.a.KEY_TRIANGLES&&x.other===m.id&&x.blendShader==this._nBlendType;if(d.vertNum+r.length/2>t._MAXVERTNUM&&(d=this._triangleMesh=dt.a.getAMesh(this.isMain),this.meshlist.push(d),k=!1),!k){var T=this._curSubmit=lt.create(this,d,U.a.create(B.a.TEXTURE2D,0));T.shaderValue.textureHost=e,T._renderType=S.a.TYPE_TEXTURE,T._key.submitType=S.a.KEY_TRIANGLES,T._key.other=m.id,this._copyClipInfo(T,this._globalClipMatrix),this._submits[this._submits._length++]=T}var b=this._mixRGBandAlpha(c,this._shader2D.ALPHA*h);this._drawTriUseAbsMatrix?d.addData(r,a,s,o,b):(o?(_.a=o.a,_.b=o.b,_.c=o.c,_.d=o.d,_.tx=o.tx+i,_.ty=o.ty+n):(_.a=1,_.b=0,_.c=0,_.d=1,_.tx=i,_.ty=n),g.a.mul(_,this._curMat,_),d.addData(r,a,s,_||this._curMat,b)),this._curSubmit._numEle+=s.length,y&&(this._colorFiler=p,this._curSubmit=S.a.RENDERBASE),u&&(this.globalCompositeOperation=f)}else this.sprite&&v.a.systemTimer.callLater(this,this._repaintSprite)}},{key:"transform",value:function(t,e,i,n,r,a){R.save(this),g.a.mul(g.a.TEMP.setTo(t,e,i,n,r,a),this._curMat,this._curMat),this._curMat._checkTransform()}},{key:"_transformByMatrix",value:function(t,e,i){t.setTranslate(e,i),g.a.mul(t,this._curMat,this._curMat),t.setTranslate(0,0),this._curMat._bTransform=!0}},{key:"setTransformByMatrix",value:function(t){t.copyTo(this._curMat)}},{key:"rotate",value:function(t){R.save(this),this._curMat.rotateEx(t)}},{key:"scale",value:function(t,e){R.save(this),this._curMat.scaleEx(t,e)}},{key:"clipRect",value:function(e,i,n,r){A.save(this),this._clipRect==t.MAXCLIPRECT?this._clipRect=new x.a(e,i,n,r):(this._clipRect.width=n,this._clipRect.height=r,this._clipRect.x=e,this._clipRect.y=i),this._clipID_Gen++,this._clipID_Gen%=1e4,this._clipInfoID=this._clipID_Gen;var a=this._globalClipMatrix,s=a.tx,o=a.ty,h=s+a.a,l=o+a.d;if(this._clipRect.width>=t._MAXSIZE?(a.a=a.d=t._MAXSIZE,a.b=a.c=a.tx=a.ty=0):(this._curMat._bTransform?(a.tx=this._clipRect.x*this._curMat.a+this._clipRect.y*this._curMat.c+this._curMat.tx,a.ty=this._clipRect.x*this._curMat.b+this._clipRect.y*this._curMat.d+this._curMat.ty,a.a=this._clipRect.width*this._curMat.a,a.b=this._clipRect.width*this._curMat.b,a.c=this._clipRect.height*this._curMat.c,a.d=this._clipRect.height*this._curMat.d):(a.tx=this._clipRect.x+this._curMat.tx,a.ty=this._clipRect.y+this._curMat.ty,a.a=this._clipRect.width,a.b=a.c=0,a.d=this._clipRect.height),this._incache&&(this._clipInCache=!0)),a.a>0&&a.d>0){var u=a.tx+a.a,c=a.ty+a.d;u<=s||c<=o||a.tx>=h||a.ty>=l?(a.a=-.1,a.d=-.1):(a.tx<s&&(a.a-=s-a.tx,a.tx=s),u>h&&(a.a-=u-h),a.ty<o&&(a.d-=o-a.ty,a.ty=o),c>l&&(a.d-=c-l),a.a<=0&&(a.a=-.1),a.d<=0&&(a.d=-.1))}}},{key:"drawMesh",value:function(t,e,i,n,r,a,s,o){arguments.length>8&&void 0!==arguments[8]&&arguments[8]}},{key:"addRenderObject",value:function(t){this._submits[this._submits._length++]=t}},{key:"submitElement",value:function(t,e){this.isMain;var i=this._submits,n=i._length;e<0&&(e=i._length);for(var r=S.a.RENDERBASE;t<e;)this._renderNextSubmitIndex=t+1,i[t]!==S.a.RENDERBASE?(S.a.preRender=r,t+=(r=i[t]).renderSubmit()):t++;return n}},{key:"flush",value:function(){this._clipID_Gen=0;var t=this.submitElement(0,this._submits._length);this._path&&this._path.reset(),N.instance&&N.getInstance().reset(),this._curSubmit=S.a.RENDERBASE;for(var e=0,i=this.meshlist.length;e<i;e++){var n=this.meshlist[e];n.canReuse?n.releaseMesh():n.destroy()}return this.meshlist.length=0,this._mesh=_t.a.getAMesh(this.isMain),this._pathMesh=vt.a.getAMesh(this.isMain),this._triangleMesh=dt.a.getAMesh(this.isMain),this.meshlist.push(this._mesh,this._pathMesh,this._triangleMesh),this._flushCnt++,this._flushCnt%60==0&&this.isMain&&ft.a.textRenderInst&&ft.a.textRenderInst.GC(),t}},{key:"beginPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._getPath();e.beginPath(t)}},{key:"closePath",value:function(){this._path.closePath()}},{key:"addPath",value:function(t,e,i,n,r){for(var a=0,s=0,o=t.length/2;s<o;s++){var h=t[a]+n,l=t[a+1]+r;t[a]=h,t[a+1]=l,a+=2}this._getPath().push(t,i)}},{key:"fill",value:function(){var e=this._curMat,i=this._getPath(),n=this._curSubmit,r=n._key.submitType===S.a.KEY_VG&&n._key.blendShader===this._nBlendType;r&&(r=r&&this.isSameClipInfo(n)),r||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var a,o=this.mixRGBandAlpha(this.fillStyle.toInt()),h=0,l=0,u=i.paths.length;l<u;l++){var c,f=i.paths[l],_=f.path.length/2;if(!(_<3||3==_&&!f.convex)){var d,v,p,y,g=s()(c=f.path).call(c),m=0;if(e._bTransform)for(m=0;m<_;m++)v=(d=m<<1)+1,p=g[d],y=g[v],g[d]=e.a*p+e.c*y+e.tx,g[v]=e.b*p+e.d*y+e.ty;else for(m=0;m<_;m++)v=(d=m<<1)+1,p=g[d],y=g[v],g[d]=p+e.tx,g[v]=y+e.ty;this._pathMesh.vertNum+_>t._MAXVERTNUM&&(this._curSubmit._numEle+=h,h=0,this._pathMesh=vt.a.getAMesh(this.isMain),this._curSubmit=this.addVGSubmit(this._pathMesh));var x=this._pathMesh.vertNum;if(f.convex){var k=_-2;a=new Array(3*k);for(var T=0,b=0;b<k;b++)a[T++]=x,a[T++]=b+1+x,a[T++]=b+2+x}else if(a=X.earcut(g,null,2),x>0)for(var C=0;C<a.length;C++)a[C]+=x;this._pathMesh.addVertAndIBToMesh(this,g,o,a),h+=a.length}}this._curSubmit._numEle+=h}},{key:"addVGSubmit",value:function(t){var e=H.a.createShape(this,t,0,U.a.create(B.a.PRIMITIVE,0));return e._key.submitType=S.a.KEY_VG,this._submits[this._submits._length++]=e,this._copyClipInfo(e,this._globalClipMatrix),e}},{key:"stroke",value:function(){if(this.lineWidth>0){var e=this.mixRGBandAlpha(this.strokeStyle._color.numColor),i=this._getPath(),n=this._curSubmit,r=n._key.submitType===S.a.KEY_VG&&n._key.blendShader===this._nBlendType;r&&(r=r&&this.isSameClipInfo(n)),r||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var a=0,s=0,o=i.paths.length;s<o;s++){var h=i.paths[s];if(!(h.path.length<=0)){var l=[],u=[],c=2*h.path.length;if(!(c<2)){this._pathMesh.vertNum+c>t._MAXVERTNUM&&(this._curSubmit._numEle+=a,a=0,this._pathMesh=vt.a.getAMesh(this.isMain),this.meshlist.push(this._pathMesh),this._curSubmit=this.addVGSubmit(this._pathMesh)),G.createLine2(h.path,l,this.lineWidth,this._pathMesh.vertNum,u,h.loop);var f,_,d,v,p=u.length/2,y=this._curMat,g=0;if(y._bTransform)for(g=0;g<p;g++)_=(f=g<<1)+1,d=u[f],v=u[_],u[f]=y.a*d+y.c*v+y.tx,u[_]=y.b*d+y.d*v+y.ty;else for(g=0;g<p;g++)_=(f=g<<1)+1,d=u[f],v=u[_],u[f]=d+y.tx,u[_]=v+y.ty;this._pathMesh.addVertAndIBToMesh(this,u,e,l),a+=l.length}}}this._curSubmit._numEle+=a}}},{key:"moveTo",value:function(t,e){var i=this._getPath();i.newPath(),i._lastOriX=t,i._lastOriY=e,i.addPoint(t,e)}},{key:"lineTo",value:function(t,e){var i=this._getPath();Math.abs(t-i._lastOriX)<.001&&Math.abs(e-i._lastOriY)<.001||(i._lastOriX=t,i._lastOriY=e,i.addPoint(t,e))}},{key:"arcTo",value:function(e,i,n,r,a){var s=0,o=0,h=0,l=this._path._lastOriX-e,u=this._path._lastOriY-i,c=Math.sqrt(l*l+u*u);if(!(c<=1e-6)){var f=l/c,_=u/c,d=n-e,v=r-i,p=d*d+v*v,y=Math.sqrt(p);if(!(y<=1e-6)){var g=d/y,m=v/y,x=f+g,k=_+m,T=Math.sqrt(x*x+k*k);if(!(T<=1e-6)){var b=x/T,C=k/T,w=Math.acos(b*f+C*_),S=Math.PI/2-w,E=(c=a/Math.tan(S))*f+e,A=c*_+i,M=Math.sqrt(c*c+a*a),R=e+b*M,I=i+C*M,D=0,P=0;if(f*m-_*g>=0){var L=2*S/t.SEGNUM;D=Math.sin(L),P=Math.cos(L)}else L=2*-S/t.SEGNUM,D=Math.sin(L),P=Math.cos(L);var B=this._path._lastOriX,O=this._path._lastOriY,F=E,N=A;(Math.abs(F-this._path._lastOriX)>.1||Math.abs(N-this._path._lastOriY)>.1)&&(o=F,h=N,B=F,O=N,this._path._lastOriX=o,this._path._lastOriY=h,this._path.addPoint(o,h));var U=E-R,G=A-I;for(s=0;s<t.SEGNUM;s++){var Y=U*P+G*D,W=-U*D+G*P;o=Y+R,h=W+I,(Math.abs(B-o)>.1||Math.abs(O-h)>.1)&&(this._path._lastOriX=o,this._path._lastOriY=h,this._path.addPoint(o,h),B=o,O=h),U=Y,G=W}}}}}},{key:"arc",value:function(t,e,i,n,r){var a,s,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=(!(arguments.length>6&&void 0!==arguments[6])||arguments[6],0),l=0,u=0,c=0,f=0,_=0,d=0;if(l=r-n,o)if(Math.abs(l)>=2*Math.PI)l=2*-Math.PI;else for(;l>0;)l-=2*Math.PI;else if(Math.abs(l)>=2*Math.PI)l=2*Math.PI;else for(;l<0;)l+=2*Math.PI;var v=this.getMatScaleX(),p=this.getMatScaleY(),y=i*(v>p?v:p),g=2*Math.PI*y;u=l/(s=0|Math.max(g/10,10))/2,c=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),o&&(c=-c);var m=this._getPath();for(a=0;a<=s;a++)h=n+l*(a/s),f=Math.cos(h),d=e+Math.sin(h)*i,(_=t+f*i)==this._path._lastOriX&&d==this._path._lastOriY||m.addPoint(_,d);f=Math.cos(r),d=e+Math.sin(r)*i,(_=t+f*i)==this._path._lastOriX&&d==this._path._lastOriY||m.addPoint(_,d)}},{key:"quadraticCurveTo",value:function(t,e,i,n){for(var r=y.a.I.getBezierPoints([this._path._lastOriX,this._path._lastOriY,t,e,i,n],30,2),a=0,s=r.length/2;a<s;a++)this.lineTo(r[2*a],r[2*a+1]);this.lineTo(i,n)}},{key:"mixRGBandAlpha",value:function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA)}},{key:"_mixRGBandAlpha",value:function(t,e){if(e>=1)return t;var i=(4278190080&t)>>>24;return 0!=i?i*=e:i=255*e,16777215&t|i<<24}},{key:"strokeRect",value:function(t,e,i,n,r){if(this.lineWidth>0){var a=this.mixRGBandAlpha(this.strokeStyle._color.numColor),s=this.lineWidth/2;this._fillRect(t-s,e-s,i+this.lineWidth,this.lineWidth,a),this._fillRect(t-s,e-s+n,i+this.lineWidth,this.lineWidth,a),this._fillRect(t-s,e+s,this.lineWidth,n-this.lineWidth,a),this._fillRect(t-s+i,e+s,this.lineWidth,n-this.lineWidth,a)}}},{key:"clip",value:function(){}},{key:"drawParticle",value:function(t,e,i){i.x=t,i.y=e,this._submits[this._submits._length++]=i}},{key:"_getPath",value:function(){return this._path||(this._path=new C)}},{key:"_fillTexture_h",value:function(e,i,n,r,a,s,o,h){r<=0&&console.error("_fillTexture_h error: oriw must>0");for(var l=s,u=Math.floor(h/r),c=h%r,f=0;f<u;f++)this._inner_drawTexture(e,i,l,o,r,a,this._curMat,n,1,!1),l+=r;if(c>0){var _=n[2]-n[0],d=n[0]+_*(c/r),v=t.tmpuv1;v[0]=n[0],v[1]=n[1],v[2]=d,v[3]=n[3],v[4]=d,v[5]=n[5],v[6]=n[6],v[7]=n[7],this._inner_drawTexture(e,i,l,o,c,a,this._curMat,v,1,!1)}}},{key:"_fillTexture_v",value:function(e,i,n,r,a,s,o,h){a<=0&&console.error("_fillTexture_v error: orih must>0");for(var l=o,u=Math.floor(h/a),c=h%a,f=0;f<u;f++)this._inner_drawTexture(e,i,s,l,r,a,this._curMat,n,1,!1),l+=a;if(c>0){var _=n[7]-n[1],d=n[1]+_*(c/a),v=t.tmpuv1;v[0]=n[0],v[1]=n[1],v[2]=n[2],v[3]=n[3],v[4]=n[4],v[5]=d,v[6]=n[6],v[7]=d,this._inner_drawTexture(e,i,s,l,r,c,this._curMat,v,1,!1)}}},{key:"drawTextureWithSizeGrid",value:function(e,i,n,r,a,s,o,h){if(e._getSource()){i+=o,n+=h;var l=e.uv,u=e.bitmap.width,c=e.bitmap.height,f=s[0],_=s[3],d=s[1],v=s[2],p=s[4],y=!1;r==u&&(_=d=0),a==c&&(f=v=0);var g=f/c,m=_/u,x=d/u,k=v/c;if(_+d>r){var T=r;y=!0,r=_+d,this.save(),this.clipRect(0+i,0+n,T,a)}var b=e.bitmap.id,C=this._curMat,w=this._tempUV,S=l[0],E=l[1],A=l[4],M=l[5],R=S,I=E,D=A,P=M;if(_&&f&&(D=S+m,P=E+g,w[0]=S,w[1]=E,w[2]=D,w[3]=E,w[4]=D,w[5]=P,w[6]=S,w[7]=P,this._inner_drawTexture(e,b,i,n,_,f,C,w,1,!1)),d&&f&&(R=A-x,I=E,D=A,P=E+g,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,this._inner_drawTexture(e,b,r-d+i,0+n,d,f,C,w,1,!1)),_&&v&&(R=S,I=M-k,D=S+m,P=M,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,this._inner_drawTexture(e,b,0+i,a-v+n,_,v,C,w,1,!1)),d&&v&&(R=A-x,I=M-k,D=A,P=M,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,this._inner_drawTexture(e,b,r-d+i,a-v+n,d,v,C,w,1,!1)),f&&(R=S+m,I=E,D=A-x,P=E+g,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,p?this._fillTexture_h(e,b,w,e.width-_-d,f,_+i,n,r-_-d):this._inner_drawTexture(e,b,_+i,n,r-_-d,f,C,w,1,!1)),v&&(R=S+m,I=M-k,D=A-x,P=M,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,p?this._fillTexture_h(e,b,w,e.width-_-d,v,_+i,a-v+n,r-_-d):this._inner_drawTexture(e,b,_+i,a-v+n,r-_-d,v,C,w,1,!1)),_&&(R=S,I=E+g,D=S+m,P=M-k,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,p?this._fillTexture_v(e,b,w,_,e.height-f-v,i,f+n,a-f-v):this._inner_drawTexture(e,b,i,f+n,_,a-f-v,C,w,1,!1)),d&&(R=A-x,I=E+g,D=A,P=M-k,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,p?this._fillTexture_v(e,b,w,d,e.height-f-v,r-d+i,f+n,a-f-v):this._inner_drawTexture(e,b,r-d+i,f+n,d,a-f-v,C,w,1,!1)),R=S+m,I=E+g,D=A-x,P=M-k,w[0]=R,w[1]=I,w[2]=D,w[3]=I,w[4]=D,w[5]=P,w[6]=R,w[7]=P,p){var L=t.tmpUVRect;L[0]=R,L[1]=I,L[2]=D-R,L[3]=P-I,this._fillTexture(e,e.width-_-d,e.height-f-v,L,_+i,f+n,r-_-d,a-f-v,"repeat",0,0)}else this._inner_drawTexture(e,b,_+i,f+n,r-_-d,a-f-v,C,w,1,!1);y&&this.restore()}}},{key:"lineJoin",get:function(){return""},set:function(t){}},{key:"lineCap",get:function(){return""},set:function(t){}},{key:"miterLimit",get:function(){return""},set:function(t){}},{key:"asBitmap",set:function(t){if(t){var e=this._targets;if(!this._width||!this._height)throw Error("asBitmap no size!");e&&e.width==this._width&&e.height==this._height||(e&&e.destroy(),this._targets=new pt.a(this._width,this._height,yt.b.R8G8B8A8,-1))}else this._targets&&this._targets.destroy(),this._targets=null}},{key:"fillStyle",set:function(t){this._shader2D.fillStyle.equal(t)||(E.save(this,E.TYPE_FILESTYLE,this._shader2D,!1),this._shader2D.fillStyle=b.a.create(t),this._submitKey.other=-this._shader2D.fillStyle.toInt())},get:function(){return this._shader2D.fillStyle}},{key:"globalAlpha",set:function(t){(t=Math.floor(1e3*t)/1e3)!=this._shader2D.ALPHA&&(E.save(this,E.TYPE_ALPHA,this._shader2D,!1),this._shader2D.ALPHA=t)},get:function(){return this._shader2D.ALPHA}},{key:"textAlign",set:function(t){this._other.textAlign===t||(this._other=this._other.make(),E.save(this,E.TYPE_TEXTALIGN,this._other,!1),this._other.textAlign=t)},get:function(){return this._other.textAlign}},{key:"textBaseline",set:function(t){this._other.textBaseline===t||(this._other=this._other.make(),E.save(this,E.TYPE_TEXTBASELINE,this._other,!1),this._other.textBaseline=t)},get:function(){return this._other.textBaseline}},{key:"globalCompositeOperation",set:function(t){var e=T.a.TOINT[t];null==e||this._nBlendType===e||(E.save(this,E.TYPE_GLOBALCOMPOSITEOPERATION,this,!0),this._curSubmit=S.a.RENDERBASE,this._nBlendType=e)},get:function(){return T.a.NAMES[this._nBlendType]}},{key:"strokeStyle",set:function(t){this._shader2D.strokeStyle.equal(t)||(E.save(this,E.TYPE_STROKESTYLE,this._shader2D,!1),this._shader2D.strokeStyle=b.a.create(t),this._submitKey.other=-this._shader2D.strokeStyle.toInt())},get:function(){return this._shader2D.strokeStyle}},{key:"lineWidth",set:function(t){this._other.lineWidth===t||(this._other=this._other.make(),E.save(this,E.TYPE_LINEWIDTH,this._other,!1),this._other.lineWidth=t)},get:function(){return this._other.lineWidth}},{key:"font",set:function(t){this._other=this._other.make(),E.save(this,E.TYPE_FONT,this._other,!1)}},{key:"canvas",get:function(){return this._canvas}}],[{key:"__init__",value:function(){t.MAXCLIPRECT=new x.a(0,0,t._MAXSIZE,t._MAXSIZE),kt.DEFAULT=new kt,D.a}},{key:"set2DRenderConfig",value:function(){var t=p.a.instance;st.a.setBlend(t,!0),st.a.setBlendEquation(t,t.FUNC_ADD),T.a.activeBlendFunction=null,st.a.setBlendFunc(t,t.ONE,t.ONE_MINUS_SRC_ALPHA),st.a.setDepthTest(t,!1),st.a.setCullFace(t,!1),st.a.setDepthMask(t,!0),st.a.setFrontFace(t,t.CCW),t.viewport(0,0,et.a.width,et.a.height)}}]),t}();xt.ENUM_TEXTALIGN_DEFAULT=0,xt.ENUM_TEXTALIGN_CENTER=1,xt.ENUM_TEXTALIGN_RIGHT=2,xt._SUBMITVBSIZE=32e3,xt._MAXSIZE=99999999,xt._MAXVERTNUM=65535,xt.MAXCLIPRECT=null,xt._COUNT=0,xt.SEGNUM=32,xt._contextcount=0,xt.PI2=2*Math.PI,xt._textRender=null,xt.tmpuv1=[0,0,0,0,0,0,0,0],xt.tmpUV=[0,0,0,0,0,0,0,0],xt.tmpUVRect=[0,0,0,0];var kt=function(){function t(){f()(this,t),this.lineWidth=1}return d()(t,[{key:"clear",value:function(){this.lineWidth=1,this.textAlign=this.textBaseline=null}},{key:"make",value:function(){return this===t.DEFAULT?new t:this}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(6),h=i.n(o),l=i(8),u=i.n(l),c=i(2),f=i.n(c);function _(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f()(t);if(e){var a=f()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var d=function(t){h()(i,t);var e=_(i);function i(){return s()(this,i),e.call(this)}return i}(i(98).a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i(3),r=i.n(n),a=i(318),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(0),g=i(16),m=i(17),x=i(202),k=i(25);function T(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var b=function(t){f()(i,t);var e=T(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.a.R8G8B8A8,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];h()(this,i),t=e.call(this,a,o);var u=g.a.instance;t._glTextureType=u.TEXTURE_2D,t._width=n,t._height=r,t._canRead=l,t._setWarpMode(u.TEXTURE_WRAP_S,t._wrapModeU),t._setWarpMode(u.TEXTURE_WRAP_T,t._wrapModeV),t._setFilterMode(t._filterMode),t._setAnisotropy(t._anisoLevel);var c=t._gpuCompressFormat();if(o){var f=Math.max(Math.ceil(s()(n))+1,Math.ceil(s()(r))+1);if(!c)for(var _=0;_<f;_++)t._setPixels(null,_,Math.max(n>>_,1),Math.max(r>>_,1));t._mipmapCount=f,t._setGPUMemory(n*r*4*(1+1/3))}else c||t._setPixels(null,0,n,r),t._mipmapCount=1,t._setGPUMemory(n*r*4);return t}return u()(i,[{key:"_gpuCompressFormat",value:function(){return this._format==k.a.DXT1||this._format==k.a.DXT5||this._format==k.a.ETC1RGB||this._format==k.a.PVRTCRGB_2BPPV||this._format==k.a.PVRTCRGBA_2BPPV||this._format==k.a.PVRTCRGB_4BPPV||this._format==k.a.PVRTCRGBA_4BPPV}},{key:"_setPixels",value:function(t,e,i,n){var r=g.a.instance,a=this._glTextureType,s=this._getGLFormat();switch(m.a.bindTexture(r,a,this._glTexture),this.format){case k.a.R8G8B8:r.pixelStorei(r.UNPACK_ALIGNMENT,1),r.texImage2D(a,e,s,i,n,0,s,r.UNSIGNED_BYTE,t),r.pixelStorei(r.UNPACK_ALIGNMENT,4);break;case k.a.R5G6B5:r.pixelStorei(r.UNPACK_ALIGNMENT,2),r.texImage2D(a,e,s,i,n,0,s,r.UNSIGNED_SHORT_5_6_5,t),r.pixelStorei(r.UNPACK_ALIGNMENT,4);break;case k.a.R32G32B32A32:g.a.layaGPUInstance._isWebGL2?r.texImage2D(a,e,r.RGBA32F,i,n,0,s,r.FLOAT,t):r.texImage2D(a,e,r.RGBA,i,n,0,s,r.FLOAT,t);break;default:r.texImage2D(a,e,s,i,n,0,s,r.UNSIGNED_BYTE,t)}}},{key:"_calcualatesCompressedDataSize",value:function(t,e,i){switch(t){case k.a.DXT1:case k.a.ETC1RGB:return(e+3>>2)*(i+3>>2)*8;case k.a.DXT5:return(e+3>>2)*(i+3>>2)*16;case k.a.PVRTCRGB_4BPPV:case k.a.PVRTCRGBA_4BPPV:return Math.floor((Math.max(e,8)*Math.max(i,8)*4+7)/8);case k.a.PVRTCRGB_2BPPV:case k.a.PVRTCRGBA_2BPPV:return Math.floor((Math.max(e,16)*Math.max(i,8)*2+7)/8);default:return 0}}},{key:"_pharseDDS",value:function(t){var e=new Int32Array(t,0,31);if(542327876!=e[0])throw"Invalid magic number in DDS header";if(!(4&e[20]))throw"Unsupported format, must contain a FourCC code";var i=e[21];switch(this._format){case k.a.DXT1:if(827611204!==i)throw"the FourCC code is not same with texture format.";break;case k.a.DXT5:if(894720068!==i)throw"the FourCC code is not same with texture format.";break;default:throw"unknown texture format."}var n=1;if(131072&e[2]){if(n=Math.max(1,e[7]),!this._mipmap)throw"the mipmap is not same with Texture2D."}else if(this._mipmap)throw"the mipmap is not same with Texture2D.";var r=e[4],a=e[3];this._width=r,this._height=a;var s=e[1]+4;this._upLoadCompressedTexImage2D(t,r,a,n,s,0)}},{key:"_pharseKTX",value:function(t){var e=new Uint8Array(t,0,12);if(171!=e[0]||75!=e[1]||84!=e[2]||88!=e[3]||32!=e[4]||49!=e[5]||49!=e[6]||187!=e[7]||13!=e[8]||10!=e[9]||26!=e[10]||10!=e[11])throw"Invalid fileIdentifier in KTX header";var i=new Int32Array(e.buffer,e.length,13);switch(i[4]){case g.a.layaGPUInstance._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL:this._format=k.a.ETC1RGB;break;default:throw"unknown texture format."}var n=i[11],r=i[6],a=i[7];this._width=r,this._height=a;var s=64+i[12];this._upLoadCompressedTexImage2D(t,r,a,n,s,4)}},{key:"_pharsePVR",value:function(t){var e=new Int32Array(t,0,13);if(55727696!=e[0])throw"Invalid magic number in PVR header";switch(e[2]){case 0:this._format=k.a.PVRTCRGB_2BPPV;break;case 2:this._format=k.a.PVRTCRGB_4BPPV;break;case 1:this._format=k.a.PVRTCRGBA_2BPPV;break;case 3:this._format=k.a.PVRTCRGBA_4BPPV;break;default:throw"Texture2D:unknown PVR format."}var i=e[11],n=e[7],r=e[6];this._width=n,this._height=r;var a=e[12]+52;this._upLoadCompressedTexImage2D(t,n,r,i,a,0)}},{key:"_upLoadCompressedTexImage2D",value:function(t,e,i,n,r,a){var s=g.a.instance,o=this._glTextureType;m.a.bindTexture(s,o,this._glTexture);for(var h=this._getGLFormat(),l=r,u=0;u<n;u++){l+=a;var c=this._calcualatesCompressedDataSize(this._format,e,i),f=new Uint8Array(t,l,c);s.compressedTexImage2D(o,u,h,e,i,0,f),e=Math.max(e>>1,1),i=Math.max(i>>1,1),l+=c}var _=l;this._setGPUMemory(_),this._readyed=!0,this._activeResource()}},{key:"loadImageSource",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=g.a.instance,n=t.width,r=t.height;this._width=n,this._height=r,this._isPot(n)&&this._isPot(r)||(this._mipmap=!1),this._setWarpMode(i.TEXTURE_WRAP_S,this._wrapModeU),this._setWarpMode(i.TEXTURE_WRAP_T,this._wrapModeV),this._setFilterMode(this._filterMode),m.a.bindTexture(i,this._glTextureType,this._glTexture);var a=this._getGLFormat();y.a.Render.isConchApp?(t.setPremultiplyAlpha&&t.setPremultiplyAlpha(e),i.texImage2D(this._glTextureType,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)):(e&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.format==k.a.R5G6B5?i.texImage2D(this._glTextureType,0,i.RGB,i.RGB,i.UNSIGNED_SHORT_5_6_5,t):i.texImage2D(this._glTextureType,0,a,a,i.UNSIGNED_BYTE,t),e&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1)),this._mipmap?(i.generateMipmap(this._glTextureType),this._setGPUMemory(n*r*4*(1+1/3))):this._setGPUMemory(n*r*4),this._canRead&&(y.a.Render.isConchApp?this._pixels=new Uint8Array(t._nativeObj.getImageData(0,0,n,r)):(y.a.Browser.canvas.size(n,r),y.a.Browser.canvas.clear(),y.a.Browser.context.drawImage(t,0,0,n,r),this._pixels=new Uint8Array(y.a.Browser.context.getImageData(0,0,n,r).data.buffer))),this._readyed=!0,this._activeResource()}},{key:"setPixels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._gpuCompressFormat())throw"Texture2D:the format is GPU compression format.";if(!t)throw"Texture2D:pixels can't be null.";var i=Math.max(this._width>>e,1),n=Math.max(this._height>>e,1),r=i*n*this._getFormatByteCount();if(t.length<r)throw"Texture2D:pixels length should at least "+r+".";this._setPixels(t,e,i,n),this._canRead&&(this._pixels=t),this._readyed=!0,this._activeResource()}},{key:"setSubPixels",value:function(t,e,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(this._gpuCompressFormat())throw"Texture2D:the format is GPU compression format.";if(!r)throw"Texture2D:pixels can't be null.";var s=g.a.instance,o=this._glTextureType;m.a.bindTexture(s,o,this._glTexture);var h=this._getGLFormat();switch(this.format){case k.a.R8G8B8:s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texSubImage2D(o,a,t,e,i,n,h,s.UNSIGNED_BYTE,r),s.pixelStorei(s.UNPACK_ALIGNMENT,4);break;case k.a.R5G6B5:s.pixelStorei(s.UNPACK_ALIGNMENT,2),s.texSubImage2D(o,a,t,e,i,n,h,s.UNSIGNED_SHORT_5_6_5,r),s.pixelStorei(s.UNPACK_ALIGNMENT,4);break;case k.a.R32G32B32A32:s.texSubImage2D(o,a,t,e,i,n,h,s.FLOAT,r);break;default:s.texSubImage2D(o,a,t,e,i,n,h,s.UNSIGNED_BYTE,r)}this._readyed=!0,this._activeResource()}},{key:"setCompressData",value:function(t){switch(this._format){case k.a.DXT1:case k.a.DXT5:this._pharseDDS(t);break;case k.a.ETC1RGB:this._pharseKTX(t);break;case k.a.PVRTCRGB_2BPPV:case k.a.PVRTCRGBA_2BPPV:case k.a.PVRTCRGB_4BPPV:case k.a.PVRTCRGBA_4BPPV:this._pharsePVR(t);break;default:throw"Texture2D:unkonwn format."}}},{key:"getPixels",value:function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")}},{key:"defaulteTexture",get:function(){return i.grayTexture}}],[{key:"__init__",value:function(){var t=new Uint8Array(3);t[0]=128,t[1]=128,t[2]=128,i.grayTexture=new i(1,1,k.a.R8G8B8,!1,!1),i.grayTexture.setPixels(t),i.grayTexture.lock=!0,t[0]=255,t[1]=255,t[2]=255,i.whiteTexture=new i(1,1,k.a.R8G8B8,!1,!1),i.whiteTexture.setPixels(t),i.whiteTexture.lock=!0,t[0]=0,t[1]=0,t[2]=0,i.blackTexture=new i(1,1,k.a.R8G8B8,!1,!1),i.blackTexture.setPixels(t),i.blackTexture.lock=!0}},{key:"_parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n?new i(n[0],n[1],n[2],n[3],n[4]):new i(0,0);switch(e&&(r.wrapModeU=e.wrapModeU,r.wrapModeV=e.wrapModeV,r.filterMode=e.filterMode,r.anisoLevel=e.anisoLevel),r._format){case k.a.R8G8B8:case k.a.R8G8B8A8:r.loadImageSource(t);break;case k.a.DXT1:case k.a.DXT5:case k.a.ETC1RGB:case k.a.PVRTCRGB_2BPPV:case k.a.PVRTCRGBA_2BPPV:case k.a.PVRTCRGB_4BPPV:case k.a.PVRTCRGBA_4BPPV:r.setCompressData(t);break;default:throw"Texture2D:unkonwn format."}return r}},{key:"load",value:function(t,e){y.a.loader.create(t,e,null,y.a.Loader.TEXTURE2D)}}]),i}(x.a);b.TEXTURE2D="TEXTURE2D",b.grayTexture=null,b.whiteTexture=null,b.blackTexture=null},,,function(t,e,i){"use strict";i.d(e,"a",(function(){return X}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(246),h=i(23),l=i(291),u=i(13),c=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){u.a.recover("ClipRectCmd",this)}},{key:"run",value:function(t,e,i){t.clipRect(this.x+e,this.y+i,this.width,this.height)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r){var a=u.a.getItemByClass("ClipRectCmd",t);return a.x=e,a.y=i,a.width=n,a.height=r,a}}]),t}();c.ID="ClipRect";var f=i(310),_=i(292),d=i(293),v=i(253),p=i(294),y=i(295),g=i(296),m=i(297),x=i(298),k=i(299),T=i(254),b=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.texture._removeReference(),this.texture=null,this.pos=null,u.a.recover("DrawTexturesCmd",this)}},{key:"run",value:function(t,e,i){t.drawTextures(this.texture,this.pos,e,i)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i){var n=u.a.getItemByClass("DrawTexturesCmd",t);return n.texture=e,e._addReference(),n.pos=i,n}}]),t}();b.ID="DrawTextures";var C=i(309),w=i(105),S=i(81),E=i(205),A=i(200),M=i(0),R=function(){function t(){r()(this,t),this._textIsWorldText=!1,this._fontColor=4294967295,this._strokeColor=0,this._fontObj=t._defFontObj,this._nTexAlign=0}return s()(t,[{key:"recover",value:function(){u.a.recover("FillTextCmd",this)}},{key:"run",value:function(t,e,i){M.a.stage.isGlobalRepaint()&&this._textIsWorldText&&this._text.cleanCache(),this._words?w.a._textRender.fillWords(t,this._words,this.x+e,this.y+i,this._fontObj,this._color,this._borderColor,this._lineWidth):this._textIsWorldText?t._fast_filltext(this._text,this.x+e,this.y+i,this._fontObj,this._color,this._borderColor,this._lineWidth,this._nTexAlign,0):w.a._textRender.filltext(t,this._text,this.x+e,this.y+i,this.font,this.color,this._borderColor,this._lineWidth,this._textAlign)}},{key:"cmdID",get:function(){return t.ID}},{key:"text",get:function(){return this._text},set:function(t){this._text=t,this._textIsWorldText=t instanceof A.a,this._textIsWorldText&&this._text.cleanCache()}},{key:"font",get:function(){return this._font},set:function(t){this._font=t,this._fontObj=E.a.Parse(t),this._textIsWorldText&&this._text.cleanCache()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._fontColor=S.a.create(t).numColor,this._textIsWorldText&&this._text.cleanCache()}},{key:"textAlign",get:function(){return this._textAlign},set:function(t){switch(this._textAlign=t,t){case"center":this._nTexAlign=M.a.Context.ENUM_TEXTALIGN_CENTER;break;case"right":this._nTexAlign=M.a.Context.ENUM_TEXTALIGN_RIGHT;break;default:this._nTexAlign=M.a.Context.ENUM_TEXTALIGN_DEFAULT}this._textIsWorldText&&this._text.cleanCache()}}],[{key:"create",value:function(e,i,n,r,a,s,o,h,l){var c=u.a.getItemByClass("FillTextCmd",t);return c.text=e,c._textIsWorldText=e instanceof A.a,c._words=i,c.x=n,c.y=r,c.font=a,c.color=s,c.textAlign=o,c._lineWidth=h,c._borderColor=l,c}}]),t}();R.ID="FillText",R._defFontObj=new E.a(null);var I=i(255),D=i(300),P=i(301),L=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){u.a.recover("SaveCmd",this)}},{key:"run",value:function(t,e,i){t.save()}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(){return u.a.getItemByClass("SaveCmd",t)}}]),t}();L.ID="Save";var B=i(302),O=i(303),F=i(304),N=i(5),U=i(42),G=i(47),Y=i(57),W=i(34),V=i(206),X=function(){function t(){r()(this,t),this._sp=null,this._one=null,this._render=this._renderEmpty,this._cmds=null,this._vectorgraphArray=null,this._graphicBounds=null,this.autoDestroy=!1,this._createData()}return s()(t,[{key:"_createData",value:function(){}},{key:"_clearData",value:function(){}},{key:"_destroyData",value:function(){}},{key:"destroy",value:function(){this.clear(!0),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0,this._sp._setRenderType(0),this._sp=null),this._destroyData()}},{key:"clear",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){var e=this._one;if(this._cmds){var i,n=this._cmds.length;for(i=0;i<n;i++)(e=this._cmds[i]).recover();this._cmds.length=0}else e&&e.recover()}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._clearData(),this._sp&&(this._sp._renderType&=~h.a.GRAPHICS,this._sp._setRenderType(this._sp._renderType)),this._repaint(),this._vectorgraphArray){for(i=0,n=this._vectorgraphArray.length;i<n;i++)V.a.getInstance().deleteShape(this._vectorgraphArray[i]);this._vectorgraphArray.length=0}}},{key:"_clearBoundsCache",value:function(){this._graphicBounds&&this._graphicBounds.reset()}},{key:"_initGraphicBounds",value:function(){this._graphicBounds||(this._graphicBounds=o.a.create(),this._graphicBounds._graphics=this)}},{key:"_repaint",value:function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()}},{key:"_isOnlyOne",value:function(){return!this._cmds||0===this._cmds.length}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._initGraphicBounds(),this._graphicBounds.getBounds(t)}},{key:"getBoundPoints",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)}},{key:"drawImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!t)return null;if(n||(n=t.sourceWidth),r||(r=t.sourceHeight),t.getIsReady()){var a=n/t.sourceWidth,s=r/t.sourceHeight;if(n=t.width*a,r=t.height*s,n<=0||r<=0)return null;e+=t.offsetX*a,i+=t.offsetY*s}this._sp&&(this._sp._renderType|=h.a.GRAPHICS,this._sp._setRenderType(this._sp._renderType));var o=v.a.create.call(this,t,e,i,n,r);return null==this._one?(this._one=o,this._render=this._renderOneImg):this._saveToCmd(null,o),this._repaint(),o}},{key:"drawTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9?arguments[9]:void 0;if(!t||s<.01)return null;if(!t.getIsReady())return null;if(n||(n=t.sourceWidth),r||(r=t.sourceHeight),t.getIsReady()){var c=n/t.sourceWidth,f=r/t.sourceHeight;if(n=t.width*c,r=t.height*f,n<=0||r<=0)return null;e+=t.offsetX*c,i+=t.offsetY*f}this._sp&&(this._sp._renderType|=h.a.GRAPHICS,this._sp._setRenderType(this._sp._renderType));var _=T.a.create.call(this,t,e,i,n,r,a,s,o,l,u);return this._repaint(),this._saveToCmd(null,_)}},{key:"drawTextures",value:function(t,e){return t?this._saveToCmd(G.a._context.drawTextures,b.create.call(this,t,e)):null}},{key:"drawTriangles",value:function(t,e,i,n,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0;return this._saveToCmd(G.a._context.drawTriangles,C.a.create.call(this,t,e,i,n,r,a,s,o,h,l,u))}},{key:"fillTexture",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"repeat",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return t&&t.getIsReady()?this._saveToCmd(G.a._context._fillTexture,I.a.create.call(this,t,e,i,n,r,a,s||U.a.EMPTY,{})):null}},{key:"_saveToCmd",value:function(t,e){return this._sp&&(this._sp._renderType|=h.a.GRAPHICS,this._sp._setRenderType(this._sp._renderType)),null==this._one?(this._one=e,this._render=this._renderOne):(this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),this._repaint(),e}},{key:"clipRect",value:function(t,e,i,n){return this._saveToCmd(G.a._context.clipRect,c.create.call(this,t,e,i,n))}},{key:"fillText",value:function(t,e,i,n,r,a){return this._saveToCmd(G.a._context.fillText,R.create.call(this,t,null,e,i,n||M.a.Text.defaultFontStr(),r,a,0,""))}},{key:"fillBorderText",value:function(t,e,i,n,r,a,s,o){return this._saveToCmd(G.a._context.fillText,R.create.call(this,t,null,e,i,n||M.a.Text.defaultFontStr(),r,o,s,a))}},{key:"fillWords",value:function(t,e,i,n,r){return this._saveToCmd(G.a._context.fillText,R.create.call(this,null,t,e,i,n||M.a.Text.defaultFontStr(),r))}},{key:"fillBorderWords",value:function(t,e,i,n,r,a,s){return this._saveToCmd(G.a._context.fillText,R.create.call(this,null,t,e,i,n||M.a.Text.defaultFontStr(),r,"",s,a))}},{key:"strokeText",value:function(t,e,i,n,r,a,s){return this._saveToCmd(G.a._context.fillText,R.create.call(this,t,null,e,i,n||M.a.Text.defaultFontStr(),null,s,a,r))}},{key:"alpha",value:function(t){return this._saveToCmd(G.a._context.alpha,l.a.create.call(this,t))}},{key:"transform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._saveToCmd(G.a._context._transform,O.a.create.call(this,t,e,i))}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._saveToCmd(G.a._context._rotate,P.a.create.call(this,t,e,i))}},{key:"scale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._saveToCmd(G.a._context._scale,B.a.create.call(this,t,e,i,n))}},{key:"translate",value:function(t,e){return this._saveToCmd(G.a._context.translate,F.a.create.call(this,t,e))}},{key:"save",value:function(){return this._saveToCmd(G.a._context._save,L.create.call(this))}},{key:"restore",value:function(){return this._saveToCmd(G.a._context.restore,D.a.create.call(this))}},{key:"replaceText",value:function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;i>-1;i--)if(this._isTextCmd(e[i]))return e[i].text=t,!0}else if(this._one&&this._isTextCmd(this._one))return this._one.text=t,!0;return!1}},{key:"_isTextCmd",value:function(t){return t.cmdID==R.ID}},{key:"replaceTextColor",value:function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;i>-1;i--)this._isTextCmd(e[i])&&this._setTextCmdColor(e[i],t);else this._one&&this._isTextCmd(this._one)&&this._setTextCmdColor(this._one,t)}},{key:"_setTextCmdColor",value:function(t,e){switch(t.cmdID){case R.ID:t.color=e}}},{key:"loadImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=M.a.Loader.getRes(t);s?s.getIsReady()?this.drawImage(s,e,i,n,r):s.once(N.a.READY,this,this.drawImage,[s,e,i,n,r]):((s=new Y.a).load(t),M.a.Loader.cacheTexture(t,s),s.once(N.a.READY,this,this.drawImage,[s,e,i,n,r])),null!=a&&(s.getIsReady()?a.call(this._sp):s.on(N.a.READY,this._sp,a))}},{key:"_renderEmpty",value:function(t,e,i,n){}},{key:"_renderAll",value:function(t,e,i,n){for(var r=this._cmds,a=0,s=r.length;a<s;a++)r[a].run(e,i,n)}},{key:"_renderOne",value:function(t,e,i,n){e.sprite=t,this._one.run(e,i,n)}},{key:"_renderOneImg",value:function(t,e,i,n){e.sprite=t,this._one.run(e,i,n)}},{key:"drawLine",value:function(t,e,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=a<1||a%2==0?0:.5;return this._saveToCmd(G.a._context._drawLine,p.a.create.call(this,t+s,e+s,i+s,n+s,r,a,0))}},{key:"drawLines",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!i||i.length<4)return null;var a=r<1||r%2==0?0:.5;return this._saveToCmd(G.a._context._drawLines,y.a.create.call(this,t+a,e+a,i,n,r,0))}},{key:"drawCurves",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return this._saveToCmd(G.a._context.drawCurves,d.a.create.call(this,t,e,i,n,r))}},{key:"drawRect",value:function(t,e,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=s>=1&&a?s/2:0,h=a?s:0;return this._saveToCmd(G.a._context.drawRect,k.a.create.call(this,t+o,e+o,i-h,n-h,r,a,s))}},{key:"drawCircle",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=a>=1&&r?a/2:0;return this._saveToCmd(G.a._context._drawCircle,_.a.create.call(this,t,e,i-s,n,r,a,0))}},{key:"drawPie",value:function(t,e,i,n,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,h=o>=1&&s?o/2:0,l=s?o:0;return this._saveToCmd(G.a._context._drawPie,m.a.create.call(this,t+h,e+h,i-l,W.a.toRadian(n),W.a.toRadian(r),a,s,o,0))}},{key:"drawPoly",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=!1;s=!(i.length>6);var o=a>=1&&r?a%2==0?0:.5:0;return this._saveToCmd(G.a._context._drawPoly,x.a.create.call(this,t+o,e+o,i,n,r,a,s,0))}},{key:"drawPath",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._saveToCmd(G.a._context._drawPath,g.a.create.call(this,t,e,i,n,r))}},{key:"draw9Grid",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._saveToCmd(null,f.a.create(t,e,i,n,r,a))}},{key:"cmds",get:function(){return this._cmds},set:function(t){this._sp&&(this._sp._renderType|=h.a.GRAPHICS,this._sp._setRenderType(this._sp._renderType)),this._cmds=t,this._render=this._renderAll,this._repaint()}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.Skeleton=null,a.AnimationTemplet=null,a.Templet=null},function(t,e,i){"use strict";var n,r;i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return r})),function(t){t[t.R8G8B8=0]="R8G8B8",t[t.R8G8B8A8=1]="R8G8B8A8",t[t.Alpha8=2]="Alpha8",t[t.R16G16B16A16=14]="R16G16B16A16",t[t.Depth=15]="Depth",t[t.ShadowMap=16]="ShadowMap"}(n||(n={})),function(t){t[t.DEPTH_16=0]="DEPTH_16",t[t.STENCIL_8=1]="STENCIL_8",t[t.DEPTHSTENCIL_24_8=2]="DEPTHSTENCIL_24_8",t[t.DEPTHSTENCIL_NONE=3]="DEPTHSTENCIL_NONE",t[t.DEPTHSTENCIL_16_8=2]="DEPTHSTENCIL_16_8"}(r||(r={}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return ee}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(7),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(166),g=i(317),m=i(122),x=i(75),k=i(5),T=i(54),b=i(63),C=i(35),w=i.n(C),S=i(0),E=i(10);function A(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var M=function(t){f()(i,t);var e=A(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s()(this,i),(t=e.call(this,n,r)).toggle=!0,t._autoSize=!1,t}return h()(i,[{key:"preinitialize",value:function(){u()(p()(i.prototype),"preinitialize",this).call(this),this.toggle=!0,this._autoSize=!1}},{key:"initialize",value:function(){u()(p()(i.prototype),"initialize",this).call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0}},{key:"dataSource",set:function(t){this._dataSource=t,t instanceof Boolean?this.selected=t:"string"==typeof t?this.selected="true"===t:w()(p()(i.prototype),"dataSource",t,this,!0)},get:function(){return u()(p()(i.prototype),"dataSource",this)}}]),i}(b.a);S.a.regClass(M),E.a.regClass("laya.ui.CheckBox",M),E.a.regClass("Laya.CheckBox",M);var R=i(69),I=i(70),D=i(319);function P(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var L=function(t){f()(i,t);var e=P(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s()(this,i),(t=e.call(this,n,r)).toggle=!1,t._autoSize=!1,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._value=null}},{key:"preinitialize",value:function(){u()(p()(i.prototype),"preinitialize",this).call(this),this.toggle=!1,this._autoSize=!1}},{key:"initialize",value:function(){u()(p()(i.prototype),"initialize",this).call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on(k.a.CLICK,this,this.onClick)}},{key:"onClick",value:function(t){this.selected=!0}},{key:"value",get:function(){return null!=this._value?this._value:this.label},set:function(t){this._value=t}}]),i}(b.a);function B(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}S.a.regClass(L),E.a.regClass("laya.ui.Radio",L),E.a.regClass("Laya.Radio",L);var O=function(t){f()(i,t);var e=B(i);function i(){return s()(this,i),e.apply(this,arguments)}return h()(i,[{key:"createItem",value:function(t,e){return new L(t,e)}}]),i}(i(316).a);S.a.regClass(O),E.a.regClass("laya.ui.RadioGroup",O),E.a.regClass("Laya.RadioGroup",O);var F=i(357),N=i(84),U=i(327),G=i(43),Y=i.n(G),W=i(103),V=i(21),X=i(145),H=i(76),z=i(73),j=i(19);function K(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var q=function(t){f()(i,t);var e=K(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s()(this,i),(t=e.call(this)).text=n,t.skin=t.skin,t}return h()(i,[{key:"preinitialize",value:function(){this.mouseEnabled=!0}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._bg&&this._bg.destroy(),this._bg=null}},{key:"createChildren",value:function(){this.addChild(this._tf=new W.a),this._tf.padding=H.a.inputLabelPadding,this._tf.on(k.a.INPUT,this,this._onInput),this._tf.on(k.a.ENTER,this,this._onEnter),this._tf.on(k.a.BLUR,this,this._onBlur),this._tf.on(k.a.FOCUS,this,this._onFocus)}},{key:"_onFocus",value:function(){this.event(k.a.FOCUS,this)}},{key:"_onBlur",value:function(){this.event(k.a.BLUR,this)}},{key:"_onInput",value:function(){this.event(k.a.INPUT,this)}},{key:"_onEnter",value:function(){this.event(k.a.ENTER,this)}},{key:"initialize",value:function(){this.width=128,this.height=22}},{key:"_skinLoaded",value:function(){this._bg||(this.graphics=this._bg=new X.a),this._bg.source=V.a.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height),this._sizeChanged(),this.event(k.a.LOADED)}},{key:"select",value:function(){this._tf.select()}},{key:"setSelection",value:function(t,e){this._tf.setSelection(t,e)}},{key:"bg",get:function(){return this._bg},set:function(t){this.graphics=this._bg=t}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._skin&&!V.a.getRes(this._skin)?S.a.loader.load(this._skin,j.a.create(this,this._skinLoaded),null,V.a.IMAGE,1):this._skinLoaded())}},{key:"sizeGrid",get:function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},set:function(t){this._bg||(this.graphics=this._bg=new X.a),this._bg.sizeGrid=z.a.fillArray(H.a.defaultSizeGrid,t,Number)}},{key:"text",set:function(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event(k.a.CHANGE))},get:function(){return u()(p()(i.prototype),"text",this)}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this._bg&&(this._bg.width=t)},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this._bg&&(this._bg.height=t)},get:function(){return u()(p()(i.prototype),"height",this)}},{key:"multiline",get:function(){return this._tf.multiline},set:function(t){this._tf.multiline=t}},{key:"editable",set:function(t){this._tf.editable=t},get:function(){return this._tf.editable}},{key:"restrict",get:function(){return this._tf.restrict},set:function(t){this._tf.restrict=t}},{key:"prompt",get:function(){return this._tf.prompt},set:function(t){this._tf.prompt=t}},{key:"promptColor",get:function(){return this._tf.promptColor},set:function(t){this._tf.promptColor=t}},{key:"maxChars",get:function(){return this._tf.maxChars},set:function(t){this._tf.maxChars=t}},{key:"focus",get:function(){return this._tf.focus},set:function(t){this._tf.focus=t}},{key:"type",get:function(){return this._tf.type},set:function(t){this._tf.type=t}}]),i}(I.a);S.a.regClass(q),E.a.regClass("laya.ui.TextInput",q),E.a.regClass("Laya.TextInput",q);var Z=i(179),Q=i(181);function $(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var J=function(t){f()(i,t);var e=$(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s()(this,i),(t=e.call(this,n)).on(k.a.CHANGE,Y()(t),t._onTextChange),t}return h()(i,[{key:"_onTextChange",value:function(){this.callLater(this.changeScroll)}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null,u()(p()(i.prototype),"destroy",this).call(this,t)}},{key:"initialize",value:function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0}},{key:"onVBarChanged",value:function(t){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)}},{key:"onHBarChanged",value:function(t){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)}},{key:"changeScroll",value:function(){var t=this._vScrollBar&&this._tf.maxScrollY>0,e=this._hScrollBar&&this._tf.maxScrollX>0,i=t?this._width-this._vScrollBar.width:this._width,n=e?this._height-this._hScrollBar.height:this._height,r=this._tf.padding||H.a.labelPadding;this._tf.width=i,this._tf.height=n,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-r[2],this._vScrollBar.y=r[1],this._vScrollBar.height=this._height-(e?this._hScrollBar.height:0)-r[1]-r[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n/Math.max(this._tf.textHeight,n),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=r[0],this._hScrollBar.y=this._height-this._hScrollBar.height-r[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-r[0]-r[2],this._hScrollBar.scrollSize=Math.max(.033*i,1),this._hScrollBar.thumbPercent=i/Math.max(this._tf.textWidth,i),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e)}},{key:"scrollTo",value:function(t){this.commitMeasure(),this._tf.scrollY=t}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this.callLater(this.changeScroll)},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this.callLater(this.changeScroll)},get:function(){return u()(p()(i.prototype),"height",this)}},{key:"vScrollBarSkin",get:function(){return this._vScrollBar?this._vScrollBar.skin:null},set:function(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new Z.a),this._vScrollBar.on(k.a.CHANGE,this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}},{key:"hScrollBarSkin",get:function(){return this._hScrollBar?this._hScrollBar.skin:null},set:function(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new Q.a),this._hScrollBar.on(k.a.CHANGE,this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}},{key:"vScrollBar",get:function(){return this._vScrollBar}},{key:"hScrollBar",get:function(){return this._hScrollBar}},{key:"maxScrollY",get:function(){return this._tf.maxScrollY}},{key:"scrollY",get:function(){return this._tf.scrollY}},{key:"maxScrollX",get:function(){return this._tf.maxScrollX}},{key:"scrollX",get:function(){return this._tf.scrollX}}]),i}(q);S.a.regClass(J),E.a.regClass("laya.ui.TextArea",J),E.a.regClass("Laya.TextArea",J);var tt=i(44),et=i(42);function it(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var nt=function(t){f()(i,t);var e=it(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments))._gridSize=11,t._bgColor="#ffffff",t._borderColor="#000000",t._inputColor="#000000",t._inputBgColor="#efefef",t._colors=[],t._selectedColor="#000000",t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._colorPanel&&this._colorPanel.destroy(t),this._colorButton&&this._colorButton.destroy(t),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null}},{key:"createChildren",value:function(){this.addChild(this._colorButton=new b.a),this._colorPanel=new T.a,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new tt.a),this._colorPanel.addChild(this._colorBlock=new tt.a),this._colorPanel.addChild(this._colorInput=new W.a)}},{key:"initialize",value:function(){this._colorButton.on(k.a.CLICK,this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on(k.a.CHANGE,this,this.onColorInputChange),this._colorInput.on(k.a.KEY_DOWN,this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on(k.a.MOUSE_MOVE,this,this.onColorTilesMouseMove),this._colorTiles.on(k.a.CLICK,this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on(k.a.MOUSE_DOWN,this,this.onPanelMouseDown),this.bgColor=this._bgColor}},{key:"onPanelMouseDown",value:function(t){t.stopPropagation()}},{key:"changePanel",value:function(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(!0),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(t=this._colorTiles.graphics).clear(!0);for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;i<12;i++)for(var n=0;n<20;n++){var r;r=0===n?e[i]:1===n?0:51*(((3*i+n/6)%3<<0)+3*(i/6<<0))<<16|n%6*51<<8|(i<<0)%6*51;var a=z.a.toColor(r);this._colors.push(a);var s=n*this._gridSize,o=i*this._gridSize;t.drawRect(s,o,this._gridSize,this._gridSize,a,"#000000")}}},{key:"onColorButtonClick",value:function(t){this._colorPanel.parent?this.close():this.open()}},{key:"open",value:function(){var t=S.a.stage,e=this.localToGlobal(new et.a),i=e.x+this._colorPanel.width<=t.width?e.x:t.width-this._colorPanel.width,n=e.y+this._colorButton.height;n=n+this._colorPanel.height<=t.height?n:e.y-this._colorPanel.height,this._colorPanel.pos(i,n),this._colorPanel.zOrder=1001,t.addChild(this._colorPanel),t.on(k.a.MOUSE_DOWN,this,this.removeColorBox)}},{key:"close",value:function(){S.a.stage.off(k.a.MOUSE_DOWN,this,this.removeColorBox),this._colorPanel.removeSelf()}},{key:"removeColorBox",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close()}},{key:"onColorFieldKeyDown",value:function(t){13==t.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t.stopPropagation())}},{key:"onColorInputChange",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")}},{key:"onColorTilesClick",value:function(t){this.selectedColor=this.getColorByMouse(),this.close()}},{key:"onColorTilesMouseMove",value:function(t){this._colorInput.focus=!1;var e=this.getColorByMouse();this._colorInput.text=e,this.drawBlock(e)}},{key:"getColorByMouse",value:function(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),i=Math.floor(t.y/this._gridSize);return this._colors[20*i+e]}},{key:"drawBlock",value:function(t){var e=this._colorBlock.graphics;e.clear(!0);var i=t||"#ffffff";e.drawRect(0,0,50,20,i,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")}},{key:"changeColor",value:function(){var t=this.graphics;t.clear(!0);var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)}},{key:"_setPanelChanged",value:function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))}},{key:"selectedColor",get:function(){return this._selectedColor},set:function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event(k.a.CHANGE,k.a.EMPTY.setTo(k.a.CHANGE,this,this)))}},{key:"skin",get:function(){return this._colorButton.skin},set:function(t){this._colorButton.once(k.a.LOADED,this,this.changeColor),this._colorButton.skin=t}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this._setPanelChanged()}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor=t,this._setPanelChanged()}},{key:"inputColor",get:function(){return this._inputColor},set:function(t){this._inputColor=t,this._setPanelChanged()}},{key:"inputBgColor",get:function(){return this._inputBgColor},set:function(t){this._inputBgColor=t,this._setPanelChanged()}}]),i}(N.a);function rt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}S.a.regClass(nt),E.a.regClass("laya.ui.ColorPicker",nt),E.a.regClass("Laya.ColorPicker",nt);var at=function(t){f()(i,t);var e=rt(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments))._oldW=0,t._oldH=0,t}return h()(i,[{key:"onEnable",value:function(){S.a.stage.on("resize",this,this.onResize),this.onResize()}},{key:"onDisable",value:function(){S.a.stage.off("resize",this,this.onResize)}},{key:"onResize",value:function(){var t=S.a.stage;if(this.width>0&&this.height>0){var e=Math.min(t.width/this._oldW,t.height/this._oldH);w()(p()(i.prototype),"width",t.width,this,!0),w()(p()(i.prototype),"height",t.height,this,!0),this.scale(e,e)}}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this._oldW=t},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this._oldH=t},get:function(){return u()(p()(i.prototype),"height",this)}}]),i}(T.a);S.a.regClass(at),E.a.regClass("laya.ui.ScaleBox",at),E.a.regClass("Laya.ScaleBox",at);var st=i(37),ot=i.n(st),ht=i(33),lt=i(57),ut=i(34),ct=i(132);function ft(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var _t=function(t){f()(i,t);var e=ft(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return s()(this,i),(t=e.call(this))._clipX=1,t._clipY=1,t._clipWidth=0,t._clipHeight=0,t._interval=50,t._index=0,t._toIndex=-1,t._clipX=r,t._clipY=a,t.skin=n,t}return h()(i,[{key:"destroy",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null}},{key:"dispose",value:function(){this.destroy(!0),S.a.loader.clearRes(this._skin)}},{key:"createChildren",value:function(){this.graphics=this._bitmap=new X.a}},{key:"_onDisplay",value:function(t){this._isPlaying?this._getBit(ht.a.DISPLAYED_INSTAGE)?this.play():this.stop():this._autoPlay&&this.play()}},{key:"_skinLoaded",value:function(){this._setClipChanged(),this._sizeChanged(),this.event(k.a.LOADED)}},{key:"changeClip",value:function(){if(this._clipChanged=!1,this._skin){var t=V.a.getRes(this._skin);t?this.loadComplete(this._skin,t):S.a.loader.load(this._skin,j.a.create(this,this.loadComplete,[this._skin]))}}},{key:"loadComplete",value:function(t,e){if(t===this._skin&&e){var i=this._clipWidth||Math.ceil(e.sourceWidth/this._clipX),n=this._clipHeight||Math.ceil(e.sourceHeight/this._clipY),r=this._skin+i+n,a=ct.a.I.get(r);if(ut.a.isOkTextureList(a)||(a=null),a)this._sources=a;else{this._sources=[];for(var s=0;s<this._clipY;s++)for(var o=0;o<this._clipX;o++)this._sources.push(lt.a.createFromTexture(e,i*o,n*s,i,n));ct.a.I.set(r,this._sources)}this.index=this._index,this.event(k.a.LOADED),this.onCompResize()}}},{key:"measureWidth",value:function(){return this.runCallLater(this.changeClip),this._bitmap.width}},{key:"measureHeight",value:function(){return this.runCallLater(this.changeClip),this._bitmap.height}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._isPlaying=!0,this.index=t,this._toIndex=e,this._index++,S.a.timer.loop(this.interval,this,this._loop),this.on(k.a.DISPLAY,this,this._onDisplay),this.on(k.a.UNDISPLAY,this,this._onDisplay)}},{key:"_loop",value:function(){this._visible&&this._sources&&(this._index++,this._toIndex>-1&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)}},{key:"stop",value:function(){this._isPlaying=!1,S.a.timer.clear(this,this._loop),this.event(k.a.COMPLETE)}},{key:"_setClipChanged",value:function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,t?V.a.getRes(t)?this._skinLoaded():S.a.loader.load(this._skin,j.a.create(this,this._skinLoaded),null,V.a.IMAGE,1):this._bitmap.source=null)}},{key:"clipX",get:function(){return this._clipX},set:function(t){this._clipX=t||1,this._setClipChanged()}},{key:"clipY",get:function(){return this._clipY},set:function(t){this._clipY=t||1,this._setClipChanged()}},{key:"clipWidth",get:function(){return this._clipWidth},set:function(t){this._clipWidth=t,this._setClipChanged()}},{key:"clipHeight",get:function(){return this._clipHeight},set:function(t){this._clipHeight=t,this._setClipChanged()}},{key:"sources",get:function(){return this._sources},set:function(t){this._sources=t,this.index=this._index,this.event(k.a.LOADED)}},{key:"group",get:function(){return this._group},set:function(t){t&&this._skin&&V.a.setGroup(this._skin,t),this._group=t}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this._bitmap.width=t},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this._bitmap.height=t},get:function(){return u()(p()(i.prototype),"height",this)}},{key:"sizeGrid",get:function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},set:function(t){this._bitmap.sizeGrid=z.a.fillArray(H.a.defaultSizeGrid,t,Number)}},{key:"index",get:function(){return this._index},set:function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event(k.a.CHANGE)}},{key:"total",get:function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}},{key:"autoPlay",get:function(){return this._autoPlay},set:function(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}},{key:"interval",get:function(){return this._interval},set:function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}},{key:"isPlaying",get:function(){return this._isPlaying},set:function(t){this._isPlaying=t}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.index=ot()(t):w()(p()(i.prototype),"dataSource",t,this,!0)},get:function(){return u()(p()(i.prototype),"dataSource",this)}},{key:"bitmap",get:function(){return this._bitmap}}]),i}(N.a);S.a.regClass(_t),E.a.regClass("laya.ui.Clip",_t),E.a.regClass("Laya.Clip",_t);var dt=i(11),vt=i.n(dt),pt=i(143);function yt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var gt=function(t){f()(i,t);var e=yt(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s()(this,i),(t=e.call(this))._visibleNum=6,t._itemColors=H.a.comboBoxItemColors,t._itemSize=12,t._labels=[],t._selectedIndex=-1,t.itemRender=null,t.skin=n,t.labels=r,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._button&&this._button.destroy(t),this._list&&this._list.destroy(t),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null}},{key:"createChildren",value:function(){this.addChild(this._button=new b.a),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on(k.a.MOUSE_DOWN,this,this.onButtonMouseDown)}},{key:"_createList",value:function(){this._list=new pt.a,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)}},{key:"_setListEvent",value:function(t){this._list.selectEnable=!0,this._list.on(k.a.MOUSE_DOWN,this,this.onListDown),this._list.mouseHandler=j.a.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on(k.a.MOUSE_DOWN,this,this.onScrollBarDown)}},{key:"onListDown",value:function(t){t.stopPropagation()}},{key:"onScrollBarDown",value:function(t){t.stopPropagation()}},{key:"onButtonMouseDown",value:function(t){this.callLater(this.switchTo,[!this._isOpen])}},{key:"measureWidth",value:function(){return this._button.width}},{key:"measureHeight",value:function(){return this._button.height}},{key:"changeList",value:function(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._list.refresh()}},{key:"onlistItemMouse",value:function(t,e){var i=t.type;if(i===k.a.MOUSE_OVER||i===k.a.MOUSE_OUT){if(this._isCustomList)return;var n=this._list.getCell(e);if(!n)return;var r=n.getChildByName("label");r&&(i===k.a.ROLL_OVER?(r.bgColor=this._itemColors[0],r.color=this._itemColors[1]):(r.bgColor=null,r.color=this._itemColors[2]))}else i===k.a.CLICK&&(this.selectedIndex=e,this.isOpen=!1)}},{key:"switchTo",value:function(t){this.isOpen=t}},{key:"changeOpen",value:function(){this.isOpen=!this._isOpen}},{key:"changeItem",value:function(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(!0),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var e=this._list.array||[];e.length=0;for(var i=0,n=this._labels.length;i<n;i++)e.push({label:this._labels[i]});this._list.height=this._listHeight,this._list.array=e}},{key:"changeSelected",value:function(){this._button.label=this.selectedLabel}},{key:"_onStageMouseWheel",value:function(t){this._list&&!this._list.contains(t.target)&&this.removeList(null)}},{key:"removeList",value:function(t){S.a.stage.off(k.a.MOUSE_DOWN,this,this.removeList),S.a.stage.off(k.a.MOUSE_WHEEL,this,this._onStageMouseWheel),this.isOpen=!1}},{key:"skin",get:function(){return this._button.skin},set:function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this._button.height=this._height},get:function(){return u()(p()(i.prototype),"height",this)}},{key:"labels",get:function(){return this._labels.join(",")},set:function(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event(k.a.CHANGE,[k.a.EMPTY.setTo(k.a.CHANGE,this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}},{key:"selectHandler",get:function(){return this._selectHandler},set:function(t){this._selectHandler=t}},{key:"selectedLabel",get:function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},set:function(t){var e;this.selectedIndex=vt()(e=this._labels).call(e,t)}},{key:"visibleNum",get:function(){return this._visibleNum},set:function(t){this._visibleNum=t,this._listChanged=!0}},{key:"itemColors",get:function(){return String(this._itemColors)},set:function(t){this._itemColors=z.a.fillArray(this._itemColors,t,String),this._listChanged=!0}},{key:"itemSize",get:function(){return this._itemSize},set:function(t){this._itemSize=t,this._listChanged=!0}},{key:"isOpen",get:function(){return this._isOpen},set:function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(et.a.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=S.a.stage.height?i:e.y-this._listHeight,this._list.pos(e.x,i),this._list.zOrder=1001,S.a.stage.addChild(this._list),S.a.stage.once(k.a.MOUSE_DOWN,this,this.removeList),S.a.stage.on(k.a.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}},{key:"scrollBarSkin",get:function(){return this._scrollBarSkin},set:function(t){this._scrollBarSkin=t}},{key:"sizeGrid",get:function(){return this._button.sizeGrid},set:function(t){this._button.sizeGrid=t}},{key:"scrollBar",get:function(){return this.list.scrollBar}},{key:"button",get:function(){return this._button}},{key:"list",get:function(){return this._list||this._createList(),this._list},set:function(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.selectedIndex=ot()(t):t instanceof Array?this.labels=t.join(","):w()(p()(i.prototype),"dataSource",t,this,!0)},get:function(){return u()(p()(i.prototype),"dataSource",this)}},{key:"labelColors",get:function(){return this._button.labelColors},set:function(t){this._button.labelColors!=t&&(this._button.labelColors=t)}},{key:"labelPadding",get:function(){return this._button.text.padding.join(",")},set:function(t){this._button.text.padding=z.a.fillArray(H.a.labelPadding,t,Number)}},{key:"labelSize",get:function(){return this._button.text.fontSize},set:function(t){this._button.text.fontSize=t}},{key:"labelBold",get:function(){return this._button.text.bold},set:function(t){this._button.text.bold=t}},{key:"labelFont",get:function(){return this._button.text.font},set:function(t){this._button.text.font=t}},{key:"stateNum",get:function(){return this._button.stateNum},set:function(t){this._button.stateNum=t}}]),i}(N.a);S.a.regClass(gt),E.a.regClass("laya.ui.ComboBox",gt),E.a.regClass("Laya.ComboBox",gt);var mt=i(180);function xt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var kt=function(t){f()(i,t);var e=xt(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s()(this,i),(t=e.call(this,n)).isVertical=!1,t}return i}(mt.a);S.a.regClass(kt),E.a.regClass("laya.ui.HSlider",kt),E.a.regClass("Laya.HSlider",kt);var Tt=i(32);function bt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var Ct=function(t){f()(i,t);var e=bt(i);function i(){var t;return s()(this,i),(t=e.call(this))._usedCache=null,t._elasticEnabled=!1,t.width=t.height=100,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null}},{key:"destroyChildren",value:function(){this._content.destroyChildren()}},{key:"createChildren",value:function(){u()(p()(i.prototype),"addChild",this).call(this,this._content=new T.a)}},{key:"addChild",value:function(t){return t.on(k.a.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.addChild(t)}},{key:"onResize",value:function(){this._setScrollChanged()}},{key:"addChildAt",value:function(t,e){return t.on(k.a.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,e)}},{key:"removeChild",value:function(t){return t.off(k.a.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)}},{key:"removeChildAt",value:function(t){return this.getChildAt(t).off(k.a.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)}},{key:"removeChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2147483647;return this._content.removeChildren(t,e),this._setScrollChanged(),this}},{key:"getChildAt",value:function(t){return this._content.getChildAt(t)}},{key:"getChildByName",value:function(t){return this._content.getChildByName(t)}},{key:"getChildIndex",value:function(t){return this._content.getChildIndex(t)}},{key:"changeScroll",value:function(){this._scrollChanged=!1;var t=this.contentWidth||1,e=this.contentHeight||1,i=this._vScrollBar,n=this._hScrollBar,r=i&&e>this._height,a=n&&t>this._width,s=r?this._width-i.width:this._width,o=a?this._height-n.height:this._height;i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(a?n.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=o/e,i.setScroll(0,e-o,i.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(r?i.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=s/t,n.setScroll(0,t-s,n.value))}},{key:"_sizeChanged",value:function(){u()(p()(i.prototype),"_sizeChanged",this).call(this),this.setContentSize(this._width,this._height)}},{key:"setContentSize",value:function(t,e){var i=this._content;i.width=t,i.height=e,i._style.scrollRect||(i.scrollRect=Tt.a.create()),i._style.scrollRect.setTo(0,0,t,e),i.scrollRect=i.scrollRect}},{key:"onScrollBarChange",value:function(t){var e=this._content._style.scrollRect;if(e){var i=Math.round(t.value);t.isVertical?e.y=i:e.x=i,this._content.scrollRect=e}}},{key:"scrollTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)}},{key:"refresh",value:function(){this.changeScroll()}},{key:"onScrollStart",value:function(){this._usedCache||(this._usedCache=u()(p()(i.prototype),"cacheAs",this)),w()(p()(i.prototype),"cacheAs","none",this,!0),this._hScrollBar&&this._hScrollBar.once(k.a.END,this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once(k.a.END,this,this.onScrollEnd)}},{key:"onScrollEnd",value:function(){w()(p()(i.prototype),"cacheAs",this._usedCache,this,!0)}},{key:"_setScrollChanged",value:function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))}},{key:"numChildren",get:function(){return this._content.numChildren}},{key:"contentWidth",get:function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i._x+i.width*i.scaleX-i.pivotX,t)}return t}},{key:"contentHeight",get:function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i._y+i.height*i.scaleY-i.pivotY,t)}return t}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this._setScrollChanged()},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this._setScrollChanged()},get:function(){return u()(p()(i.prototype),"height",this)}},{key:"vScrollBarSkin",get:function(){return this._vScrollBar?this._vScrollBar.skin:null},set:function(t){null==this._vScrollBar&&(u()(p()(i.prototype),"addChild",this).call(this,this._vScrollBar=new Z.a),this._vScrollBar.on(k.a.CHANGE,this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._vScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged()),this._vScrollBar.skin=t}},{key:"hScrollBarSkin",get:function(){return this._hScrollBar?this._hScrollBar.skin:null},set:function(t){null==this._hScrollBar&&(u()(p()(i.prototype),"addChild",this).call(this,this._hScrollBar=new Q.a),this._hScrollBar.on(k.a.CHANGE,this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._hScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged()),this._hScrollBar.skin=t}},{key:"vScrollBar",get:function(){return this._vScrollBar}},{key:"hScrollBar",get:function(){return this._hScrollBar}},{key:"content",get:function(){return this._content}},{key:"cacheAs",set:function(t){w()(p()(i.prototype),"cacheAs",t,this,!0),this._usedCache=null,"none"!==t?(this._hScrollBar&&this._hScrollBar.on(k.a.START,this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on(k.a.START,this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off(k.a.START,this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off(k.a.START,this,this.onScrollStart))},get:function(){return u()(p()(i.prototype),"cacheAs",this)}},{key:"elasticEnabled",get:function(){return this._elasticEnabled},set:function(t){this._elasticEnabled=t,this._vScrollBar&&(this._vScrollBar.elasticDistance=t?200:0),this._hScrollBar&&(this._hScrollBar.elasticDistance=t?200:0)}}]),i}(T.a);S.a.regClass(Ct),E.a.regClass("laya.ui.Panel",Ct),E.a.regClass("Laya.Panel",Ct);var wt=i(226);function St(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var Et=function(t){f()(i,t);var e=St(i);function i(){return s()(this,i),e.apply(this,arguments)}return i}(mt.a);S.a.regClass(Et),E.a.regClass("laya.ui.VSlider",Et),E.a.regClass("Laya.VSlider",Et);var At=i(24),Mt=i.n(At),Rt=i(27),It=i.n(Rt),Dt=i(28),Pt=i.n(Dt),Lt=i(29),Bt=i.n(Lt),Ot=i(30),Ft=i.n(Ot),Nt=i(15),Ut=i.n(Nt);function Gt(t){if(void 0===Bt.a||null==Pt()(t)){if(It()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return Yt(t,e);var n=Ut()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Ft()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,s=!1;return{s:function(){n=Mt()(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var Vt=function(t){f()(i,t);var e=Wt(i);function i(){var t;return s()(this,i),(t=e.call(this))._spaceLeft=10,t._spaceBottom=0,t._keepStatus=!0,t.width=t.height=200,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u()(p()(i.prototype),"destroy",this).call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null}},{key:"createChildren",value:function(){this.addChild(this._list=new pt.a),this._list.renderHandler=j.a.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on(k.a.CHANGE,this,this.onListChange)}},{key:"onListChange",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.event(k.a.CHANGE)}},{key:"getArray",value:function(){var t=[];for(var e in this._source){var i=this._source[e];this.getParentOpenStatus(i)&&(i.x=this._spaceLeft*this.getDepth(i),t.push(i))}return t}},{key:"getDepth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)}},{key:"getParentOpenStatus",value:function(t){var e=t.nodeParent;return null==e||!!e.isOpen&&(null==e.nodeParent||this.getParentOpenStatus(e))}},{key:"renderItem",value:function(t,e){var i=t.dataSource;if(i){t.left=i.x;var n=t.getChildByName("arrow");n&&(i.hasChild?(n.visible=!0,n.index=i.isOpen?1:0,n.tag=e,n.off(k.a.CLICK,this,this.onArrowClick),n.on(k.a.CLICK,this,this.onArrowClick)):n.visible=!1);var r=t.getChildByName("folder");r&&(2==r.clipY?r.index=i.isDirectory?0:1:r.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,e])}}},{key:"onArrowClick",value:function(t){var e=t.currentTarget.tag;this._list.array[e].isOpen=!this._list.array[e].isOpen,this.event(k.a.OPEN),this._list.array=this.getArray()}},{key:"setItemState",value:function(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())}},{key:"fresh",value:function(){this._list.array=this.getArray(),this.repaint()}},{key:"parseXml",value:function(t,e,i,n){var r,a=t.childNodes,s=a.length;if(!n){r={};var o=t.attributes;for(var h in o){var l=o[h],u=l.nodeName,c=l.nodeValue;r[u]="true"==c||"false"!=c&&c}r.nodeParent=i,s>0&&(r.isDirectory=!0),r.hasChild=s>0,e.push(r)}for(var f=0;f<s;f++){var _=a[f];this.parseXml(_,e,r,!1)}}},{key:"parseOpenStatus",value:function(t,e){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.isDirectory)for(var a=0,s=t.length;a<s;a++){var o=t[a];if(o.isDirectory&&this.isSameParent(o,r)&&r.label==o.label){r.isOpen=o.isOpen;break}}}}},{key:"isSameParent",value:function(t,e){return null==t.nodeParent&&null==e.nodeParent||null!=t.nodeParent&&null!=e.nodeParent&&(t.nodeParent.label==e.nodeParent.label&&this.isSameParent(t.nodeParent,e.nodeParent))}},{key:"filter",value:function(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()}},{key:"getFilterSource",value:function(t,e,i){i=i.toLocaleLowerCase();var n,r=Gt(t);try{for(r.s();!(n=r.n()).done;){var a,s=n.value;!s.isDirectory&&vt()(a=String(s.label).toLowerCase()).call(a,i)>-1&&(s.x=0,e.push(s)),s.child&&s.child.length>0&&this.getFilterSource(s.child,e,i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"keepStatus",get:function(){return this._keepStatus},set:function(t){this._keepStatus=t}},{key:"array",get:function(){return this._list.array},set:function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}},{key:"source",get:function(){return this._source}},{key:"list",get:function(){return this._list}},{key:"itemRender",get:function(){return this._list.itemRender},set:function(t){this._list.itemRender=t}},{key:"scrollBarSkin",get:function(){return this._list.vScrollBarSkin},set:function(t){this._list.vScrollBarSkin=t}},{key:"scrollBar",get:function(){return this._list.scrollBar}},{key:"mouseHandler",get:function(){return this._list.mouseHandler},set:function(t){this._list.mouseHandler=t}},{key:"renderHandler",get:function(){return this._renderHandler},set:function(t){this._renderHandler=t}},{key:"spaceLeft",get:function(){return this._spaceLeft},set:function(t){this._spaceLeft=t}},{key:"spaceBottom",get:function(){return this._list.spaceY},set:function(t){this._list.spaceY=t}},{key:"selectedIndex",get:function(){return this._list.selectedIndex},set:function(t){this._list.selectedIndex=t}},{key:"selectedItem",get:function(){return this._list.selectedItem},set:function(t){this._list.selectedItem=t}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this._list.width=t},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this._list.height=t},get:function(){return u()(p()(i.prototype),"height",this)}},{key:"dataSource",set:function(t){this._dataSource=t,w()(p()(i.prototype),"dataSource",t,this,!0)},get:function(){return u()(p()(i.prototype),"dataSource",this)}},{key:"xml",set:function(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}},{key:"selectedPath",get:function(){return this._list.selectedItem?this._list.selectedItem.path:null}}]),i}(T.a);S.a.regClass(Vt),E.a.regClass("laya.ui.Tree",Vt),E.a.regClass("Laya.Tree",Vt);var Xt=i(137),Ht=i.n(Xt);function zt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var jt=function(t){f()(i,t);var e=zt(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments))._space=0,t._align="none",t._itemChanged=!1,t}return h()(i,[{key:"addChild",value:function(t){return t.on(k.a.RESIZE,this,this.onResize),this._setItemChanged(),u()(p()(i.prototype),"addChild",this).call(this,t)}},{key:"onResize",value:function(t){this._setItemChanged()}},{key:"addChildAt",value:function(t,e){return t.on(k.a.RESIZE,this,this.onResize),this._setItemChanged(),u()(p()(i.prototype),"addChildAt",this).call(this,t,e)}},{key:"removeChildAt",value:function(t){return this.getChildAt(t).off(k.a.RESIZE,this,this.onResize),this._setItemChanged(),u()(p()(i.prototype),"removeChildAt",this).call(this,t)}},{key:"refresh",value:function(){this._setItemChanged()}},{key:"changeItems",value:function(){this._itemChanged=!1}},{key:"sortItem",value:function(t){t&&Ht()(t).call(t,(function(t,e){return t.y-e.y}))}},{key:"_setItemChanged",value:function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))}},{key:"space",get:function(){return this._space},set:function(t){this._space=t,this._setItemChanged()}},{key:"align",get:function(){return this._align},set:function(t){this._align=t,this._setItemChanged()}}]),i}(T.a);function Kt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}S.a.regClass(jt),E.a.regClass("laya.ui.LayoutBox",jt),E.a.regClass("Laya.LayoutBox",jt);var qt=function(t){f()(i,t);var e=Kt(i);function i(){return s()(this,i),e.apply(this,arguments)}return h()(i,[{key:"sortItem",value:function(t){t&&Ht()(t).call(t,(function(t,e){return t.x-e.x}))}},{key:"changeItems",value:function(){this._itemChanged=!1;for(var t=[],e=0,n=0,r=this.numChildren;n<r;n++){var a=this.getChildAt(n);a&&(t.push(a),e=this._height?this._height:Math.max(e,a.height*a.scaleY))}this.sortItem(t);var s=0;for(n=0,r=t.length;n<r;n++)(a=t[n]).x=s,s+=a.width*a.scaleX+this._space,this._align==i.TOP?a.y=0:this._align==i.MIDDLE?a.y=.5*(e-a.height*a.scaleY):this._align==i.BOTTOM&&(a.y=e-a.height*a.scaleY);this._sizeChanged()}},{key:"height",set:function(t){this._height!=t&&(w()(p()(i.prototype),"height",t,this,!0),this.callLater(this.changeItems))},get:function(){return u()(p()(i.prototype),"height",this)}}]),i}(jt);function Zt(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}qt.NONE="none",qt.TOP="top",qt.MIDDLE="middle",qt.BOTTOM="bottom",S.a.regClass(qt),E.a.regClass("laya.ui.HBox",qt),E.a.regClass("Laya.HBox",qt);var Qt=function(t){f()(i,t);var e=Zt(i);function i(){return s()(this,i),e.apply(this,arguments)}return h()(i,[{key:"changeItems",value:function(){this._itemChanged=!1;for(var t=[],e=0,n=0,r=this.numChildren;n<r;n++){var a=this.getChildAt(n);a&&(t.push(a),e=this._width?this._width:Math.max(e,a.width*a.scaleX))}this.sortItem(t);var s=0;for(n=0,r=t.length;n<r;n++)(a=t[n]).y=s,s+=a.height*a.scaleY+this._space,this._align==i.LEFT?a.x=0:this._align==i.CENTER?a.x=.5*(e-a.width*a.scaleX):this._align==i.RIGHT&&(a.x=e-a.width*a.scaleX);this._sizeChanged()}},{key:"width",set:function(t){this._width!=t&&(w()(p()(i.prototype),"width",t,this,!0),this.callLater(this.changeItems))},get:function(){return u()(p()(i.prototype),"width",this)}}]),i}(jt);function $t(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}Qt.NONE="none",Qt.LEFT="left",Qt.CENTER="center",Qt.RIGHT="right",S.a.regClass(Qt),E.a.regClass("laya.ui.VBox",Qt),E.a.regClass("Laya.VBox",Qt);var Jt=function(t){f()(i,t);var e=$t(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s()(this,i),(t=e.call(this))._valueArr="",t._indexMap=null,t._sheet=null,t._direction="horizontal",t._spaceX=0,t._spaceY=0,t._align="left",t._wordsW=0,t._wordsH=0,n&&(t.skin=n),r&&(t.sheet=r),t}return h()(i,[{key:"createChildren",value:function(){this._bitmap=new X.a,this.on(k.a.LOADED,this,this._onClipLoaded)}},{key:"_onClipLoaded",value:function(){this.callLater(this.changeValue)}},{key:"changeValue",value:function(){var t;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),t=this._sources[0]))){var e="horizontal"===this._direction;e?(this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX),this._wordsH=t.sourceHeight):(this._wordsW=t.sourceWidth,this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length);var i=0;if(this._width)switch(this._align){case"center":i=.5*(this._width-this._wordsW);break;case"right":i=this._width-this._wordsW;break;default:i=0}for(var n=0,r=this._valueArr.length;n<r;n++){var a=this._indexMap[this._valueArr.charAt(n)];this.sources[a]&&(t=this.sources[a],e?this.graphics.drawImage(t,i+n*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight):this.graphics.drawImage(t,0+i,n*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight))}this._width||(this._widget.resetLayoutX(),this.callLater(this._sizeChanged)),this._height||(this._widget.resetLayoutY(),this.callLater(this._sizeChanged))}}},{key:"measureWidth",value:function(){return this._wordsW}},{key:"measureHeight",value:function(){return this._wordsH}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off(k.a.LOADED,this,this._onClipLoaded),u()(p()(i.prototype),"destroy",this).call(this,t)}},{key:"sheet",get:function(){return this._sheet},set:function(t){t+="",this._sheet=t;var e=t.split(" ");this._clipX=String(e[0]).length,this.clipY=e.length,this._indexMap={};for(var i=0;i<this._clipY;i++)for(var n=e[i].split(""),r=0,a=n.length;r<a;r++)this._indexMap[n[r]]=i*this._clipX+r}},{key:"value",get:function(){return this._valueArr?this._valueArr:""},set:function(t){t+="",this._valueArr=t,this.callLater(this.changeValue)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t,this.callLater(this.changeValue)}},{key:"spaceX",get:function(){return this._spaceX},set:function(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}},{key:"spaceY",get:function(){return this._spaceY},set:function(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}},{key:"align",set:function(t){this._align=t,this.callLater(this.changeValue)},get:function(){return this._align}},{key:"width",set:function(t){w()(p()(i.prototype),"width",t,this,!0),this.callLater(this.changeValue)},get:function(){return u()(p()(i.prototype),"width",this)}},{key:"height",set:function(t){w()(p()(i.prototype),"height",t,this,!0),this.callLater(this.changeValue)},get:function(){return u()(p()(i.prototype),"height",this)}}]),i}(_t);function te(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}S.a.regClass(Jt),E.a.regClass("laya.ui.FontClip",Jt),E.a.regClass("Laya.FontClip",Jt);var ee=function(t){f()(i,t);var e=te(i);function i(){var t;return s()(this,i),(t=e.call(this,!1))._watchMap={},t._anchorX=NaN,t._anchorY=NaN,t._widget=y.a.EMPTY,t.createChildren(),t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._watchMap=null,u()(p()(i.prototype),"destroy",this).call(this,t)}},{key:"changeData",value:function(t){var e=this._watchMap[t];if(e)for(var i=0,n=e.length;i<n;i++){e[i].exe(this)}}},{key:"_sizeChanged",value:function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event(k.a.RESIZE)}},{key:"_getWidget",value:function(){return this._widget===y.a.EMPTY&&(this._widget=this.addComponent(y.a)),this._widget}},{key:"loadUI",value:function(t){var e=i.uiMap[t];i.uiMap&&this.createView(e)}},{key:"top",get:function(){return this._widget.top},set:function(t){t!=this._widget.top&&(this._getWidget().top=t)}},{key:"bottom",get:function(){return this._widget.bottom},set:function(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}},{key:"left",get:function(){return this._widget.left},set:function(t){t!=this._widget.left&&(this._getWidget().left=t)}},{key:"right",get:function(){return this._widget.right},set:function(t){t!=this._widget.right&&(this._getWidget().right=t)}},{key:"centerX",get:function(){return this._widget.centerX},set:function(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}},{key:"centerY",get:function(){return this._widget.centerY},set:function(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}},{key:"anchorX",get:function(){return this._anchorX},set:function(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}},{key:"anchorY",get:function(){return this._anchorY},set:function(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){for(var e in this._dataSource=t,t){var i=this.getChildByName(e);i instanceof N.a?i.dataSource=t[e]:!(e in this)||this[e]instanceof Function||(this[e]=t[e])}}}],[{key:"__init__",value:function(){S.a.ClassUtils.regShortClassName([U.a,b.a,J,nt,T.a,at,M,_t,gt,N.a,Q.a,kt,R.a,I.a,pt.a,Ct,D.a,L,O,wt.a,mt.a,F.a,q,i,Z.a,Et,Vt,qt,Qt,g.a,x.a,Jt])}},{key:"regComponent",value:function(t,e){S.a.ClassUtils.regClass(t,e)}},{key:"regViewRuntime",value:function(t,e){S.a.ClassUtils.regClass(t,e)}},{key:"regUI",value:function(t,e){S.a.loader.cacheRes(t,e)}}]),i}(m.a);ee.uiMap={},S.a.regClass(ee),E.a.regClass("laya.ui.View",ee),E.a.regClass("Laya.View",ee)},function(t,e,i){"use strict";var n;i.d(e,"a",(function(){return n})),function(t){t[t.Repeat=0]="Repeat",t[t.Clamp=1]="Clamp"}(n||(n={}))},function(t,e,i){t.exports=i(679)},function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(107),p=i(16),y=i(202),g=i(17),m=i(106),x=i(36),k=i(0),T=i(112);function b(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var C=function(t){u()(i,t);var e=b(i);function i(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.b.R8G8B8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.a.DEPTH_16;return s()(this,i),(r=e.call(this,a,!1))._mgrKey=0,r._glTextureType=p.a.instance.TEXTURE_2D,r._width=t,r._height=n,r._depthStencilFormat=o,r._create(t,n),r.lock=!0,r}return h()(i,[{key:"getIsReady",value:function(){return!0}},{key:"_create",value:function(t,e){var i=p.a.instance;this._frameBuffer=i.createFramebuffer(),g.a.bindTexture(i,this._glTextureType,this._glTexture);var n=this._getGLFormat();if(i.texImage2D(this._glTextureType,0,n,t,e,0,n,i.UNSIGNED_BYTE,null),this._setGPUMemory(t*e*4),i.bindFramebuffer(i.FRAMEBUFFER,this._frameBuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this._glTexture,0),this._depthStencilFormat!==T.a.DEPTHSTENCIL_NONE)switch(this._depthStencilBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this._depthStencilBuffer),this._depthStencilFormat){case T.a.DEPTH_16:i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t,e),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,this._depthStencilBuffer);break;case T.a.STENCIL_8:i.renderbufferStorage(i.RENDERBUFFER,i.STENCIL_INDEX8,t,e),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.STENCIL_ATTACHMENT,i.RENDERBUFFER,this._depthStencilBuffer);break;case T.a.DEPTHSTENCIL_24_8:i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,this._depthStencilBuffer)}i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindRenderbuffer(i.RENDERBUFFER,null),this._setWarpMode(i.TEXTURE_WRAP_S,this._wrapModeU),this._setWarpMode(i.TEXTURE_WRAP_T,this._wrapModeV),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel),this._readyed=!0,this._activeResource()}},{key:"generateMipmap",value:function(){this._isPot(this.width)&&this._isPot(this.height)?(this._mipmap=!0,p.a.instance.generateMipmap(this._glTextureType),this._setFilterMode(this._filterMode),this._setGPUMemory(this.width*this.height*4*(1+1/3))):(this._mipmap=!1,this._setGPUMemory(this.width*this.height*4))}},{key:"start",value:function(){var t=p.a.instance;p.a.instance.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),this._lastRT=i._currentActive,i._currentActive=this,this._readyed=!0,t.viewport(0,0,this._width,this._height),this._lastWidth=x.a.width,this._lastHeight=x.a.height,x.a.width=this._width,x.a.height=this._height,m.a.activeShader=null}},{key:"end",value:function(){var t=p.a.instance;t.bindFramebuffer(t.FRAMEBUFFER,null),i._currentActive=null,this._readyed=!0}},{key:"restore",value:function(){var t=p.a.instance;this._lastRT!=i._currentActive&&(p.a.instance.bindFramebuffer(t.FRAMEBUFFER,this._lastRT?this._lastRT._frameBuffer:null),i._currentActive=this._lastRT),this._readyed=!0,t.viewport(0,0,this._lastWidth,this._lastHeight),x.a.width=this._lastWidth,x.a.height=this._lastHeight,m.a.activeShader=null}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=p.a.instance;r.clearColor(t,e,i,n);var a=r.COLOR_BUFFER_BIT;switch(this._depthStencilFormat){case r.DEPTH_COMPONENT16:a|=r.DEPTH_BUFFER_BIT;break;case r.STENCIL_INDEX8:a|=r.STENCIL_BUFFER_BIT;break;case r.DEPTH_STENCIL:a|=r.DEPTH_BUFFER_BIT,a|=r.STENCIL_BUFFER_BIT}r.clear(a)}},{key:"getData",value:function(t,e,i,n){if(k.a.Render.isConchApp&&2==window.conchConfig.threadMode)throw"native 2 thread mode use getDataAsync";var r=p.a.instance;if(r.bindFramebuffer(r.FRAMEBUFFER,this._frameBuffer),!(r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE))return r.bindFramebuffer(r.FRAMEBUFFER,null),null;var a=new Uint8Array(this._width*this._height*4),s=this._getGLFormat();return r.readPixels(t,e,i,n,s,r.UNSIGNED_BYTE,a),r.bindFramebuffer(r.FRAMEBUFFER,null),a}},{key:"getDataAsync",value:function(t,e,i,n,r){var a=p.a.instance;a.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer),a.readPixelsAsync(t,e,i,n,a.RGBA,a.UNSIGNED_BYTE,(function(t){r(new Uint8Array(t))})),a.bindFramebuffer(a.FRAMEBUFFER,null)}},{key:"recycle",value:function(){}},{key:"_disposeResource",value:function(){if(this._frameBuffer){var t=p.a.instance;t.deleteTexture(this._glTexture),t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthStencilBuffer),this._glTexture=null,this._frameBuffer=null,this._depthStencilBuffer=null,this._setGPUMemory(0)}}},{key:"depthStencilFormat",get:function(){return this._depthStencilFormat}},{key:"defaulteTexture",get:function(){return v.a.grayTexture}},{key:"sourceWidth",get:function(){return this._width}},{key:"sourceHeight",get:function(){return this._height}},{key:"offsetX",get:function(){return 0}},{key:"offsetY",get:function(){return 0}}],[{key:"pushRT",value:function(){i.rtStack.push({rt:i._currentActive,w:x.a.width,h:x.a.height})}},{key:"popRT",value:function(){var t=p.a.instance,e=i.rtStack.pop();e&&(i._currentActive!=e.rt&&(p.a.instance.bindFramebuffer(t.FRAMEBUFFER,e.rt?e.rt._frameBuffer:null),i._currentActive=e.rt),t.viewport(0,0,e.w,e.h),x.a.width=e.w,x.a.height=e.h)}},{key:"currentActive",get:function(){return i._currentActive}}]),i}(y.a);C.rtStack=[],C.defuv=[0,0,1,0,1,1,0,1],C.flipyuv=[0,1,1,1,1,0,0,0]},function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i(39),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(5),f=i(185),_=i(157),d=i(40),v=i(34),p=i(0),y=function(){function t(){h()(this,t)}return u()(t,null,[{key:"__init__",value:function(){var e=p.a.Browser.window,i=!!(e.AudioContext||e.webkitAudioContext||e.mozAudioContext);return i&&_.a.initWebAudio(),t._soundClass=i?_.a:f.a,f.a._initMusicAudio(),t._musicClass=f.a,i}},{key:"addChannel",value:function(e){var i;s()(i=t._channels).call(i,e)>=0||t._channels.push(e)}},{key:"removeChannel",value:function(e){var i;for(i=t._channels.length-1;i>=0;i--){var n;if(t._channels[i]==e)r()(n=t._channels).call(n,i,1)}}},{key:"disposeSoundLater",value:function(e){t._lastSoundUsedTimeDic[e]=p.a.Browser.now(),t._isCheckingDispose||(t._isCheckingDispose=!0,p.a.timer.loop(5e3,null,t._checkDisposeSound))}},{key:"_checkDisposeSound",value:function(){var e,i=p.a.Browser.now(),n=!1;for(e in t._lastSoundUsedTimeDic)i-t._lastSoundUsedTimeDic[e]>3e4?(delete t._lastSoundUsedTimeDic[e],t.disposeSoundIfNotUsed(e)):n=!0;n||(t._isCheckingDispose=!1,p.a.timer.clear(null,t._checkDisposeSound))}},{key:"disposeSoundIfNotUsed",value:function(e){var i;for(i=t._channels.length-1;i>=0;i--)if(t._channels[i].url==e)return;t.destroySound(e)}},{key:"_visibilityChange",value:function(){p.a.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()}},{key:"_stageOnBlur",value:function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),p.a.stage.once(c.a.MOUSE_DOWN,null,t._stageOnFocus)}},{key:"_recoverWebAudio",value:function(){_.a.ctx&&"running"!=_.a.ctx.state&&_.a.ctx.resume&&_.a.ctx.resume()}},{key:"_stageOnFocus",value:function(){t._isActive=!0,t._recoverWebAudio(),p.a.stage.off(c.a.MOUSE_DOWN,null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume())}},{key:"playSound",value:function(e){var i,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!t._isActive||!e)return null;if(t._muted)return null;if(t._recoverWebAudio(),(e=d.a.formatURL(e))==t._bgMusic){if(t._musicMuted)return null}else{if(p.a.Render.isConchApp){var h=v.a.getFileExtension(e);if("wav"!=h&&"ogg"!=h)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}return p.a.Browser.onBDMiniGame||p.a.Browser.onMiniGame||p.a.Browser.onKGMiniGame||p.a.Browser.onQGMiniGame||p.a.Browser.onVVMiniGame||p.a.Browser.onAlipayMiniGame||p.a.Browser.onQQMiniGame||p.a.Browser.onBLMiniGame||(i=p.a.loader.getRes(e)),s||(s=t._soundClass),i||((i=new s).load(e),p.a.Browser.onBDMiniGame||p.a.Browser.onMiniGame||p.a.Browser.onKGMiniGame||p.a.Browser.onQGMiniGame||p.a.Browser.onVVMiniGame||p.a.Browser.onAlipayMiniGame||p.a.Browser.onQQMiniGame||p.a.Browser.onBLMiniGame||p.a.Loader.cacheRes(e,i)),(n=i.play(o,r))?(n.url=e,n.volume=e==t._bgMusic?t.musicVolume:t.soundVolume,n.completeHandler=a,n):null}},{key:"destroySound",value:function(t){var e=p.a.loader.getRes(t);e&&(p.a.Loader.clearRes(t),e.dispose())}},{key:"playMusic",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e=d.a.formatURL(e),t._bgMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,n,t._musicClass,r)}},{key:"stopSound",value:function(e){var i,n;for(e=d.a.formatURL(e),i=t._channels.length-1;i>=0;i--)(n=t._channels[i]).url==e&&n.stop()}},{key:"stopAll",value:function(){var e;for(t._bgMusic=null,e=t._channels.length-1;e>=0;e--)t._channels[e].stop()}},{key:"stopAllSound",value:function(){var e,i;for(e=t._channels.length-1;e>=0;e--)(i=t._channels[e]).url!=t._bgMusic&&i.stop()}},{key:"stopMusic",value:function(){t._musicChannel&&t._musicChannel.stop(),t._bgMusic=null}},{key:"setSoundVolume",value:function(e){var i,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)r=d.a.formatURL(r),t._setVolume(r,e);else for(t.soundVolume=e,i=t._channels.length-1;i>=0;i--)(n=t._channels[i]).url!=t._bgMusic&&(n.volume=e)}},{key:"setMusicVolume",value:function(e){t.musicVolume=e,t._setVolume(t._bgMusic,e)}},{key:"_setVolume",value:function(e,i){var n,r;for(e=d.a.formatURL(e),n=t._channels.length-1;n>=0;n--)(r=t._channels[n]).url==e&&(r.volume=i)}},{key:"autoStopMusic",set:function(e){p.a.stage.off(c.a.BLUR,null,t._stageOnBlur),p.a.stage.off(c.a.FOCUS,null,t._stageOnFocus),p.a.stage.off(c.a.VISIBILITY_CHANGE,null,t._visibilityChange),t._autoStopMusic=e,e&&(p.a.stage.on(c.a.BLUR,null,t._stageOnBlur),p.a.stage.on(c.a.FOCUS,null,t._stageOnFocus),p.a.stage.on(c.a.VISIBILITY_CHANGE,null,t._visibilityChange))},get:function(){return t._autoStopMusic}},{key:"muted",set:function(e){e!=t._muted&&(e&&t.stopAllSound(),t.musicMuted=e,t._muted=e)},get:function(){return t._muted}},{key:"soundMuted",set:function(e){t._soundMuted=e},get:function(){return t._soundMuted}},{key:"musicMuted",set:function(e){e!=t._musicMuted&&(e?(t._bgMusic&&t._musicChannel&&!t._musicChannel.isStopped?p.a.Render.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!0):t._musicChannel.pause():t._musicChannel=null,t._musicMuted=e):(t._musicMuted=e,t._bgMusic&&t._musicChannel&&(p.a.Render.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!1):t._musicChannel.resume())))},get:function(){return t._musicMuted}},{key:"useAudioMusic",get:function(){return t._useAudioMusic},set:function(e){t._useAudioMusic=e,t._musicClass=e?f.a:null}}]),t}();y.musicVolume=1,y.soundVolume=1,y.playbackRate=1,y._useAudioMusic=!0,y._muted=!1,y._soundMuted=!1,y._musicMuted=!1,y._bgMusic=null,y._musicChannel=null,y._channels=[],y._blurPaused=!1,y._isActive=!0,y._lastSoundUsedTimeDic={},y._isCheckingDispose=!1,y.autoReleaseSound=!0},function(t,e,i){var n=i(83);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return A}));var n=i(3),r=i.n(n),a=i(67),s=i.n(a),o=i(11),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(43),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(0),T=i(22),b=function(){function t(){u()(this,t),this._strsToID={},this._idToStrs=[],this._length=0}return f()(t,[{key:"add",value:function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)}},{key:"getID",value:function(t){var e=this._strsToID[t];return null==e?-1:e}},{key:"getName",value:function(t){var e=this._idToStrs[t];return null==e?void 0:e}}]),t}(),C=i(17),w=i(106),S=i(16);function E(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var A=function(t){p()(i,t);var e=E(i);function i(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(u()(this,i),(r=e.call(this))._attribInfo=null,r.customCompile=!1,r._curActTexIndex=0,r.tag={},r._program=null,r._params=null,r._paramsMap={},!t||!n)throw"Shader Error";return r._attribInfo=o,r._id=++i._count,r._vs=t,r._ps=n,r._nameMap=s||{},null!=a&&(i.sharders[a]=d()(r)),r.recreateResource(),r.lock=!0,r}return f()(i,[{key:"recreateResource",value:function(){this._compile(),this._setGPUMemory(0)}},{key:"_disposeResource",value:function(){C.a.mainContext.deleteShader(this._vshader),C.a.mainContext.deleteShader(this._pshader),C.a.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this._setGPUMemory(0),this._curActTexIndex=0}},{key:"_compile",value:function(){if(this._vs&&this._ps&&!this._params){var t;this._reCompile=!0,this._params=[],this.customCompile&&(t=k.a.ShaderCompile.preGetParams(this._vs,this._ps));var e,n,r,a=C.a.mainContext;this._program=a.createProgram(),this._vshader=i._createShader(a,this._vs,a.VERTEX_SHADER),this._pshader=i._createShader(a,this._ps,a.FRAGMENT_SHADER),a.attachShader(this._program,this._vshader),a.attachShader(this._program,this._pshader);var s=this._attribInfo?this._attribInfo.length:0;for(n=0;n<s;n+=2)a.bindAttribLocation(this._program,this._attribInfo[n+1],this._attribInfo[n]);if(a.linkProgram(this._program),!this.customCompile&&!a.getProgramParameter(this._program,a.LINK_STATUS))throw a.getProgramInfoLog(this._program);var o=this.customCompile?t.uniforms.length:a.getProgramParameter(this._program,a.ACTIVE_UNIFORMS);for(n=0;n<o;n++){var l,u=this.customCompile?t.uniforms[n]:a.getActiveUniform(this._program,n);e={vartype:"uniform",glfun:null,ivartype:1,location:a.getUniformLocation(this._program,u.name),name:u.name,type:u.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},h()(l=e.name).call(l,"[0]")>0&&(e.name=e.name.substr(0,e.name.length-3),e.isArray=!0,e.location=a.getUniformLocation(this._program,e.name)),this._params.push(e)}for(n=0,r=this._params.length;n<r;n++)switch((e=this._params[n]).indexOfParams=n,e.index=1,e.value=[e.location,null],e.codename=e.name,e.name=this._nameMap[e.codename]?this._nameMap[e.codename]:e.codename,this._paramsMap[e.name]=e,e._this=this,e.uploadedValue=[],e.type){case a.INT:e.fun=e.isArray?this._uniform1iv:this._uniform1i;break;case a.FLOAT:e.fun=e.isArray?this._uniform1fv:this._uniform1f;break;case a.FLOAT_VEC2:e.fun=e.isArray?this._uniform_vec2v:this._uniform_vec2;break;case a.FLOAT_VEC3:e.fun=e.isArray?this._uniform_vec3v:this._uniform_vec3;break;case a.FLOAT_VEC4:e.fun=e.isArray?this._uniform_vec4v:this._uniform_vec4;break;case a.SAMPLER_2D:e.fun=this._uniform_sampler2D;break;case a.SAMPLER_CUBE:e.fun=this._uniform_samplerCube;break;case a.FLOAT_MAT4:e.glfun=a.uniformMatrix4fv,e.fun=this._uniformMatrix4fv;break;case a.BOOL:e.fun=this._uniform1i;break;case a.FLOAT_MAT2:case a.FLOAT_MAT3:default:throw new Error("compile shader err!")}}}},{key:"getUniform",value:function(t){return this._paramsMap[t]}},{key:"_uniform1f",value:function(t,e){var i=t.uploadedValue;return i[0]!==e?(C.a.mainContext.uniform1f(t.location,i[0]=e),1):0}},{key:"_uniform1fv",value:function(t,e){if(e.length<4){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(C.a.mainContext.uniform1fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return C.a.mainContext.uniform1fv(t.location,e),1}},{key:"_uniform_vec2",value:function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(C.a.mainContext.uniform2f(t.location,i[0]=e[0],i[1]=e[1]),1):0}},{key:"_uniform_vec2v",value:function(t,e){if(e.length<2){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(C.a.mainContext.uniform2fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return C.a.mainContext.uniform2fv(t.location,e),1}},{key:"_uniform_vec3",value:function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(C.a.mainContext.uniform3f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0}},{key:"_uniform_vec3v",value:function(t,e){return C.a.mainContext.uniform3fv(t.location,e),1}},{key:"_uniform_vec4",value:function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(C.a.mainContext.uniform4f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0}},{key:"_uniform_vec4v",value:function(t,e){return C.a.mainContext.uniform4fv(t.location,e),1}},{key:"_uniformMatrix2fv",value:function(t,e){return C.a.mainContext.uniformMatrix2fv(t.location,!1,e),1}},{key:"_uniformMatrix3fv",value:function(t,e){return C.a.mainContext.uniformMatrix3fv(t.location,!1,e),1}},{key:"_uniformMatrix4fv",value:function(t,e){return C.a.mainContext.uniformMatrix4fv(t.location,!1,e),1}},{key:"_uniform1i",value:function(t,e){var i=t.uploadedValue;return i[0]!==e?(C.a.mainContext.uniform1i(t.location,i[0]=e),1):0}},{key:"_uniform1iv",value:function(t,e){return C.a.mainContext.uniform1iv(t.location,e),1}},{key:"_uniform_ivec2",value:function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(C.a.mainContext.uniform2i(t.location,i[0]=e[0],i[1]=e[1]),1):0}},{key:"_uniform_ivec2v",value:function(t,e){return C.a.mainContext.uniform2iv(t.location,e),1}},{key:"_uniform_vec3i",value:function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(C.a.mainContext.uniform3i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0}},{key:"_uniform_vec3vi",value:function(t,e){return C.a.mainContext.uniform3iv(t.location,e),1}},{key:"_uniform_vec4i",value:function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(C.a.mainContext.uniform4i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0}},{key:"_uniform_vec4vi",value:function(t,e){return C.a.mainContext.uniform4iv(t.location,e),1}},{key:"_uniform_sampler2D",value:function(t,e){var i=C.a.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),C.a.activeTexture(i,i.TEXTURE0+this._curActTexIndex),C.a.bindTexture(i,i.TEXTURE_2D,e),this._curActTexIndex++,1):(C.a.activeTexture(i,i.TEXTURE0+n[0]),C.a.bindTexture(i,i.TEXTURE_2D,e),0)}},{key:"_uniform_samplerCube",value:function(t,e){var i=C.a.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),C.a.activeTexture(i,i.TEXTURE0+this._curActTexIndex),C.a.bindTexture(i,i.TEXTURE_CUBE_MAP,e),this._curActTexIndex++,1):(C.a.activeTexture(i,i.TEXTURE0+n[0]),C.a.bindTexture(i,i.TEXTURE_CUBE_MAP,e),0)}},{key:"_noSetValue",value:function(t){console.log("no....:"+t.name)}},{key:"uploadOne",value:function(t,e){C.a.useProgram(C.a.mainContext,this._program);var i=this._paramsMap[t];i.fun.call(this,i,e)}},{key:"uploadTexture2D",value:function(t){var e=C.a;e._activeTextures[0]!==t&&(e.bindTexture(C.a.mainContext,S.a.instance.TEXTURE_2D,t),e._activeTextures[0]=t)}},{key:"upload",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;w.a.activeShader=w.a.bindShader=this;var i=C.a.mainContext;C.a.useProgram(i,this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;for(var n,r,a=e.length,s=0,o=0;o<a;o++)null!==(r=t[(n=e[o]).name])&&(s+=n.fun.call(this,n,r));T.a.shaderCall+=s}},{key:"uploadArray",value:function(t,e,i){w.a.activeShader=this,w.a.bindShader=this,C.a.useProgram(C.a.mainContext,this._program);this._params;for(var n,r,a=0,o=e-2;o>=0;o-=2){var h;if(r=this._paramsMap[t[o]])if(null!=(n=t[o+1]))i&&i[r.name]&&s()(h=i[r.name]).call(h),a+=r.fun.call(this,r,n)}T.a.shaderCall+=a}},{key:"getParams",value:function(){return this._params}},{key:"setAttributesLocation",value:function(t){this._attribInfo=t}}],[{key:"getShader",value:function(t){return i.sharders[t]}},{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new i(t,e,n,r,a)}},{key:"withCompile",value:function(t,e,n,r){if(n&&i.sharders[n])return i.sharders[n];var a=i._preCompileShader[i.SHADERNAME2ID*t];if(!a)throw new Error("withCompile shader err!"+t);return a.createShader(e,n,r,null)}},{key:"withCompile2D",value:function(t,e,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(r&&i.sharders[r])return i.sharders[r];var o=i._preCompileShader[i.SHADERNAME2ID*t+e];if(!o)throw new Error("withCompile shader err!"+t+" "+e);return o.createShader(n,r,a,s)}},{key:"addInclude",value:function(t,e){k.a.ShaderCompile.addInclude(t,e)}},{key:"preCompile",value:function(t,e,n,r){var a=i.SHADERNAME2ID*t;i._preCompileShader[a]=new k.a.ShaderCompile(e,n,r)}},{key:"preCompile2D",value:function(t,e,n,r,a){var s=i.SHADERNAME2ID*t+e;i._preCompileShader[s]=new k.a.ShaderCompile(n,r,a)}},{key:"_createShader",value:function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)}}]),i}(w.a);A._count=0,A._preCompileShader={},A.SHADERNAME2ID=2e-4,A.nameKey=new b,A.sharders=new Array(32)},function(t,e,i){"use strict";i.d(e,"a",(function(){return X}));var n=i(3),r=i.n(n),a=i(38),s=i.n(a),o=i(39),h=i.n(o),l=i(11),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(43),p=i.n(v),y=i(7),g=i.n(y),m=i(6),x=i.n(m),k=i(8),T=i.n(k),b=i(2),C=i.n(b),w=i(163),S=i(33),E=i(44),A=i(5),M=i(21),R=i(0),I=i(225),D=i(249),P=i(312),L=i(66),B=i(19),O=i(34);function F(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=C()(t);if(e){var a=C()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return T()(this,i)}}var N=function(t){x()(i,t);var e=F(i);function i(){var t;return f()(this,i),(t=e.call(this))._completeHandler=new B.a(p()(t),t.onOneLoadComplete),t.reset(),t}return d()(i,[{key:"reset",value:function(){this._toLoadList=[],this._isLoading=!1,this.totalCount=0}},{key:"load",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t instanceof Array)for(i=t.length,e=0;e<i;e++)this._addToLoadList(t[e],n);else this._addToLoadList(t,n);r&&this._checkNext()}},{key:"_addToLoadList",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u()(e=this._toLoadList).call(e,t)>=0||M.a.getRes(t)||(i?this._toLoadList.push({url:t}):this._toLoadList.push(t),this.totalCount++)}},{key:"_checkNext",value:function(){if(!this._isLoading){if(0==this._toLoadList.length)return void this.event(A.a.COMPLETE);var t;"string"==typeof(t=this._toLoadList.pop())?this.loadOne(t):this.loadOne(t.url,!0)}}},{key:"loadOne",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._curUrl=t;var n=O.a.getFileExtension(this._curUrl);e?R.a.loader.create(t,this._completeHandler):i.LoadableExtensions[n]?R.a.loader.load(t,this._completeHandler,null,i.LoadableExtensions[n]):t!=I.a.getFileLoadPath(t)||i.No3dLoadTypes[n]||!D.a.createMap[n]?R.a.loader.load(t,this._completeHandler):R.a.loader.create(t,this._completeHandler)}},{key:"onOneLoadComplete",value:function(){this._isLoading=!1,M.a.getRes(this._curUrl)||console.log("Fail to load:",this._curUrl);var t,e=O.a.getFileExtension(this._curUrl);i.LoadableExtensions[e]&&((t=M.a.getRes(this._curUrl))&&t instanceof P.a&&(t=t.json),t&&(t.loadList&&this.load(t.loadList,!1,!1),t.loadList3D&&this.load(t.loadList3D,!0,!1)));"sk"==e&&this.load(this._curUrl.replace(".sk",".png"),!1,!1),this.event(A.a.PROGRESS,this.getProgress()),this._checkNext()}},{key:"getProgress",value:function(){return this.loadedCount/this.totalCount}},{key:"leftCount",get:function(){return this._isLoading?this._toLoadList.length+1:this._toLoadList.length}},{key:"loadedCount",get:function(){return this.totalCount-this.leftCount}}]),i}(L.a);N.LoadableExtensions={scene:M.a.JSON,scene3d:M.a.JSON,ani:M.a.JSON,ui:M.a.JSON,prefab:M.a.PREFAB},N.No3dLoadTypes={png:!0,jpg:!0,txt:!0};var U=i(98),G=i(168),Y=i(10),W=i(40);function V(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=C()(t);if(e){var a=C()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return T()(this,i)}}var X=function(t){x()(i,t);var e=V(i);function i(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return f()(this,i),(t=e.call(this)).autoDestroyAtClosed=!1,t.url=null,t._viewCreated=!1,t._$componentType="Scene",t._setBit(S.a.NOT_READY,!0),i.unDestroyedScenes.push(p()(t)),t._scene=p()(t),n&&t.createChildren(),t}return d()(i,[{key:"createChildren",value:function(){}},{key:"loadScene",value:function(t){var e=u()(t).call(t,".")>-1?t:t+".scene",i=R.a.loader.getRes(e);if(i)this.createView(i);else{R.a.loader.resetProgress();var n=new N;n.on(A.a.COMPLETE,this,this._onSceneLoaded,[e]),n.load(e)}}},{key:"_onSceneLoaded",value:function(t){this.createView(R.a.Loader.getRes(t))}},{key:"createView",value:function(t){t&&!this._viewCreated&&(this._viewCreated=!0,G.a.createByData(this,t))}},{key:"getNodeByID",value:function(t){return this._idMap?this._idMap[t]:null}},{key:"open",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&i.closeAll(),i.root.addChild(this),this.onOpened(e)}},{key:"onOpened",value:function(t){}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.onClosed(t),this.autoDestroyAtClosed?this.destroy():this.removeSelf()}},{key:"onClosed",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._idMap=null,g()(C()(i.prototype),"destroy",this).call(this,t);for(var e=i.unDestroyedScenes,n=e.length-1;n>-1;n--)if(e[n]===this)return void h()(e).call(e,n,1)}},{key:"_sizeChanged",value:function(){this.event(A.a.RESIZE)}},{key:"scaleX",set:function(t){g()(C()(i.prototype),"get_scaleX",this).call(this)!=t&&(g()(C()(i.prototype),"set_scaleX",this).call(this,t),this.event(A.a.RESIZE))},get:function(){return g()(C()(i.prototype),"scaleX",this)}},{key:"scaleY",set:function(t){g()(C()(i.prototype),"get_scaleY",this).call(this)!=t&&(g()(C()(i.prototype),"set_scaleY",this).call(this,t),this.event(A.a.RESIZE))},get:function(){return g()(C()(i.prototype),"scaleY",this)}},{key:"width",get:function(){if(this._width)return this._width;for(var t=0,e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._x+i.width*i.scaleX,t))}return t},set:function(t){g()(C()(i.prototype),"get_width",this).call(this)!=t&&(g()(C()(i.prototype),"set_width",this).call(this,t),this.callLater(this._sizeChanged))}},{key:"height",get:function(){if(this._height)return this._height;for(var t=0,e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._y+i.height*i.scaleY,t))}return t},set:function(t){g()(C()(i.prototype),"get_height",this).call(this)!=t&&(g()(C()(i.prototype),"set_height",this).call(this,t),this.callLater(this._sizeChanged))}},{key:"timer",get:function(){return this._timer||R.a.timer},set:function(t){this._timer=t}}],[{key:"setUIMap",value:function(t){var e=R.a.loader.getRes(t);if(!e)throw"请提前加载uimap的json，再使用该接口设置！";for(var i in e)R.a.Loader.loadedMap[W.a.formatURL(i+".scene")]=e[i]}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;R.a.loader.resetProgress();var r=new N;function a(t){i._loadPage&&i._loadPage.event("progress",t),n&&n.runWith(t)}function s(){r.off(A.a.PROGRESS,null,a);var n=R.a.Loader.getRes(t);if(!n)throw"Can not find scene:"+t;if(!n.props)throw"Scene data is error:"+t;var s=n.props.runtime?n.props.runtime:n.type,o=R.a.ClassUtils.getClass(s);if("instance"==n.props.renderType)var h=o.instance||(o.instance=new o);else h=new o;if(!(h&&h instanceof w.a))throw"Can not find scene:"+s;h.url=t,h._getBit(S.a.NOT_READY)?(h.on("onViewCreated",null,(function(){e&&e.runWith(h)})),h.createView(n)):e&&e.runWith(h),i.hideLoadingPage()}r.on(A.a.PROGRESS,null,a),r.once(A.a.COMPLETE,null,s),r.load(t)}},{key:"open",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n instanceof B.a){var s=r;r=n,n=s}i.showLoadingPage(),i.load(t,B.a.create(null,this._onSceneLoaded,[e,r,n]),a)}},{key:"_onSceneLoaded",value:function(t,e,i,n){n.open(t,i),e&&e.runWith(n)}},{key:"close",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1,r=i.unDestroyedScenes,a=0,s=r.length;a<s;a++){var o=r[a];o&&o.parent&&o.url===t&&o.name==e&&(o.close(),n=!0)}return n}},{key:"closeAll",value:function(){for(var t=i.root,e=0,n=t.numChildren;e<n;e++){var r=t.getChildAt(0);r instanceof i?r.close():r.removeSelf()}}},{key:"destroy",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=!1,a=s()(e=[]).call(e,i.unDestroyedScenes),o=0,h=a.length;o<h;o++){var l=a[o];l.url!==t||l.name!=n||l.destroyed||(l.destroy(),r=!0)}return r}},{key:"gc",value:function(){U.a.destroyUnusedResources()}},{key:"setLoadingPage",value:function(t){i._loadPage!=t&&(i._loadPage=t)}},{key:"showLoadingPage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;i._loadPage&&(R.a.systemTimer.clear(null,i._showLoading),R.a.systemTimer.clear(null,i._hideLoading),R.a.systemTimer.once(e,null,i._showLoading,[t],!1))}},{key:"_showLoading",value:function(t){R.a.stage.addChild(i._loadPage),i._loadPage.onOpened(t)}},{key:"_hideLoading",value:function(){i._loadPage.close()}},{key:"hideLoadingPage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;i._loadPage&&(R.a.systemTimer.clear(null,i._showLoading),R.a.systemTimer.clear(null,i._hideLoading),R.a.systemTimer.once(t,null,i._hideLoading))}},{key:"root",get:function(){return i._root||(i._root=R.a.stage.addChild(new E.a),i._root.name="root",R.a.stage.on("resize",null,(function(){i._root.size(R.a.stage.width,R.a.stage.height),i._root.event(A.a.RESIZE)})),i._root.size(R.a.stage.width,R.a.stage.height),i._root.event(A.a.RESIZE)),i._root}}]),i}(E.a);X.unDestroyedScenes=[],R.a.regClass(X),Y.a.regClass("laya.display.Scene",X),Y.a.regClass("Laya.Scene",X)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(178),h=function(){function t(){r()(this,t),this._ref=1,this._key=new o.a}return s()(t,[{key:"renderSubmit",value:function(){return this.fun.apply(this._this,this.args),1}},{key:"getRenderType",value:function(){return 0}},{key:"releaseRender",value:function(){if(--this._ref<1){var e=t.POOL;e[e._length++]=this}}}],[{key:"create",value:function(e,i,n){var r=t.POOL._length?t.POOL[--t.POOL._length]:new t;return r.fun=i,r.args=e,r._this=n,r._ref=1,r._key.clear(),r}}]),t}();h.POOL=[],h.POOL._length=0},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.touchScrollEnable=!0,a.mouseWheelEnable=!0,a.showButtons=!0,a.popupBgColor="#000000",a.popupBgAlpha=.5,a.closeDialogOnSide=!0,window.UIConfig=a},function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(43),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(222),x=i(57),k=i(107),T=i(0),b=i(12);function C(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var w=function(t){d()(i,t);var e=C(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s()(this,i),(t=e.call(this))._source=n?b.a.createElement("canvas"):u()(t),t.lock=!0,t}return h()(i,[{key:"_getSource",value:function(){return this._source}},{key:"clear",value:function(){this._ctx&&(this._ctx.clear?this._ctx.clear():this._ctx.clearRect(0,0,this._width,this._height)),this._texture&&(this._texture.destroy(),this._texture=null)}},{key:"destroy",value:function(){f()(g()(i.prototype),"destroy",this).call(this),this._setCPUMemory(0),this._ctx&&this._ctx.destroy&&this._ctx.destroy(),this._ctx=null}},{key:"release",value:function(){}},{key:"_setContext",value:function(t){this._ctx=t}},{key:"getContext",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.context}},{key:"getMemSize",value:function(){return 0}},{key:"size",value:function(t,e){(this._width!=t||this._height!=e||this._source&&(this._source.width!=t||this._source.height!=e))&&(this._width=t,this._height=e,this._setCPUMemory(t*e*4),this._ctx&&this._ctx.size&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t),this._texture&&(this._texture.destroy(),this._texture=null))}},{key:"getTexture",value:function(){if(!this._texture){var t=new k.a;t.loadImageSource(this.source),this._texture=new x.a(t)}return this._texture}},{key:"toBase64",value:function(t,e){if(this._source){if(T.a.Render.isConchApp){var i=window;if(2==i.conchConfig.threadMode)throw"native 2 thread mode use toBase64Async";var n=this._ctx._targets.sourceWidth,r=this._ctx._targets.sourceHeight,a=this._ctx._targets.getData(0,0,n,r);return i.conchToBase64FlipY?i.conchToBase64FlipY(t,e,a.buffer,n,r):i.conchToBase64(t,e,a.buffer,n,r)}return this._source.toDataURL(t,e)}return null}},{key:"toBase64Async",value:function(t,e,i){var n=this._ctx._targets.sourceWidth,r=this._ctx._targets.sourceHeight;this._ctx._targets.getDataAsync(0,0,n,r,(function(a){var s=window,o=s.conchToBase64FlipY?s.conchToBase64FlipY(t,e,a.buffer,n,r):s.conchToBase64(t,e,a.buffer,n,r);i(o)}))}},{key:"source",get:function(){return this._source}},{key:"context",get:function(){return this._ctx||(this._source==this?this._ctx=new T.a.Context:this._ctx=this._source.getContext(T.a.Render.isConchApp?"layagl":"2d"),this._ctx._canvas=this),this._ctx}}]),i}(m.a)},,,,,function(t,e,i){"use strict";i.d(e,"a",(function(){return _}));var n=i(252),r=i.n(n),a=i(82),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(187),f=i(0),_=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];h()(this,t),this.scale=1,this.currTimer=s()(),this.currFrame=0,this._delta=0,this._lastTimer=s()(),this._map=[],this._handlers=[],this._temp=[],this._count=0,e&&t.gSysTimer&&t.gSysTimer.frameLoop(1,this,this._update)}return u()(t,[{key:"_update",value:function(){if(this.scale<=0)return this._lastTimer=s()(),void(this._delta=0);var t=this.currFrame=this.currFrame+this.scale,e=s()(),i=e-this._lastTimer>3e4;this._delta=(e-this._lastTimer)*this.scale;var n=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var a=this._handlers;this._count=0;for(var o=0,h=a.length;o<h;o++){var l=a[o];if(null!==l.method){var u=l.userFrame?t:n;if(u>=l.exeTime)if(r()(l))if(!l.jumpFrame||i)l.exeTime+=l.delay,l.run(!1),u>l.exeTime&&(l.exeTime+=Math.ceil((u-l.exeTime)/l.delay)*l.delay);else for(;u>=l.exeTime;)l.exeTime+=l.delay,l.run(!1);else l.run(!0)}else this._count++}(this._count>30||t%200==0)&&this._clearHandlers()}},{key:"_clearHandlers",value:function(){for(var t=this._handlers,e=0,i=t.length;e<i;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,t.length=0,this._temp=t}},{key:"_recoverHandler",value:function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e)}},{key:"_create",value:function(e,i,n,r,a,o,h){if(!n)return a.apply(r,o),null;if(h){var l=this._getHandler(r,a);if(l)return l.repeat=i,l.userFrame=e,l.delay=n,l.caller=r,l.method=a,l.args=o,l.exeTime=n+(e?this.currFrame:this.currTimer+s()()-this._lastTimer),l}return(l=t._pool.length>0?t._pool.pop():new d).repeat=i,l.userFrame=e,l.delay=n,l.caller=r,l.method=a,l.args=o,l.exeTime=n+(e?this.currFrame:this.currTimer+s()()-this._lastTimer),this._indexHandler(l),this._handlers.push(l),l}},{key:"_indexHandler",value:function(e){var i=e.caller,n=e.method,r=i?i.$_GID||(i.$_GID=f.a.Utils.getGID()):0,a=n.$_TID||(n.$_TID=1e5*t._mid++);e.key=r+a,this._map[e.key]=e}},{key:"once",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this._create(!1,!1,t,e,i,n,r)}},{key:"loop",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=this._create(!1,!0,t,e,i,n,r);s&&(s.jumpFrame=a)}},{key:"frameOnce",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this._create(!0,!1,t,e,i,n,r)}},{key:"frameLoop",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this._create(!0,!0,t,e,i,n,r)}},{key:"toString",value:function(){return" handlers:"+this._handlers.length+" pool:"+t._pool.length}},{key:"clear",value:function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())}},{key:"clearAll",value:function(t){if(t)for(var e=0,i=this._handlers.length;e<i;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}}},{key:"_getHandler",value:function(e,i){var n=e?e.$_GID||(e.$_GID=f.a.Utils.getGID()):0,r=i.$_TID||(i.$_TID=1e5*t._mid++);return this._map[n+r]}},{key:"callLater",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c.a.I.callLater(t,e,i)}},{key:"runCallLater",value:function(t,e){c.a.I.runCallLater(t,e)}},{key:"runTimer",value:function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))}},{key:"pause",value:function(){this.scale=0}},{key:"resume",value:function(){this.scale=1}},{key:"delta",get:function(){return this._delta}}]),t}();_.gSysTimer=null,_._pool=[],_._mid=1;var d=function(){function t(){h()(this,t)}return u()(t,[{key:"clear",value:function(){this.caller=null,this.method=null,this.args=null}},{key:"run",value:function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))}}]),t}()},function(t,e,i){var n=i(104);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(34),h=i(0),l=function(){function t(){r()(this,t),this._obj={},t._maps.push(this)}return s()(t,[{key:"set",value:function(e,i){null!=e&&(t.supportWeakMap||("string"==typeof e||"number"==typeof e?this._obj[e]=i:(e.$_GID||(e.$_GID=o.a.getGID()),this._obj[e.$_GID]=i)))}},{key:"get",value:function(e){return null==e?null:t.supportWeakMap?void 0:"string"==typeof e||"number"==typeof e?this._obj[e]:this._obj[e.$_GID]}},{key:"del",value:function(e){null!=e&&(t.supportWeakMap||("string"==typeof e||"number"==typeof e?delete this._obj[e]:delete this._obj[this._obj.$_GID]))}},{key:"has",value:function(e){return null!=e&&(t.supportWeakMap?void 0:"string"==typeof e||"number"==typeof e?null!=this._obj[e]:null!=this._obj[this._obj.$_GID])}}],[{key:"__init__",value:function(){t.I=new t,t.supportWeakMap||h.a.systemTimer.loop(t.delInterval,null,t.clearCache)}},{key:"clearCache",value:function(){for(var e=0,i=t._maps.length;e<i;e++){t._maps[e]._obj={}}}}]),t}();l.supportWeakMap=!1,l.delInterval=6e5,l._maps=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i(15),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(36),u=i(17),c=function(){function t(){s()(this,t)}return h()(t,null,[{key:"_uint8ArraySlice",value:function(){for(var t=this.length,e=new Uint8Array(this.length),i=0;i<t;i++)e[i]=this[i];return e}},{key:"_float32ArraySlice",value:function(){for(var t=this.length,e=new Float32Array(this.length),i=0;i<t;i++)e[i]=this[i];return e}},{key:"_uint16ArraySlice",value:function(){var t,e,i,n=this;if(0===arguments.length)for(t=n.length,e=new Uint16Array(t),i=0;i<t;i++)e[i]=n[i];else if(2===arguments.length){var r=arguments.length<=0?void 0:arguments[0],a=arguments.length<=1?void 0:arguments[1];if(a>r)for(t=a-r,e=new Uint16Array(t),i=r;i<a;i++)e[i-r]=n[i];else e=new Uint16Array(0)}return e}},{key:"_nativeRender_enable",value:function(){}},{key:"enable",value:function(){return!0}},{key:"inner_enable",value:function(){return r()(Float32Array.prototype)||(Float32Array.prototype.slice=t._float32ArraySlice),r()(Uint16Array.prototype)||(Uint16Array.prototype.slice=t._uint16ArraySlice),r()(Uint8Array.prototype)||(Uint8Array.prototype.slice=t._uint8ArraySlice),!0}},{key:"onStageResize",value:function(t,e){null!=u.a.mainContext&&(u.a.mainContext.viewport(0,0,t,e),l.a.width=t,l.a.height=e)}}]),t}();c._isWebGL2=!1,c.isNativeRender_enable=!1},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_);function v(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var p=function(t){u()(i,t);var e=v(i);function i(){var t;return s()(this,i),(t=e.call(this,i.const_stride,4,4)).canReuse=!0,t.setAttributes(i._fixattriInfo),i._fixib?(t._ib=i._fixib,t._quadNum=i._maxIB):(t.createQuadIB(i._maxIB),i._fixib=t._ib),t}return h()(i,[{key:"releaseMesh",value:function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,i._POOL.push(this)}},{key:"destroy",value:function(){this._vb.destroy(),this._vb.deleteBuffer()}},{key:"addQuad",value:function(t,e,n,r){var a=this._vb,s=a._byteLength>>2;a.setByteLength(s+i.const_stride<<2);var o=a._floatArray32||a.getFloat32Array(),h=a._uint32Array,l=s,u=r?255:0;o[l++]=t[0],o[l++]=t[1],o[l++]=e[0],o[l++]=e[1],h[l++]=n,h[l++]=u,o[l++]=t[2],o[l++]=t[3],o[l++]=e[2],o[l++]=e[3],h[l++]=n,h[l++]=u,o[l++]=t[4],o[l++]=t[5],o[l++]=e[4],o[l++]=e[5],h[l++]=n,h[l++]=u,o[l++]=t[6],o[l++]=t[7],o[l++]=e[6],o[l++]=e[7],h[l++]=n,h[l++]=u,a._upload=!0}}],[{key:"__int__",value:function(){i._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}},{key:"getAMesh",value:function(t){var e=null;return e=i._POOL.length?i._POOL.pop():new i,t&&e._vb._resizeBuffer(65536*i.const_stride,!1),e}}]),i}(i(182).a);p.const_stride=24,p._maxIB=16384,p._POOL=[]},,function(t,e,i){var n=i(118),r=i(398),a=i(131),s=i(279),o=Object.defineProperty;e.f=n?o:function(t,e,i){if(a(t),e=s(e,!0),a(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){t.exports=i(648)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1),r=i.n(n),a=function t(){r()(this,t)};a.BYTES_PE=4,a.BYTES_PIDX=2,a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],a._TMPARRAY=[],a._OFFSETX=0,a._OFFSETY=0},function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i(449),r=i.n(n),a=i(15),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(18),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;h()(this,t),this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,e?(this._u8d_=new Uint8Array(e),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this._resizeBuffer(this._allocated_)}return u()(t,[{key:"_resizeBuffer",value:function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(e){throw"Invalid typed array length:"+t}}},{key:"getString",value:function(){return this.readString()}},{key:"readString",value:function(){return this._rUTF(this.getUint16())}},{key:"getFloat32Array",value:function(t,e){return this.readFloat32Array(t,e)}},{key:"readFloat32Array",value:function(t,e){var i,n=t+e;n=n>this._length?this._length:n;var r=new Float32Array(s()(i=this._d_.buffer).call(i,t,n));return this._pos_=n,r}},{key:"getUint8Array",value:function(t,e){return this.readUint8Array(t,e)}},{key:"readUint8Array",value:function(t,e){var i,n=t+e;n=n>this._length?this._length:n;var r=new Uint8Array(s()(i=this._d_.buffer).call(i,t,n));return this._pos_=n,r}},{key:"getInt16Array",value:function(t,e){return this.readInt16Array(t,e)}},{key:"readInt16Array",value:function(t,e){var i,n=t+e;n=n>this._length?this._length:n;var r=new Int16Array(s()(i=this._d_.buffer).call(i,t,n));return this._pos_=n,r}},{key:"getFloat32",value:function(){return this.readFloat32()}},{key:"readFloat32",value:function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t}},{key:"getFloat64",value:function(){return this.readFloat64()}},{key:"readFloat64",value:function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t}},{key:"writeFloat32",value:function(t){this._ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4}},{key:"writeFloat64",value:function(t){this._ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8}},{key:"getInt32",value:function(){return this.readInt32()}},{key:"readInt32",value:function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t}},{key:"getUint32",value:function(){return this.readUint32()}},{key:"readUint32",value:function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t}},{key:"writeInt32",value:function(t){this._ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4}},{key:"writeUint32",value:function(t){this._ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4}},{key:"getInt16",value:function(){return this.readInt16()}},{key:"readInt16",value:function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t}},{key:"getUint16",value:function(){return this.readUint16()}},{key:"readUint16",value:function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t}},{key:"writeUint16",value:function(t){this._ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2}},{key:"writeInt16",value:function(t){this._ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2}},{key:"getUint8",value:function(){return this.readUint8()}},{key:"readUint8",value:function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._u8d_[this._pos_++]}},{key:"writeUint8",value:function(t){this._ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++}},{key:"_getUInt8",value:function(t){return this._readUInt8(t)}},{key:"_readUInt8",value:function(t){return this._d_.getUint8(t)}},{key:"_getUint16",value:function(t){return this._readUint16(t)}},{key:"_readUint16",value:function(t){return this._d_.getUint16(t,this._xd_)}},{key:"_getMatrix",value:function(){return this._readMatrix()}},{key:"_readMatrix",value:function(){return new c.a(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())}},{key:"_rUTF",value:function(t){var e,i,n=this._pos_+t,r=String.fromCharCode,a=this._u8d_,s=[],o=0;for(s.length=1e3;this._pos_<n;){if((e=a[this._pos_++])<128)0!=e&&(s[o++]=r(e));else if(e<224)s[o++]=r((63&e)<<6|127&a[this._pos_++]);else if(e<240)i=a[this._pos_++],s[o++]=r((31&e)<<12|(127&i)<<6|127&a[this._pos_++]);else{var h=(15&e)<<18|(127&(i=a[this._pos_++]))<<12|(127&a[this._pos_++])<<6|127&a[this._pos_++];if(h>=65536){var l=h-65536,u=55296|l>>10,c=56320|1023&l;s[o++]=r(u),s[o++]=r(c)}else s[o++]=r(h)}0}return s.length=o,s.join("")}},{key:"getCustomString",value:function(t){return this.readCustomString(t)}},{key:"readCustomString",value:function(t){for(var e,i="",n=0,r=String.fromCharCode,a=this._u8d_;t>0;)if((e=a[this._pos_])<128)i+=r(e),this._pos_++,t--;else for(n=e-128,this._pos_++,t-=n;n>0;)e=a[this._pos_++],i+=r(a[this._pos_++]<<8|e),n--;return i}},{key:"clear",value:function(){this._pos_=0,this.length=0}},{key:"__getBuffer",value:function(){return this._d_.buffer}},{key:"writeUTFBytes",value:function(t){for(var e=0,i=(t+="").length;e<i;e++){var n=t.charCodeAt(e);if(n<=127)this.writeByte(n);else if(n<=2047)this._ensureWrite(this._pos_+2),this._u8d_.set([192|n>>6,128|63&n],this._pos_),this._pos_+=2;else if(n>=55296&&n<=56319){e++;var a=t.charCodeAt(e);if(!r()(a)&&a>=56320&&a<=57343){var s=64+(1023&n),o=1023&a,h=240|s>>8&63,l=128|s>>2&63,u=128|(3&s)<<4|o>>6&15,c=128|63&o;this._ensureWrite(this._pos_+4),this._u8d_.set([h,l,u,c],this._pos_),this._pos_+=4}}else n<=65535?(this._ensureWrite(this._pos_+3),this._u8d_.set([224|n>>12,128|n>>6&63,128|63&n],this._pos_),this._pos_+=3):(this._ensureWrite(this._pos_+4),this._u8d_.set([240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n],this._pos_),this._pos_+=4)}}},{key:"writeUTFString",value:function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var i=this.pos-e-2;this._d_.setUint16(e,i,this._xd_)}},{key:"readUTFString",value:function(){return this.readUTFBytes(this.getUint16())}},{key:"getUTFString",value:function(){return this.readUTFString()}},{key:"readUTFBytes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(0===t)return"";var e=this.bytesAvailable;if(t>e)throw"readUTFBytes error - Out of bounds";return t=t>0?t:e,this._rUTF(t)}},{key:"getUTFBytes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.readUTFBytes(t)}},{key:"writeByte",value:function(t){this._ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1}},{key:"readByte",value:function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)}},{key:"getByte",value:function(){return this.readByte()}},{key:"_ensureWrite",value:function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)}},{key:"writeArrayBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e<0||i<0)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this._ensureWrite(this._pos_+i);var n=new Uint8Array(t);this._u8d_.set(n.subarray(e,e+i),this._pos_),this._pos_+=i}},{key:"readArrayBuffer",value:function(t){var e,i;return i=s()(e=this._u8d_.buffer).call(e,this._pos_,this._pos_+t),this._pos_=this._pos_+t,i}},{key:"buffer",get:function(){var t=this._d_.buffer;return t.byteLength===this._length?t:s()(t).call(t,0,this._length)}},{key:"endian",get:function(){return this._xd_?t.LITTLE_ENDIAN:t.BIG_ENDIAN},set:function(e){this._xd_=e===t.LITTLE_ENDIAN}},{key:"length",set:function(t){this._allocated_<t?this._resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this._resizeBuffer(this._allocated_=t),this._length=t},get:function(){return this._length}},{key:"pos",get:function(){return this._pos_},set:function(t){this._pos_=t}},{key:"bytesAvailable",get:function(){return this._length-this._pos_}}],[{key:"getSystemEndian",value:function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?t.LITTLE_ENDIAN:t.BIG_ENDIAN}return t._sysEndian}}]),t}();f.BIG_ENDIAN="bigEndian",f.LITTLE_ENDIAN="littleEndian",f._sysEndian=null},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(16),h=function(){function t(){r()(this,t),this._byteLength=0,this._glBuffer=o.a.instance.createBuffer()}return s()(t,[{key:"_bindForVAO",value:function(){}},{key:"bind",value:function(){return!1}},{key:"destroy",value:function(){this._glBuffer&&(o.a.instance.deleteBuffer(this._glBuffer),this._glBuffer=null)}},{key:"bufferUsage",get:function(){return this._bufferUsage}}]),t}()},function(t,e,i){var n=i(216);t.exports=function(t){return Object(n(t))}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return F}));var n=i(3),r=i.n(n),a=i(37),s=i.n(a),o=i(39),h=i.n(o),l=i(11),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(35),p=i.n(v),y=i(7),g=i.n(y),m=i(6),x=i.n(m),k=i(8),T=i.n(k),b=i(2),C=i.n(b),w=i(54),S=i(179),E=i(181),A=i(73),M=i(5),R=i(42),I=i(32),D=i(168),P=i(72),L=i(0),B=i(10);function O(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=C()(t);if(e){var a=C()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return T()(this,i)}}var F=function(t){x()(i,t);var e=O(i);function i(){var t;return f()(this,i),(t=e.apply(this,arguments)).selectEnable=!1,t.totalPage=0,t._$componentType="List",t._repeatX=0,t._repeatY=0,t._repeatX2=0,t._repeatY2=0,t._spaceX=0,t._spaceY=0,t._cells=[],t._startIndex=0,t._selectedIndex=-1,t._page=0,t._isVertical=!0,t._cellSize=20,t._cellOffset=0,t._createdLine=0,t._offset=new R.a,t._usedCache=null,t._elasticEnabled=!1,t._preLen=0,t}return d()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),g()(C()(i.prototype),"destroy",this).call(this,t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null}},{key:"createChildren",value:function(){this.addChild(this._content=new w.a)}},{key:"onScrollStart",value:function(){this._usedCache||(this._usedCache=g()(C()(i.prototype),"cacheAs",this)),p()(C()(i.prototype),"cacheAs","none",this,!0),this._scrollBar.once(M.a.END,this,this.onScrollEnd)}},{key:"onScrollEnd",value:function(){p()(C()(i.prototype),"cacheAs",this._usedCache,this,!0)}},{key:"_removePreScrollBar",value:function(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)}},{key:"changeCells",value:function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),e=t.width+this._spaceX||1,i=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i));var n=this._width?this._width:e*this.repeatX-this._spaceX,r=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:e,this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-r-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX,this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=r:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=n),this.setContentSize(n,r);var a=this._isVertical?this.repeatX:this.repeatY,s=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,a,s),this._createdLine=s,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}}},{key:"_getOneCell",value:function(){if(0===this._cells.length){var t=this.createItem();if(this._offset.setTo(t._x,t._y),this.cacheContent)return t;this._cells.push(t)}return this._cells[0]}},{key:"_createItems",value:function(t,e,i){var n=this._content,r=this._getOneCell(),a=r.width+this._spaceX,s=r.height+this._spaceY;if(this.cacheContent){var o=new w.a;o.cacheAs="normal",o.pos((this._isVertical?0:t)*a,(this._isVertical?t:0)*s),this._content.addChild(o),n=o}else{for(var h=[],l=this._cells.length-1;l>-1;l--){var u=this._cells[l];u.removeSelf(),h.push(u)}this._cells.length=0}for(var c=t;c<i;c++)for(var f=0;f<e;f++)(r=h&&h.length?h.pop():this.createItem()).x=(this._isVertical?f:c)*a-n._x,r.y=(this._isVertical?c:f)*s-n._y,r.name="item"+(c*e+f),n.addChild(r),this.addCell(r)}},{key:"createItem",value:function(){var t=[];if("function"==typeof this._itemRender)var e=new this._itemRender;else e=D.a.createComp(this._itemRender,null,null,t);if(0==t.length&&e._watchMap){var i=e._watchMap;for(var n in i)for(var r=i[n],a=0;a<r.length;a++){var s=r[a];t.push(s.comp,s.prop,s.value)}}return t.length&&(e._$bindData=t),e}},{key:"addCell",value:function(t){t.on(M.a.CLICK,this,this.onCellMouse),t.on(M.a.RIGHT_CLICK,this,this.onCellMouse),t.on(M.a.MOUSE_OVER,this,this.onCellMouse),t.on(M.a.MOUSE_OUT,this,this.onCellMouse),t.on(M.a.MOUSE_DOWN,this,this.onCellMouse),t.on(M.a.MOUSE_UP,this,this.onCellMouse),this._cells.push(t)}},{key:"_afterInited",value:function(){this.initItems()}},{key:"initItems",value:function(){if(!this._itemRender&&null!=this.getChildByName("item0")){var t;this.repeatX=1,t=0;for(var e=0;e<1e4;e++){var i=this.getChildByName("item"+e);if(!i)break;this.addCell(i),t++}this.repeatY=t}}},{key:"setContentSize",value:function(t,e){this._content.width=t,this._content.height=e,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content._style.scrollRect||(this._content.scrollRect=I.a.create()),this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,t,e),this._content.scrollRect=this._content.scrollRect),this.event(M.a.RESIZE)}},{key:"onCellMouse",value:function(t){var e;t.type===M.a.MOUSE_DOWN&&(this._isMoved=!1);var i=t.currentTarget,n=this._startIndex+u()(e=this._cells).call(e,i);n<0||(t.type===M.a.CLICK||t.type===M.a.RIGHT_CLICK?this.selectEnable&&!this._isMoved?this.selectedIndex=n:this.changeCellState(i,!0,0):t.type!==M.a.MOUSE_OVER&&t.type!==M.a.MOUSE_OUT||this._selectedIndex===n||this.changeCellState(i,t.type===M.a.MOUSE_OVER,0),this.mouseHandler&&this.mouseHandler.runWith([t,n]))}},{key:"changeCellState",value:function(t,e,i){var n=t.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=e,n.index=i)}},{key:"_sizeChanged",value:function(){g()(C()(i.prototype),"_sizeChanged",this).call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)}},{key:"onScrollBarChange",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runCallLater(this.changeCells);var t=this._scrollBar.value,e=this._isVertical?this.repeatX:this.repeatY,i=this._isVertical?this.repeatY:this.repeatX,n=Math.floor(t/this._cellSize);if(this.cacheContent)a=i+1,this._createdLine-n<a&&(this._createItems(this._createdLine,e,this._createdLine+a),this.renderItems(this._createdLine*e,0),this._createdLine+=a);else{var r=n*e,a=0;if(r>this._startIndex){a=r-this._startIndex;var s=!0,o=this._startIndex+e*(i+1);this._isMoved=!0}else r<this._startIndex&&(a=this._startIndex-r,s=!1,o=this._startIndex-1,this._isMoved=!0);for(var h=0;h<a;h++){if(s){var l=this._cells.shift();this._cells[this._cells.length]=l;var u=o+h}else l=this._cells.pop(),this._cells.unshift(l),u=o-h;var c=Math.floor(u/e)*this._cellSize;this._isVertical?l.y=c:l.x=c,this.renderItem(l,u)}this._startIndex=r,this.changeSelectStatus()}var f=this._content._style.scrollRect;this._isVertical?(f.y=t-this._offset.y,f.x=-this._offset.x):(f.y=-this._offset.y,f.x=t-this._offset.x),this._content.scrollRect=f}},{key:"posCell",value:function(t,e){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e/i)*this._cellSize);this._isVertical?t._y=n:t.x=n}}},{key:"changeSelectStatus",value:function(){for(var t=0,e=this._cells.length;t<e;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)}},{key:"renderItems",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t,n=e||this._cells.length;i<n;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()}},{key:"renderItem",value:function(t,e){this._array&&e>=0&&e<this._array.length?(t.visible=!0,t._$bindData?(t._dataSource=this._array[e],this._bindData(t,this._array[e])):t.dataSource=this._array[e],this.cacheContent||this.posCell(t,e),this.hasListener(M.a.RENDER)&&this.event(M.a.RENDER,[t,e]),this.renderHandler&&this.renderHandler.runWith([t,e])):(t.visible=!1,t.dataSource=null)}},{key:"_bindData",value:function(t,e){for(var i=t._$bindData,n=0,r=i.length;n<r;n++){var a=i[n++],s=i[n++],o=i[n],h=A.a.getBindFun(o);a[s]=h.call(this,e)}}},{key:"updateArray",value:function(t){var e;if(this._array=t,this._array&&((e=this._preLen-this._startIndex)>=0&&this.renderItems(e),this._preLen=this._array.length),this._scrollBar){var i=t.length,n=this._isVertical?this.repeatX:this.repeatY,r=this._isVertical?this.repeatY:this.repeatX,a=Math.ceil(i/n);a>=r&&(this._scrollBar.thumbPercent=r/a,this._scrollBar.slider._max=(a-r)*this._cellSize+this._cellOffset)}}},{key:"refresh",value:function(){this.array=this._array}},{key:"getItem",value:function(t){return t>-1&&t<this._array.length?this._array[t]:null}},{key:"changeItem",value:function(t,e){t>-1&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))}},{key:"setItem",value:function(t,e){this.changeItem(t,e)}},{key:"addItem",value:function(t){this._array.push(t),this.array=this._array}},{key:"addItemAt",value:function(t,e){var i;h()(i=this._array).call(i,e,0,t),this.array=this._array}},{key:"deleteItem",value:function(t){var e;h()(e=this._array).call(e,t,1),this.array=this._array}},{key:"getCell",value:function(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null}},{key:"scrollTo",value:function(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t}},{key:"tweenTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._scrollBar){this._scrollBar.stopScroll();var n=this._isVertical?this.repeatX:this.repeatY;P.a.to(this._scrollBar,{value:Math.floor(t/n)*this._cellSize},e,null,i,0,!0)}else this.startIndex=t,i&&i.run()}},{key:"_setCellChanged",value:function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))}},{key:"commitMeasure",value:function(){this.runCallLater(this.changeCells)}},{key:"cacheAs",set:function(t){p()(C()(i.prototype),"cacheAs",t,this,!0),this._scrollBar&&(this._usedCache=null,"none"!==t?this._scrollBar.on(M.a.START,this,this.onScrollStart):this._scrollBar.off(M.a.START,this,this.onScrollStart))},get:function(){return g()(C()(i.prototype),"cacheAs",this)}},{key:"content",get:function(){return this._content}},{key:"vScrollBarSkin",get:function(){return this._scrollBar?this._scrollBar.skin:null},set:function(t){this._removePreScrollBar();var e=new S.a;e.name="scrollBar",e.right=0,e.skin=t,e.elasticDistance=this._elasticEnabled?200:0,this.scrollBar=e,this.addChild(e),this._setCellChanged()}},{key:"hScrollBarSkin",get:function(){return this._scrollBar?this._scrollBar.skin:null},set:function(t){this._removePreScrollBar();var e=new E.a;e.name="scrollBar",e.bottom=0,e.skin=t,e.elasticDistance=this._elasticEnabled?200:0,this.scrollBar=e,this.addChild(e),this._setCellChanged()}},{key:"scrollBar",get:function(){return this._scrollBar},set:function(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on(M.a.CHANGE,this,this.onScrollBarChange)))}},{key:"itemRender",get:function(){return this._itemRender},set:function(t){if(this._itemRender!=t){this._itemRender=t;for(var e=this._cells.length-1;e>-1;e--)this._cells[e].destroy();this._cells.length=0,this._setCellChanged()}}},{key:"width",set:function(t){t!=this._width&&(p()(C()(i.prototype),"width",t,this,!0),this._setCellChanged())},get:function(){return g()(C()(i.prototype),"width",this)}},{key:"height",set:function(t){t!=this._height&&(p()(C()(i.prototype),"height",t,this,!0),this._setCellChanged())},get:function(){return g()(C()(i.prototype),"height",this)}},{key:"repeatX",get:function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},set:function(t){this._repeatX=t,this._setCellChanged()}},{key:"repeatY",get:function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},set:function(t){this._repeatY=t,this._setCellChanged()}},{key:"spaceX",get:function(){return this._spaceX},set:function(t){this._spaceX=t,this._setCellChanged()}},{key:"spaceY",get:function(){return this._spaceY},set:function(t){this._spaceY=t,this._setCellChanged()}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event(M.a.CHANGE),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}},{key:"selectedItem",get:function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},set:function(t){var e;this.selectedIndex=u()(e=this._array).call(e,t)}},{key:"selection",get:function(){return this.getCell(this._selectedIndex)},set:function(t){var e;this.selectedIndex=this._startIndex+u()(e=this._cells).call(e,t)}},{key:"startIndex",get:function(){return this._startIndex},set:function(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}},{key:"array",get:function(){return this._array},set:function(t){this.runCallLater(this.changeCells),this._array=t||[],this._preLen=this._array.length;var e=this._array.length;if(this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,r=Math.ceil(e/i);(this._cellOffset>0?this.totalPage+1:this.totalPage)>1&&r>=n?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n/r,this._scrollBar.setScroll(0,(r-n)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}},{key:"page",get:function(){return this._page},set:function(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}},{key:"length",get:function(){return this._array?this._array.length:0}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.selectedIndex=s()(t):t instanceof Array?this.array=t:p()(C()(i.prototype),"dataSource",t,this,!0)},get:function(){return g()(C()(i.prototype),"dataSource",this)}},{key:"cells",get:function(){return this.runCallLater(this.changeCells),this._cells}},{key:"elasticEnabled",get:function(){return this._elasticEnabled},set:function(t){this._elasticEnabled=t,this._scrollBar&&(this._scrollBar.elasticDistance=t?200:0)}}]),i}(w.a);L.a.regClass(F),B.a.regClass("laya.ui.List",F),B.a.regClass("Laya.List",F)},function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var n=i(39),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(5),u=i(11),c=i.n(u),f=i(12),_=i(13),d=i(0),v=function(){function t(){s()(this,t),this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._event=new l.a,this._lastClickTime=0}return h()(t,[{key:"_clearTempArrs",value:function(){t._oldArr.length=0,t._newArr.length=0,t._tEleArr.length=0}},{key:"getTouchFromArr",value:function(t,e){var i,n,r;for(n=e.length,i=0;i<n;i++)if((r=e[i]).id==t)return r;return null}},{key:"removeTouchFromArr",value:function(t,e){var i;for(i=e.length-1;i>=0;i--)e[i].id==t&&r()(e).call(e,i,1)}},{key:"createTouchO",value:function(t,e){var i;return(i=_.a.getItem("TouchData")||{}).id=e,i.tar=t,i}},{key:"onMouseDown",value:function(e,i){var n,r,a,s,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.enable&&(n=this.getTouchFromArr(i,this.preOvers),a=this.getEles(e,null,t._tEleArr),n?n.tar=e:(r=this.createTouchO(e,i),this.preOvers.push(r)),f.a.onMobile&&this.sendEvents(a,l.a.MOUSE_OVER),s=o?this.preDowns:this.preRightDowns,(n=this.getTouchFromArr(i,s))?n.tar=e:(r=this.createTouchO(e,i),s.push(r)),this.sendEvents(a,o?l.a.MOUSE_DOWN:l.a.RIGHT_MOUSE_DOWN),this._clearTempArrs())}},{key:"sendEvents",value:function(t,e){var i,n,r;for(n=t.length,this._event._stoped=!1,r=t[0],i=0;i<n;i++){var a=t[i];if(a.destroyed)return;if(a.event(e,this._event.setTo(e,a,r)),this._event._stoped)break}}},{key:"getEles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i}},{key:"checkMouseOutAndOverOfMove",value:function(e,i){var n,a,s,o;arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i!=e)if(i.contains(e))a=this.getEles(e,i,t._tEleArr),this.sendEvents(a,l.a.MOUSE_OVER);else if(e.contains(i))a=this.getEles(i,e,t._tEleArr),this.sendEvents(a,l.a.MOUSE_OUT);else{var h,u,f;for((a=t._tEleArr).length=0,h=this.getEles(i,null,t._oldArr),u=this.getEles(e,null,t._newArr),o=h.length,s=0;s<o;s++){if(n=h[s],(f=c()(u).call(u,n))>=0){r()(u).call(u,f,u.length-f);break}a.push(n)}a.length>0&&this.sendEvents(a,l.a.MOUSE_OUT),u.length>0&&this.sendEvents(u,l.a.MOUSE_OVER)}}},{key:"onMouseMove",value:function(e,i){var n,r;this.enable&&((n=this.getTouchFromArr(i,this.preOvers))?(this.checkMouseOutAndOverOfMove(e,n.tar),n.tar=e,r=this.getEles(e,null,t._tEleArr)):(r=this.getEles(e,null,t._tEleArr),this.sendEvents(r,l.a.MOUSE_OVER),this.preOvers.push(this.createTouchO(e,i))),this.sendEvents(r,l.a.MOUSE_MOVE),this._clearTempArrs())}},{key:"getLastOvers",value:function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(d.a.stage),t._tEleArr)}},{key:"stageMouseOut",value:function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,l.a.MOUSE_OUT)}},{key:"onMouseUp",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.enable){var r,a,s,o,h,u,d,v,p=f.a.onMobile;if(a=this.getEles(e,null,t._tEleArr),this.sendEvents(a,n?l.a.MOUSE_UP:l.a.RIGHT_MOUSE_UP),v=n?this.preDowns:this.preRightDowns,r=this.getTouchFromArr(i,v)){var y,g=f.a.now();if(y=g-this._lastClickTime<300,this._lastClickTime=g,e==r.tar)d=a;else for(s=this.getEles(r.tar,null,t._oldArr),(d=t._newArr).length=0,h=s.length,o=0;o<h;o++)u=s[o],c()(a).call(a,u)>=0&&d.push(u);d.length>0&&this.sendEvents(d,n?l.a.CLICK:l.a.RIGHT_CLICK),n&&y&&this.sendEvents(d,l.a.DOUBLE_CLICK),this.removeTouchFromArr(i,v),r.tar=null,_.a.recover("TouchData",r)}else;(r=this.getTouchFromArr(i,this.preOvers))&&p&&((d=this.getEles(r.tar,null,d))&&d.length>0&&this.sendEvents(d,l.a.MOUSE_OUT),this.removeTouchFromArr(i,this.preOvers),r.tar=null,_.a.recover("TouchData",r)),this._clearTempArrs()}}}]),t}();v.I=new v,v._oldArr=[],v._newArr=[],v._tEleArr=[];var p=i(103),y=i(42),g=i(32),m=function(){function t(){s()(this,t),this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._event=new l.a,this._captureSp=null,this._captureChain=[],this._captureExlusiveMode=!1,this._hitCaputreSp=!1,this._point=new y.a,this._rect=new g.a,this._lastMoveTimer=0,this._prePoint=new y.a,this._touchIDs={},this._curTouchID=NaN,this._id=1}return h()(t,[{key:"__init__",value:function(e,i){this._stage=e;var n=this;i.oncontextmenu=function(e){if(t.enabled)return!1},i.addEventListener("mousedown",(function(e){t.enabled&&(f.a.onIE||e.cancelable&&e.preventDefault(),n.mouseDownTime=f.a.now(),n.runEvent(e))})),i.addEventListener("mouseup",(function(e){t.enabled&&(e.cancelable&&e.preventDefault(),n.mouseDownTime=-f.a.now(),n.runEvent(e))}),!0),i.addEventListener("mousemove",(function(e){if(t.enabled){e.cancelable&&e.preventDefault();var i=f.a.now();if(i-n._lastMoveTimer<10)return;n._lastMoveTimer=i,n.runEvent(e)}}),!0),i.addEventListener("mouseout",(function(e){t.enabled&&n.runEvent(e)})),i.addEventListener("mouseover",(function(e){t.enabled&&n.runEvent(e)})),i.addEventListener("touchstart",(function(e){t.enabled&&(t._isFirstTouch||p.a.isInputting||e.cancelable&&e.preventDefault(),n.mouseDownTime=f.a.now(),n.runEvent(e))})),i.addEventListener("touchend",(function(e){t.enabled?(t._isFirstTouch||p.a.isInputting||e.cancelable&&e.preventDefault(),t._isFirstTouch=!1,n.mouseDownTime=-f.a.now(),n.runEvent(e)):n._curTouchID=NaN}),!0),i.addEventListener("touchmove",(function(e){t.enabled&&(e.cancelable&&e.preventDefault(),n.runEvent(e))}),!0),i.addEventListener("touchcancel",(function(e){t.enabled?(e.cancelable&&e.preventDefault(),n.runEvent(e)):n._curTouchID=NaN}),!0),i.addEventListener("mousewheel",(function(e){t.enabled&&n.runEvent(e)})),i.addEventListener("DOMMouseScroll",(function(e){t.enabled&&n.runEvent(e)}))}},{key:"initEvent",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;n._event._stoped=!1,n._event.nativeEvent=i||t,n._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform&&(this._stage._canvasTransform.invertTransformPoint(this._point),n.mouseX=this._point.x,n.mouseY=this._point.y),n._event.touchId=t.identifier||0,this._tTouchID=n._event.touchId,(e=v.I._event)._stoped=!1,e.nativeEvent=n._event.nativeEvent,e.touchId=n._event.touchId}},{key:"checkMouseWheel",value:function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=v.I.getLastOvers(),i=0,n=e.length;i<n;i++){var r=e[i];r.event(l.a.MOUSE_WHEEL,this._event.setTo(l.a.MOUSE_WHEEL,r,this._target))}}},{key:"onMouseMove",value:function(t){v.I.onMouseMove(t,this._tTouchID)}},{key:"onMouseDown",value:function(t){if(p.a.isInputting&&d.a.stage.focus&&d.a.stage.focus.focus&&!d.a.stage.focus.contains(this._target)){var e=d.a.stage.focus._tf||d.a.stage.focus,i=t._tf||t;i instanceof p.a&&i.multiline==e.multiline?e._focusOut():e.focus=!1}v.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)}},{key:"onMouseUp",value:function(t){v.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)}},{key:"check",value:function(t,e,i,n){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var r=t._style.scrollRect;if(r&&(this._rect.setTo(r.x,r.y,r.width,r.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var a=t._children.length-1;a>-1;a--){var s=t._children[a];if(!s.destroyed&&s._mouseState>1&&s._visible&&this.check(s,e,i,n))return!0}for(a=t._extUIChild.length-1;a>=0;a--){var o=t._extUIChild[a];if(!o.destroyed&&o._mouseState>1&&o._visible&&this.check(o,e,i,n))return!0}}var h=!(!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent)||this.hitTest(t,e,i);return h?(this._target=t,n.call(this,t),this._target==this._hitCaputreSp&&(this._hitCaputreSp=!0)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),h}},{key:"hitTest",value:function(t,e,i){var n=!1;t.scrollRect&&(e-=t._style.scrollRect.x,i-=t._style.scrollRect.y);var r=t._style.hitArea;return r&&r._hit?r.contains(e,i):((t.width>0&&t.height>0||t.mouseThrough||r)&&(n=t.mouseThrough?t.getGraphicBounds().contains(e,i):(r||this._rect.setTo(0,0,t.width,t.height)).contains(e,i)),n)}},{key:"_checkAllBaseUI",value:function(t,e,i){var n=this.handleExclusiveCapture(this.mouseX,this.mouseY,i);return!!n||(n=this.check(this._stage,this.mouseX,this.mouseY,i),this.handleCapture(this.mouseX,this.mouseY,i)||n)}},{key:"check3DUI",value:function(t,e,i){for(var n=this._stage._3dUI,r=0,a=!1;r<n.length;r++){var s=n[r];this._stage._curUIBase=s,!s.destroyed&&s._mouseState>1&&s._visible&&(a=a||this.check(s,this.mouseX,this.mouseY,i))}return this._stage._curUIBase=this._stage,a}},{key:"handleExclusiveCapture",value:function(t,e,i){if(this._captureExlusiveMode&&this._captureSp&&this._captureChain.length>0){var n;this._point.setTo(t,e);for(var r=0;r<this._captureChain.length;r++)(n=this._captureChain[r]).fromParentPoint(this._point);return this._target=n,i.call(this,n),!0}return!1}},{key:"handleCapture",value:function(t,e,i){if(!this._hitCaputreSp&&this._captureSp&&this._captureChain.length>0){var n;this._point.setTo(t,e);for(var r=0;r<this._captureChain.length;r++)(n=this._captureChain[r]).fromParentPoint(this._point);return this._target=n,i.call(this,n),!0}return!1}},{key:"runEvent",value:function(e){var i,n,r;switch("mousemove"!==e.type&&(this._prePoint.x=this._prePoint.y=-1e6),e.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(this._isLeftMouse=0===e.button,this.initEvent(e),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===e.button,this.initEvent(e),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-e.clientX)+Math.abs(this._prePoint.y-e.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=e.clientX,this._prePoint.y=e.clientY,this.initEvent(e),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,this._isLeftMouse=!0;var a=e.changedTouches;for(i=0,n=a.length;i<n;i++)r=a[i],(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=r.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[r.identifier]=this._id++,this.initEvent(r,e),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":t._isTouchRespond=!0,this._isLeftMouse=!0;var s=e.changedTouches;for(i=0,n=s.length;i<n;i++){if(r=s[i],t.multiTouchEnabled||r.identifier==this._curTouchID)this._curTouchID=NaN,this.initEvent(r,e),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var o=e.changedTouches;for(i=0,n=o.length;i<n;i++)r=o[i],(t.multiTouchEnabled||r.identifier==this._curTouchID)&&(this.initEvent(r,e),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(e);break;case"mouseout":v.I.stageMouseOut();break;case"mouseover":this._stage.event(l.a.MOUSE_OVER,this._event.setTo(l.a.MOUSE_OVER,this._stage,this._stage))}}},{key:"setCapture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._captureSp=t,this._captureExlusiveMode=e,this._captureChain.length=0,this._captureChain.push(t);for(var i=t;;){var n;if(i==d.a.stage)break;if(i==d.a.stage._curUIBase)break;if(!(i=i.parent))break;r()(n=this._captureChain).call(n,0,0,i)}}},{key:"releaseCapture",value:function(){console.log("release capture"),this._captureSp=null}}]),t}();m.instance=new m,m.enabled=!0,m.multiTouchEnabled=!0,m._isFirstTouch=!0},function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var n=i(3),r=i.n(n),a=i(77),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(110),x=i(57),k=i(34),T=i(10),b=i(0);function C(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var w=function(t){d()(i,t);var e=C(i);function i(){var t;return h()(this,i),(t=e.apply(this,arguments)).autoCacheCmd=!0,t._width=0,t._height=0,t.uv=null,t}return u()(i,[{key:"destroy",value:function(){f()(g()(i.prototype),"destroy",this).call(this),this._source=null,this._sizeGrid=null,this._offset=null}},{key:"_setChanged",value:function(){this._isChanged||(this._isChanged=!0,b.a.timer.callLater(this,this.changeSource))}},{key:"changeSource",value:function(){this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var e=this.width,i=this.height,n=this._sizeGrid,r=t.sourceWidth,a=t.sourceHeight;if(n&&(r!==e||a!==i))return this.clear(),this.draw9Grid(t,0,0,e,i,n),void this._repaint();this.clear(),this.drawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,e,i,null,1,null,null,this.uv),this._repaint()}}},{key:"drawBitmap",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r<.1||a<.1||(!t||e.width==r&&e.height==a?this.drawImage(e,i,n,r,a):this.fillTexture(e,i,n,r,a))}},{key:"sizeGrid",get:function(){return this._sizeGrid},set:function(t){this._sizeGrid=s()(t).call(t,(function(t){return+t})),this._setChanged()}},{key:"width",get:function(){return this._width?this._width:this._source?this._source.sourceWidth:0},set:function(t){this._width!=t&&(this._width=t,this._setChanged())}},{key:"height",get:function(){return this._height?this._height:this._source?this._source.sourceHeight:0},set:function(t){this._height!=t&&(this._height=t,this._setChanged())}},{key:"source",get:function(){return this._source},set:function(t){t?(this._source=t,this._setChanged()):(this._source=null,this.clear())}}],[{key:"getTexture",value:function(t,e,i,n,r){var a;return n<=0&&(n=1),r<=0&&(r=1),t.$_GID||(t.$_GID=k.a.getGID()),a&&a._getSource()||(a=x.a.createFromTexture(t,e,i,n,r)),a}}]),i}(m.a);T.a.regClass("laya.ui.AutoBitmap",w),T.a.regClass("Laya.AutoBitmap",w)},function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var n=i(3),r=i.n(n),a=i(15),s=i.n(a),o=i(38),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(150),x=i(81);function k(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var T=function(t){d()(i,t);var e=k(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u()(this,i),t=e.call(this),n||(n=t._copyMatrix(i.IDENTITY_MATRIX)),t._mat=new Float32Array(16),t._alpha=new Float32Array(4),t.setByMatrix(n),t}return f()(i,[{key:"gray",value:function(){return this.setByMatrix(i.GRAY_MATRIX)}},{key:"color",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.setByMatrix([1,0,0,0,t,0,1,0,0,e,0,0,1,0,i,0,0,0,1,n])}},{key:"setColor",value:function(t){var e=x.a.create(t).arrColor,i=[0,0,0,0,256*e[0],0,0,0,0,256*e[1],0,0,0,0,256*e[2],0,0,0,1,0];return this.setByMatrix(i)}},{key:"setByMatrix",value:function(t){this._matrix!=t&&this._copyMatrix(t);for(var e=0,i=0,n=0;n<20;n++)n%5!=4?this._mat[e++]=t[n]:this._alpha[i++]=t[n];return this}},{key:"adjustColor",value:function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i),this}},{key:"adjustBrightness",value:function(t){return 0==(t=this._clampValue(t,100))||isNaN(t)?this:this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}},{key:"adjustContrast",value:function(t){if(0==(t=this._clampValue(t,100))||isNaN(t))return this;var e,n=(e=t<0?127+t/100*127:127*(e=0==(e=t%1)?i.DELTA_INDEX[t]:i.DELTA_INDEX[t<<0]*(1-e)+i.DELTA_INDEX[1+(t<<0)]*e)+127)/127,r=.5*(127-e);return this._multiplyMatrix([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0,0,0,0,0,1])}},{key:"adjustSaturation",value:function(t){if(0==(t=this._clampValue(t,100))||isNaN(t))return this;var e=1+(t>0?3*t/100:t/100),i=1-e,n=.3086*i,r=.6094*i,a=.082*i;return this._multiplyMatrix([n+e,r,a,0,0,n,r+e,a,0,0,n,r,a+e,0,0,0,0,0,1,0,0,0,0,0,1])}},{key:"adjustHue",value:function(t){if(0==(t=this._clampValue(t,180)/180*Math.PI)||isNaN(t))return this;var e=Math.cos(t),i=Math.sin(t),n=.213,r=.715,a=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,r+e*-r+i*-r,a+e*-a+i*(1-a),0,0,n+e*-n+.143*i,r+e*(1-r)+.14*i,a+e*-a+-.283*i,0,0,n+e*-n+-.787*i,r+e*-r+i*r,a+e*(1-a)+i*a,0,0,0,0,0,1,0,0,0,0,0,1])}},{key:"reset",value:function(){return this.setByMatrix(this._copyMatrix(i.IDENTITY_MATRIX))}},{key:"_multiplyMatrix",value:function(t){var e=[];this._matrix=this._fixMatrix(this._matrix);for(var i=0;i<5;i++){for(var n=0;n<5;n++)e[n]=this._matrix[n+5*i];for(n=0;n<5;n++){for(var r=0,a=0;a<5;a++)r+=t[n+5*a]*e[a];this._matrix[n+5*i]=r}}return this.setByMatrix(this._matrix)}},{key:"_clampValue",value:function(t,e){return Math.min(e,Math.max(-e,t))}},{key:"_fixMatrix",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==n?i.IDENTITY_MATRIX:(n.length<i.LENGTH?n=h()(t=s()(n).call(n,0,n.length)).call(t,s()(e=i.IDENTITY_MATRIX).call(e,n.length,i.LENGTH)):n.length>i.LENGTH&&(n=s()(n).call(n,0,i.LENGTH)),n)}},{key:"_copyMatrix",value:function(t){var e=i.LENGTH;this._matrix||(this._matrix=[]);for(var n=0;n<e;n++)this._matrix[n]=t[n];return this._matrix}},{key:"type",get:function(){return m.a.COLOR}}]),i}(m.a);T.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],T.GRAY_MATRIX=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],T.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],T.LENGTH=25},,function(t,e,i){t.exports=i(596)},function(t,e,i){i(325);var n=i(520),r=i(86),a=i(191),s=i(154),o=i(197),h=i(87)("toStringTag");for(var l in n){var u=r[l],c=u&&u.prototype;c&&a(c)!==h&&s(c,h,l),o[l]=o.Array}},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(18),h=i(42),l=i(32),u=i(116),c=i(204),f=i(68),_=i(49),d=i(60),v=i(123),p=function(){function t(){r()(this,t)}return s()(t,[{key:"type",get:function(){return-1}}]),t}();p.BLUR=16,p.COLOR=32,p.GLOW=8,p._filter=function(t,e,i,n){var r=e,a=this._next;if(a){var s=t.filters,y=s.length;if(1==y&&s[0].type==p.COLOR)return e.save(),e.setColorFilter(s[0]),a._fun.call(a,t,e,i,n),void e.restore();var g,m=d.a.create(_.a.TEXTURE2D,0),x=h.a.TEMP,k=r._curMat,T=o.a.create();k.copyTo(T);var b=0,C=0,w=null,S=t._cacheStyle.filterCache||null;if(S&&0==t.getRepaint()){if((t._cacheStyle.hasGlowFilter||!1)&&(b=50,C=25),(g=t.getBounds()).width<=0||g.height<=0)return;g.width+=b,g.height+=b,x.x=g.x*T.a+g.y*T.c,x.y=g.y*T.d+g.x*T.b,g.x=x.x,g.y=x.y,x.x=g.width*T.a+g.height*T.c,x.y=g.height*T.d+g.width*T.b,g.width=x.x,g.height=x.y}else{t._isHaveGlowFilter()&&(b=50,C=25),(g=new l.a).copyFrom(t.getSelfBounds()),g.x+=t.x,g.y+=t.y,g.x-=t.pivotX+4,g.y-=t.pivotY+4;var E=g.x,A=g.y;if(g.width+=b+8,g.height+=b+8,x.x=g.x*T.a+g.y*T.c,x.y=g.y*T.d+g.x*T.b,g.x=x.x,g.y=x.y,x.x=g.width*T.a+g.height*T.c,x.y=g.height*T.d+g.width*T.b,g.width=x.x,g.height=x.y,g.width<=0||g.height<=0)return;S&&c.a.releaseRT(S),w=c.a.getRT(g.width,g.height);var M=S=c.a.getRT(g.width,g.height);t._getCacheStyle().filterCache=S,r.pushRT(),r.useRT(w);var R=t.x-E+C,I=t.y-A+C;a._fun.call(a,t,e,R,I),r.useRT(M);for(var D=0;D<y;D++){0!=D&&(r.useRT(w),r.drawTarget(M,0,0,g.width,g.height,o.a.TEMP.identity(),m,null,f.a.TOINT.overlay),r.useRT(M));var P=s[D];switch(P.type){case p.BLUR:case p.GLOW:P._glRender&&P._glRender.render(w,e,g.width,g.height,P);break;case p.COLOR:r.setColorFilter(P),r.drawTarget(w,0,0,g.width,g.height,o.a.EMPTY.identity(),d.a.create(_.a.TEXTURE2D,0)),r.setColorFilter(null)}}r.popRT()}if(i=i-C-t.x,n=n-C-t.y,x.setTo(i,n),T.transformPoint(x),i=x.x+g.x,n=x.y+g.y,r._drawRenderTexture(S,i,n,g.width,g.height,o.a.TEMP.identity(),1,u.a.defuv),w){var L=v.a.create([w],(function(t){t.destroy()}),this);w=null,e.addRenderObject(L)}T.destroy()}}},,function(t,e,i){t.exports=i(656)},function(t,e,i){"use strict";i.d(e,"c",(function(){return f})),i.d(e,"a",(function(){return _})),i.d(e,"b",(function(){return d})),i.d(e,"d",(function(){return v}));var n=i(14),r=i.n(n),a=i(320),s=i(26),o=i(317),h=i(69),l=i(44),u=i(19),c={};function f(t,e,i){e=e||30,i=i||0;var n=s.b.getRes(t+".png"),r=s.b.getRes(t+".sk");if(n&&r){var o;c[t]?o=c[t]:((o=new a.a).parseData(n,r,24),c[t]=o);var h=new a.a;return h.parseData(n,r,e),h.buildArmature(i)}}function _(t){var e=new o.a;e.loadAtlas(t+".json"),e.interval=120,e.index=1,e.play();var i=e.getGraphicBounds();return e.pivot(i.width/2,i.height/2),e}function d(t){var e=new h.a;return e.loadImage(t+".png"),e.autoSize=!0,e}function v(t){return new r.a((function(e,i){var n=new l.a;n.loadImage(t,u.a.create(null,(function(){n.autoSize=!0,e(n)})))}))}},function(t,e,i){var n=i(118),r=i(136),a=i(215);t.exports=n?function(t,e,i){return r.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(118),r=i(83),a=i(119),s=Object.defineProperty,o={},h=function(t){throw t};t.exports=function(t,e){if(a(o,t))return o[t];e||(e={});var i=[][t],l=!!a(e,"ACCESSORS")&&e.ACCESSORS,u=a(e,0)?e[0]:h,c=a(e,1)?e[1]:void 0;return o[t]=!!i&&!r((function(){if(l&&!n)return!0;var t={length:-1};l?s(t,1,{enumerable:!0,get:h}):t[1]=1,i.call(t,u,c)}))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(16);function p(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var y=function(t){u()(i,t);var e=p(i);function i(){var t;return s()(this,i),(t=e.call(this,i.const_stride,4,4)).canReuse=!0,t.setAttributes(i._fixattriInfo),t}return h()(i,[{key:"addVertAndIBToMesh",value:function(t,e,n,r){for(var a=this._vb.needSize(e.length/2*i.const_stride)>>2,s=this._vb._floatArray32||this._vb.getFloat32Array(),o=this._vb._uint32Array,h=0,l=e.length/2,u=0;u<l;u++)s[a++]=e[h],s[a++]=e[h+1],h+=2,o[a++]=n;this._vb.setNeedUpload(),this._ib.append(new Uint16Array(r)),this._ib.setNeedUpload(),this.vertNum+=l,this.indexNum+=r.length}},{key:"releaseMesh",value:function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,i._POOL.push(this)}},{key:"destroy",value:function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()}}],[{key:"__init__",value:function(){v.a.instance;i._fixattriInfo=[5126,2,0,5121,4,8]}},{key:"getAMesh",value:function(t){var e;return e=i._POOL.length?i._POOL.pop():new i,t&&e._vb._resizeBuffer(65536*i.const_stride,!1),e}}]),i}(i(182).a);y.const_stride=12,y._POOL=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(67),p=i.n(v),y=i(43),g=i.n(y),m=i(7),x=i.n(m),k=i(5),T=i(198),b=i(12),C=i(34),w=i(0);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var E=function(t){u()(i,t);var e=S(i);function i(){var t;return s()(this,i),(t=e.call(this)).bufferSource=null,t._currentTime=0,t._volume=1,t._startTime=0,t._pauseTime=0,t.context=w.a.WebAudioSound.ctx,t._onPlayEnd=p()(C.a).call(C.a,t.__onPlayEnd,g()(t)),t.context.createGain?t.gain=t.context.createGain():t.gain=t.context.createGainNode(),t}return h()(i,[{key:"play",value:function(){if(w.a.SoundManager.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){if(this.startTime>=this.duration)return stop();var t=this.context,e=this.gain,n=t.createBufferSource();this.bufferSource=n,n.buffer=this.audioBuffer,n.connect(e),e&&e.disconnect(),e.connect(t.destination),n.onended=this._onPlayEnd,this._startTime=b.a.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,i.SetTargetDelay):this.gain.gain.value=this._volume,0==this.loops&&(n.loop=!0),n.playbackRate.setTargetAtTime?n.playbackRate.setTargetAtTime(w.a.SoundManager.playbackRate,this.context.currentTime,i.SetTargetDelay):n.playbackRate.value=w.a.SoundManager.playbackRate,n.start(0,this.startTime),this._currentTime=0}}},{key:"__onPlayEnd",value:function(){if(1==this.loops)return this.completeHandler&&(w.a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event(k.a.COMPLETE);this.loops>0&&this.loops--,this.startTime=0,this.play()}},{key:"_clearBufferSource",value:function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,i._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}}},{key:"_tryClearBuffer",value:function(t){if(b.a.onMac)try{t.buffer=w.a.WebAudioSound._miniBuffer}catch(t){i._tryCleanFailed=!0}else try{t.buffer=null}catch(t){i._tryCleanFailed=!0}}},{key:"stop",value:function(){x()(d()(i.prototype),"stop",this).call(this),this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,w.a.SoundManager.removeChannel(this),this.completeHandler=null,w.a.SoundManager.autoReleaseSound&&w.a.SoundManager.disposeSoundLater(this.url)}},{key:"pause",value:function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,w.a.SoundManager.removeChannel(this),w.a.SoundManager.autoReleaseSound&&w.a.SoundManager.disposeSoundLater(this.url)}},{key:"resume",value:function(){this.startTime=this._pauseTime,this.play()}},{key:"position",get:function(){return this.bufferSource?(b.a.now()-this._startTime)/1e3+this.startTime:0}},{key:"duration",get:function(){return this.audioBuffer?this.audioBuffer.duration:0}},{key:"volume",set:function(t){this._volume=t,this.isStopped||(this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,i.SetTargetDelay):this.gain.gain.value=t)},get:function(){return this._volume}}]),i}(T.a);E._tryCleanFailed=!1,E.SetTargetDelay=.001;var A=i(66),M=i(40);function R(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var I=function(t){u()(i,t);var e=R(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments)).loaded=!1,t._disposed=!1,t}return h()(i,[{key:"load",value:function(t){var e=this;if(t=M.a.formatURL(t),this.url=t,this.audioBuffer=i._dataCache[t],this.audioBuffer)this._loaded(this.audioBuffer);else if(i.e.on("loaded:"+t,this,this._loaded),i.e.on("err:"+t,this,this._err),!i.__loadingSound[t]){i.__loadingSound[t]=!0;var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){e._disposed?e._removeLoadEvents():(e.data=n.response,i.buffs.push({buffer:e.data,url:e.url}),i.decode())},n.onerror=function(t){e._err()},n.send()}}},{key:"_err",value:function(){this._removeLoadEvents(),i.__loadingSound[this.url]=!1,this.event(k.a.ERROR)}},{key:"_loaded",value:function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,i._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event(k.a.COMPLETE))}},{key:"_removeLoadEvents",value:function(){i.e.off("loaded:"+this.url,this,this._loaded),i.e.off("err:"+this.url,this,this._err)}},{key:"__playAfterLoaded",value:function(){if(this.__toPlays){var t,e,i,n;for(e=(i=this.__toPlays).length,t=0;t<e;t++)(n=i[t])[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i=i||new E,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once(k.a.COMPLETE,this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),w.a.SoundManager.addChannel(i),i}},{key:"dispose",value:function(){this._disposed=!0,delete i._dataCache[this.url],delete i.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]}},{key:"duration",get:function(){return this.audioBuffer?this.audioBuffer.duration:0}}],[{key:"decode",value:function(){i.buffs.length<=0||i.isDecoding||(i.isDecoding=!0,i.tInfo=i.buffs.shift(),i.ctx.decodeAudioData(i.tInfo.buffer,i._done,i._fail))}},{key:"_done",value:function(t){i.e.event("loaded:"+i.tInfo.url,t),i.isDecoding=!1,i.decode()}},{key:"_fail",value:function(){i.e.event("err:"+i.tInfo.url,null),i.isDecoding=!1,i.decode()}},{key:"_playEmptySound",value:function(){if(null!=i.ctx){var t=i.ctx.createBufferSource();t.buffer=i._miniBuffer,t.connect(i.ctx.destination),t.start(0,0,0)}}},{key:"_unlock",value:function(){i._unlocked||(i._playEmptySound(),"running"==i.ctx.state&&(window.document.removeEventListener("mousedown",i._unlock,!0),window.document.removeEventListener("touchend",i._unlock,!0),window.document.removeEventListener("touchstart",i._unlock,!0),i._unlocked=!0))}},{key:"initWebAudio",value:function(){"running"!=i.ctx.state&&(i._unlock(),window.document.addEventListener("mousedown",i._unlock,!0),window.document.addEventListener("touchend",i._unlock,!0),window.document.addEventListener("touchstart",i._unlock,!0))}}]),i}(A.a);I._dataCache={},I.webAudioEnabled=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,I.ctx=I.webAudioEnabled?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,I.buffs=[],I.isDecoding=!1,I._miniBuffer=I.ctx?I.ctx.createBuffer(1,1,22050):void 0,I.e=new A.a,I._unlocked=!1,I.__loadingSound={}},function(t,e,i){var n=i(218),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return K}));var n=i(3),r=i.n(n),a=i(39),s=i.n(a),o=i(11),h=i.n(o),l=i(37),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(43),p=i.n(v),y=i(6),g=i.n(y),m=i(8),x=i.n(m),k=i(7),T=i.n(k),b=i(2),C=i.n(b),w=i(44),S=i(99),E=i(103),A=i(23),M=i(33),R=i(5),I=i(144),D=i(18),P=i(42),L=i(47),B=i(89),O=i(105),F=i(12),N=i(187),U=i(81),G=i(250),Y=i(206),W=i(36),V=i(22),X=i(0),H=i(16),z=i(10);function j(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=C()(t);if(e){var a=C()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}var K=function(t){g()(i,t);var e=j(i);function i(){var t,n;f()(this,i),(n=e.call(this)).offset=new P.a,n._frameRate="fast",n.designWidth=0,n.designHeight=0,n.canvasRotation=!1,n.canvasDegree=0,n.renderingEnabled=!0,n.screenAdaptationEnabled=!0,n._canvasTransform=new D.a,n._screenMode="none",n._scaleMode="noscale",n._alignV="top",n._alignH="left",n._bgColor="black",n._mouseMoveTime=0,n._renderCount=0,n._safariOffsetY=0,n._frameStartTime=0,n._previousOrientation=F.a.window.orientation,n._wgColor=[0,0,0,1],n._scene3Ds=[],n._globalRepaintSet=!1,n._globalRepaintGet=!1,n._3dUI=[],n._curUIBase=null,n.useRetinalCanvas=!1,T()((t=p()(n),C()(i.prototype)),"set_transform",t).call(t,n._createTransform()),n.mouseEnabled=!0,n.hitTestPrior=!0,n.autoSize=!1,n._setBit(M.a.DISPLAYED_INSTAGE,!0),n._setBit(M.a.ACTIVE_INHIERARCHY,!0),n._isFocused=!0,n._isVisibility=!0,n.useRetinalCanvas=S.a.useRetinalCanvas;var r=F.a.window;r.addEventListener("focus",(function(){n._isFocused=!0,n.event(R.a.FOCUS),n.event(R.a.FOCUS_CHANGE)})),r.addEventListener("blur",(function(){n._isFocused=!1,n.event(R.a.BLUR),n.event(R.a.FOCUS_CHANGE),n._isInputting()&&(E.a.inputElement.target.focus=!1)}));var a="visibilityState",s="visibilitychange",o=r.document;return void 0!==o.hidden?(s="visibilitychange",a="visibilityState"):void 0!==o.mozHidden?(s="mozvisibilitychange",a="mozVisibilityState"):void 0!==o.msHidden?(s="msvisibilitychange",a="msVisibilityState"):void 0!==o.webkitHidden&&(s="webkitvisibilitychange",a="webkitVisibilityState"),r.document.addEventListener(s,(function(){"hidden"==F.a.document[a]?(n._isVisibility=!1,n._isInputting()&&(E.a.inputElement.target.focus=!1)):n._isVisibility=!0,n.renderingEnabled=n._isVisibility,n.event(R.a.VISIBILITY_CHANGE)})),r.addEventListener("resize",(function(){var t=F.a.window.orientation;null!=t&&t!=n._previousOrientation&&n._isInputting()&&(E.a.inputElement.target.focus=!1),n._previousOrientation=t,n._isInputting()||(F.a.onSafari&&(n._safariOffsetY=(F.a.window.__innerHeight||F.a.document.body.clientHeight||F.a.document.documentElement.clientHeight)-F.a.window.innerHeight),n._resetCanvas())})),r.addEventListener("orientationchange",(function(t){n._resetCanvas()})),n.on(R.a.MOUSE_MOVE,p()(n),n._onmouseMove),F.a.onMobile&&n.on(R.a.MOUSE_DOWN,p()(n),n._onmouseMove),n}return d()(i,[{key:"_isInputting",value:function(){return F.a.onMobile&&E.a.isInputting}},{key:"_changeCanvasSize",value:function(){this.setScreenSize(F.a.clientWidth*F.a.pixelRatio,F.a.clientHeight*F.a.pixelRatio)}},{key:"_resetCanvas",value:function(){this.screenAdaptationEnabled&&this._changeCanvasSize()}},{key:"setScreenSize",value:function(t,e){var n=!1;if(this._screenMode!==i.SCREEN_NONE&&(n=(t/e<1?i.SCREEN_VERTICAL:i.SCREEN_HORIZONTAL)!==this._screenMode)){var r=e;e=t,t=r}this.canvasRotation=n;var a=L.a._mainCanvas,s=a.source.style,o=this._canvasTransform.identity(),h=this._scaleMode,l=t/this.designWidth,c=e/this.designHeight,f=this.useRetinalCanvas?t:this.designWidth,_=this.useRetinalCanvas?e:this.designHeight,d=t,v=e,p=F.a.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case i.SCALE_NOSCALE:l=c=1,d=this.designWidth,v=this.designHeight;break;case i.SCALE_SHOWALL:l=c=Math.min(l,c),f=d=Math.round(this.designWidth*l),_=v=Math.round(this.designHeight*c);break;case i.SCALE_NOBORDER:l=c=Math.max(l,c),d=Math.round(this.designWidth*l),v=Math.round(this.designHeight*c);break;case i.SCALE_FULL:l=c=1,this._width=f=t,this._height=_=e;break;case i.SCALE_FIXED_WIDTH:c=l,this._height=_=Math.round(e/l);break;case i.SCALE_FIXED_HEIGHT:l=c,this._width=f=Math.round(t/c);break;case i.SCALE_FIXED_AUTO:t/e<this.designWidth/this.designHeight?(c=l,this._height=_=Math.round(e/l)):(l=c,this._width=f=Math.round(t/c))}this.useRetinalCanvas&&(d=f=t,v=_=e),l*=this.scaleX,c*=this.scaleY,1===l&&1===c?this.transform.identity():(this.transform.a=this._formatData(l/(d/f)),this.transform.d=this._formatData(c/(v/_))),a.size(f,_),G.a.changeWebGLSize(f,_),o.scale(d/f/p,v/_/p),this._alignH===i.ALIGN_LEFT?this.offset.x=0:this._alignH===i.ALIGN_RIGHT?this.offset.x=t-d:this.offset.x=.5*(t-d)/p,this._alignV===i.ALIGN_TOP?this.offset.y=0:this._alignV===i.ALIGN_BOTTOM?this.offset.y=e-v:this.offset.y=.5*(e-v)/p,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),o.translate(this.offset.x,this.offset.y),this._safariOffsetY&&o.translate(0,this._safariOffsetY),this.canvasDegree=0,n&&(this._screenMode===i.SCREEN_HORIZONTAL?(o.rotate(Math.PI/2),o.translate(e/p,0),this.canvasDegree=90):(o.rotate(-Math.PI/2),o.translate(0,t/p),this.canvasDegree=-90)),o.a=this._formatData(o.a),o.d=this._formatData(o.d),o.tx=this._formatData(o.tx),o.ty=this._formatData(o.ty),T()(C()(i.prototype),"set_transform",this).call(this,this.transform),s.transformOrigin=s.webkitTransformOrigin=s.msTransformOrigin=s.mozTransformOrigin=s.oTransformOrigin="0px 0px 0px",s.transform=s.webkitTransform=s.msTransform=s.mozTransform=s.oTransform="matrix("+o.toString()+")",this._safariOffsetY&&o.translate(0,-this._safariOffsetY),o.translate(u()(s.left)||0,u()(s.top)||0),this.visible=!0,this._repaint|=A.a.REPAINT_CACHE,this.event(R.a.RESIZE)}},{key:"_formatData",value:function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t}},{key:"getMousePoint",value:function(){return P.a.TEMP.setTo(this.mouseX,this.mouseY)}},{key:"repaint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.a.REPAINT_CACHE;this._repaint|=t}},{key:"parentRepaint",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.a.REPAINT_CACHE}},{key:"_loop",value:function(){return this._globalRepaintGet=this._globalRepaintSet,this._globalRepaintSet=!1,this.render(L.a._context,0,0),!0}},{key:"getFrameTm",value:function(){return this._frameStartTime}},{key:"_onmouseMove",value:function(t){this._mouseMoveTime=F.a.now()}},{key:"getTimeFromFrameStart",value:function(){return F.a.now()-this._frameStartTime}},{key:"render",value:function(t,e,n){if(window.conch)this.renderToNative(t,e,n);else{if(this._frameRate===i.FRAME_SLEEP){var r=F.a.now();if(!(r-this._frameStartTime>=1e3))return;this._frameStartTime=r}else{if(!this._visible)return this._renderCount++,void(this._renderCount%5==0&&(N.a.I._update(),V.a.loopCount++,B.a.loopCount=V.a.loopCount,this._updateTimers()));this._frameStartTime=F.a.now(),B.a.loopStTm=this._frameStartTime}this._renderCount++;var a=(this._frameRate===i.FRAME_MOUSE?this._frameStartTime-this._mouseMoveTime<2e3?i.FRAME_FAST:i.FRAME_SLOW:this._frameRate)!==i.FRAME_SLOW,s=this._renderCount%2==0;if(V.a.renderSlow=!a,a||s){if(N.a.I._update(),V.a.loopCount++,B.a.loopCount=V.a.loopCount,this.renderingEnabled){for(var o=0,h=this._scene3Ds.length;o<h;o++)this._scene3Ds[o]._update();t.clear(),T()(C()(i.prototype),"render",this).call(this,t,e,n),V.a._StatRender.renderNotCanvas(t,e,n)}this.renderingEnabled&&(i.clear(this._bgColor),t.flush(),Y.a.instance&&Y.a.getInstance().endDispose()),this._updateTimers()}}}},{key:"renderToNative",value:function(t,e,n){if(this._renderCount++,this._visible){if(N.a.I._update(),V.a.loopCount++,B.a.loopCount=V.a.loopCount,this.renderingEnabled){for(var r=0,a=this._scene3Ds.length;r<a;r++)this._scene3Ds[r]._update();t.clear(),T()(C()(i.prototype),"render",this).call(this,t,e,n),V.a._StatRender.renderNotCanvas(t,e,n)}this.renderingEnabled&&(i.clear(this._bgColor),t.flush(),Y.a.instance&&Y.a.getInstance().endDispose()),this._updateTimers()}else this._renderCount%5==0&&(N.a.I._update(),V.a.loopCount++,B.a.loopCount=V.a.loopCount,this._updateTimers())}},{key:"_updateTimers",value:function(){X.a.systemTimer._update(),X.a.startTimer._update(),X.a.physicsTimer._update(),X.a.updateTimer._update(),X.a.lateTimer._update(),X.a.timer._update()}},{key:"_requestFullscreen",value:function(){var t=F.a.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},{key:"_fullScreenChanged",value:function(){X.a.stage.event(R.a.FULL_SCREEN_CHANGE)}},{key:"exitFullscreen",value:function(){var t=F.a.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}},{key:"isGlobalRepaint",value:function(){return this._globalRepaintGet}},{key:"setGlobalRepaint",value:function(){this._globalRepaintSet=!0}},{key:"add3DUI",value:function(t){var e,i=t.rootView;h()(e=this._3dUI).call(e,i)>=0||this._3dUI.push(i)}},{key:"remove3DUI",value:function(t){var e,i,n=t.rootView,r=h()(e=this._3dUI).call(e,n);return r>=0&&(s()(i=this._3dUI).call(i,r,1),!0)}},{key:"width",set:function(t){this.designWidth=t,T()(C()(i.prototype),"set_width",this).call(this,t),X.a.systemTimer.callLater(this,this._changeCanvasSize)},get:function(){return T()(C()(i.prototype),"get_width",this).call(this)}},{key:"height",set:function(t){this.designHeight=t,T()(C()(i.prototype),"set_height",this).call(this,t),X.a.systemTimer.callLater(this,this._changeCanvasSize)},get:function(){return T()(C()(i.prototype),"get_height",this).call(this)}},{key:"transform",set:function(t){T()(C()(i.prototype),"set_transform",this).call(this,t)},get:function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||this._createTransform()}},{key:"isFocused",get:function(){return this._isFocused}},{key:"isVisibility",get:function(){return this._isVisibility}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(t){this._scaleMode=t,X.a.systemTimer.callLater(this,this._changeCanvasSize)}},{key:"alignH",get:function(){return this._alignH},set:function(t){this._alignH=t,X.a.systemTimer.callLater(this,this._changeCanvasSize)}},{key:"alignV",get:function(){return this._alignV},set:function(t){this._alignV=t,X.a.systemTimer.callLater(this,this._changeCanvasSize)}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this._wgColor=t?U.a.create(t).arrColor:null,L.a.canvas.style.background=t||"none"}},{key:"mouseX",get:function(){return Math.round(I.a.instance.mouseX/this.clientScaleX)}},{key:"mouseY",get:function(){return Math.round(I.a.instance.mouseY/this.clientScaleY)}},{key:"clientScaleX",get:function(){return this._transform?this._transform.getScaleX():1}},{key:"clientScaleY",get:function(){return this._transform?this._transform.getScaleY():1}},{key:"screenMode",get:function(){return this._screenMode},set:function(t){this._screenMode=t}},{key:"visible",set:function(t){this.visible!==t&&(T()(C()(i.prototype),"set_visible",this).call(this,t),L.a._mainCanvas.source.style.visibility=t?"visible":"hidden")},get:function(){return T()(C()(i.prototype),"visible",this)}},{key:"fullScreenEnabled",set:function(t){var e=F.a.document,i=L.a.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}},{key:"frameRate",get:function(){return X.a.Render.isConchApp?this._frameRateNative:this._frameRate},set:function(t){if(X.a.Render.isConchApp){var e=window.conch;switch(t){case i.FRAME_FAST:e.config.setLimitFPS(60);break;case i.FRAME_MOUSE:e.config.setMouseFrame(2e3);break;case i.FRAME_SLOW:e.config.setSlowFrame(!0);break;case i.FRAME_SLEEP:e.config.setLimitFPS(1)}this._frameRateNative=t}else this._frameRate=t}}]),i}(w.a);K.SCALE_NOSCALE="noscale",K.SCALE_EXACTFIT="exactfit",K.SCALE_SHOWALL="showall",K.SCALE_NOBORDER="noborder",K.SCALE_FULL="full",K.SCALE_FIXED_WIDTH="fixedwidth",K.SCALE_FIXED_HEIGHT="fixedheight",K.SCALE_FIXED_AUTO="fixedauto",K.ALIGN_LEFT="left",K.ALIGN_RIGHT="right",K.ALIGN_CENTER="center",K.ALIGN_TOP="top",K.ALIGN_MIDDLE="middle",K.ALIGN_BOTTOM="bottom",K.SCREEN_NONE="none",K.SCREEN_HORIZONTAL="horizontal",K.SCREEN_VERTICAL="vertical",K.FRAME_FAST="fast",K.FRAME_SLOW="slow",K.FRAME_MOUSE="mouse",K.FRAME_SLEEP="sleep",K.clear=function(t){O.a.set2DRenderConfig();var e=H.a.instance;W.a.worldScissorTest&&e.disable(e.SCISSOR_TEST);var i=L.a.context,n=0==i._submits._length||S.a.preserveDrawingBuffer?U.a.create(t).arrColor:X.a.stage._wgColor;n?i.clearBG(n[0],n[1],n[2],n[3]):i.clearBG(0,0,0,0),W.a.clear()},z.a.regClass("laya.display.Stage",K),z.a.regClass("Laya.Stage",K)},function(t,e,i){var n=i(324),r=i(216);t.exports=function(t){return n(r(t))}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i(3),r=i.n(n),a=i(11),s=i.n(a),o=i(39),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(33),x=i(5),k=i(66),T=i(13),b=i(22),C=i(0),w=i(10);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var E=function(t){d()(i,t);var e=S(i);function i(){var t;return u()(this,i),(t=e.call(this))._bits=0,t._children=i.ARRAY_EMPTY,t._extUIChild=i.ARRAY_EMPTY,t._parent=null,t.name="",t.destroyed=!1,t.createGLBuffer(),t}return f()(i,[{key:"createGLBuffer",value:function(){}},{key:"_setBit",value:function(t,e){t===m.a.DISPLAY&&(this._getBit(t)!=e&&this._updateDisplayedInstage());e?this._bits|=t:this._bits&=~t}},{key:"_getBit",value:function(t){return 0!=(this._bits&t)}},{key:"_setUpNoticeChain",value:function(){this._getBit(m.a.DISPLAY)&&this._setBitUp(m.a.DISPLAY)}},{key:"_setBitUp",value:function(t){var e=this;for(e._setBit(t,!0),e=e._parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e._parent}}},{key:"on",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return t!==x.a.DISPLAY&&t!==x.a.UNDISPLAY||this._getBit(m.a.DISPLAY)||this._setBitUp(m.a.DISPLAY),this._createListener(t,e,i,n,!1)}},{key:"once",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return t!==x.a.DISPLAY&&t!==x.a.UNDISPLAY||this._getBit(m.a.DISPLAY)||this._setBitUp(m.a.DISPLAY),this._createListener(t,e,i,n,!0)}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.destroyed=!0,this._destroyAllComponent(),this._parent&&this._parent.removeChild(this),this._children&&(t?this.destroyChildren():this.removeChildren()),this.onDestroy(),this._children=null,this.offAll()}},{key:"onDestroy",value:function(){}},{key:"destroyChildren",value:function(){if(this._children)for(var t=0,e=this._children.length;t<e;t++)this._children[0].destroy(!0)}},{key:"addChild",value:function(t){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(m.a.HAS_ZORDER,!0),t._parent===this){var e,n=this.getChildIndex(t);if(n!==this._children.length-1)h()(e=this._children).call(e,n,1),this._children.push(t),this._childChanged()}else t._parent&&t._parent.removeChild(t),this._children===i.ARRAY_EMPTY&&(this._children=[]),this._children.push(t),t._setParent(this),this._childChanged();return t}},{key:"addInputChild",value:function(t){if(this._extUIChild==i.ARRAY_EMPTY)this._extUIChild=[t];else{var e;if(s()(e=this._extUIChild).call(e,t)>=0)return null;this._extUIChild.push(t)}return null}},{key:"removeInputChild",value:function(t){var e,i,n=s()(e=this._extUIChild).call(e,t);n>=0&&h()(i=this._extUIChild).call(i,n,1)}},{key:"addChildren",value:function(){for(var t=0,e=arguments.length;t<e;){var i;this.addChild((i=t++)<0||arguments.length<=i?void 0:arguments[i])}}},{key:"addChildAt",value:function(t,e){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(m.a.HAS_ZORDER,!0),e>=0&&e<=this._children.length){if(t._parent===this){var n,r,a=this.getChildIndex(t);h()(n=this._children).call(n,a,1),h()(r=this._children).call(r,e,0,t),this._childChanged()}else{var s;t._parent&&t._parent.removeChild(t),this._children===i.ARRAY_EMPTY&&(this._children=[]),h()(s=this._children).call(s,e,0,t),t._setParent(this)}return t}throw new Error("appendChildAt:The index is out of bounds")}},{key:"getChildIndex",value:function(t){var e;return s()(e=this._children).call(e,t)}},{key:"getChildByName",value:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.name===t)return r}return null}},{key:"getChildAt",value:function(t){return this._children[t]||null}},{key:"setChildIndex",value:function(t,e){var i=this._children;if(e<0||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(n<0)throw new Error("setChildIndex:node is must child of this object.");return h()(i).call(i,n,1),h()(i).call(i,e,0,t),this._childChanged(),t}},{key:"_childChanged",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"removeChild",value:function(t){var e;if(!this._children)return t;var i=s()(e=this._children).call(e,t);return this.removeChildAt(i)}},{key:"removeSelf",value:function(){return this._parent&&this._parent.removeChild(this),this}},{key:"removeChildByName",value:function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e}},{key:"removeChildAt",value:function(t){var e,i=this.getChildAt(t);i&&(h()(e=this._children).call(e,t,1),i._setParent(null));return i}},{key:"removeChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2147483647;if(this._children&&this._children.length>0){var n=this._children;if(0===t&&e>=n.length-1){var r=n;this._children=i.ARRAY_EMPTY}else r=h()(n).call(n,t,e-t);for(var a=0,s=r.length;a<s;a++)r[a]._setParent(null)}return this}},{key:"replaceChild",value:function(t,e){var i,n,r=s()(i=this._children).call(i,e);return r>-1?(h()(n=this._children).call(n,r,1,t),e._setParent(null),t._setParent(this),t):null}},{key:"_setParent",value:function(t){this._parent!==t&&(t?(this._parent=t,this._onAdded(),this.event(x.a.ADDED),this._getBit(m.a.DISPLAY)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this._onRemoved(),this.event(x.a.REMOVED),this._parent._childChanged(),this._getBit(m.a.DISPLAY)&&this._displayChild(this,!1),this._parent=t))}},{key:"_updateDisplayedInstage",value:function(){var t;t=this;for(var e=C.a.stage,i=!1;t;){if(t._getBit(m.a.DISPLAY)){i=t._getBit(m.a.DISPLAYED_INSTAGE);break}if(t===e||t._getBit(m.a.DISPLAYED_INSTAGE)){i=!0;break}t=t._parent}this._setBit(m.a.DISPLAYED_INSTAGE,i)}},{key:"_setDisplay",value:function(t){this._getBit(m.a.DISPLAYED_INSTAGE)!==t&&(this._setBit(m.a.DISPLAYED_INSTAGE,t),t?this.event(x.a.DISPLAY):this.event(x.a.UNDISPLAY))}},{key:"_displayChild",value:function(t,e){var i=t._children;if(i)for(var n=0,r=i.length;n<r;n++){var a=i[n];a._getBit(m.a.DISPLAY)&&(a._children.length>0?this._displayChild(a,e):a._setDisplay(e))}t._setDisplay(e)}},{key:"contains",value:function(t){if(t===this)return!0;for(;t;){if(t._parent===this)return!0;t=t._parent}return!1}},{key:"timerLoop",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=this.scene?this.scene.timer:C.a.timer;s.loop(t,e,i,n,r,a)}},{key:"timerOnce",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.scene?this.scene.timer:C.a.timer;a._create(!1,!1,t,e,i,n,r)}},{key:"frameLoop",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.scene?this.scene.timer:C.a.timer;a._create(!0,!0,t,e,i,n,r)}},{key:"frameOnce",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.scene?this.scene.timer:C.a.timer;a._create(!0,!1,t,e,i,n,r)}},{key:"clearTimer",value:function(t,e){(this.scene?this.scene.timer:C.a.timer).clear(t,e)}},{key:"callLater",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.scene?this.scene.timer:C.a.timer;i.callLater(this,t,e)}},{key:"runCallLater",value:function(t){(this.scene?this.scene.timer:C.a.timer).runCallLater(this,t)}},{key:"_onActive",value:function(){b.a.spriteCount++}},{key:"_onInActive",value:function(){b.a.spriteCount--}},{key:"_onActiveInScene",value:function(){}},{key:"_onInActiveInScene",value:function(){}},{key:"_parse",value:function(t,e){}},{key:"_setBelongScene",value:function(t){if(!this._scene){this._scene=t,this._onActiveInScene();for(var e=0,i=this._children.length;e<i;e++)this._children[e]._setBelongScene(t)}}},{key:"_setUnBelongScene",value:function(){if(this._scene!==this){this._onInActiveInScene(),this._scene=null;for(var t=0,e=this._children.length;t<e;t++)this._children[t]._setUnBelongScene()}}},{key:"onAwake",value:function(){}},{key:"onEnable",value:function(){}},{key:"_processActive",value:function(){this._activeChangeScripts||(this._activeChangeScripts=[]),this._activeHierarchy(this._activeChangeScripts),this._activeScripts()}},{key:"_activeHierarchy",value:function(t){if(this._setBit(m.a.ACTIVE_INHIERARCHY,!0),this._components)for(var e=0,i=this._components.length;e<i;e++){var n=this._components[e];n._isScript()?n._enabled&&t.push(n):n._setActive(!0)}for(this._onActive(),e=0,i=this._children.length;e<i;e++){var r=this._children[e];!r._getBit(m.a.NOT_ACTIVE)&&r._activeHierarchy(t)}this._getBit(m.a.AWAKED)||(this._setBit(m.a.AWAKED,!0),this.onAwake()),this.onEnable()}},{key:"_activeScripts",value:function(){for(var t=0,e=this._activeChangeScripts.length;t<e;t++){var i=this._activeChangeScripts[t];i._awaked||(i._awaked=!0,i._onAwake()),i._onEnable()}this._activeChangeScripts.length=0}},{key:"_processInActive",value:function(){this._activeChangeScripts||(this._activeChangeScripts=[]),this._inActiveHierarchy(this._activeChangeScripts),this._inActiveScripts()}},{key:"_inActiveHierarchy",value:function(t){if(this._onInActive(),this._components)for(var e=0,i=this._components.length;e<i;e++){var n=this._components[e];n._setActive(!1),n._isScript()&&n._enabled&&t.push(n)}for(this._setBit(m.a.ACTIVE_INHIERARCHY,!1),e=0,i=this._children.length;e<i;e++){var r=this._children[e];r&&!r._getBit(m.a.NOT_ACTIVE)&&r._inActiveHierarchy(t)}this.onDisable()}},{key:"_inActiveScripts",value:function(){for(var t=0,e=this._activeChangeScripts.length;t<e;t++)this._activeChangeScripts[t].onDisable();this._activeChangeScripts.length=0}},{key:"onDisable",value:function(){}},{key:"_onAdded",value:function(){if(this._activeChangeScripts&&0!==this._activeChangeScripts.length)throw"Node: can't set the main inActive node active in hierarchy,if the operate is in main inActive node or it's children script's onDisable Event.";var t=this._parent.scene;t&&this._setBelongScene(t),this._parent.activeInHierarchy&&this.active&&this._processActive()}},{key:"_onRemoved",value:function(){if(this._activeChangeScripts&&0!==this._activeChangeScripts.length)throw"Node: can't set the main active node inActive in hierarchy,if the operate is in main active node or it's children script's onEnable Event.";this._parent.activeInHierarchy&&this.active&&this._processInActive(),this._parent.scene&&this._setUnBelongScene()}},{key:"_addComponentInstance",value:function(t){this._components=this._components||[],this._components.push(t),t.owner=this,t._onAdded(),this.activeInHierarchy&&t._setActive(!0)}},{key:"_destroyComponent",value:function(t){if(this._components)for(var e=0,i=this._components.length;e<i;e++){var n=this._components[e];if(n===t){var r;n._destroy(),h()(r=this._components).call(r,e,1);break}}}},{key:"_destroyAllComponent",value:function(){if(this._components){for(var t=0,e=this._components.length;t<e;t++){this._components[t]._destroy()}this._components.length=0}}},{key:"_cloneTo",value:function(t,e,i){var n=t;if(this._components)for(var r=0,a=this._components.length;r<a;r++){var s=n.addComponent(this._components[r].constructor);this._components[r]._cloneTo(s)}}},{key:"addComponentIntance",value:function(t){if(t.owner)throw"Node:the component has belong to other node.";if(t.isSingleton&&this.getComponent(t.constructor))throw"Node:the component is singleton,can't add the second one.";return this._addComponentInstance(t),t}},{key:"addComponent",value:function(t){var e=T.a.createByClass(t);if(e._destroyed=!1,e.isSingleton&&this.getComponent(t))throw"无法实例"+t+"组件，"+t+"组件已存在！";return this._addComponentInstance(e),e}},{key:"getComponent",value:function(t){if(this._components)for(var e=0,i=this._components.length;e<i;e++){var n=this._components[e];if(n instanceof t)return n}return null}},{key:"getComponents",value:function(t){var e;if(this._components)for(var i=0,n=this._components.length;i<n;i++){var r=this._components[i];r instanceof t&&(e=e||[]).push(r)}return e}},{key:"numChildren",get:function(){return this._children.length}},{key:"parent",get:function(){return this._parent}},{key:"displayedInStage",get:function(){return this._getBit(m.a.DISPLAY)||this._setBitUp(m.a.DISPLAY),this._getBit(m.a.DISPLAYED_INSTAGE)}},{key:"scene",get:function(){return this._scene}},{key:"active",get:function(){return!this._getBit(m.a.NOT_READY)&&!this._getBit(m.a.NOT_ACTIVE)},set:function(t){if(t=!!t,!this._getBit(m.a.NOT_ACTIVE)!==t){if(this._activeChangeScripts&&0!==this._activeChangeScripts.length)throw t?"Node: can't set the main inActive node active in hierarchy,if the operate is in main inActive node or it's children script's onDisable Event.":"Node: can't set the main active node inActive in hierarchy,if the operate is in main active node or it's children script's onEnable Event.";this._setBit(m.a.NOT_ACTIVE,!t),this._parent&&this._parent.activeInHierarchy&&(t?this._processActive():this._processInActive())}}},{key:"activeInHierarchy",get:function(){return this._getBit(m.a.ACTIVE_INHIERARCHY)}},{key:"timer",get:function(){return this.scene?this.scene.timer:C.a.timer}}]),i}(k.a);E.ARRAY_EMPTY=[],w.a.regClass("laya.display.Node",E),w.a.regClass("Laya.Node",E)},function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(16);function p(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var y=function(t){u()(i,t);var e=p(i);function i(){var t;return s()(this,i),(t=e.call(this,i.const_stride,4,4)).canReuse=!0,t.setAttributes(i._fixattriInfo),t}return h()(i,[{key:"addData",value:function(t,e,n,r,a){var s=this._vb,o=this._ib,h=t.length>>1,l=s.needSize(h*i.const_stride)>>2,u=s._floatArray32||s.getFloat32Array(),c=s._uint32Array,f=0,_=r.a,d=r.b,v=r.c,p=r.d,y=r.tx,g=r.ty,m=0;for(m=0;m<h;m++){var x=t[f],k=t[f+1];u[l]=x*_+k*v+y,u[l+1]=x*d+k*p+g,u[l+2]=e[f],u[l+3]=e[f+1],c[l+4]=a,c[l+5]=255,l+=6,f+=2}s.setNeedUpload();var T=this.vertNum,b=n.length,C=o.needSize(n.byteLength),w=o.getUint16Array(),S=C>>1;if(T>0){var E=S+b,A=0;for(m=S;m<E;m++,A++)w[m]=n[A]+T}else w.set(n,S);o.setNeedUpload(),this.vertNum+=h,this.indexNum+=n.length}},{key:"releaseMesh",value:function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,i._POOL.push(this)}},{key:"destroy",value:function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()}}],[{key:"__init__",value:function(){v.a.instance;i._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}},{key:"getAMesh",value:function(t){var e;return e=i._POOL.length?i._POOL.pop():new i,t&&e._vb._resizeBuffer(65536*i.const_stride,!1),e}}]),i}(i(182).a);y.const_stride=24,y._POOL=[]},,function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(290),p=i(5),y=i(0),g=i(10);function m(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var x=function(t){u()(i,t);var e=m(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments))._top=NaN,t._bottom=NaN,t._left=NaN,t._right=NaN,t._centerX=NaN,t._centerY=NaN,t}return h()(i,[{key:"onReset",value:function(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=NaN}},{key:"_onEnable",value:function(){this.owner.parent?this._onAdded():this.owner.once(p.a.ADDED,this,this._onAdded)}},{key:"_onDisable",value:function(){this.owner.off(p.a.ADDED,this,this._onAdded),this.owner.parent&&this.owner.parent.off(p.a.RESIZE,this,this._onParentResize)}},{key:"_onAdded",value:function(){this.owner.parent&&this.owner.parent.on(p.a.RESIZE,this,this._onParentResize),this.resetLayoutX(),this.resetLayoutY()}},{key:"_onParentResize",value:function(){var t=this.resetLayoutX(),e=this.resetLayoutY();(t||e)&&this.owner.event(p.a.RESIZE)}},{key:"resetLayoutX",value:function(){var t=this.owner;if(!t)return!1;var e=t.parent;if(e)if(isNaN(this.centerX)){if(isNaN(this.left))isNaN(this.right)||(t.x=Math.round(e.width-t.displayWidth-this.right+t.pivotX*t.scaleX));else if(t.x=Math.round(this.left+t.pivotX*t.scaleX),!isNaN(this.right)){var i=(e._width-this.left-this.right)/(t.scaleX||.01);if(i!=t.width)return t.width=i,!0}}else t.x=Math.round(.5*(e.width-t.displayWidth)+this.centerX+t.pivotX*t.scaleX);return!1}},{key:"resetLayoutY",value:function(){var t=this.owner;if(!t)return!1;var e=t.parent;if(e)if(isNaN(this.centerY)){if(isNaN(this.top))isNaN(this.bottom)||(t.y=Math.round(e.height-t.displayHeight-this.bottom+t.pivotY*t.scaleY));else if(t.y=Math.round(this.top+t.pivotY*t.scaleY),!isNaN(this.bottom)){var i=(e._height-this.top-this.bottom)/(t.scaleY||.01);if(i!=t.height)return t.height=i,!0}}else t.y=Math.round(.5*(e.height-t.displayHeight)+this.centerY+t.pivotY*t.scaleY);return!1}},{key:"resetLayout",value:function(){this.owner&&(this.resetLayoutX(),this.resetLayoutY())}},{key:"top",get:function(){return this._top},set:function(t){this._top!=t&&(this._top=t,this.resetLayoutY())}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom!=t&&(this._bottom=t,this.resetLayoutY())}},{key:"left",get:function(){return this._left},set:function(t){this._left!=t&&(this._left=t,this.resetLayoutX())}},{key:"right",get:function(){return this._right},set:function(t){this._right!=t&&(this._right=t,this.resetLayoutX())}},{key:"centerX",get:function(){return this._centerX},set:function(t){this._centerX!=t&&(this._centerX=t,this.resetLayoutX())}},{key:"centerY",get:function(){return this._centerY},set:function(t){this._centerY!=t&&(this._centerY=t,this.resetLayoutY())}}]),i}(v.a);x.EMPTY=null,y.a.regClass(x),x.EMPTY=new x,g.a.regClass("laya.ui.Widget",x),g.a.regClass("Laya.Widget",x)},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(11),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(13),u=i(33),c=i(290),f=i(314),_=i(163),d=i(132),v=i(21),p=i(19),y=i(0),g=function(){function t(){s()(this,t)}return h()(t,null,[{key:"__init",value:function(){t._funMap=new d.a}},{key:"getBindFun",value:function(e){var i=t._funMap.get(e);if(null==i){var n='"'+e+'"',r="(function(data){if(data==null)return;with(data){try{\nreturn "+(n=n.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";i=window.Laya._runScript(r),t._funMap.set(e,i)}return i}},{key:"createByData",value:function(e,i){var n=x.create();if((e=t.createComp(i,e,e,null,n))._setBit(u.a.NOT_READY,!0),"_idMap"in e&&(e._idMap=n._idMap),i.animations){var r,a,s,o=[],h=i.animations,l=h.length;for(r=0;r<l;r++){switch(a=new f.a,s=h[r],a._setUp(n._idMap,s),e[s.name]=a,a._setControlNode(e),s.action){case 1:a.play(0,!1);break;case 2:a.play(0,!0)}o.push(a)}e._aniList=o}return"Scene"===e._$componentType&&e._width>0&&null==i.props.hitTestPrior&&!e.mouseThrough&&(e.hitTestPrior=!0),n.beginLoad(e),e}},{key:"createInitTool",value:function(){return x.create()}},{key:"createComp",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("Scene3D"==e.type||"Sprite3D"==e.type){var o=[],h=y.a.Laya.Utils3D._createSceneByJsonForMaker(e,o,s);return"Sprite3D"==e.type?y.a.Laya.StaticBatchManager.combine(h,o):y.a.Laya.StaticBatchManager.combine(null,o),h}if(!(i=i||t.getCompInstance(e)))return e.props&&e.props.runtime?console.warn("runtime not found:"+e.props.runtime):console.warn("can not create:"+e.type),null;var l=e.child;if(l)for(var u="List"==i._$componentType,f=0,d=l.length;f<d;f++){var v=l[f];if(!("itemRender"in i)||"render"!=v.props.name&&"render"!==v.props.renderType)if("Graphic"==v.type)y.a.ClassUtils._addGraphicsToSprite(v,i);else if(y.a.ClassUtils._isDrawType(v.type))y.a.ClassUtils._addGraphicToSprite(v,i,!0);else{if(u){var p=[],g=t.createComp(v,null,n,p,s);p.length&&(g._$bindData=p)}else g=t.createComp(v,null,n,a,s);"Script"==v.type?g instanceof c.a?i._addComponentInstance(g):"owner"in g?g.owner=i:"target"in g&&(g.target=i):"mask"==v.props.renderType||"mask"==v.props.name?i.mask=g:g instanceof _.a&&i.addChild(g)}else i.itemRender=v}var m=e.props;for(var x in m){var k=m[x];"string"==typeof k&&(r()(k).call(k,"@node:")>=0||r()(k).call(k,"@Prefab:")>=0)?s&&s.addNodeRef(i,x,k):t.setCompValue(i,x,k,n,a)}return i._afterInited&&i._afterInited(),e.compId&&s&&s._idMap&&(s._idMap[e.compId]=i),i}},{key:"setCompValue",value:function(e,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("string"==typeof n&&r()(n).call(n,"${")>-1){if(t._sheet||(t._sheet=y.a.ClassUtils.getClass("laya.data.Table")),!t._sheet)return void console.warn("Can not find class Sheet");if(s)s.push(e,i,n);else if(a){-1==r()(n).call(n,"].")&&(n=n.replace(".","[0]."));var o,h,l=new m(e,i,n);l.exe(a);for(var u=n.replace(/\[.*?\]\./g,".");null!=(o=t._parseWatchData.exec(u));){for(var c=o[1];null!=(h=t._parseKeyWord.exec(c));){var f=h[0],_=a._watchMap[f]||(a._watchMap[f]=[]);_.push(l),t._sheet.I.notifer.on(f,a,a.changeData,[f])}(_=a._watchMap[c]||(a._watchMap[c]=[])).push(l),t._sheet.I.notifer.on(c,a,a.changeData,[c])}}}else"var"===i&&a?a[n]=e:e[i]="true"===n||"false"!==n&&n}},{key:"getCompInstance",value:function(e){if("UIView"==e.type&&e.props&&e.props.pageData)return t.createByData(null,e.props.pageData);var i=e.props&&e.props.runtime||e.type,n=y.a.ClassUtils.getClass(i);if(!n)throw"Can not find class "+i;if("Script"===e.type&&n.prototype._doAwake){var r=l.a.createByClass(n);return r._destroyed=!1,r}return e.props&&"renderType"in e.props&&"instance"==e.props.renderType?(n.instance||(n.instance=new n),n.instance):new n}}]),t}();g._parseWatchData=/\${(.*?)}/g,g._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g;var m=function(){function t(e,i,n){s()(this,t),this.comp=e,this.prop=i,this.value=n}return h()(t,[{key:"exe",value:function(t){var e=g.getBindFun(this.value);this.comp[this.prop]=e.call(this,t)}}]),t}(),x=function(){function t(){s()(this,t)}return h()(t,[{key:"reset",value:function(){this._nodeRefList=null,this._initList=null,this._idMap=null,this._loadList=null,this._scene=null}},{key:"recover",value:function(){this.reset(),l.a.recover("InitTool",this)}},{key:"addLoadRes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._loadList||(this._loadList=[]),e?this._loadList.push({url:t,type:e}):this._loadList.push(t)}},{key:"addNodeRef",value:function(t,e,i){this._nodeRefList||(this._nodeRefList=[]),this._nodeRefList.push([t,e,i]),r()(i).call(i,"@Prefab:")>=0&&this.addLoadRes(i.replace("@Prefab:",""),v.a.PREFAB)}},{key:"setNodeRef",value:function(){if(this._nodeRefList)if(this._idMap){var t,e,i;for(e=this._nodeRefList.length,t=0;t<e;t++)(i=this._nodeRefList[t])[0][i[1]]=this.getReferData(i[2]);this._nodeRefList=null}else this._nodeRefList=null}},{key:"getReferData",value:function(t){if(r()(t).call(t,"@Prefab:")>=0)return v.a.getRes(t.replace("@Prefab:",""));if(r()(t).call(t,"@arr:")>=0){var e,i,n,a;for(n=(e=(t=t.replace("@arr:","")).split(",")).length,i=0;i<n;i++)a=e[i],e[i]=a?this._idMap[a.replace("@node:","")]:null;return e}return this._idMap[t.replace("@node:","")]}},{key:"addInitItem",value:function(t){this._initList||(this._initList=[]),this._initList.push(t)}},{key:"doInits",value:function(){this._initList&&(this._initList=null)}},{key:"finish",value:function(){this.setNodeRef(),this.doInits(),this._scene._setBit(u.a.NOT_READY,!1),this._scene.parent&&this._scene.parent.activeInHierarchy&&this._scene.active&&this._scene._processActive(),this._scene.event("onViewCreated"),this.recover()}},{key:"beginLoad",value:function(t){this._scene=t,!this._loadList||this._loadList.length<1?this.finish():y.a.loader.load(this._loadList,p.a.create(this,this.finish))}}],[{key:"create",value:function(){var e=l.a.getItemByClass("InitTool",t);return e._idMap=[],e}}]),t}()},,,,function(t,e,i){"use strict";i.d(e,"a",(function(){return W}));var n=i(88),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h()(this,t),this.atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._used=0,this._cells=null,this._rowInfo=null,this.atlasID=n,this._init(e,i)}return u()(t,[{key:"addRect",value:function(t,e,i,n){return!!this._get(e,i,n)&&(this._fill(n.x,n.y,e,i,t),this._texCount++,!0)}},{key:"_release",value:function(){this._cells=null,this._rowInfo=null}},{key:"_init",value:function(t,e){return this._width=t,this._height=e,this._release(),0!=this._width&&(this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=new Uint8Array(this._height),this._used=0,this._clear(),!0)}},{key:"_get",value:function(t,e,i){if(t>this._width||e>this._height)return!1;for(var n=-1,r=-1,a=this._width,s=this._height,o=this._cells,h=0;h<s;h++)if(!(this._rowInfo[h]<t))for(var l=0;l<a;){var u=3*(h*a+l);if(0!=o[u]||o[u+1]<t||o[u+2]<e)l+=o[u+1];else{n=l,r=h;for(var c=0;c<t;c++)if(o[3*c+u+2]<e){n=-1;break}if(!(n<0))return i.x=n,i.y=r,!0;l+=o[u+1]}}return!1}},{key:"_fill",value:function(t,e,i,n,r){var a=this._width,s=this._height;this._check(t+i<=a&&e+n<=s);for(var o=e;o<n+e;++o){this._check(this._rowInfo[o]>=i),this._rowInfo[o]-=i;for(var h=0;h<i;h++){var l=3*(t+o*a+h);this._check(0==this._cells[l]),this._cells[l]=r,this._cells[l+1]=i,this._cells[l+2]=n}}if(t>0)for(o=0;o<n;++o){var u=0;for(h=t-1;h>=0&&0==this._cells[3*((e+o)*a+h)];--h,++u);for(h=u;h>0;--h)this._cells[3*((e+o)*a+t-h)+1]=h,this._check(h>0)}if(e>0)for(h=t;h<t+i;++h){for(u=0,o=e-1;o>=0&&0==this._cells[3*(h+o*a)];--o,u++);for(o=u;o>0;--o)this._cells[3*(h+(e-o)*a)+2]=o,this._check(o>0)}this._used+=i*n/(this._width*this._height)}},{key:"_check",value:function(t){0==t&&console.log("xtexMerger 错误啦")}},{key:"_clear",value:function(){this._texCount=0;for(var t=0;t<this._height;t++)this._rowInfo[t]=this._width;for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var n=3*(e*this._width+i);this._cells[n]=0,this._cells[n+1]=this._width-i,this._cells[n+2]=this._width-e}}}]),t}(),f=i(3),_=i.n(f),d=(i(38),i(256)),v=i.n(d),p=i(6),y=i.n(p),g=i(8),m=i.n(g),x=i(2),k=i.n(x),T=i(16),b=i(89),C=i(98),w=i(17),S=i(0);function E(t){var e=function(){if("undefined"==typeof Reflect||!_.a)return!1;if(_.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(_()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=k()(t);if(e){var r=k()(this).constructor;i=_()(n,arguments,r)}else i=n.apply(this,arguments);return m()(this,i)}}var A=function(t){y()(i,t);var e=E(i);function i(t,n){var r;return h()(this,i),(r=e.call(this))._texW=0,r._texH=0,r.__destroyed=!1,r._discardTm=0,r.genID=0,r.bitmap={id:0,_glTexture:null},r.curUsedCovRate=0,r.curUsedCovRateAtlas=0,r.lastTouchTm=0,r.ri=null,r._texW=t||i.gTextRender.atlasWidth,r._texH=n||i.gTextRender.atlasWidth,r.bitmap.id=r.id,r.lock=!0,r}return u()(i,[{key:"recreateResource",value:function(){if(!this._source){var t=T.a.instance,e=this._source=t.createTexture();this.bitmap._glTexture=e,w.a.bindTexture(t,t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._texW,this._texH,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i.gTextRender.debugUV&&this.fillWhite()}}},{key:"addChar",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i.gTextRender.isWan1Wan)return this.addCharCanvas(t,e,n,r);!this._source&&this.recreateResource();var a=T.a.instance;w.a.bindTexture(a,a.TEXTURE_2D,this._source),!S.a.Render.isConchApp&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);var s,o,h,l,u=t.data;return t.data instanceof Uint8ClampedArray&&(u=new Uint8Array(u.buffer)),a.texSubImage2D(a.TEXTURE_2D,0,e,n,t.width,t.height,a.RGBA,a.UNSIGNED_BYTE,u),!S.a.Render.isConchApp&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s=e/this._texW,o=n/this._texH,h=(e+t.width)/this._texW,l=(n+t.height)/this._texH,(r=r||new Array(8))[0]=s,r[1]=o,r[2]=h,r[3]=o,r[4]=h,r[5]=l,r[6]=s,r[7]=l,r}},{key:"addCharCanvas",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!this._source&&this.recreateResource();var r,a,s,o,h=T.a.instance;return w.a.bindTexture(h,h.TEXTURE_2D,this._source),!S.a.Render.isConchApp&&h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),h.texSubImage2D(h.TEXTURE_2D,0,e,i,h.RGBA,h.UNSIGNED_BYTE,t),!S.a.Render.isConchApp&&h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),S.a.Render.isConchApp?(r=e/this._texW,a=i/this._texH,s=(e+t.width)/this._texW,o=(i+t.height)/this._texH):(r=(e+1)/this._texW,a=(i+1)/this._texH,s=(e+t.width-1)/this._texW,o=(i+t.height-1)/this._texH),(n=n||new Array(8))[0]=r,n[1]=a,n[2]=s,n[3]=a,n[4]=s,n[5]=o,n[6]=r,n[7]=o,n}},{key:"fillWhite",value:function(){!this._source&&this.recreateResource();var t=T.a.instance,e=new Uint8Array(this._texW*this._texH*4);v()(e).call(e,255),t.texSubImage2D(t.TEXTURE_2D,0,0,0,this._texW,this._texH,t.RGBA,t.UNSIGNED_BYTE,e)}},{key:"discard",value:function(){S.a.stage.setGlobalRepaint(),this.destroy()}},{key:"destroy",value:function(){this.__destroyed=!0;var t=T.a.instance;this._source&&t.deleteTexture(this._source),this._source=null}},{key:"touchRect",value:function(t,e){this.lastTouchTm!=e&&(this.curUsedCovRate=0,this.curUsedCovRateAtlas=0,this.lastTouchTm=e);var n=i.gTextRender.atlasWidth*i.gTextRender.atlasWidth,r=S.a.TextAtlas.atlasGridW*S.a.TextAtlas.atlasGridW;this.curUsedCovRate+=t.bmpWidth*t.bmpHeight/n,this.curUsedCovRateAtlas+=Math.ceil(t.bmpWidth/S.a.TextAtlas.atlasGridW)*Math.ceil(t.bmpHeight/S.a.TextAtlas.atlasGridW)/(n/r)}},{key:"_getSource",value:function(){return this._source}},{key:"drawOnScreen",value:function(t,e){}},{key:"texture",get:function(){return this}}],[{key:"getTextTexture",value:function(t,e){return new i(t,e)}},{key:"clean",value:function(){var t=b.a.loopStTm;if(0===i.cleanTm&&(i.cleanTm=t),t-i.cleanTm>=i.gTextRender.checkCleanTextureDt){for(var e=0;e<i.poolLen;e++){var n=i.pool[e];t-n._discardTm>=i.gTextRender.destroyUnusedTextureDt&&(n.destroy(),i.pool[e]=i.pool[i.poolLen-1],i.poolLen--,e--)}i.cleanTm=t}}}]),i}(C.a);A.gTextRender=null,A.pool=new Array(10),A.poolLen=0,A.cleanTm=0;var M=function(){function t(){h()(this,t),this.texWidth=1024,this.texHeight=1024,this.texture=null,this.charMaps={},this.texHeight=this.texWidth=S.a.TextRender.atlasWidth,this.texture=A.getTextTexture(this.texWidth,this.texHeight),this.texWidth/t.atlasGridW>256&&(t.atlasGridW=Math.ceil(this.texWidth/256)),this.atlasgrid=new c(this.texWidth/t.atlasGridW,this.texHeight/t.atlasGridW,this.texture.id)}return u()(t,[{key:"setProtecteDist",value:function(t){}},{key:"getAEmpty",value:function(e,i,n){var r=this.atlasgrid.addRect(1,Math.ceil(e/t.atlasGridW),Math.ceil(i/t.atlasGridW),n);return r&&(n.x*=t.atlasGridW,n.y*=t.atlasGridW),r}},{key:"destroy",value:function(){for(var t in this.charMaps){this.charMaps[t].deleted=!0}this.texture.discard()}},{key:"printDebugInfo",value:function(){}},{key:"usedRate",get:function(){return this.atlasgrid._used}}]),t}();M.atlasGridW=16;var R=i(42),I=i(57),D=i(205),P=i(200),L=function(){function t(){h()(this,t),this.char="",this.deleted=!1,this.uv=new Array(8),this.pos=0,this.orix=0,this.oriy=0,this.touchTick=0,this.isSpace=!1}return u()(t,[{key:"touch",value:function(){var t=b.a.loopCount;this.touchTick!=t&&this.tex.touchRect(this,t),this.touchTick=t}}]),t}(),B=function(){function t(){h()(this,t),this.fontsz=16}return u()(t,[{key:"getWidth",value:function(t,e){return 0}},{key:"scale",value:function(t,e){}},{key:"getCharBmp",value:function(t,e,i,n,r,a,s,o,h,l){arguments.length>10&&void 0!==arguments[10]&&arguments[10];return null}},{key:"canvasWidth",get:function(){return 0},set:function(t){}}]),t}(),O=i(12);function F(t){var e=function(){if("undefined"==typeof Reflect||!_.a)return!1;if(_.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(_()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=k()(t);if(e){var r=k()(this).constructor;i=_()(n,arguments,r)}else i=n.apply(this,arguments);return m()(this,i)}}var N=function(t){y()(i,t);var e=F(i);function i(t,n){var r,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return h()(this,i),(r=e.call(this)).ctx=null,r.lastScaleX=1,r.lastScaleY=1,r.maxTexW=0,r.maxTexH=0,r.scaleFontSize=!0,r.showDbgInfo=!1,r.supportImageData=!0,r.maxTexW=t,r.maxTexH=n,r.scaleFontSize=a,r.supportImageData=s,r.showDbgInfo=o,i.canvas||(i.canvas=O.a.createElement("canvas"),i.canvas.width=1024,i.canvas.height=512,i.canvas.style.left="-10000px",i.canvas.style.position="absolute",document.body.appendChild(i.canvas),r.ctx=i.canvas.getContext("2d")),r}return u()(i,[{key:"getWidth",value:function(t,e){return this.ctx?(this.ctx._lastFont!=t&&(this.ctx.font=t,this.ctx._lastFont=t),this.ctx.measureText(e).width):0}},{key:"scale",value:function(t,e){if(!this.supportImageData)return this.lastScaleX=t,void(this.lastScaleY=e);this.lastScaleX==t&&this.lastScaleY==e||(this.ctx.setTransform(t,0,0,e,0,0),this.lastScaleX=t,this.lastScaleY=e)}},{key:"getCharBmp",value:function(t,e,n,r,a,s,o,h,l,u){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;if(!this.supportImageData)return this.getCharCanvas(t,e,n,r,a,s,o,h,l,u);var f=this.ctx,_=this.fontsz;f.font!=e&&(f.font=e,f._lastFont=e),s.width=f.measureText(t).width;var d=s.width*this.lastScaleX,v=s.height*this.lastScaleY;d+=(o+l)*this.lastScaleX,v+=(h+u)*this.lastScaleY,d=Math.ceil(d),v=Math.ceil(v);var p=(d=Math.min(d,i.canvas.width))+2*n+1,y=(v=Math.min(v,i.canvas.height))+2*n+1;c&&(p=Math.max(p,c[0]+c[2]+1),y=Math.max(y,c[1]+c[3]+1)),f.clearRect(0,0,p/this.lastScaleX+1,y/this.lastScaleY+1),f.save(),f.textBaseline="middle",n>0&&(f.strokeStyle=a,f.lineWidth=n,f.strokeText(t,o,h+_/2)),r&&(f.fillStyle=r,f.fillText(t,o,h+_/2)),this.showDbgInfo&&(f.strokeStyle="#ff0000",f.strokeRect(1,1,d-2,v-2),f.strokeStyle="#00ff00",f.strokeRect(o,h,s.width,s.height)),c&&-1==c[2]&&(c[2]=Math.ceil((s.width+2*n)*this.lastScaleX));var g=c?f.getImageData(c[0],c[1],c[2],c[3]+1):f.getImageData(0,0,d,v+1);return f.restore(),s.bmpWidth=g.width,s.bmpHeight=g.height,g}},{key:"getCharCanvas",value:function(t,e,n,r,a,s,o,h,l,u){var c=this.ctx;c.font!=e&&(c.font=e,c._lastFont=e),s.width=c.measureText(t).width;var f=s.width*this.lastScaleX,_=s.height*this.lastScaleY;f+=(o+l)*this.lastScaleX,_+=(h+u)*this.lastScaleY+1,f=Math.min(f,this.maxTexW),_=Math.min(_,this.maxTexH),i.canvas.width=Math.min(f+1,this.maxTexW),i.canvas.height=Math.min(_+1,this.maxTexH),c.font=e,c.clearRect(0,0,f+1+n,_+1+n),c.setTransform(1,0,0,1,0,0),c.save(),this.scaleFontSize&&c.scale(this.lastScaleX,this.lastScaleY),c.translate(o,h),c.textAlign="left";var d=this.fontsz;return c.textBaseline="middle",n>0?(c.strokeStyle=a,c.fillStyle=r,c.lineWidth=n,c.fillAndStrokeText?c.fillAndStrokeText(t,0,d/2):(c.strokeText(t,0,d/2),c.fillText(t,0,d/2))):r&&(c.fillStyle=r,c.fillText(t,0,d/2)),this.showDbgInfo&&(c.strokeStyle="#ff0000",c.strokeRect(0,0,f,_),c.strokeStyle="#00ff00",c.strokeRect(0,0,s.width,s.height)),c.restore(),s.bmpWidth=i.canvas.width,s.bmpHeight=i.canvas.height,i.canvas}},{key:"canvasWidth",get:function(){return i.canvas.width},set:function(t){i.canvas.width!=t&&(i.canvas.width=t,t>2048&&console.warn("画文字设置的宽度太大，超过2048了"),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.lastScaleX,this.lastScaleY))}}]),i}(B);N.canvas=null;var U=i(81);function G(t){var e=function(){if("undefined"==typeof Reflect||!_.a)return!1;if(_.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(_()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=k()(t);if(e){var r=k()(this).constructor;i=_()(n,arguments,r)}else i=n.apply(this,arguments);return m()(this,i)}}var Y=function(t){y()(i,t);var e=G(i);function i(){var t;return h()(this,i),(t=e.call(this)).lastFont="",t.lastScaleX=1,t.lastScaleY=1,t}return u()(i,[{key:"getWidth",value:function(t,e){return window.conchTextCanvas?(window.conchTextCanvas.font=t,this.lastFont=t,window.conchTextCanvas.measureText(e).width):0}},{key:"scale",value:function(t,e){this.lastScaleX=t,this.lastScaleY=e}},{key:"getCharBmp",value:function(t,e,i,n,r,a,s,o,h,l){arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(!window.conchTextCanvas)return null;window.conchTextCanvas.font=e,this.lastFont=e;a.width=window.conchTextCanvas.measureText(t).width,a.height;window.conchTextCanvas.scale&&window.conchTextCanvas.scale(this.lastScaleX,this.lastScaleY);var u=U.a.create(r),c=u.numColor,f=U.a.create(n),_=f.numColor,d=window.conchTextCanvas.getTextBitmapData(t,_,i>2?2:i,c);return a.bmpWidth=d.width,a.bmpHeight=d.height,d}}]),i}(B),W=function(){function t(){h()(this,t),this.fontSizeInfo={},this.mapFont={},this.fontID=0,this.mapColor=[],this.colorID=0,this.fontScaleX=1,this.fontScaleY=1,this._curStrPos=0,this.textAtlases=[],this.isoTextures=[],this.lastFont=null,this.fontSizeW=0,this.fontSizeH=0,this.fontSizeOffX=0,this.fontSizeOffY=0,this.renderPerChar=!0,this.tmpAtlasPos=new R.a,this.textureMem=0,S.a.TextAtlas=M;var e=!1,i=S.a.Laya.MiniAdpter;i&&i.systemInfo&&i.systemInfo.system&&(e="ios 10.1.1"===i.systemInfo.system.toLowerCase()),S.a.Browser.onMiniGame&&!e&&(t.isWan1Wan=!0),this.charRender=S.a.Render.isConchApp?new Y:new N(t.atlasWidth,t.atlasWidth,t.scaleFontWithCtx,!t.isWan1Wan,!1),t.textRenderInst=this,S.a.Laya.textRender=this,t.atlasWidth2=t.atlasWidth*t.atlasWidth}return u()(t,[{key:"setFont",value:function(e){var i;if(this.lastFont!=e){this.lastFont=e;var n=this.getFontSizeInfo(e._family),r=n>>24,a=n>>16&255,o=n>>8&255,h=255&n,l=e._size/t.standardFontSize;this.fontSizeOffX=Math.ceil(r*l),this.fontSizeOffY=Math.ceil(a*l),this.fontSizeW=Math.ceil(o*l),this.fontSizeH=Math.ceil(h*l),s()(i=e._font).call(i,"italic")>=0?this.fontStr=e._font.replace("italic",""):this.fontStr=e._font}}},{key:"getNextChar",value:function(t){var e=t.length,i=this._curStrPos;if(i>=e)return null;for(var n=i,r=0;n<e;n++){var a=t.charCodeAt(n);if(a>>>11==27){if(1==r)break;r=1,n++}else if(65038===a||65039===a);else if(8205==a)r=2;else if(0==r)r=1;else if(1==r)break}return this._curStrPos=n,t.substring(i,n)}},{key:"filltext",value:function(t,e,i,n,r,a,s,o,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(!(e.length<=0)){var u=D.a.Parse(r),c=0;switch(h){case"center":c=S.a.Context.ENUM_TEXTALIGN_CENTER;break;case"right":c=S.a.Context.ENUM_TEXTALIGN_RIGHT}this._fast_filltext(t,e,null,i,n,u,a,s,o,c,l)}}},{key:"fillWords",value:function(t,e,i,n,r,a,s,o){if(e&&!(e.length<=0)){var h="string"==typeof r?D.a.Parse(r):r;this._fast_filltext(t,null,e,i,n,h,a,s,o,0,0)}}},{key:"_fast_filltext",value:function(e,i,n,r,a,s,o,h,l,u){arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(!(i&&i.length<1||n&&n.length<1)){if(l<0&&(l=0),this.setFont(s),this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var c=1,f=1;if(S.a.Render.isConchApp&&!window.conchTextCanvas.scale||(c=e.getMatScaleX(),f=e.getMatScaleY()),c<1e-4||f<.1)return;c>1&&(this.fontScaleX=c),f>1&&(this.fontScaleY=f)}s._italic&&(e._italicDeg=13);var _=i,d=!n&&i instanceof P.a,v=i,p=!!n,y=d?_.pageChars:[],g=0;switch(d?(v=_._text,(g=_.width)<0&&(g=_.width=this.charRender.getWidth(this.fontStr,v))):g=v?this.charRender.getWidth(this.fontStr,v):0,u){case S.a.Context.ENUM_TEXTALIGN_CENTER:r-=g/2;break;case S.a.Context.ENUM_TEXTALIGN_RIGHT:r-=g}_&&y&&this.hasFreedText(y)&&(y=_.pageChars=[]);var m=null,x=this.renderPerChar=!d||t.forceSplitRender||p||d&&_.splitRender;if(!y||y.length<1)if(d&&(_.scalex=this.fontScaleX,_.scaley=this.fontScaleY),x){var k,T=0,b=0;for(this._curStrPos=0;;){if(n){var C=n[this._curStrPos++];C?(k=C.char,T=C.x,b=C.y):k=null}else k=this.getNextChar(v);if(!k)break;if(!(m=this.getCharRenderInfo(k,s,o,h,l,!1)))break;if(m.isSpace);else{var w=y[m.tex.id];if(w)w=w.words;else{var E={texgen:m.tex.genID,tex:m.tex,words:[]};y[m.tex.id]=E,w=E.words}w.push({ri:m,x:T,y:b,w:m.bmpWidth/this.fontScaleX,h:m.bmpHeight/this.fontScaleY}),T+=m.width}}}else{var A=t.noAtlas||g*this.fontScaleX>t.atlasWidth;m=this.getCharRenderInfo(v,s,o,h,l,A),y[0]={texgen:m.tex.genID,tex:m.tex,words:[{ri:m,x:0,y:0,w:m.bmpWidth/this.fontScaleX,h:m.bmpHeight/this.fontScaleY}]}}this._drawResortedWords(e,r,a,y),e._italicDeg=0}}},{key:"_drawResortedWords",value:function(t,e,i,n){var r=!!t._charSubmitCache&&t._charSubmitCache._enable,a=t._curMat;n.length;for(var s in n){var o=n[s];if(o){var h=o.words,l=h.length;if(!(l<=0))for(var u=n[s].tex,c=0;c<l;c++){var f=h[c],_=f.ri;if(!_.isSpace){if(_.touch(),t.drawTexAlign=!0,S.a.Render.isConchApp)t._drawTextureM(u.texture,e+f.x-_.orix,i+f.y-_.oriy,f.w,f.h,null,1,_.uv);else{var d=u;t._inner_drawTexture(d.texture,d.id,e+f.x-_.orix,i+f.y-_.oriy,f.w,f.h,a,_.uv,1,r)}t.touches&&t.touches.push(_)}}}}}},{key:"hasFreedText",value:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];if(n){var r=n.tex;if(r.__destroyed||r.genID!=n.texgen)return!0}}return!1}},{key:"getCharRenderInfo",value:function(e,i,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.mapFont[i._family];null==o&&(this.mapFont[i._family]=o=this.fontID++);var h=e+"_"+o+"_"+i._size+"_"+n;a>0&&(h+="_"+r+a),i._bold&&(h+="P"),1==this.fontScaleX&&1==this.fontScaleY||(h+=(20*this.fontScaleX|0)+"_"+(20*this.fontScaleY|0));var l,u,c=0,f=this.textAtlases.length;if(!s)for(c=0;c<f;c++)if(l=(u=this.textAtlases[c]).charMaps[h])return l.touch(),l;l=new L,this.charRender.scale(this.fontScaleX,this.fontScaleY),l.char=e,l.height=i._size;var _=S.a.Render.isConchApp?0:i._size/3|0,d=null;a||(a=0);var v=Math.ceil((this.charRender.getWidth(this.fontStr,e)+2*a)*this.fontScaleX);if(v>this.charRender.canvasWidth&&(this.charRender.canvasWidth=Math.min(2048,v+2*_)),s){if(this.charRender.fontsz=i._size,d=this.charRender.getCharBmp(e,this.fontStr,a,n,r,l,_,_,_,_,null)){var p=A.getTextTexture(d.width,d.height);p.addChar(d,0,0,l.uv),l.tex=p,l.orix=_,l.oriy=_,p.ri=l,this.isoTextures.push(p)}}else{var y=e.length,g=1*a,m=Math.ceil((this.fontSizeW+2*g)*this.fontScaleX),x=Math.ceil((this.fontSizeH+2*g)*this.fontScaleY);t.imgdtRect[0]=(_-this.fontSizeOffX-g)*this.fontScaleX|0,t.imgdtRect[1]=(_-this.fontSizeOffY-g)*this.fontScaleY|0,this.renderPerChar||1==y?(t.imgdtRect[2]=Math.max(v,m),t.imgdtRect[3]=Math.max(v,x)):(t.imgdtRect[2]=-1,t.imgdtRect[3]=x),this.charRender.fontsz=i._size,(d=this.charRender.getCharBmp(e,this.fontStr,a,n,r,l,_,_,_,_,t.imgdtRect))&&(u=this.addBmpData(d,l),t.isWan1Wan?(l.orix=_,l.oriy=_):(l.orix=this.fontSizeOffX+g,l.oriy=this.fontSizeOffY+g),u.charMaps[h]=l)}return l}},{key:"addBmpData",value:function(t,e){for(var i,n=t.width,r=t.height,a=this.textAtlases.length,s=!1,o=0;o<a&&!(s=(i=this.textAtlases[o]).getAEmpty(n,r,this.tmpAtlasPos));o++);if(!s){if(i=new M,this.textAtlases.push(i),!(s=i.getAEmpty(n,r,this.tmpAtlasPos)))throw"err1";this.cleanAtlases()}return s&&(i.texture.addChar(t,this.tmpAtlasPos.x,this.tmpAtlasPos.y,e.uv),e.tex=i.texture),i}},{key:"GC",value:function(){for(var e=0,i=this.textAtlases.length,n=t.destroyAtlasDt,r=0,a=b.a.loopCount,s=-1,o=0,h=null,l=null;e<i;e++){if(h=(l=this.textAtlases[e]).texture){h.curUsedCovRate,r+=h.curUsedCovRateAtlas;var u=l.usedRate-h.curUsedCovRateAtlas;o<u&&(o=u,s=e)}a-l.texture.lastTouchTm>n&&(t.showLog&&console.log(l.texture.id),l.destroy(),this.textAtlases[e]=this.textAtlases[i-1],i--,e--,s=-1)}for(this.textAtlases.length=i,i=this.isoTextures.length,e=0;e<i;e++)a-(h=this.isoTextures[e]).lastTouchTm>t.destroyUnusedTextureDt&&(h.ri.deleted=!0,h.ri.tex=null,h.destroy(),this.isoTextures[e]=this.isoTextures[i-1],i--,e--);this.isoTextures.length=i;var c=this.textAtlases.length>1&&this.textAtlases.length-r>=2;(t.atlasWidth*t.atlasWidth*4*this.textAtlases.length>t.cleanMem||c||t.simClean)&&(t.simClean=!1,t.showLog&&console.log("清理使用率低的贴图。总使用率:",r,":",this.textAtlases.length,"最差贴图:"+s),s>=0&&((l=this.textAtlases[s]).destroy(),this.textAtlases[s]=this.textAtlases[this.textAtlases.length-1],this.textAtlases.length=this.textAtlases.length-1)),A.clean()}},{key:"cleanAtlases",value:function(){}},{key:"getCharBmp",value:function(t){}},{key:"checkBmpLine",value:function(t,e,i,n){this.bmpData32.buffer!=t.data.buffer&&(this.bmpData32=new Uint32Array(t.data.buffer));for(var r=t.width*e+i,a=i;a<n;a++)if(0!=this.bmpData32[r++])return!0;return!1}},{key:"updateBbx",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.width,r=t.height,a=0,s=e[1],o=0,h=s;if(this.checkBmpLine(t,s,0,n))for(;;){if((h=(s+o)/2|0)+1>=s){e[1]=h;break}this.checkBmpLine(t,h,0,n)?s=h:o=h}if(e[3]>r)e[3]=r;else if(h=s=e[3],o=r,this.checkBmpLine(t,s,0,n))for(;;){if((h=(s+o)/2|0)-1<=s){e[3]=h;break}this.checkBmpLine(t,h,0,n)?s=h:o=h}if(!i){var l=e[0],u=n*e[1];for(h=e[1];h<e[3];h++){for(a=0;a<l;a++)if(0!=this.bmpData32[u+a]){l=a;break}u+=n}e[0]=l;var c=e[2];for(u=n*e[1],h=e[1];h<e[3];h++){for(a=c;a<n;a++)if(0!=this.bmpData32[u+a]){c=a;break}u+=n}e[2]=c}}},{key:"getFontSizeInfo",value:function(e){var i=this.fontSizeInfo[e];if(null!=i)return i;var n="bold "+t.standardFontSize+"px "+e;if(t.isWan1Wan){this.fontSizeW=1.5*this.charRender.getWidth(n,"有"),this.fontSizeH=1.5*t.standardFontSize;var r=this.fontSizeW<<8|this.fontSizeH;return this.fontSizeInfo[e]=r,r}t.pixelBBX[0]=t.standardFontSize/2,t.pixelBBX[1]=t.standardFontSize/2,t.pixelBBX[2]=t.standardFontSize,t.pixelBBX[3]=t.standardFontSize;var a=16,s=16;this.charRender.scale(1,1),t.tmpRI.height=t.standardFontSize,this.charRender.fontsz=t.standardFontSize;var o=this.charRender.getCharBmp("g",n,0,"red",null,t.tmpRI,a,s,16,16);S.a.Render.isConchApp&&(o.data=new Uint8ClampedArray(o.data)),this.bmpData32=new Uint32Array(o.data.buffer),this.updateBbx(o,t.pixelBBX,!1),o=this.charRender.getCharBmp("有",n,0,"red",null,t.tmpRI,s,s,16,16),S.a.Render.isConchApp&&(o.data=new Uint8ClampedArray(o.data)),this.bmpData32=new Uint32Array(o.data.buffer),t.pixelBBX[2]<a+t.tmpRI.width&&(t.pixelBBX[2]=a+t.tmpRI.width),this.updateBbx(o,t.pixelBBX,!1),S.a.Render.isConchApp&&(a=0,s=0);var h=Math.max(a-t.pixelBBX[0],0)<<24|Math.max(s-t.pixelBBX[1],0)<<16|t.pixelBBX[2]-t.pixelBBX[0]<<8|t.pixelBBX[3]-t.pixelBBX[1];return this.fontSizeInfo[e]=h,h}},{key:"printDbgInfo",value:function(){var e,i;for(var n in console.log("图集个数:"+this.textAtlases.length+",每个图集大小:"+t.atlasWidth+"x"+t.atlasWidth," 用canvas:",t.isWan1Wan),console.log("图集占用空间:"+t.atlasWidth*t.atlasWidth*4/1024/1024*this.textAtlases.length+"M"),console.log("缓存用到的字体:"),this.mapFont){var a=this.getFontSizeInfo(n),s=a>>24,o=a>>16&255,h=a>>8&255,l=255&a;console.log("    "+n," off:",s,o," size:",h,l)}var u=0;console.log("缓存数据:");var c=0,f=0;r()(e=this.textAtlases).call(e,(function(e){var i=e.texture.id,n=b.a.loopCount-e.texture.lastTouchTm,r=n>0?n+"帧以前":"当前帧";for(var a in c+=e.texture.curUsedCovRate,f+=e.texture.curUsedCovRateAtlas,console.log("--图集(id:"+i+",当前使用率:"+(1e3*e.texture.curUsedCovRate|0)+"‰","当前图集使用率:",(100*e.texture.curUsedCovRateAtlas|0)+"%","图集使用率:",100*e.usedRate|0,"%, 使用于:"+r+")--:"),e.charMaps){var s=e.charMaps[a];console.log("     off:",s.orix,s.oriy," bmp宽高:",s.bmpWidth,s.bmpHeight,"无效:",s.deleted,"touchdt:",b.a.loopCount-s.touchTick,"位置:",s.uv[0]*t.atlasWidth|0,s.uv[1]*t.atlasWidth|0,"字符:",s.char,"key:",a),u++}})),console.log("独立贴图文字("+this.isoTextures.length+"个):"),r()(i=this.isoTextures).call(i,(function(t){console.log("    size:",t._texW,t._texH,"touch间隔:",b.a.loopCount-t.lastTouchTm,"char:",t.ri.char)})),console.log("总缓存:",u,"总使用率:",c,"总当前图集使用率:",f)}},{key:"showAtlas",value:function(e,i,n,r,a,s){if(!this.textAtlases[e])return console.log("没有这个图集"),null;var o=new S.a.Sprite,h=this.textAtlases[e].texture,l={width:t.atlasWidth,height:t.atlasWidth,sourceWidth:t.atlasWidth,sourceHeight:t.atlasWidth,offsetX:0,offsetY:0,getIsReady:function(){return!0},_addReference:function(){},_removeReference:function(){},_getSource:function(){return h._getSource()},bitmap:{id:h.id},_uv:I.a.DEF_UV};return o.size=function(t,e){return this.width=t,this.height=e,o.graphics.clear(),o.graphics.drawRect(0,0,o.width,o.height,i),o.graphics.drawTexture(l,0,0,o.width,o.height),this},o.graphics.drawRect(0,0,a,s,i),o.graphics.drawTexture(l,0,0,a,s),o.pos(n,r),S.a.stage.addChild(o),o}},{key:"filltext_native",value:function(t,e,i,n,r,a,s,o,h,l){var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;if(!(e&&e.length<=0||i&&i.length<1)){var c=D.a.Parse(a),f=0;switch(l){case"center":f=S.a.Context.ENUM_TEXTALIGN_CENTER;break;case"right":f=S.a.Context.ENUM_TEXTALIGN_RIGHT}return this._fast_filltext(t,e,i,n,r,c,s,o,h,f,u)}}}]),t}();W.useOldCharBook=!1,W.atlasWidth=1024,W.noAtlas=!1,W.forceSplitRender=!1,W.forceWholeRender=!1,W.scaleFontWithCtx=!0,W.standardFontSize=32,W.destroyAtlasDt=10,W.checkCleanTextureDt=2e3,W.destroyUnusedTextureDt=3e3,W.cleanMem=104857600,W.isWan1Wan=!1,W.showLog=!1,W.debugUV=!1,W.tmpRI=new L,W.pixelBBX=[0,0,0,0],W.imgdtRect=[0,0,0,0],W.simClean=!1,A.gTextRender=W},function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var n=i(77),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(33),u=i(23),c=i(150),f=i(18),_=i(32),d=i(57),v=i(204),p=i(22),y=i(68),g=i(306),m=i(49),x=i(60),k=i(123),T=i(17),b=function(){function t(){s()(this,t)}return h()(t,null,[{key:"__init__",value:function(){r()(t)[u.a.ALPHA|u.a.TRANSFORM|u.a.GRAPHICS]=t.alpha_transform_drawLayaGL,r()(t)[u.a.ALPHA|u.a.GRAPHICS]=t.alpha_drawLayaGL,r()(t)[u.a.TRANSFORM|u.a.GRAPHICS]=t.transform_drawLayaGL,r()(t)[u.a.TRANSFORM|u.a.CHILDS]=t.transform_drawNodes,r()(t)[u.a.ALPHA|u.a.TRANSFORM|u.a.TEXTURE]=t.alpha_transform_drawTexture,r()(t)[u.a.ALPHA|u.a.TEXTURE]=t.alpha_drawTexture,r()(t)[u.a.TRANSFORM|u.a.TEXTURE]=t.transform_drawTexture,r()(t)[u.a.GRAPHICS|u.a.CHILDS]=t.drawLayaGL_drawNodes}},{key:"transform_drawTexture",value:function(e,i,n,r){e._style;var a=e.texture;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),i.drawTexture(a,-e.pivotX,-e.pivotY,e._width||a.width,e._height||a.height),i.restoreTransform(t.curMat)}},{key:"alpha_drawTexture",value:function(t,e,i,n){var r,a=t._style,s=t.texture;if((r=a.alpha)>.01||t._needRepaint()){var o=e.globalAlpha;e.globalAlpha*=r,e.drawTexture(s,i-a.pivotX+s.offsetX,n-a.pivotY+s.offsetY,t._width||s.width,t._height||s.height),e.globalAlpha=o}}},{key:"alpha_transform_drawTexture",value:function(e,i,n,r){var a,s=e._style,o=e.texture;if((a=s.alpha)>.01||e._needRepaint()){var h=i.globalAlpha;i.globalAlpha*=a,i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),i.drawTexture(o,-s.pivotX+o.offsetX,-s.pivotY+o.offsetY,e._width||o.width,e._height||o.height),i.restoreTransform(t.curMat),i.globalAlpha=h}}},{key:"alpha_transform_drawLayaGL",value:function(e,i,n,r){var a,s=e._style;if((a=s.alpha)>.01||e._needRepaint()){var o=i.globalAlpha;i.globalAlpha*=a,i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),e._graphics&&e._graphics._render(e,i,-s.pivotX,-s.pivotY),i.restoreTransform(t.curMat),i.globalAlpha=o}}},{key:"alpha_drawLayaGL",value:function(t,e,i,n){var r,a=t._style;if((r=a.alpha)>.01||t._needRepaint()){var s=e.globalAlpha;e.globalAlpha*=r,t._graphics&&t._graphics._render(t,e,i-a.pivotX,n-a.pivotY),e.globalAlpha=s}}},{key:"transform_drawLayaGL",value:function(e,i,n,r){var a=e._style;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),e._graphics&&e._graphics._render(e,i,-a.pivotX,-a.pivotY),i.restoreTransform(t.curMat)}},{key:"transform_drawNodes",value:function(e,i,n,r){var a=e._getBit(l.a.DRAWCALL_OPTIMIZE)&&i.drawCallOptimize(!0),s=e._style;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),n=-s.pivotX,r=-s.pivotY;var o,h=e._children,u=h.length;if(s.viewport){var c,f,_=s.viewport,d=_.x,v=_.y,p=_.right,y=_.bottom;for(g=0;g<u;++g)(o=h[g])._visible&&(c=o._x)<p&&c+o.width>d&&(f=o._y)<y&&f+o.height>v&&o.render(i,n,r)}else for(var g=0;g<u;++g)(o=h[g])._visible&&o.render(i,n,r);i.restoreTransform(t.curMat),a&&i.drawCallOptimize(!1)}},{key:"drawLayaGL_drawNodes",value:function(t,e,i,n){var r=t._getBit(l.a.DRAWCALL_OPTIMIZE)&&e.drawCallOptimize(!0),a=t._style;i-=a.pivotX,n-=a.pivotY,t._graphics&&t._graphics._render(t,e,i,n);var s,o=t._children,h=o.length;if(a.viewport){var u,c,f=a.viewport,_=f.x,d=f.y,v=f.right,p=f.bottom;for(y=0;y<h;++y)(s=o[y])._visible&&(u=s._x)<v&&u+s.width>_&&(c=s._y)<p&&c+s.height>d&&s.render(e,i,n)}else for(var y=0;y<h;++y)(s=o[y])._visible&&s.render(e,i,n);r&&e.drawCallOptimize(!1)}}]),t}();b.map={},b.curMat=new f.a;var C=i(0),w=function(){function t(e,i){if(s()(this,t),r()(b)[e])return this._fun=r()(b)[e],void(this._next=t.NORENDER);switch(this._next=i||t.NORENDER,e){case 0:return void(this._fun=this._no);case u.a.ALPHA:return void(this._fun=this._alpha);case u.a.TRANSFORM:return void(this._fun=this._transform);case u.a.BLEND:return void(this._fun=this._blend);case u.a.CANVAS:return void(this._fun=this._canvas);case u.a.MASK:return void(this._fun=this._mask);case u.a.CLIP:return void(this._fun=this._clip);case u.a.STYLE:return void(this._fun=this._style);case u.a.GRAPHICS:return void(this._fun=this._graphics);case u.a.CHILDS:return void(this._fun=this._children);case u.a.CUSTOM:return void(this._fun=this._custom);case u.a.TEXTURE:return void(this._fun=this._texture);case u.a.FILTERS:return void(this._fun=c.a._filter);case t.INIT:return void(this._fun=t._initRenderFun)}this.onCreate(e)}return h()(t,[{key:"onCreate",value:function(t){}},{key:"_style",value:function(t,e,i,n){var r=t._style;null!=r.render&&r.render(t,e,i,n);var a=this._next;a._fun.call(a,t,e,i,n)}},{key:"_no",value:function(t,e,i,n){}},{key:"_custom",value:function(t,e,i,n){t.customRender(e,i,n),this._next._fun.call(this._next,t,e,i-t.pivotX,n-t.pivotY)}},{key:"_clip",value:function(e,i,n,r){var a=this._next;if(a!=t.NORENDER){var s=e._style.scrollRect,o=s.width,h=s.height;0!==o&&0!==h&&(i.save(),i.clipRect(n,r,o,h),a._fun.call(a,e,i,n-s.x,r-s.y),i.restore())}}},{key:"_texture",value:function(e,i,n,r){var a=e.texture;a._getSource()&&i.drawTexture(a,n-e.pivotX+a.offsetX,r-e.pivotY+a.offsetY,e._width||a.width,e._height||a.height);var s=this._next;s!=t.NORENDER&&s._fun.call(s,e,i,n,r)}},{key:"_graphics",value:function(e,i,n,r){var a=e._style,s=e._graphics;s&&s._render(e,i,n-a.pivotX,r-a.pivotY);var o=this._next;o!=t.NORENDER&&o._fun.call(o,e,i,n,r)}},{key:"_image",value:function(t,e,i,n){var r=t._style;e.drawTexture2(i,n,r.pivotX,r.pivotY,t.transform,t._graphics._one)}},{key:"_image2",value:function(t,e,i,n){var r=t._style;e.drawTexture2(i,n,r.pivotX,r.pivotY,t.transform,t._graphics._one)}},{key:"_alpha",value:function(t,e,i,n){var r;if((r=t._style.alpha)>.01||t._needRepaint()){var a=e.globalAlpha;e.globalAlpha*=r;var s=this._next;s._fun.call(s,t,e,i,n),e.globalAlpha=a}}},{key:"_transform",value:function(e,i,n,r){var a=e.transform,s=this._next;e._style;a&&s!=t.NORENDER?(i.save(),i.transform(a.a,a.b,a.c,a.d,a.tx+n,a.ty+r),s._fun.call(s,e,i,0,0),i.restore()):s!=t.NORENDER&&s._fun.call(s,e,i,n,r)}},{key:"_children",value:function(t,e,i,n){var r,a=t._style,s=t._children,o=s.length;i-=t.pivotX,n-=t.pivotY;var h=t._getBit(l.a.DRAWCALL_OPTIMIZE)&&e.drawCallOptimize(!0);if(a.viewport){var u,c,f=a.viewport,_=f.x,d=f.y,v=f.right,p=f.bottom;for(y=0;y<o;++y)(r=s[y])._visible&&(u=r._x)<v&&u+r.width>_&&(c=r._y)<p&&c+r.height>d&&r.render(e,i,n)}else for(var y=0;y<o;++y)(r=s[y])._visible&&r.render(e,i,n);h&&e.drawCallOptimize(!1)}},{key:"_canvas",value:function(t,e,i,n){var r=t._cacheStyle,a=this._next;if(r.enableCanvasRender){"bitmap"===r.cacheAs?p.a.canvasBitmap++:p.a.canvasNormal++;var s=!1,o=!1;if(r.canvas){var h=r.canvas,l=(h.context,h.touches);if(l)for(var u=0;u<l.length;u++)if(l[u].deleted){o=!0;break}s=h.isCacheValid&&!h.isCacheValid()}if(t._needRepaint()||!r.canvas||o||s||C.a.stage.isGlobalRepaint())if("normal"===r.cacheAs){if(e._targets)return void a._fun.call(a,t,e,i,n);this._canvas_webgl_normal_repaint(t,e)}else this._canvas_repaint(t,e,i,n);var c=r.cacheRect;e.drawCanvas(r.canvas,i+c.x,n+c.y,c.width,c.height)}else a._fun.call(a,t,e,i,n)}},{key:"_canvas_repaint",value:function(t,e,i,n){var r,a,s,o,h,l,u,c,f,_=t._cacheStyle,d=this._next,v=_.canvas,y=_.cacheAs;if(u=(f=_._calculateCacheRect(t,y,i,n)).x,c=f.y,h=(o=_.cacheRect).width*u,l=o.height*c,a=o.x,s=o.y,"bitmap"===y&&(h>2048||l>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),_.releaseContext(),void d._fun.call(d,t,e,i,n);if(v||(_.createContext(),v=_.canvas),(r=v.context).sprite=t,(v.width!=h||v.height!=l)&&v.size(h,l),"bitmap"===y?r.asBitmap=!0:"normal"===y&&(r.asBitmap=!1),r.clear(),1!=u||1!=c){var g=r;g.save(),g.scale(u,c),d._fun.call(d,t,r,-a,-s),g.restore(),t._applyFilters()}else g=r,d._fun.call(d,t,r,-a,-s),t._applyFilters();_.staticCache&&(_.reCache=!1),p.a.canvasReCache++}},{key:"_canvas_webgl_normal_repaint",value:function(t,e){var i=t._cacheStyle,n=this._next,r=i.canvas,a=i.cacheAs;i._calculateCacheRect(t,a,0,0),r||(r=i.canvas=new g.a(e,t));var s=r.context;r.startRec(),n._fun.call(n,t,s,t.pivotX,t.pivotY),t._applyFilters(),p.a.canvasReCache++,r.endRec()}},{key:"_blend",value:function(t,e,i,n){var r=t._style,a=this._next;r.blendMode?(e.save(),e.globalCompositeOperation=r.blendMode,a._fun.call(a,t,e,i,n),e.restore()):a._fun.call(a,t,e,i,n)}},{key:"_mask",value:function(e,i,n,r){var a=this._next,s=e.mask,o=i;if(s){o.save();var h=o.globalCompositeOperation,l=new _.a;if(l.copyFrom(s.getBounds()),l.width=Math.round(l.width),l.height=Math.round(l.height),l.x=Math.round(l.x),l.y=Math.round(l.y),l.width>0&&l.height>0){var u=l.width,c=l.height,p=v.a.getRT(u,c);o.breakNextMerge(),o.pushRT(),o.addRenderObject(k.a.create([o,p,u,c],t.tmpTarget,this)),s.render(o,-l.x,-l.y),o.breakNextMerge(),o.popRT(),o.save(),o.clipRect(n+l.x-e.getStyle().pivotX,r+l.y-e.getStyle().pivotY,u,c),a._fun.call(a,e,o,n,r),o.restore(),h=o.globalCompositeOperation,o.addRenderObject(k.a.create(["mask"],t.setBlendMode,this));var y=x.a.create(m.a.TEXTURE2D,0),g=d.a.INV_UV;o.drawTarget(p,n+l.x-e.getStyle().pivotX,r+l.y-e.getStyle().pivotY,u,c,f.a.TEMP.identity(),y,g,6),o.addRenderObject(k.a.create([p],t.recycleTarget,this)),o.addRenderObject(k.a.create([h],t.setBlendMode,this))}o.restore()}else a._fun.call(a,e,i,n,r)}}],[{key:"__init__",value:function(){var e,i,n;for(b.__init__(),n=new t(t.INIT,null),i=t.renders.length=2*u.a.CHILDS,e=0;e<i;e++)t.renders[e]=n;t.renders[0]=new t(0,null)}},{key:"_initRenderFun",value:function(e,i,n,r){var a=e._renderType;(t.renders[a]=t._getTypeRender(a))._fun(e,i,n,r)}},{key:"_getTypeRender",value:function(e){if(r()(b)[e])return new t(e,null);for(var i=null,n=u.a.CHILDS;n>0;)n&e&&(i=new t(n,i)),n>>=1;return i}},{key:"tmpTarget",value:function(t,e,i,n){e.start(),e.clear(0,0,0,0)}},{key:"recycleTarget",value:function(t){v.a.releaseRT(t)}},{key:"setBlendMode",value:function(t){var e=T.a.mainContext;y.a.targetFns[y.a.TOINT[t]](e)}}]),t}();w.INIT=69905,w.renders=[],w.NORENDER=new w(0,null),w.tempUV=new Array(8)},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n=i(513).charAt,r=i(219),a=i(341),s=r.set,o=r.getterFor("String Iterator");a(String,"String",(function(t){s(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=o(this),i=e.string,r=e.index;return r>=i.length?{value:void 0,done:!0}:(t=n(i,r),e.index+=t.length,{value:t,done:!1})}))},function(t,e,i){var n=i(65),r=i(86),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(n[t])||a(r[t]):n[t]&&n[t][e]||r[t]&&r[t][e]}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=function(){function t(){r()(this,t),this.clear()}return s()(t,[{key:"clear",value:function(){this.submitType=-1,this.blendShader=this.other=0}},{key:"copyFrom",value:function(t){this.other=t.other,this.blendShader=t.blendShader,this.submitType=t.submitType}},{key:"copyFrom2",value:function(t,e,i){this.other=i,this.submitType=e}},{key:"equal3_2",value:function(t,e,i){return this.submitType===e&&this.other===i&&this.blendShader===t.blendShader}},{key:"equal4_2",value:function(t,e,i){return this.submitType===e&&this.other===i&&this.blendShader===t.blendShader}},{key:"equal_3",value:function(t){return this.submitType===t.submitType&&this.blendShader===t.blendShader}},{key:"equal",value:function(t){return this.other===t.other&&this.submitType===t.submitType&&this.blendShader===t.blendShader}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(6),h=i.n(o),l=i(8),u=i.n(l),c=i(2),f=i.n(c),_=i(226),d=i(0),v=i(10);function p(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f()(t);if(e){var a=f()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var y=function(t){h()(i,t);var e=p(i);function i(){return s()(this,i),e.apply(this,arguments)}return i}(_.a);d.a.regClass(y),v.a.regClass("laya.ui.VScrollBar",y),v.a.regClass("Laya.VScrollBar",y)},function(t,e,i){"use strict";i.d(e,"a",(function(){return R}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(35),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(84),x=i(70),k=i(69),T=i(63),b=i(5),C=i(42),w=i(21),S=i(19),E=i(0),A=i(10);function M(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var R=function(t){d()(i,t);var e=M(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s()(this,i),(t=e.call(this)).isVertical=!0,t.showLabel=!0,t._max=100,t._min=0,t._tick=1,t._value=0,i.label||(i.label=new x.a),t.skin=n,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f()(g()(i.prototype),"destroy",this).call(this,t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._progress&&this._progress.destroy(t),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null}},{key:"createChildren",value:function(){this.addChild(this._bg=new k.a),this.addChild(this._bar=new T.a)}},{key:"initialize",value:function(){this._bar.on(b.a.MOUSE_DOWN,this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0}},{key:"onBarMouseDown",value:function(t){var e=E.a;this._globalSacle||(this._globalSacle=new C.a),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=e.stage.mouseX,this._ty=e.stage.mouseY,e.stage.on(b.a.MOUSE_MOVE,this,this.mouseMove),e.stage.once(b.a.MOUSE_UP,this,this.mouseUp),e.stage.once(b.a.MOUSE_OUT,this,this.mouseUp),this.showValueText()}},{key:"showValueText",value:function(){if(this.showLabel){var t=i.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar._x+20,t.y=.5*(this._bar.height-t.height)+this._bar._y):(t.y=this._bar._y-20,t.x=.5*(this._bar.width-t.width)+this._bar._x)}}},{key:"hideValueText",value:function(){i.label&&i.label.removeSelf()}},{key:"mouseUp",value:function(t){var e=E.a.stage;e.off(b.a.MOUSE_MOVE,this,this.mouseMove),e.off(b.a.MOUSE_UP,this,this.mouseUp),e.off(b.a.MOUSE_OUT,this,this.mouseUp),this.sendChangeEvent(b.a.CHANGED),this.hideValueText()}},{key:"mouseMove",value:function(t){var e=E.a.stage,i=this._value;if(this.isVertical?(this._bar.y+=(e.mouseY-this._ty)/this._globalSacle.y,this._bar._y>this._maxMove?this._bar.y=this._maxMove:this._bar._y<0&&(this._bar.y=0),this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x+=(e.mouseX-this._tx)/this._globalSacle.x,this._bar._x>this._maxMove?this._bar.x=this._maxMove:this._bar._x<0&&(this._bar.x=0),this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width)),this._tx=e.mouseX,this._ty=e.mouseY,0!=this._tick){var n=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*n)/n}this._value!=i&&this.sendChangeEvent(),this.showValueText()}},{key:"sendChangeEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.a.CHANGE;this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)}},{key:"_skinLoaded",value:function(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var t=this._skin.replace(".png","$progress.png");w.a.getRes(t)&&(this._progress||(this.addChild(this._progress=new k.a),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=t),this.setBarPoint(),this.callLater(this.changeValue),this._sizeChanged(),this.event(b.a.LOADED)}},{key:"setBarPoint",value:function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))}},{key:"measureWidth",value:function(){return Math.max(this._bg.width,this._bar.width)}},{key:"measureHeight",value:function(){return Math.max(this._bg.height,this._bar.height)}},{key:"_sizeChanged",value:function(){f()(g()(i.prototype),"_sizeChanged",this).call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()}},{key:"setSlider",value:function(t,e,i){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=i<t?t:i>e?e:i}},{key:"changeValue",value:function(){if(0!=this.tick){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t}this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e=this._max-this._min;0===e&&(e=1),this.isVertical?(this._bar.y=(this._value-this._min)/e*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width))}},{key:"onBgMouseDown",value:function(t){var e=this._bg.getMousePoint();this.isVertical?this.value=e.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e.x/(this.width-this._bar.width)*(this._max-this._min)+this._min}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._skin&&!w.a.getRes(this._skin)?E.a.loader.load([this._skin,this._skin.replace(".png","$bar.png")],S.a.create(this,this._skinLoaded)):this._skinLoaded())}},{key:"sizeGrid",get:function(){return this._bg.sizeGrid},set:function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}},{key:"tick",get:function(){return this._tick},set:function(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}},{key:"max",get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}},{key:"min",get:function(){return this._min},set:function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}},{key:"value",get:function(){return this._value},set:function(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}},{key:"allowClickBack",get:function(){return this._allowClickBack},set:function(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on(b.a.MOUSE_DOWN,this,this.onBgMouseDown):this._bg.off(b.a.MOUSE_DOWN,this,this.onBgMouseDown))}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):u()(g()(i.prototype),"dataSource",t,this,!0)},get:function(){return f()(g()(i.prototype),"dataSource",this)}},{key:"bar",get:function(){return this._bar}}]),i}(m.a);R.label=null,E.a.regClass(R),A.a.regClass("laya.ui.Slider",R),A.a.regClass("Laya.Slider",R)},function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(7),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(226),g=i(0),m=i(10);function x(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var k=function(t){f()(i,t);var e=x(i);function i(){return s()(this,i),e.apply(this,arguments)}return h()(i,[{key:"initialize",value:function(){u()(p()(i.prototype),"initialize",this).call(this),this.slider.isVertical=!1}}]),i}(y.a);g.a.regClass(k),m.a.regClass("laya.ui.HScrollBar",k),m.a.regClass("Laya.HScrollBar",k)},function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i(67),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(16),u=i(3),c=i.n(u),f=i(6),_=i.n(f),d=i(8),v=i.n(d),p=i(2),y=i.n(p);function g(t){var e=function(){if("undefined"==typeof Reflect||!c.a)return!1;if(c.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(c()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=c()(n,arguments,r)}else i=n.apply(this,arguments);return v()(this,i)}}var m=function(t){_()(i,t);var e=g(i);function i(){return s()(this,i),e.call(this)}return i}(function(){function t(){s()(this,t),this._nativeVertexArrayObject=l.a.layaGPUInstance.createVertexArray()}return h()(t,[{key:"bind",value:function(){t._curBindedBufferState!==this&&(l.a.layaGPUInstance.bindVertexArray(this._nativeVertexArrayObject),t._curBindedBufferState=this)}},{key:"unBind",value:function(){if(t._curBindedBufferState!==this)throw"BufferState: must call bind() function first.";l.a.layaGPUInstance.bindVertexArray(null),t._curBindedBufferState=null}},{key:"destroy",value:function(){l.a.layaGPUInstance.deleteVertexArray(this._nativeVertexArrayObject)}},{key:"bindForNative",value:function(){l.a.instance.bindVertexArray(this._nativeVertexArrayObject),t._curBindedBufferState=this}},{key:"unBindForNative",value:function(){l.a.instance.bindVertexArray(null),t._curBindedBufferState=null}}]),t}()),x=i(99),k=i(307),T=i(308),b=function(){function t(e,i,n){s()(this,t),this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._quadNum=0,this.canReuse=!1,this._stride=e,this._vb=new T.a(e,l.a.instance.DYNAMIC_DRAW),i?this._vb._resizeBuffer(i,!1):x.a.webGL2D_MeshAllocMaxMem&&this._vb._resizeBuffer(65536*e,!1),this._ib=new k.a,n&&this._ib._resizeBuffer(n,!1)}return h()(t,[{key:"cloneWithNewVB",value:function(){var e=new t(this._stride,0,0);return e._ib=this._ib,e._quadNum=this._quadNum,e._attribInfo=this._attribInfo,e}},{key:"cloneWithNewVBIB",value:function(){var e=new t(this._stride,0,0);return e._attribInfo=this._attribInfo,e}},{key:"getVBW",value:function(){return this._vb.setNeedUpload(),this._vb}},{key:"getVBR",value:function(){return this._vb}},{key:"getIBR",value:function(){return this._ib}},{key:"getIBW",value:function(){return this._ib.setNeedUpload(),this._ib}},{key:"createQuadIB",value:function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e=this._ib.getUint16Array(),i=0,n=0,r=0;r<t;r++)e[i++]=n,e[i++]=n+2,e[i++]=n+1,e[i++]=n,e[i++]=n+3,e[i++]=n+2,n+=4;this._ib.setNeedUpload()}},{key:"setAttributes",value:function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"}},{key:"configVAO",value:function(t){var e;if(!this._applied){this._applied=!0,this._vao||(this._vao=new m),r()(e=this._vao).call(e),this._vb._bindForVAO(),this._ib.setNeedUpload(),this._ib._bind_uploadForVAO();for(var i=this._attribInfo.length/3,n=0,a=0;a<i;a++){var s=this._attribInfo[n+1],o=this._attribInfo[n],h=this._attribInfo[n+2];t.enableVertexAttribArray(a),t.vertexAttribPointer(a,s,o,!1,this._stride,h),n+=3}this._vao.unBind()}}},{key:"useMesh",value:function(t){var e,i,n,a;this._applied||this.configVAO(t),r()(e=this._vao).call(e),r()(i=this._vb).call(i),this._ib._bind_upload()||r()(n=this._ib).call(n),this._vb._bind_upload()||r()(a=this._vb).call(a)}},{key:"getEleNum",value:function(){return this._ib.getBuffer().byteLength/2}},{key:"releaseMesh",value:function(){}},{key:"destroy",value:function(){}},{key:"clearVB",value:function(){this._vb.clear()}}]),t}();b._gvaoid=0},function(t,e,i){"use strict";i.d(e,"a",(function(){return ot})),i.d(e,"d",(function(){return ht})),i.d(e,"e",(function(){return lt})),i.d(e,"b",(function(){return gt})),i.d(e,"f",(function(){return kt})),i.d(e,"c",(function(){return Tt}));var n=i(24),r=i.n(n),a=i(27),s=i.n(a),o=i(28),h=i.n(o),l=i(29),u=i.n(l),c=i(30),f=i.n(c),_=i(15),d=i.n(_),v=i(14),p=i.n(v),y=i(210),g=i.n(y),m=i(53),x=i.n(m),k=i(39),T=i.n(k),b=i(9),C=i.n(b),w=i(237),S=i.n(w),E=i(67),A=i.n(E),M=i(101),R=i.n(M),I=i(1),D=i.n(I),P=i(4),L=i.n(P),B={closeOther:!1,closeOnSide:!0,closeByGroup:!1,closeByName:!1,shadowAlpha:.7,shadowColor:"#000000",autoClose:!1},O=i(94),F=i(72),N=i(78),U=i(19),G=i(95),Y=i(124),W=i(5),V=i(26);function X(t){if(void 0===u.a||null==h()(t)){if(s()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return H(t,e);var n=d()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return f()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=r()(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var z=function(t,e,i,n){return new(i||(i=p.a))((function(r,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}h((n=n.apply(t,e||[])).next())}))},j=function(t){var e=this;t.HonorEffectTween&&t.HonorEffectTween.complete(),t.HonorEffectTween=F.a.from(t,{x:V.a.stage.width/2,y:V.a.stage.height/2,scaleX:.2,scaleY:.2,alpha:0},300,N.a.backOut,U.a.create(this,(function(){t.HonorEffectTween=void 0,t.scale(1,1),t.alpha=1,e.doOpen(t)})),0,!1,!1)},K=function(t){var e=this;t.HonorEffectTween&&t.HonorEffectTween.complete(),t.HonorEffectTween=F.a.to(t,{x:V.a.stage.width/2,y:V.a.stage.height/2,scaleX:0,scaleY:0,alpha:0},300,N.a.backIn,U.a.create(this,(function(){t.HonorEffectTween=void 0,t.scale(1,1),t.alpha=1,e.doClose(t)})),0,!1,!1)},q=function(){function t(){var e;D()(this,t),this.wait_dialog_task=new R.a,this.open_dialog_list=[],this.dialog_pool_list=[],Y.a.closeDialogOnSide=!1;var i=G.a.manager;Object(O.d)(i,"doClose",A()(e=this.injectDoCloseAfter).call(e,this)),i.popupEffectHandler=new U.a(i,j),i.closeEffectHandler=new U.a(i,K),this.dialog_manager=i}return L()(t,[{key:"onResize",value:function(t,e){var i,n=X(this.open_dialog_list);try{for(n.s();!(i=n.n()).done;){var r=i.value.dialog;r.onResize&&r.onResize(t,e)}}catch(t){n.e(t)}finally{n.f()}}},{key:"openDialog",value:function(t,e){return z(this,void 0,void 0,C.a.mark((function i(){var n,r,a,s,o,h,l,u,c,f,_,d=this;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t,t.dialog&&(n=(s=t).dialog,r=s.use_exist,a=s.use_exist),o=this.wait_dialog_task,h=this.open_dialog_list,!r){i.next=13;break}if(!(u=o.get(n))){i.next=11;break}return i.next=8,u.then((function(t){return t}));case 8:l=i.sent,i.next=13;break;case 11:(c=S()(h).call(h,(function(t){return t.url===n})))&&(l=c.dialog);case 13:if(l){i.next=19;break}return f=this.createDialog(n),o.set(n,f.then((function(t){return o.delete(n),t}))),i.next=18,f;case 18:l=i.sent;case 19:return _=this.setDialogConfig(n,l,e),Object(O.a)(l).then((function(){if(l.onResize){var t=V.a.stage,e=t.width,i=t.height;l.onResize(e,i)}var n=l.popupEffect;void 0!==a&&!1===a&&(l.popupEffect=null),_.beforeOpen&&_.beforeOpen(l),l.open(_.closeOther),n&&(l.popupEffect=n),d.afterOpen(l),d.checkMask()})),i.next=23,Object(O.b)(l);case 23:return i.abrupt("return",l);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"createDialog",value:function(t){var e=this;return new p.a((function(i,n){return z(e,void 0,void 0,C.a.mark((function e(){var n,r,a,s,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.dialog_pool_list,r=0;case 2:if(!(r<n.length)){e.next=11;break}if((a=n[r]).url!==t){e.next=8;break}return T()(n).call(n,r,1),s=a.dialog,e.abrupt("return",i(s));case 8:r++,e.next=2;break;case 11:if("string"!=typeof t){e.next=17;break}return e.next=14,ht.loadScene("Dialog",t);case 14:o=e.sent,e.next=24;break;case 17:if("function"!=typeof t){e.next=23;break}return e.next=20,Object(O.c)(t).then((function(t){return i(t)}));case 20:o=e.sent,e.next=24;break;case 23:t instanceof G.a&&(o=t);case 24:i(o);case 25:case"end":return e.stop()}}),e,this)})))}))}},{key:"setDialogConfig",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.open_dialog_list;i=x()(x()(x()({},B),e.config),i);var r=S()(n).call(n,(function(t){return t.dialog===e}));return r?r.config=i:n.push({url:t,dialog:e,config:i}),i}},{key:"getDialogConfig",value:function(t){var e=this.open_dialog_list,i=S()(e).call(e,(function(e){return e.dialog===t}));return i&&i.config}},{key:"injectDoCloseAfter",value:function(t,e,i){for(var n,r=this.open_dialog_list,a=this.dialog_pool_list,s=0;s<r.length;s++){var o=r[s];if(o.dialog===i){n=o,T()(r).call(r,s,1);break}}this.checkMask(),n&&!i.destroyed&&a.push(n)}},{key:"afterOpen",value:function(t){var e=this.getDialogConfig(t);e&&e.autoClose&&V.a.timer.once(e.autoClose,t,t.close)}},{key:"checkMask",value:function(){for(var t=this,e=this.dialog_manager,i=e.maskLayer,n=function(n){var r=e.getChildAt(n);if(r&&r.isModal){var a=t.getDialogConfig(r);if(!a)return"continue";Y.a.popupBgAlpha=a.shadowAlpha,Y.a.popupBgColor=a.shadowColor,a.closeOnSide&&(i.offAllCaller(e),i.once(W.a.CLICK,e,(function(){r.close()})));var s=i.width,o=i.height;return i.graphics.clear(!0),i.graphics.drawRect(0,0,s,o,Y.a.popupBgColor),i.alpha=Y.a.popupBgAlpha,{v:void 0}}},r=e.numChildren-1;r>-1;r--){var a=n(r);switch(a){case"continue":continue;default:if("object"===g()(a))return a.v}}}},{key:"closeAllDialogs",value:function(){this.dialog_manager.closeAll()}},{key:"getDialogsByGroup",value:function(t){this.dialog_manager.getDialogsByGroup(t)}},{key:"closeDialogsByGroup",value:function(t){this.dialog_manager.closeByGroup(t)}},{key:"getDialogByName",value:function(t){var e,i=X(this.open_dialog_list);try{for(i.s();!(e=i.n()).done;){var n=e.value.dialog;if(n.name===t)return n}}catch(t){i.e(t)}finally{i.f()}}},{key:"closeDialogByName",value:function(t){var e,i=X(this.open_dialog_list);try{for(i.s();!(e=i.n()).done;){var n=e.value.dialog;if(n.name===t)return n.close()}}catch(t){i.e(t)}finally{i.f()}}},{key:"hideMask",value:function(t){this.dialog_manager.maskLayer.visible=t}}]),t}(),Z=i(122);function Q(t){if(void 0===u.a||null==h()(t)){if(s()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return $(t,e);var n=d()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return f()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=r()(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var J=function(t,e,i,n){return new(i||(i=p.a))((function(r,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}h((n=n.apply(t,e||[])).next())}))},tt=function(){function t(){D()(this,t),this.sceneChangeBeforeListener=[],this.sceneChangeAfterListener=[],this.sceneClassMap={},this.scene_pool=new R.a}return L()(t,[{key:"onResize",value:function(t,e){this.cur_scene&&(this.cur_scene.onResize?this.cur_scene.onResize(t,e):this.cur_scene.size(t,e))}},{key:"getCurScene",value:function(){return this.cur_scene}},{key:"switchScene",value:function(t,e){var i=this.scene_pool,n=V.a.stage,r=n.width,a=n.height,s=this.cur_scene,o=s?s.url:void 0;return this.cur_scene=e,e.open(!0),this.onResize(r,a),s&&!s.destroyed&&i.set(o,s),{cur:e.url,prev:o}}},{key:"callChangeListener",value:function(t){var e=[];"before"===t?e=this.sceneChangeBeforeListener:"after"===t&&(e=this.sceneChangeAfterListener);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var a,s=Q(e);try{for(s.s();!(a=s.n()).done;){var o=a.value,h=o.apply(void 0,n);if(h)return h}}catch(t){s.e(t)}finally{s.f()}}},{key:"runScene",value:function(t){for(var e=this,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return new p.a((function(i,r){return J(e,void 0,void 0,C.a.mark((function e(){var a,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callChangeListener("before",this.cur_scene&&this.cur_scene.url,t)){e.next=3;break}return e.abrupt("return",r("has callChangeListener interrupt open:> ".concat(t," ")));case 3:if(a=this.scene_pool.get(t)){e.next=18;break}if("string"!=typeof t){e.next=11;break}return e.next=8,ht.loadScene("Scene",t);case 8:a=e.sent,e.next=18;break;case 11:if("function"!=typeof t){e.next=17;break}return a=new t,e.next=15,new p.a((function(e,i){Object(O.c)(t).then((function(t){return e(t)}))}));case 15:e.next=18;break;case 17:t instanceof Z.a&&(a=t);case 18:Object(O.b)(a).then((function(){i(a)})),s=this.switchScene(n,a),this.callChangeListener("after",s.cur,s.prev);case 21:case"end":return e.stop()}}),e,this)})))}))}}]),t}(),et=i(115),it=i.n(et),nt=i(227),rt=i(52);function at(t){if(void 0===u.a||null==h()(t)){if(s()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return st(t,e);var n=d()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return f()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=r()(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ot,ht,lt,ut=function(t,e,i,n){return new(i||(i=p.a))((function(r,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}h((n=n.apply(t,e||[])).next())}))},ct=function(){function t(){D()(this,t),this.load_tasks=new it.a,this.load_map=new R.a}return L()(t,[{key:"loadScene",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&"Scene"===t&&V.a.loader.clearUnLoaded();var r=new p.a((function(n,r){("Scene"===t?Z.a:G.a).load(e,U.a.create(i,(function(t){n(t)})),U.a.create(i,i.setLoadProgress,[t],!1))}));return n||this.addLoadTask(t,r),r}},{key:"preLoad",value:function(t,e){this.loadScene(t,e,!0)}},{key:"load",value:function(t,e){var i=this,n=new p.a((function(n,r){return ut(i,void 0,void 0,C.a.mark((function i(){var r,a=this;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e&&(r=function(t){a.setLoadProgress(e,t)}),i.next=3,Object(nt.a)(t,r);case 3:return i.abrupt("return",n());case 4:case"end":return i.stop()}}),i)})))}));return this.addLoadTask(e,n),n}},{key:"addLoadTask",value:function(t,e){var i=this;if(t){var n=this.load_tasks;this.setLoadViewVisible(t,!0);var r=p.a.all([e,Object(rt.f)(1)]).then((function(){var e,a=!1,s=at(n);try{for(s.s();!(e=s.n()).done;){var o=e.value;o.task!==r?o.type===t&&(a=!0):n.delete(o)}}catch(t){s.e(t)}finally{s.f()}a||i.setLoadViewVisible(t,!1)}));this.load_tasks.add({task:r,type:t})}}},{key:"setLoadView",value:function(t,e){return ut(this,void 0,void 0,C.a.mark((function i(){var n,r;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n="Scene"===t?Z.a:G.a,i.next=3,new p.a((function(t,i){n.load(e,U.a.create(null,(function(e){t(e)})))}));case 3:r=i.sent,this.load_map.set(t,r);case 5:case"end":return i.stop()}}),i,this)})))}},{key:"setLoadViewVisible",value:function(t,e){var i=this.load_map.get(t);i&&(e?i.onShow():i.onHide())}},{key:"setLoadProgress",value:function(t,e){var i=this.load_map.get(t);i&&i.onProgress(e)}}]),t}(),ft=i(201),_t=i.n(ft),dt=i(61),vt=function(t,e,i,n){return new(i||(i=p.a))((function(r,a){function s(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}h((n=n.apply(t,e||[])).next())}))};function pt(t){if(void 0===u.a||null==h()(t)){if(s()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return yt(t,e);var n=d()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return f()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=r()(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var gt=new(function(){function t(){D()(this,t)}return L()(t,[{key:"init",value:function(){V.a.stage.on(W.a.RESIZE,this,this.onResize),this.onResize()}},{key:"onResize",value:function(){var t=V.a.stage,e=t.width,i=t.height;lt.onResize(e,i),ot.onResize(e,i)}},{key:"runScene",value:function(t){return lt.runScene(t).catch((function(t){dt.default.DEBUG_MODE&&console.error(t)}))}},{key:"openDialog",value:function(t,e){return ot.openDialog(t,e)}},{key:"load",value:function(t,e){return ht.load(t,e)}},{key:"getDialogByName",value:function(t){return ot.getDialogByName(t)}},{key:"getDialogsByGroup",value:function(t){return ot.getDialogsByGroup(t)}},{key:"closeDialogByName",value:function(t){ot.closeDialogByName(t)}},{key:"closeDialogsByGroup",value:function(t){ot.closeDialogsByGroup(t)}},{key:"closeAllDialogs",value:function(){ot.closeAllDialogs()}},{key:"setLoadPageForScene",value:function(t){return ht.setLoadView("Scene",t)}},{key:"setLoadPageForDialog",value:function(t){return ht.setLoadView("Dialog",t)}},{key:"clearDialog",value:function(t){return vt(this,void 0,void 0,C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt();case 2:lt.sceneChangeAfterListener.push(t);case 3:case"end":return e.stop()}}),e)})))}},{key:"onSceneChangeBefore",value:function(t){return vt(this,void 0,void 0,C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt();case 2:lt.sceneChangeBeforeListener.push(t);case 3:case"end":return e.stop()}}),e)})))}},{key:"onSceneChangeAfter",value:function(t){return vt(this,void 0,void 0,C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt();case 2:lt.sceneChangeAfterListener.push(t);case 3:case"end":return e.stop()}}),e)})))}},{key:"clearListener",value:function(t){return vt(this,void 0,void 0,C.a.mark((function e(){var i,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt();case 2:lt.sceneChangeBeforeListener=_t()(i=lt.sceneChangeBeforeListener).call(i,(function(e){return e!==t})),lt.sceneChangeAfterListener=_t()(n=lt.sceneChangeAfterListener).call(n,(function(e){return e!==t}));case 4:case"end":return e.stop()}}),e)})))}},{key:"hideDialog",value:function(t){ot.hideMask(t)}},{key:"runningScene",get:function(){return lt.getCurScene()}}]),t}()),mt=[],xt=!1;function kt(){return new p.a((function(t,e){if(xt)return t();mt.push(t)}))}function Tt(){if(lt=new tt,ht=new ct,ot=new q,gt.init(),mt){var t,e=pt(mt);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(t){e.e(t)}finally{e.f()}xt=!0,mt=void 0}}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return D}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(67),p=i.n(v),y=i(43),g=i.n(y),m=i(7),x=i.n(m),k=i(5),T=i(198),b=i(12),C=i(0);function w(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var S=function(t){u()(i,t);var e=w(i);function i(t){var n,r,a;return s()(this,i),(a=e.call(this))._audio=null,a._onEnd=p()(n=a.__onEnd).call(n,g()(a)),a._resumePlay=p()(r=a.__resumePlay).call(r,g()(a)),t.addEventListener("ended",a._onEnd),a._audio=t,a}return h()(i,[{key:"__onEnd",value:function(t){if(1==this.loops)return this.completeHandler&&(C.a.systemTimer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event(k.a.COMPLETE);this.loops>0&&this.loops--,this.startTime=0,this.play()}},{key:"__resumePlay",value:function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,b.a.container.appendChild(this._audio),this._audio.play()}catch(t){this.event(k.a.ERROR)}}},{key:"play",value:function(){this.isStopped=!1;try{this._audio.playbackRate=C.a.SoundManager.playbackRate,this._audio.currentTime=this.startTime}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay)}C.a.SoundManager.addChannel(this),b.a.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()}},{key:"stop",value:function(){x()(d()(i.prototype),"stop",this).call(this),this.isStopped=!0,C.a.SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&C.a.Render.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),C.a.Browser.onIE||this._audio!=C.a.AudioSound._musicAudio&&C.a.Pool.recover("audio:"+this.url,this._audio),b.a.removeElement(this._audio),this._audio=null,C.a.SoundManager.autoReleaseSound&&C.a.SoundManager.disposeSoundLater(this.url))}},{key:"pause",value:function(){this.isStopped=!0,C.a.SoundManager.removeChannel(this),"pause"in this._audio&&this._audio.pause(),C.a.SoundManager.autoReleaseSound&&C.a.SoundManager.disposeSoundLater(this.url)}},{key:"resume",value:function(){var t=this._audio;t&&(this.isStopped=!1,0==t.readyState&&(t.src=this.url,t.addEventListener("canplay",this._resumePlay),t.load()),C.a.SoundManager.addChannel(this),"play"in t&&t.play())}},{key:"position",get:function(){return this._audio?this._audio.currentTime:0}},{key:"duration",get:function(){return this._audio?this._audio.duration:0}},{key:"volume",set:function(t){this._audio&&(this._audio.volume=t)},get:function(){return this._audio?this._audio.volume:1}}]),i}(T.a),E=i(66),A=i(40),M=i(47),R=i(13);function I(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var D=function(t){u()(i,t);var e=I(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments)).loaded=!1,t}return h()(i,[{key:"dispose",value:function(){var t=i._audioCache[this.url];R.a.clearBySign("audio:"+this.url),t&&(M.a.isConchApp||(t.src=""),delete i._audioCache[this.url])}},{key:"load",value:function(t){var e;if(t=A.a.formatURL(t),this.url=t,t==C.a.SoundManager._bgMusic?(i._initMusicAudio(),(e=i._musicAudio).src!=t&&(i._audioCache[e.src]=null,e=null)):e=i._audioCache[t],e&&e.readyState>=2)this.event(k.a.COMPLETE);else{e||(t==C.a.SoundManager._bgMusic?(i._initMusicAudio(),e=i._musicAudio):e=b.a.createElement("audio"),i._audioCache[t]=e,e.src=t),e.addEventListener("canplaythrough",r),e.addEventListener("error",a);var n=this;this.audio=e,e.load?e.load():a()}function r(){s(),n.loaded=!0,n.event(k.a.COMPLETE)}function a(){e.load=null,s(),n.event(k.a.ERROR)}function s(){e.removeEventListener("canplaythrough",r),e.removeEventListener("error",a)}}},{key:"play",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.url)return null;if(!(t=this.url==C.a.SoundManager._bgMusic?i._musicAudio:i._audioCache[this.url]))return null;e=R.a.getItem("audio:"+this.url),M.a.isConchApp?e||((e=b.a.createElement("audio")).src=this.url):this.url==C.a.SoundManager._bgMusic?(i._initMusicAudio(),(e=i._musicAudio).src=this.url):e=e||t.cloneNode(!0);var a=new S(e);return a.url=this.url,a.loops=r,a.startTime=n,a.play(),C.a.SoundManager.addChannel(a),a}},{key:"duration",get:function(){var t;return(t=i._audioCache[this.url])?t.duration:0}}],[{key:"_initMusicAudio",value:function(){i._musicAudio||(i._musicAudio||(i._musicAudio=b.a.createElement("audio")),M.a.isConchApp||b.a.document.addEventListener("mousedown",i._makeMusicOK))}},{key:"_makeMusicOK",value:function(){b.a.document.removeEventListener("mousedown",i._makeMusicOK),i._musicAudio.src?i._musicAudio.play():(i._musicAudio.src="",i._musicAudio.load())}}]),i}(E.a);D._audioCache={}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(81),h=function(){function t(e){r()(this,t),this.setValue(e)}return s()(t,[{key:"setValue",value:function(t){this._color=t?t instanceof o.a?t:o.a.create(t):o.a.create("#000000")}},{key:"reset",value:function(){this._color=o.a.create("#000000")}},{key:"toInt",value:function(){return this._color.numColor}},{key:"equal",value:function(t){return"string"==typeof t?this._color.strColor===t:t instanceof o.a&&this._color.numColor===t.numColor}},{key:"toColorStr",value:function(){return this._color.strColor}}],[{key:"create",value:function(e){if(e){var i=e instanceof o.a?e:o.a.create(e);return i._drawStyle||(i._drawStyle=new t(e))}return t.DEFAULT}}]),t}();h.DEFAULT=new h("#000000")},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(0),h=function(){function t(){r()(this,t),this._pool=[],this._map={},this._laters=[]}return s()(t,[{key:"_update",value:function(){var t=this._laters,e=t.length;if(e>0){for(var i=0,n=e-1;i<=n;i++){var r=t[i];this._map[r.key]=null,null!==r.method&&(r.run(),r.clear()),this._pool.push(r),i===n&&(n=t.length-1)}t.length=0}}},{key:"_getHandler",value:function(t,e){var i=t?t.$_GID||(t.$_GID=o.a.Utils.getGID()):0,n=e.$_TID||(e.$_TID=o.a.Timer._mid++);return this._map[i+"."+n]}},{key:"callLater",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==this._getHandler(t,e)){var n;(n=this._pool.length?this._pool.pop():new l).caller=t,n.method=e,n.args=i;var r=t?t.$_GID:0,a=e.$_TID;n.key=r+"."+a,this._map[n.key]=n,this._laters.push(n)}}},{key:"runCallLater",value:function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(),i.clear())}}]),t}();h.I=new h;var l=function(){function t(){r()(this,t)}return s()(t,[{key:"clear",value:function(){this.caller=null,this.method=null,this.args=null}},{key:"run",value:function(){var t=this.caller;if(t&&t.destroyed)return this.clear();var e=this.method,i=this.args;null!=e&&(i?e.apply(t,i):e.call(t))}}]),t}()},,function(t,e,i){t.exports=i(666)},,function(t,e,i){var n=i(344),r=i(195),a=i(87)("toStringTag"),s="Arguments"==r(function(){return arguments}());t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?i:s?r(e):"Object"==(n=r(e))&&"function"==typeof e.callee?"Arguments":n}},,,,function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(344),r=i(136).f,a=i(154),s=i(119),o=i(518),h=i(87)("toStringTag");t.exports=function(t,e,i,l){if(t){var u=i?t:t.prototype;s(u,h)||r(u,h,{configurable:!0,value:e}),l&&!n&&a(u,"toString",o)}}},function(t,e){t.exports={}},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_);function v(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var p=function(t){u()(i,t);var e=v(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments)).isStopped=!1,t}return h()(i,[{key:"play",value:function(){}},{key:"stop",value:function(){this.completeHandler&&this.completeHandler.run()}},{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"__runComplete",value:function(t){t&&t.run()}},{key:"volume",set:function(t){},get:function(){return 1}},{key:"position",get:function(){return 0}},{key:"duration",get:function(){return 0}}]),i}(i(66).a)},function(t,e,i){t.exports=i(663)},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(88),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=function(){function t(){s()(this,t),this.save=[],this.toUpperCase=null,this.width=-1,this.pageChars=[],this.startID=0,this.startIDStroke=0,this.lastGCCnt=0,this.splitRender=!1,this.scalex=1,this.scaley=1}return h()(t,[{key:"setText",value:function(t){this.changed=!0,this._text=t,this.width=-1,this.cleanCache()}},{key:"toString",value:function(){return this._text}},{key:"charCodeAt",value:function(t){return this._text?this._text.charCodeAt(t):NaN}},{key:"charAt",value:function(t){return this._text?this._text.charAt(t):null}},{key:"cleanCache",value:function(){var t;r()(t=this.pageChars).call(t,(function(t){var e=t.tex;t.words;1==t.words.length&&e&&e.ri&&e.destroy()})),this.pageChars=[],this.startID=0,this.scalex=1,this.scaley=1}},{key:"length",get:function(){return this._text?this._text.length:0}}]),t}()},function(t,e,i){t.exports=i(688)},function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var n,r=i(3),a=i.n(r),s=i(1),o=i.n(s),h=i(4),l=i.n(h),u=i(6),c=i.n(u),f=i(8),_=i.n(f),d=i(2),v=i.n(d),p=i(16),y=i(17),g=i(222);!function(t){t[t.Point=0]="Point",t[t.Bilinear=1]="Bilinear",t[t.Trilinear=2]="Trilinear"}(n||(n={}));var m=i(25),x=i(114);function k(t){var e=function(){if("undefined"==typeof Reflect||!a.a)return!1;if(a.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(a()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var r=v()(this).constructor;i=a()(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var T=function(t){c()(i,t);var e=k(i);function i(t,r){var a;return o()(this,i),(a=e.call(this))._wrapModeU=x.a.Repeat,a._wrapModeV=x.a.Repeat,a._filterMode=n.Bilinear,a._readyed=!1,a._width=-1,a._height=-1,a._format=t,a._mipmap=r,a._anisoLevel=1,a._glTexture=p.a.instance.createTexture(),a}return l()(i,[{key:"_getFormatByteCount",value:function(){switch(this._format){case m.a.R8G8B8:return 3;case m.a.R8G8B8A8:return 4;case m.a.R5G6B5:case m.a.Alpha8:return 1;case m.a.R32G32B32A32:return 4;default:throw"Texture2D: unknown format."}}},{key:"_isPot",value:function(t){return 0==(t&t-1)}},{key:"_getGLFormat",value:function(){var t,e=p.a.instance,i=p.a.layaGPUInstance;switch(this._format){case m.a.R8G8B8:case m.a.R5G6B5:t=e.RGB;break;case m.a.R8G8B8A8:t=e.RGBA;break;case m.a.Alpha8:t=e.ALPHA;break;case m.a.R32G32B32A32:t=e.RGBA;break;case m.a.DXT1:if(!i._compressedTextureS3tc)throw"BaseTexture: not support DXT1 format.";t=i._compressedTextureS3tc.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case m.a.DXT5:if(!i._compressedTextureS3tc)throw"BaseTexture: not support DXT5 format.";t=i._compressedTextureS3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case m.a.ETC1RGB:if(!i._compressedTextureEtc1)throw"BaseTexture: not support ETC1RGB format.";t=i._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL;break;case m.a.PVRTCRGB_2BPPV:if(!i._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_2BPPV format.";t=i._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case m.a.PVRTCRGBA_2BPPV:if(!i._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_2BPPV format.";t=i._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case m.a.PVRTCRGB_4BPPV:if(!i._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_4BPPV format.";t=i._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case m.a.PVRTCRGBA_4BPPV:if(!i._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_4BPPV format.";t=i._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw"BaseTexture: unknown texture format."}return t}},{key:"_setFilterMode",value:function(t){var e=p.a.instance;switch(y.a.bindTexture(e,this._glTextureType,this._glTexture),t){case n.Point:this._mipmap?e.texParameteri(this._glTextureType,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST):e.texParameteri(this._glTextureType,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(this._glTextureType,e.TEXTURE_MAG_FILTER,e.NEAREST);break;case n.Bilinear:this._mipmap?e.texParameteri(this._glTextureType,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST):e.texParameteri(this._glTextureType,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(this._glTextureType,e.TEXTURE_MAG_FILTER,e.LINEAR);break;case n.Trilinear:this._mipmap?e.texParameteri(this._glTextureType,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR):e.texParameteri(this._glTextureType,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(this._glTextureType,e.TEXTURE_MAG_FILTER,e.LINEAR);break;default:throw new Error("BaseTexture:unknown filterMode value.")}}},{key:"_setWarpMode",value:function(t,e){var i=p.a.instance;if(y.a.bindTexture(i,this._glTextureType,this._glTexture),this._isPot(this._width)&&this._isPot(this._height))switch(e){case x.a.Repeat:i.texParameteri(this._glTextureType,t,i.REPEAT);break;case x.a.Clamp:i.texParameteri(this._glTextureType,t,i.CLAMP_TO_EDGE)}else i.texParameteri(this._glTextureType,t,i.CLAMP_TO_EDGE)}},{key:"_setAnisotropy",value:function(t){var e=p.a.layaGPUInstance._extTextureFilterAnisotropic;if(e){t=Math.max(t,1);var i=p.a.instance;y.a.bindTexture(i,this._glTextureType,this._glTexture),t=Math.min(i.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT),t),i.texParameterf(this._glTextureType,e.TEXTURE_MAX_ANISOTROPY_EXT,t)}}},{key:"_disposeResource",value:function(){this._glTexture&&(p.a.instance.deleteTexture(this._glTexture),this._glTexture=null,this._setGPUMemory(0))}},{key:"_getSource",value:function(){return this._readyed?this._glTexture:null}},{key:"generateMipmap",value:function(){this._isPot(this.width)&&this._isPot(this.height)&&p.a.instance.generateMipmap(this._glTextureType)}},{key:"mipmap",get:function(){return this._mipmap}},{key:"format",get:function(){return this._format}},{key:"wrapModeU",get:function(){return this._wrapModeU},set:function(t){this._wrapModeU!==t&&(this._wrapModeU=t,-1!==this._width&&this._setWarpMode(p.a.instance.TEXTURE_WRAP_S,t))}},{key:"wrapModeV",get:function(){return this._wrapModeV},set:function(t){this._wrapModeV!==t&&(this._wrapModeV=t,-1!==this._height&&this._setWarpMode(p.a.instance.TEXTURE_WRAP_T,t))}},{key:"filterMode",get:function(){return this._filterMode},set:function(t){t!==this._filterMode&&(this._filterMode=t,-1!==this._width&&-1!==this._height&&this._setFilterMode(t))}},{key:"anisoLevel",get:function(){return this._anisoLevel},set:function(t){t!==this._anisoLevel&&(this._anisoLevel=Math.max(1,Math.min(16,t)),-1!==this._width&&-1!==this._height&&this._setAnisotropy(t))}},{key:"mipmapCount",get:function(){return this._mipmapCount}},{key:"defaulteTexture",get:function(){throw"BaseTexture:must override it."}}]),i}(g.a);T._rgbmRange=5,T.FORMAT_R8G8B8=0,T.FORMAT_R8G8B8A8=1,T.FORMAT_ALPHA8=2,T.FORMAT_DXT1=3,T.FORMAT_DXT5=4,T.FORMAT_ETC1RGB=5,T.FORMAT_PVRTCRGB_2BPPV=9,T.FORMAT_PVRTCRGBA_2BPPV=10,T.FORMAT_PVRTCRGB_4BPPV=11,T.FORMAT_PVRTCRGBA_4BPPV=12,T.RENDERTEXTURE_FORMAT_RGBA_HALF_FLOAT=14,T.FORMAT_R32G32B32A32=15,T.FORMAT_DEPTH_16=0,T.FORMAT_STENCIL_8=1,T.FORMAT_DEPTHSTENCIL_16_8=2,T.FORMAT_DEPTHSTENCIL_NONE=3,T.FILTERMODE_POINT=0,T.FILTERMODE_BILINEAR=1,T.FILTERMODE_TRILINEAR=2,T.WARPMODE_REPEAT=0,T.WARPMODE_CLAMP=1},,function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(116),h=i(112),l=function(){function t(){r()(this,t)}return s()(t,null,[{key:"getRT",value:function(t,e){return e|=0,(t|=0)>=1e4&&console.error("getRT error! w too big"),new o.a(t,e,h.b.R8G8B8A8,-1)}},{key:"releaseRT",value:function(t){t.destroy()}}]),t}();l.dict={}},function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i(37),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=function(){function t(e){h()(this,t),this._font="14px Arial",this._family="Arial",this._size=14,this._italic=!1,this._bold=!1,this._id=t._gfontID++,this.setFont(e||this._font)}return u()(t,[{key:"setFont",value:function(t){this._font=t;var e=t.split(" "),i=e.length;if(i<2){var n;1==i&&s()(n=e[0]).call(n,"px")>0&&(this._size=r()(e[0]))}else{for(var a=-1,o=0;o<i;o++){var h,l;if(s()(h=e[o]).call(h,"px")>0||s()(l=e[o]).call(l,"pt")>0){a=o,this._size=r()(e[o]),this._size<=0&&(console.error("font parse error:"+t),this._size=14);break}}var u=a+1,c=e[u];for(u++;u<i;u++)c+=" "+e[u];this._family=c.split(",")[0],this._italic=s()(e).call(e,"italic")>=0,this._bold=s()(e).call(e,"bold")>=0}}}],[{key:"Parse",value:function(e){if(e===t._lastFont)return t._lastFontInfo;var i=t._cache[e];return i||(i=t._cache[e]=new t(e)),t._lastFont=e,t._lastFontInfo=i,i}}]),t}();c.EMPTY=new c(null),c._cache={},c._gfontID=0,c._lastFont=""},function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(67),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(248),u=function(){function t(){var e,i;s()(this,t),this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],l.a.regCacheByFunction(r()(e=this.startDispose).call(e,this),r()(i=this.getCacheList).call(i,this))}return h()(t,[{key:"getId",value:function(){return this._id++}},{key:"addShape",value:function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)}},{key:"addLine",value:function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)}},{key:"getShape",value:function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)}},{key:"deleteShape",value:function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]}},{key:"getCacheList",value:function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e}},{key:"startDispose",value:function(t){var e;for(e in this.useDic)this.useDic[e]=!1;this._checkKey=!0}},{key:"endDispose",value:function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}}}],[{key:"getInstance",value:function(){return t.instance=t.instance||new t}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return N}));var n=i(3),r=i.n(n),a=i(39),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(18),x=i(44),k=i(0),T=function(){function t(e,i){h()(this,t),this.isSpine=!0,this.isDebug=!1,this._targetBone=i[e.targetBoneIndex],this.isSpine=e.isSpine,null==this._bones&&(this._bones=[]),this._bones.length=0;for(var n=0,r=e.boneIndexs.length;n<r;n++)this._bones.push(i[e.boneIndexs[n]]);this.name=e.name,this.mix=e.mix,this.bendDirection=e.bendDirection}return u()(t,[{key:"apply",value:function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}}},{key:"_applyIk1",value:function(e,i,n,r){var a=e.parentBone,s=1/(a.resultMatrix.a*a.resultMatrix.d-a.resultMatrix.b*a.resultMatrix.c),o=i-a.resultMatrix.tx,h=n-a.resultMatrix.ty,l=(o*a.resultMatrix.d-h*a.resultMatrix.c)*s-e.transform.x,u=(h*a.resultMatrix.a-o*a.resultMatrix.b)*s-e.transform.y,c=Math.atan2(u,l)*t.radDeg-0-e.transform.skX;e.transform.scX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.transform.skX=e.transform.skY=e.transform.skX+c*r,e.update()}},{key:"updatePos",value:function(t,e){this._sp&&this._sp.pos(t,e)}},{key:"_applyIk2",value:function(e,i,n,r,a,s){if(0!=s){var o,h,l,u=e.resultTransform.x,c=e.resultTransform.y,f=e.transform.scX,_=e.transform.scY,d=i.transform.scX;f<0?(f=-f,o=180,l=-1):(o=0,l=1),_<0&&(_=-_,l=-l),d<0?(d=-d,h=180):h=0;var v,p,y,g=i.resultTransform.x,m=e.resultMatrix.a,T=e.resultMatrix.c,b=e.resultMatrix.b,C=e.resultMatrix.d,w=Math.abs(f-_)<=1e-4;w?(p=m*g+T*(v=i.resultTransform.y)+e.resultMatrix.tx,y=b*g+C*v+e.resultMatrix.ty):(v=0,p=m*g+e.resultMatrix.tx,y=b*g+e.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new x.a,k.a.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(n,r,15,"#ffff00"),this._sp.graphics.drawCircle(p,y,15,"#ff00ff")),e.setRotation(Math.atan2(y-e.resultMatrix.ty,p-e.resultMatrix.tx));var S=e.parentBone;m=S.resultMatrix.a,T=S.resultMatrix.c,b=S.resultMatrix.b;var E,A,M=1/(m*(C=S.resultMatrix.d)-T*b),R=n-S.resultMatrix.tx,I=r-S.resultMatrix.ty,D=(R*C-I*T)*M-u,P=(I*m-R*b)*M-c,L=((R=p-S.resultMatrix.tx)*C-(I=y-S.resultMatrix.ty)*T)*M-u,B=(I*m-R*b)*M-c,O=Math.sqrt(L*L+B*B),F=i.length*d;if(w){var N=(D*D+P*P-O*O-(F*=f)*F)/(2*O*F);N<-1?N=-1:N>1&&(N=1),A=Math.acos(N)*a,m=O+F*N,T=F*Math.sin(A),E=Math.atan2(P*m-D*T,D*m+P*T)}else{var U=(m=f*F)*m,G=(T=_*F)*T,Y=D*D+P*P,W=Math.atan2(P,D),V=-2*G*O,X=G-U;if((C=V*V-4*X*(b=G*O*O+U*Y-U*G))>0){var H=Math.sqrt(C);V<0&&(H=-H);var z=(H=-(V+H)/2)/X,j=b/H,K=Math.abs(z)<Math.abs(j)?z:j;K*K<=Y&&(I=Math.sqrt(Y-K*K)*a,E=W-Math.atan2(I,K),A=Math.atan2(I/_,(K-O)/f))}var q=0,Z=Number.MAX_VALUE,Q=0,$=0,J=0,tt=0,et=0,it=0;(C=(R=O+m)*R)>tt&&(J=0,tt=C,et=R),(C=(R=O-m)*R)<Z&&(q=Math.PI,Z=C,Q=R);var nt=Math.acos(-m*O/(U-G));(C=(R=m*Math.cos(nt)+O)*R+(I=T*Math.sin(nt))*I)<Z&&(q=nt,Z=C,Q=R,$=I),C>tt&&(J=nt,tt=C,et=R,it=I),Y<=(Z+tt)/2?(E=W-Math.atan2($*a,Q),A=q*a):(E=W-Math.atan2(it*a,et),A=J*a)}var rt=Math.atan2(v,g)*l,at=e.resultTransform.skX;(E=(E-rt)*t.radDeg+o-at)>180?E-=360:E<-180&&(E+=360),e.resultTransform.x=u,e.resultTransform.y=c,e.resultTransform.skX=e.resultTransform.skY=at+E*s,at=i.resultTransform.skX,at%=360,(A=((A+rt)*t.radDeg-0)*l+h-at)>180?A-=360:A<-180&&(A+=360),i.resultTransform.x=g,i.resultTransform.y=v,i.resultTransform.skX=i.resultTransform.skY=i.resultTransform.skY+A*s,e.update()}}},{key:"_applyIk3",value:function(e,i,n,r,a,s){if(0!=s){var o,h,l,u,c,f,_=i.resultMatrix.a*i.length,d=i.resultMatrix.b*i.length,v=_*_+d*d,p=Math.sqrt(v),y=e.resultMatrix.tx,g=e.resultMatrix.ty,m=i.resultMatrix.tx,T=i.resultMatrix.ty,b=m-y,C=T-g,w=b*b+C*C,S=Math.sqrt(w),E=(b=n-e.resultMatrix.tx)*b+(C=r-e.resultMatrix.ty)*C,A=Math.sqrt(E);if(p+S<=A||A+p<=S||A+S<=p){var M;m=y+(M=p+S<=A?1:-1)*(n-y)*S/A,T=g+M*(r-g)*S/A}else{var R=(w-v+E)/(2*E),I=Math.sqrt(w-R*R*E)/A,D=y+b*R,P=g+C*R,L=-C*I,B=b*I;a>0?(m=D-L,T=P-B):(m=D+L,T=P+B)}o=m,h=T,this.isDebug&&(this._sp||(this._sp=new x.a,k.a.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(y,g,15,"#ff00ff"),this._sp.graphics.drawCircle(n,r,15,"#ffff00"),this._sp.graphics.drawCircle(o,h,15,"#ff00ff")),l=Math.atan2(h-e.resultMatrix.ty,o-e.resultMatrix.tx),e.setRotation(l),(u=t._tempMatrix).identity(),u.rotate(l),u.scale(e.resultMatrix.getScaleX(),e.resultMatrix.getScaleY()),u.translate(e.resultMatrix.tx,e.resultMatrix.ty),u.copyTo(e.resultMatrix),e.updateChild(),c=Math.atan2(r-h,n-o),i.setRotation(c),(f=t._tempMatrix).identity(),f.rotate(c),f.scale(i.resultMatrix.getScaleX(),i.resultMatrix.getScaleY()),f.translate(o,h),u.copyTo(i.resultMatrix),i.updateChild()}}}]),t}();T.radDeg=180/Math.PI,T.degRad=Math.PI/180,T._tempMatrix=new m.a;var b=function(){function t(e,i){h()(this,t),this._debugKey=!1,this._segments=[],this._curves=[],this.data=e,this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.bones=[];for(var n=this.data.bones,r=0,a=n.length;r<a;r++)this.bones.push(i[n[r]])}return u()(t,[{key:"apply",value:function(t,e){if(this.target){var i=this.translateMix,n=this.translateMix,r=n>0,a=this.data.spacingMode,s="length"==a,o=this.data.rotateMode,h="tangent"==o,l="chainScale"==o,u=[],c=this.bones.length,f=h?c:c+1,_=[];this._spaces=_,_[0]=this.position;var d=this.spacing;if(l||s)for(var v=0,p=f-1;v<p;){var y=this.bones[v],g=y.length,m=g*y.resultMatrix.a,x=g*y.resultMatrix.b;g=Math.sqrt(m*m+x*x),l&&(u[v]=g),_[++v]=s?Math.max(0,g+d):d}else for(v=1;v<f;v++)_[v]=d;var k=this.computeWorldPositions(this.target,t,e,f,h,"percent"==this.data.positionMode,"percent"==a);if(this._debugKey){for(v=0;v<k.length;v++)e.drawCircle(k[v++],k[v++],5,"#00ff00");var T=[];for(v=0;v<k.length;v++)T.push(k[v++],k[v++]);e.drawLines(0,0,T,"#ff0000")}var b,C=k[0],w=k[1],S=this.data.offsetRotation,E="chain"==o&&0==S;for(v=0,b=3;v<c;v++,b+=3){(y=this.bones[v]).resultMatrix.tx+=(C-y.resultMatrix.tx)*i,y.resultMatrix.ty+=(w-y.resultMatrix.ty)*i;var A=(m=k[b])-C,M=(x=k[b+1])-w;if(l&&0!=(g=u[v])){var R=(Math.sqrt(A*A+M*M)/g-1)*n+1;y.resultMatrix.a*=R,y.resultMatrix.c*=R}if(C=m,w=x,r){var I,D,P,L=y.resultMatrix.a,B=y.resultMatrix.c,O=y.resultMatrix.b,F=y.resultMatrix.d;I=h?k[b-1]:0==_[v+1]?k[b+2]:Math.atan2(M,A),I-=Math.atan2(O,L)-S/180*Math.PI,E&&(D=Math.cos(I),P=Math.sin(I),C+=((g=y.length)*(D*L-P*O)-A)*n,w+=(g*(P*L+D*O)-M)*n),I>Math.PI?I-=2*Math.PI:I<-Math.PI&&(I+=2*Math.PI),I*=n,D=Math.cos(I),P=Math.sin(I),y.resultMatrix.a=D*L-P*O,y.resultMatrix.c=D*B-P*F,y.resultMatrix.b=P*L+D*O,y.resultMatrix.d=P*B+D*F}}}}},{key:"computeWorldVertices2",value:function(e,i,n,r,a,s){var o,h,l,u=e.currDisplayData.bones,c=e.currDisplayData.weights,f=e.currDisplayData.triangles,_=0,d=0,v=0,p=0,y=0,g=0,m=0,x=0,k=0,T=0;if(null!=u){for(_=0;_<n;_+=2)d+=(p=u[d])+1,v+=p;var b=i;for(y=s,g=3*v;y<r;y+=2){for(m=0,x=0,p=u[d++],p+=d;d<p;d++,g+=3){o=b[u[d]].resultMatrix,k=c[g],T=c[g+1];var C=c[g+2];m+=(k*o.a+T*o.c+o.tx)*C,x+=(k*o.b+T*o.d+o.ty)*C}a[y]=m,a[y+1]=x}}else{var w,S;if(f||(f=c),e.deformData&&(f=e.deformData),w=e.parent,i)for(l=i.length,_=0;_<l;_++)if(i[_].name==w){h=i[_];break}h&&(S=h.resultMatrix),S||(S=t._tempMt);var E=S.tx,A=S.ty,M=S.a,R=S.b,I=S.c,D=S.d;for(h&&(D*=h.d),d=n,y=s;y<r;d+=2,y+=2)k=f[d],T=f[d+1],a[y]=k*M+T*R+E,a[y+1]=-(k*I+T*D+A)}}},{key:"computeWorldPositions",value:function(t,e,i,n,r,a,s){t.currDisplayData.bones,t.currDisplayData.weights,t.currDisplayData.triangles;var o,h,l,u,c,f,_,d=[],v=0,p=t.currDisplayData.verLen,y=this.position,g=this._spaces,m=[],x=[],k=p/6,T=-1;if(k--,p-=4,this.computeWorldVertices2(t,e,2,p,d,0),this._debugKey)for(v=0;v<d.length;)i.drawCircle(d[v++],d[v++],10,"#ff0000");m=d,this._curves.length=k;var b=this._curves;o=0;var C,w,S,E,A,M,R,I,D,P=m[0],L=m[1],B=0,O=0,F=0,N=0,U=0,G=0;for(v=0,D=2;v<k;v++,D+=6)B=m[D],O=m[D+1],F=m[D+2],N=m[D+3],A=2*(C=.1875*(P-2*B+F))+(S=.09375*(3*(B-F)-P+(U=m[D+4]))),M=2*(w=.1875*(L-2*O+N))+(E=.09375*(3*(O-N)-L+(G=m[D+5]))),R=.75*(B-P)+C+.16666667*S,I=.75*(O-L)+w+.16666667*E,o+=Math.sqrt(R*R+I*I),R+=A,I+=M,A+=S,M+=E,o+=Math.sqrt(R*R+I*I),R+=A,I+=M,o+=Math.sqrt(R*R+I*I),R+=A+S,I+=M+E,o+=Math.sqrt(R*R+I*I),b[v]=o,P=U,L=G;if(a&&(y*=o),s)for(v=0;v<n;v++)g[v]*=o;var Y,W=this._segments,V=0;for(v=0,h=0,l=0,Y=0;v<n;v++,h+=3)if((u=y+=c=g[v])<0)this.addBeforePosition(u,m,0,x,h);else if(u>o)this.addAfterPosition(u-o,m,p-4,x,h);else{for(;;l++)if(!(u>(_=b[l]))){0==l?u/=_:u=(u-(f=b[l-1]))/(_-f);break}if(l!=T){T=l;var X=6*l;for(P=m[X],L=m[X+1],B=m[X+2],O=m[X+3],F=m[X+4],N=m[X+5],A=2*(C=.03*(P-2*B+F))+(S=.006*(3*(B-F)-P+(U=m[X+6]))),M=2*(w=.03*(L-2*O+N))+(E=.006*(3*(O-N)-L+(G=m[X+7]))),R=.3*(B-P)+C+.16666667*S,I=.3*(O-L)+w+.16666667*E,V=Math.sqrt(R*R+I*I),W[0]=V,X=1;X<8;X++)R+=A,I+=M,A+=S,M+=E,V+=Math.sqrt(R*R+I*I),W[X]=V;R+=A,I+=M,V+=Math.sqrt(R*R+I*I),W[8]=V,R+=A+S,I+=M+E,V+=Math.sqrt(R*R+I*I),W[9]=V,Y=0}for(u*=V;;Y++)if(!(u>(_=W[Y]))){0==Y?u/=_:u=Y+(u-(f=W[Y-1]))/(_-f);break}this.addCurvePosition(.1*u,P,L,B,O,F,N,U,G,x,h,r||v>0&&0==c)}return x}},{key:"addBeforePosition",value:function(t,e,i,n,r){var a=e[i],s=e[i+1],o=e[i+2]-a,h=e[i+3]-s,l=Math.atan2(h,o);n[r]=a+t*Math.cos(l),n[r+1]=s+t*Math.sin(l),n[r+2]=l}},{key:"addAfterPosition",value:function(t,e,i,n,r){var a=e[i+2],s=e[i+3],o=a-e[i],h=s-e[i+1],l=Math.atan2(h,o);n[r]=a+t*Math.cos(l),n[r+1]=s+t*Math.sin(l),n[r+2]=l}},{key:"addCurvePosition",value:function(t,e,i,n,r,a,s,o,h,l,u,c){0==t&&(t=1e-4);var f=t*t,_=f*t,d=1-t,v=d*d,p=v*d,y=d*t,g=3*y,m=d*g,x=g*t,k=e*p+n*m+a*x+o*_,T=i*p+r*m+s*x+h*_;l[u]=k,l[u+1]=T,l[u+2]=c?Math.atan2(T-(i*v+r*y*2+s*f),k-(e*v+n*y*2+a*f)):0}}]),t}();b.BEFORE=-2,b.AFTER=-3,b._tempMt=new m.a;var C=function(){function t(e,i){var n,r;for(h()(this,t),this._temp=[],this._data=e,null==this._bones&&(this._bones=[]),this.target=i[e.targetIndex],n=0,r=e.boneIndexs.length;n<r;n++)this._bones.push(i[e.boneIndexs[n]]);this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix}return u()(t,[{key:"apply",value:function(){for(var t,e=this.target.resultMatrix.a,i=this.target.resultMatrix.b,n=this.target.resultMatrix.c,r=this.target.resultMatrix.d,a=0,s=this._bones.length;a<s;a++){if(t=this._bones[a],this.rotateMix>0){var o=t.resultMatrix.a,h=t.resultMatrix.b,l=t.resultMatrix.c,u=t.resultMatrix.d,c=Math.atan2(n,e)-Math.atan2(l,o)+this._data.offsetRotation*Math.PI/180;c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c*=this.rotateMix;var f=Math.cos(c),_=Math.sin(c);t.resultMatrix.a=f*o-_*l,t.resultMatrix.b=f*h-_*u,t.resultMatrix.c=_*o+f*l,t.resultMatrix.d=_*h+f*u}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),t.resultMatrix.tx+=(this._temp[0]-t.resultMatrix.tx)*this.translateMix,t.resultMatrix.ty+=(this._temp[1]-t.resultMatrix.ty)*this.translateMix,t.updateChild()),this.scaleMix>0){var d=Math.sqrt(t.resultMatrix.a*t.resultMatrix.a+t.resultMatrix.c*t.resultMatrix.c),v=Math.sqrt(e*e+n*n),p=d>1e-5?(d+(v-d+this._data.offsetScaleX)*this.scaleMix)/d:0;t.resultMatrix.a*=p,t.resultMatrix.c*=p,d=Math.sqrt(t.resultMatrix.b*t.resultMatrix.b+t.resultMatrix.d*t.resultMatrix.d),v=Math.sqrt(i*i+r*r),p=d>1e-5?(d+(v-d+this._data.offsetScaleY)*this.scaleMix)/d:0,t.resultMatrix.b*=p,t.resultMatrix.d*=p}if(this.shearMix>0){h=t.resultMatrix.b,u=t.resultMatrix.d;var y=Math.atan2(u,h);(c=Math.atan2(r,i)-Math.atan2(n,e)-(y-Math.atan2(t.resultMatrix.c,t.resultMatrix.a)))>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c=y+(c+this._data.offsetShearY*Math.PI/180)*this.shearMix,p=Math.sqrt(h*h+u*u),t.resultMatrix.b=Math.cos(c)*p,t.resultMatrix.d=Math.sin(c)*p}}}}]),t}(),w=function t(){h()(this,t)};w.stopped=0,w.paused=1,w.playing=2;var S=i(22),E=i(5);function A(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var M=function(t){d()(i,t);var e=A(i);function i(){var t;return h()(this,i),(t=e.call(this)).isCache=!0,t.playbackRate=1,t._destroyed=!1,t._currentAnimationClipIndex=-1,t._currentKeyframeIndex=-1,t._currentTime=0,t._overallDuration=Number.MAX_VALUE,t._stopWhenCircleFinish=!1,t._elapsedPlaybackTime=0,t._startUpdateLoopCount=-1,t._cachePlayRate=1,t.cacheFrameRate=60,t.returnToZeroStopped=!1,t}return u()(i,[{key:"_onTempletLoadedComputeFullKeyframeIndices",value:function(t,e,i){this._templet===i&&this._cachePlayRate===t&&this._cacheFrameRate===e&&this._computeFullKeyframeIndices()}},{key:"_computeFullKeyframeIndices",value:function(){}},{key:"_onAnimationTempletLoaded",value:function(){this.destroyed||this._calculatePlayDuration()}},{key:"_calculatePlayDuration",value:function(){if(this.state!==w.stopped){var t=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=t),this._playEnd>t&&(this._playEnd=t),this._playDuration=this._playEnd-this._playStart}}},{key:"_setPlayParams",value:function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.floor(this.currentPlayTime/e+.01),this._currentFrameTime=this._currentKeyframeIndex*e}},{key:"_setPlayParamsWhenStop",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._currentTime=t;var n=i>0?i:t;this._currentKeyframeIndex=Math.floor(n/e+.01),this._currentKeyframeIndex=Math.floor(t/e+.01),this._currentFrameTime=this._currentKeyframeIndex*e,this._currentAnimationClipIndex=-1}},{key:"_update",value:function(t){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet){var e=this._cacheFrameRateInterval*this._cachePlayRate,i=0;this._startUpdateLoopCount!==S.a.loopCount&&(i=t*this.playbackRate,this._elapsedPlaybackTime+=i);var n=this.playDuration;if(i+=this._currentTime,0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=n||0===this._overallDuration&&i>=this.playEnd)return this._setPlayParamsWhenStop(n,e,this.playEnd),void this.event(E.a.STOPPED);if(n>0){if(i>=n)return this._stopWhenCircleFinish?(this._setPlayParamsWhenStop(n,e),this._stopWhenCircleFinish=!1,void this.event(E.a.STOPPED)):(i%=n,this._setPlayParams(i,e),void this.event(E.a.COMPLETE));this._setPlayParams(i,e)}else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(n,e),this._stopWhenCircleFinish=!1,void this.event(E.a.STOPPED);this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event(E.a.COMPLETE)}}}},{key:"_destroy",value:function(){this.offAll(),this._templet=null,this._destroyed=!0}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483647,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(i<0||n<0||r<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==r&&n>r)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=e,this._overallDuration=i,this._playStart=n,this._playEnd=r,this._paused=!1,this._currentAnimationClipIndex=t,this._currentKeyframeIndex=0,this._startUpdateLoopCount=S.a.loopCount,this.event(E.a.PLAYED),this._calculatePlayDuration(),this._update(0)}},{key:"playByFrame",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483647,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30,s=1e3/a;this.play(t,e,i,n*s,r*s)}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event(E.a.STOPPED)):this._stopWhenCircleFinish=!0}},{key:"destroy",value:function(){}},{key:"templet",get:function(){return this._templet},set:function(t){this.state!==w.stopped&&this.stop(!0),this._templet!==t&&(this._templet=t,this._computeFullKeyframeIndices())}},{key:"playStart",get:function(){return this._playStart}},{key:"playEnd",get:function(){return this._playEnd}},{key:"playDuration",get:function(){return this._playDuration}},{key:"overallDuration",get:function(){return this._overallDuration}},{key:"currentAnimationClipIndex",get:function(){return this._currentAnimationClipIndex}},{key:"currentKeyframeIndex",get:function(){return this._currentKeyframeIndex}},{key:"currentPlayTime",get:function(){return this._currentTime+this._playStart}},{key:"currentFrameTime",get:function(){return this._currentFrameTime}},{key:"cachePlayRate",get:function(){return this._cachePlayRate},set:function(t){this._cachePlayRate!==t&&(this._cachePlayRate=t,this._templet&&this._computeFullKeyframeIndices())}},{key:"cacheFrameRate",get:function(){return this._cacheFrameRate},set:function(t){this._cacheFrameRate!==t&&(this._cacheFrameRate=t,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&this._computeFullKeyframeIndices())}},{key:"currentTime",set:function(t){if(-1!==this._currentAnimationClipIndex&&this._templet){if(t<this._playStart||t>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=S.a.loopCount;var e=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=t,this._currentKeyframeIndex=Math.floor(this.currentPlayTime/e),this._currentFrameTime=this._currentKeyframeIndex*e}}},{key:"paused",get:function(){return this._paused},set:function(t){this._paused=t,t&&this.event(E.a.PAUSED)}},{key:"cacheFrameRateInterval",get:function(){return this._cacheFrameRateInterval}},{key:"state",get:function(){return-1===this._currentAnimationClipIndex?w.stopped:this._paused?w.paused:w.playing}},{key:"destroyed",get:function(){return this._destroyed}}]),i}(i(66).a);function R(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var I=function(t){d()(i,t);var e=R(i);function i(){return h()(this,i),e.apply(this,arguments)}return u()(i,[{key:"drawSkin",value:function(t,e){this.drawTriangles(t.texture,0,0,t.vertices,t.uvs,t.indexes,t.transform||m.a.EMPTY,e)}}],[{key:"create",value:function(){return i._caches.pop()||new i}},{key:"recycle",value:function(t){t.clear(),i._caches.push(t)}}]),i}(i(110).a);I._caches=[];var D=i(19),P=i(117),L=i(139),B=i(111),O=i(10);function F(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var N=function(t){d()(i,t);var e=F(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h()(this,i),(t=e.call(this))._boneMatrixArray=[],t._lastTime=0,t._currAniIndex=-1,t._pause=!0,t._aniClipIndex=-1,t._clipIndex=-1,t._skinIndex=0,t._skinName="default",t._aniMode=0,t._index=-1,t._total=-1,t._indexControl=!1,t._eventIndex=0,t._drawOrderIndex=0,t._drawOrder=null,t._lastAniClipIndex=-1,t._lastUpdateAniClipIndex=-1,t._playAudio=!0,t._soundChannelArr=[],n&&t.init(n,r),t}return u()(i,[{key:"init",value:function(t){var e,i,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=0;if(1==a)for(this._graphicsCache=[],s=0,e=t.getAnimationCount();s<e;s++)this._graphicsCache.push([]);if(this._yReverseMatrix=t.yReverseMatrix,this._aniMode=a,this._templet=t,this._templet._addReference(1),this._player=new M,this._player.cacheFrameRate=t.rate,this._player.templet=t,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=t.mBoneArr,this._rootBone=t.mRootBone,this._aniSectionDic=t.aniSectionDic,t.ikArr.length>0)for(this._ikArr=[],s=0,e=t.ikArr.length;s<e;s++)this._ikArr.push(new T(t.ikArr[s],this._boneList));if(t.pathArr.length>0)for(null==this._pathDic&&(this._pathDic={}),s=0,e=t.pathArr.length;s<e;s++)i=t.pathArr[s],n=new b(i,this._boneList),(r=this._boneSlotDic[i.name])&&((n=new b(i,this._boneList)).target=r),this._pathDic[i.name]=n;if(t.tfArr.length>0)for(this._tfArr=[],s=0,e=t.tfArr.length;s<e;s++)this._tfArr.push(new C(t.tfArr[s],this._boneList));if(t.skinDataArray.length>0){var o=this._templet.skinDataArray[this._skinIndex];this._skinName=o.name}this._player.on(E.a.PLAYED,this,this._onPlay),this._player.on(E.a.STOPPED,this,this._onStop),this._player.on(E.a.PAUSED,this,this._onPause)}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._aniPath=t,this._complete=e,this._loadAniMode=i,k.a.loader.load([{url:t,type:k.a.Loader.BUFFER}],D.a.create(this,this._onLoaded))}},{key:"_onLoaded",value:function(){var t,e=k.a.Loader.getRes(this._aniPath);null!=e&&(null==B.a.Templet.TEMPLET_DICTIONARY&&(B.a.Templet.TEMPLET_DICTIONARY={}),(t=B.a.Templet.TEMPLET_DICTIONARY[this._aniPath])?t.isParseFail?this._parseFail():t.isParserComplete?this._parseComplete():(t.on(E.a.COMPLETE,this,this._parseComplete),t.on(E.a.ERROR,this,this._parseFail)):((t=new B.a.Templet)._setCreateURL(this._aniPath),B.a.Templet.TEMPLET_DICTIONARY[this._aniPath]=t,t.on(E.a.COMPLETE,this,this._parseComplete),t.on(E.a.ERROR,this,this._parseFail),t.isParserComplete=!1,t.parseData(null,e)))}},{key:"_parseComplete",value:function(){var t=B.a.Templet.TEMPLET_DICTIONARY[this._aniPath];t&&(this.init(t,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)}},{key:"_parseFail",value:function(){console.log("[Error]:"+this._aniPath+"解析失败")}},{key:"_onPlay",value:function(){this.event(E.a.PLAYED)}},{key:"_onStop",value:function(){var t,e=this._templet.eventAniArr[this._aniClipIndex];if(e&&this._eventIndex<e.length)for(;this._eventIndex<e.length;this._eventIndex++)(t=e[this._eventIndex]).time>=this._player.playStart&&t.time<=this._player.playEnd&&this.event(E.a.LABEL,t);this._drawOrder=null,this.event(E.a.STOPPED)}},{key:"_onPause",value:function(){this.event(E.a.PAUSED)}},{key:"_parseSrcBoneMatrix",value:function(){var t=0,e=0;for(e=this._templet.srcBoneMatrixArr.length,t=0;t<e;t++)this._boneMatrixArray.push(new m.a);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var i,n,r=this._templet.boneSlotArray;for(t=0,e=r.length;t<e;t++)i=r[t],null==(n=this._bindBoneBoneSlotDic[i.parent])&&(this._bindBoneBoneSlotDic[i.parent]=n=[]),this._boneSlotDic[i.name]=i=i.copy(),n.push(i),this._boneSlotArray.push(i)}}},{key:"_emitMissedEvents",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this._templet.eventAniArr,r=n[this._player.currentAnimationClipIndex];if(r){var a,s,o=0;for(a=r.length,o=i;o<a;o++)(s=r[o]).time>=this._player.playStart&&s.time<=this._player.playEnd&&this.event(E.a.LABEL,s)}}},{key:"_update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!(this._pause||t&&this._indexControl)){var e=this.timer.currTimer,i=this._player.currentKeyframeIndex,n=e-this._lastTime;if(t?this._player._update(n):i=-1,this._lastTime=e,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||n>0&&this._clipIndex==i&&this._lastUpdateAniClipIndex==this._aniClipIndex))){this._lastUpdateAniClipIndex=this._aniClipIndex,i>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var r,a,s=this._templet.eventAniArr[this._aniClipIndex];if(s&&this._eventIndex<s.length){var o=s[this._eventIndex];o.time>=this._player.playStart&&o.time<=this._player.playEnd?this._player.currentPlayTime>=o.time&&(this.event(E.a.LABEL,o),this._eventIndex++,this._playAudio&&o.audioValue&&"null"!==o.audioValue&&"undefined"!==o.audioValue&&(r=P.a.playSound(this._player.templet._path+o.audioValue,1,D.a.create(this,this._onAniSoundStoped)),P.a.playbackRate=this._player.playbackRate,r&&this._soundChannelArr.push(r))):o.time<this._player.playStart&&this._playAudio&&o.audioValue&&"null"!==o.audioValue&&"undefined"!==o.audioValue?(this._eventIndex++,r=P.a.playSound(this._player.templet._path+o.audioValue,1,D.a.create(this,this._onAniSoundStoped),null,(this._player.currentPlayTime-o.time)/1e3),P.a.playbackRate=this._player.playbackRate,r&&this._soundChannelArr.push(r)):this._eventIndex++}0==this._aniMode?(a=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex)||this._createGraphics())&&this.graphics!=a&&(this.graphics=a):1==this._aniMode?(a=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex)||this._createGraphics())&&this.graphics!=a&&(this.graphics=a):this._createGraphics()}}}},{key:"_onAniSoundStoped",value:function(t){for(var e,i=this._soundChannelArr.length,n=0;n<i;n++){var r;if((e=this._soundChannelArr[n]).isStopped||t)!e.isStopped&&e.stop(),s()(r=this._soundChannelArr).call(r,n,1),i--,n--}}},{key:"_createGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;-1==t&&(t=this._clipIndex);var e,i=t*this._player.cacheFrameRateInterval,n=this._templet.drawOrderAniArr,r=n[this._aniClipIndex];if(r&&r.length>0)for(this._drawOrderIndex=0,e=r[this._drawOrderIndex];i>=e.time&&(this._drawOrder=e.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=r.length));)e=r[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=I.create():this.graphics instanceof I?this.graphics.clear():this.graphics=I.create();var a=this.graphics,s=this._templet.getNodes(this._aniClipIndex),o=0==this._player.state;this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,null,t,o?i+this._player.cacheFrameRateInterval:i);var h,l,u,c,f=this._aniSectionDic[this._aniClipIndex],_=0,d=0,v=0,p=0,y=0,g=this._templet.srcBoneMatrixArr.length,x=this._curOriginalData;for(d=0,y=f[0];d<g;d++){var k=(c=this._boneList[d]).resultTransform;u=this._templet.srcBoneMatrixArr[d],k.scX=u.scX*x[_++],k.skX=u.skX+x[_++],k.skY=u.skY+x[_++],k.scY=u.scY*x[_++],k.x=u.x+x[_++],k.y=u.y+x[_++],8===this._templet.tMatrixDataLen&&(k.skewX=u.skewX+x[_++],k.skewY=u.skewY+x[_++])}var T,b={},C={};for(y+=f[1];d<y;d++)b[(T=s[d]).name]=x[_++],C[T.name]=x[_++],_+=4;var w,S,E={},A={};for(y+=f[2];d<y;d++)E[(T=s[d]).name]=x[_++],A[T.name]=x[_++],_+=4;if(this._pathDic)for(y+=f[3];d<y;d++)if(T=s[d],w=this._pathDic[T.name]){var M=new L.a(T.extenData);switch(M.getByte()){case 1:w.position=x[_++];break;case 2:w.spacing=x[_++];break;case 3:w.rotateMix=x[_++],w.translateMix=x[_++]}}if(this._rootBone.update(this._yReverseMatrix||m.a.TEMP.identity()),this._ikArr)for(d=0,y=this._ikArr.length;d<y;d++)(S=this._ikArr[d]).name in E&&(S.bendDirection=E[S.name]),S.name in A&&(S.mix=A[S.name]),S.apply();if(this._pathDic)for(var R in this._pathDic)(w=this._pathDic[R]).apply(this._boneList,a);if(this._tfArr)for(d=0,p=this._tfArr.length;d<p;d++)this._tfArr[d].apply();for(d=0,p=this._boneList.length;d<p;d++)if(c=this._boneList[d],l=this._bindBoneBoneSlotDic[c.name],c.resultMatrix.copyTo(this._boneMatrixArray[d]),l)for(v=0,y=l.length;v<y;v++)(h=l[v])&&h.setParentMatrix(c.resultMatrix);var D,P,B,O,F={},N=this._templet.deformAniArr;if(N&&N.length>0){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,d=0,y=this._boneSlotArray.length;d<y;d++)(h=this._boneSlotArray[d]).deformData=null;var U,G=N[this._aniClipIndex];for(U in D=G.default,this._setDeform(D,F,this._boneSlotArray,i),G)"default"!=U&&U!=this._skinName&&(D=G[U],this._setDeform(D,F,this._boneSlotArray,i));D=G[this._skinName],this._setDeform(D,F,this._boneSlotArray,i)}if(this._drawOrder)for(d=0,y=this._drawOrder.length;d<y;d++)P=b[(h=this._boneSlotArray[this._drawOrder[d]]).name],B=C[h.name],isNaN(B),isNaN(P)||-2==P||(this._templet.attachmentNames?h.showDisplayByName(this._templet.attachmentNames[P]):h.showDisplayByIndex(P)),F[this._drawOrder[d]]?(O=F[this._drawOrder[d]],h.currDisplayData&&O[h.currDisplayData.attachmentName]?h.deformData=O[h.currDisplayData.attachmentName]:h.deformData=null):h.deformData=null,isNaN(B)?h.draw(a,this._boneMatrixArray,2==this._aniMode):h.draw(a,this._boneMatrixArray,2==this._aniMode,B),isNaN(B);else for(d=0,y=this._boneSlotArray.length;d<y;d++)P=b[(h=this._boneSlotArray[d]).name],B=C[h.name],isNaN(B),isNaN(P)||-2==P||(this._templet.attachmentNames?h.showDisplayByName(this._templet.attachmentNames[P]):h.showDisplayByIndex(P)),F[d]?(O=F[d],h.currDisplayData&&O[h.currDisplayData.attachmentName]?h.deformData=O[h.currDisplayData.attachmentName]:h.deformData=null):h.deformData=null,isNaN(B)?h.draw(a,this._boneMatrixArray,2==this._aniMode):h.draw(a,this._boneMatrixArray,2==this._aniMode,B),isNaN(B);return 0==this._aniMode?(this._templet.setGrahicsDataWithCache(this._aniClipIndex,t,a),this._checkIsAllParsed(this._aniClipIndex)):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,t,a),a}},{key:"_checkIsAllParsed",value:function(t){var e,i;for(i=Math.floor(.01+this._templet.getAniDuration(t)/1e3*this._player.cacheFrameRate),e=0;e<i;e++)if(!this._templet.getGrahicsDataWithCache(t,e))return;this._templet.getGrahicsDataWithCache(t,i)?this._templet.deleteAniData(t):this._createGraphics(i)}},{key:"_setDeform",value:function(t,e,i,n){var r,a,s,o,h,l;if(t&&t)for(o=0,h=t.deformSlotDataList.length;o<h;o++)for(r=t.deformSlotDataList[o],l=0;l<r.deformSlotDisplayList.length;l++)s=i[(a=r.deformSlotDisplayList[l]).slotIndex],a.apply(n,s),e[a.slotIndex]||(e[a.slotIndex]={}),e[a.slotIndex][a.attachment]=a.deformData}},{key:"getAnimNum",value:function(){return this._templet.getAnimationCount()}},{key:"getAniNameByIndex",value:function(t){return this._templet.getAniNameByIndex(t)}},{key:"getSlotByName",value:function(t){return this._boneSlotDic[t]}},{key:"showSkinByName",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.showSkinByIndex(this._templet.getSkinIndexByName(t),e)}},{key:"showSkinByIndex",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=0;i<this._boneSlotArray.length;i++)this._boneSlotArray[i].showSlotData(null,e);if(this._templet.showSkinByIndex(this._boneSlotDic,t,e)){var n=this._templet.skinDataArray[t];this._skinIndex=t,this._skinName=n.name}this._clearCache()}},{key:"showSlotSkinByIndex",value:function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.showDisplayByIndex(e),this._clearCache()}}},{key:"showSlotSkinByName",value:function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.showDisplayByName(e),this._clearCache()}}},{key:"replaceSlotSkinName",value:function(t,e,i){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.replaceDisplayByName(e,i),this._clearCache()}}},{key:"replaceSlotSkinByIndex",value:function(t,e,i){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.replaceDisplayByIndex(e,i),this._clearCache()}}},{key:"setSlotSkin",value:function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.replaceSkin(e),this._clearCache()}}},{key:"_clearCache",value:function(){if(1==this._aniMode)for(var t=0,e=this._graphicsCache.length;t<e;t++){for(var i=0,n=this._graphicsCache[t].length;i<n;i++){var r=this._graphicsCache[t][i];r&&r!=this.graphics&&I.recycle(r)}this._graphicsCache[t].length=0}}},{key:"play",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];this._playAudio=s,this._indexControl=!1;var o,h=-1;if(o=e?2147483647:0,"string"==typeof t)for(var l=0,u=this._templet.getAnimationCount();l<u;l++){var c=this._templet.getAnimation(l);if(c&&t==c.name){h=l;break}}else h=t;h>-1&&h<this.getAnimNum()&&(this._aniClipIndex=h,(i||this._pause||this._currAniIndex!=h)&&(this._currAniIndex=h,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(h)),this._drawOrder=null,this._eventIndex=0,this._player.play(h,this._player.playbackRate,o,n,r),a&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=k.a.Browser.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))}},{key:"stop",value:function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this._soundChannelArr.length>0&&this._onAniSoundStoped(!0),this.timer.clear(this,this._update))}},{key:"playbackRate",value:function(t){this._player&&(this._player.playbackRate=t)}},{key:"paused",value:function(){if(!this._pause){if(this._pause=!0,this._player&&(this._player.paused=!0),this._soundChannelArr.length>0)for(var t,e=this._soundChannelArr.length,i=0;i<e;i++)(t=this._soundChannelArr[i]).isStopped||t.pause();this.timer.clear(this,this._update)}}},{key:"resume",value:function(){if(this._indexControl=!1,this._pause){if(this._pause=!1,this._player&&(this._player.paused=!1),this._soundChannelArr.length>0)for(var t,e=this._soundChannelArr.length,i=0;i<e;i++)(t=this._soundChannelArr[i]).audioBuffer&&t.resume();this._lastTime=k.a.Browser.now(),this.timer.frameLoop(1,this,this._update,null,!0)}}},{key:"_getGrahicsDataWithCache",value:function(t,e){return this._graphicsCache[t][e]}},{key:"_setGrahicsDataWithCache",value:function(t,e,i){this._graphicsCache[t][e]=i}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f()(g()(i.prototype),"destroy",this).call(this,t),this._templet._removeReference(1),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update),this._soundChannelArr.length>0&&this._onAniSoundStoped(!0)}},{key:"url",get:function(){return this._aniPath},set:function(t){this.load(t)}},{key:"index",get:function(){return this._index},set:function(t){this.player&&(this._index=t,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}},{key:"total",get:function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}},{key:"player",get:function(){return this._player}},{key:"templet",get:function(){return this._templet}}]),i}(x.a);N.useSimpleMeshInCanvas=!1,B.a.Skeleton=N,k.a.regClass(N),O.a.regClass("laya.ani.bone.Skeleton",N),O.a.regClass("Laya.Skeleton",N)},,function(t,e,i){var n=i(217),r=i(324),a=i(141),s=i(158),o=i(350),h=[].push,l=function(t){var e=1==t,i=2==t,l=3==t,u=4==t,c=6==t,f=5==t||c;return function(_,d,v,p){for(var y,g,m=a(_),x=r(m),k=n(d,v,3),T=s(x.length),b=0,C=p||o,w=e?C(_,T):i?C(_,0):void 0;T>b;b++)if((f||b in x)&&(g=k(y=x[b],b,m),t))if(e)w[b]=g;else if(g)switch(t){case 3:return!0;case 5:return y;case 6:return b;case 2:h.call(w,y)}else if(u)return!1;return c?-1:l||u?u:w}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(t,e,i){var n=i(554),r=i(375);function a(e){return t.exports=a="function"==typeof r&&"symbol"==typeof n?function(t){return typeof t}:function(t){return t&&"function"==typeof r&&t.constructor===r&&t!==r.prototype?"symbol":typeof t},a(e)}t.exports=a},,,,function(t,e,i){var n=i(118),r=i(337),a=i(215),s=i(161),o=i(279),h=i(119),l=i(398),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=s(t),e=o(e,!0),l)try{return u(t,e)}catch(t){}if(h(t,e))return a(!r.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,i){var n=i(167);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n,r,a,s=i(514),o=i(86),h=i(104),l=i(154),u=i(119),c=i(282),f=i(241),_=o.WeakMap;if(s){var d=new _,v=d.get,p=d.has,y=d.set;n=function(t,e){return y.call(d,t,e),e},r=function(t){return v.call(d,t)||{}},a=function(t){return p.call(d,t)}}else{var g=c("state");f[g]=!0,n=function(t,e){return l(t,g,e),e},r=function(t){return u(t,g)?t[g]:{}},a=function(t){return u(t,g)}}t.exports={set:n,get:r,has:a,enforce:function(t){return a(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!h(e)||(i=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}},function(t,e){t.exports=!0},function(t,e,i){var n=i(195);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_);function v(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var p=function(t){u()(i,t);var e=v(i);function i(){var t;return s()(this,i),(t=e.call(this))._width=-1,t._height=-1,t}return h()(i,[{key:"_getSource",value:function(){throw"Bitmap: must override it."}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),i}(i(98).a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(42),h=function(){function t(){r()(this,t),this._controlPoints=[new o.a,new o.a,new o.a],this._calFun=this.getPoint2}return s()(t,[{key:"_switchPoint",value:function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)}},{key:"getPoint2",value:function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],r=this._controlPoints[2],a=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*r.x,s=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*r.y;e.push(a,s)}},{key:"getPoint3",value:function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],r=this._controlPoints[2],a=this._controlPoints[3],s=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*r.x*t*t*(1-t)+a.x*Math.pow(t,3),o=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*r.y*t*t*(1-t)+a.y*Math.pow(t,3);e.push(s,o)}},{key:"insertPoints",value:function(t,e){var i,n;for(n=1/(t=t>0?t:5),i=0;i<=1;i+=n)this._calFun(i,e)}},{key:"getBezierPoints",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if((i=t.length)<2*(r+1))return[];var a=[];switch(r){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=r;)this._controlPoints.push(o.a.create());for(e=0;e<2*r;e+=2)this._switchPoint(t[e],t[e+1]);for(e=2*r;e<i;e+=2)this._switchPoint(t[e],t[e+1]),e/2%r==0&&this.insertPoints(n,a);return a}}]),t}();h.I=new h},function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var n=i(3),r=i.n(n),a=i(67),s=i.n(a),o=i(15),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(16),x=i(89),k=i(106),T=i(140);function b(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var C=function(t){d()(i,t);var e=b(i);function i(){var t;return u()(this,i),(t=e.call(this))._maxsize=0,t._upload=!0,t._uploadSize=0,t._bufferSize=0,t._u8Array=null,t}return f()(i,[{key:"setByteLength",value:function(t){this._byteLength!==t&&(t<=this._bufferSize||this._resizeBuffer(2*t+256,!0),this._byteLength=t)}},{key:"needSize",value:function(t){var e=this._byteLength;if(t){var i=this._byteLength+t;i<=this._bufferSize||this._resizeBuffer(i<<1,!0),this._byteLength=i}return e}},{key:"_bufferData",value:function(){if(this._maxsize=Math.max(this._maxsize,this._byteLength),x.a.loopCount%30==0){var t;if(this._buffer.byteLength>this._maxsize+64)this._buffer=h()(t=this._buffer).call(t,0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse();this._maxsize=this._byteLength}this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,m.a.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage)),m.a.instance.bufferSubData(this._bufferType,0,new Uint8Array(this._buffer,0,this._byteLength))}},{key:"_bufferSubData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._maxsize=Math.max(this._maxsize,this._byteLength),x.a.loopCount%30==0){var n;if(this._buffer.byteLength>this._maxsize+64)this._buffer=h()(n=this._buffer).call(n,0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse();this._maxsize=this._byteLength}if(this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,m.a.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage)),e||i){var r,a=h()(r=this._buffer).call(r,e,i);m.a.instance.bufferSubData(this._bufferType,t,a)}else m.a.instance.bufferSubData(this._bufferType,t,this._buffer)}},{key:"_checkArrayUse",value:function(){}},{key:"_bind_uploadForVAO",value:function(){return!!this._upload&&(this._upload=!1,this._bindForVAO(),this._bufferData(),!0)}},{key:"_bind_upload",value:function(){var t;return!!this._upload&&(this._upload=!1,s()(t=this).call(t),this._bufferData(),!0)}},{key:"_bind_subUpload",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!this._upload&&(this._upload=!1,s()(t=this).call(t),this._bufferSubData(e,i,n),!0)}},{key:"_resizeBuffer",value:function(t,e){var i=this._buffer;if(t<=i.byteLength)return this;var n=this._u8Array;if(e&&i&&i.byteLength>0){var r=new ArrayBuffer(t),a=n&&n.buffer==i?n:new Uint8Array(i);(n=this._u8Array=new Uint8Array(r)).set(a,0),i=this._buffer=r}else i=this._buffer=new ArrayBuffer(t),this._u8Array=null;return this._checkArrayUse(),this._upload=!0,this._bufferSize=i.byteLength,this}},{key:"append",value:function(t){var e,i;this._upload=!0,e=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+e,!0),i=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+e,!0),i=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+e,!0),i=new Float32Array(this._buffer,this._byteLength)),i.set(t,0),this._byteLength+=e,this._checkArrayUse()}},{key:"appendU16Array",value:function(t,e){this._resizeBuffer(this._byteLength+2*e,!0);var i=new Uint16Array(this._buffer,this._byteLength,e);if(6==e)i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5];else if(e>=100)i.set(new Uint16Array(t.buffer,0,e));else for(var n=0;n<e;n++)i[n]=t[n];this._byteLength+=2*e,this._checkArrayUse()}},{key:"appendEx",value:function(t,e){var i;this._upload=!0,i=t.byteLength,this._resizeBuffer(this._byteLength+i,!0),new e(this._buffer,this._byteLength).set(t,0),this._byteLength+=i,this._checkArrayUse()}},{key:"appendEx2",value:function(t,e,i){var n,r,a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;for(this._upload=!0,n=i*s,this._resizeBuffer(this._byteLength+n,!0),r=new e(this._buffer,this._byteLength),a=0;a<i;a++)r[a]=t[a];this._byteLength+=n,this._checkArrayUse()}},{key:"getBuffer",value:function(){return this._buffer}},{key:"setNeedUpload",value:function(){this._upload=!0}},{key:"getNeedUpload",value:function(){return this._upload}},{key:"upload",value:function(){var t=m.a.instance,e=this._bind_upload();return t.bindBuffer(this._bufferType,null),this._bufferType==t.ARRAY_BUFFER&&(T.a._bindedVertexBuffer=null),this._bufferType==t.ELEMENT_ARRAY_BUFFER&&(T.a._bindedIndexBuffer=null),k.a.activeShader=null,e}},{key:"subUpload",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t=m.a.instance,e=this._bind_subUpload();return t.bindBuffer(this._bufferType,null),this._bufferType==t.ARRAY_BUFFER&&(T.a._bindedVertexBuffer=null),this._bufferType==t.ELEMENT_ARRAY_BUFFER&&(T.a._bindedIndexBuffer=null),k.a.activeShader=null,e}},{key:"_disposeResource",value:function(){this._upload=!0,this._uploadSize=0}},{key:"clear",value:function(){this._byteLength=0,this._upload=!0}},{key:"bufferLength",get:function(){return this._buffer.byteLength}},{key:"byteLength",set:function(t){this.setByteLength(t)}}],[{key:"__int__",value:function(t){}}]),i}(T.a);C.FLOAT32=4,C.SHORT=2},function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(19),h=i(0),l=i(21),u=function(){function t(){r()(this,t)}return s()(t,null,[{key:"enable",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;h.a.loader.load(e,o.a.create(null,t._onInfoLoaded,[i]),null,l.a.JSON)}},{key:"_onInfoLoaded",value:function(e,i){var n,r,a,s,o;for(n in i)for(r=(a=i[n])[0],o=(a=a[1]).length,s=0;s<o;s++)t._fileLoadDic[r+a[s]]=n;e&&e.run()}},{key:"getFileLoadPath",value:function(e){return t._fileLoadDic[e]||e}}]),t}();u._fileLoadDic={}},function(t,e,i){"use strict";i.d(e,"a",(function(){return P}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(35),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(84),x=i(63),k=i(180),T=i(124),b=i(76),C=i(5),w=i(42),S=i(21),E=i(78),A=i(19),M=i(72),R=i(0),I=i(10);function D(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var P=function(t){d()(i,t);var e=D(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s()(this,i),(t=e.call(this)).rollRatio=.97,t.scaleBar=!0,t.autoHide=!1,t.elasticDistance=0,t.elasticBackTime=500,t._showButtons=T.a.showButtons,t._scrollSize=1,t._thumbPercent=1,t._lastOffset=0,t._checkElastic=!1,t._isElastic=!1,t._hide=!1,t._clickOnly=!0,t._touchScrollEnable=T.a.touchScrollEnable,t._mouseWheelEnable=T.a.mouseWheelEnable,t.skin=n,t.max=1,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stopScroll(),this.target=null,f()(g()(i.prototype),"destroy",this).call(this,t),this.upButton&&this.upButton.destroy(t),this.downButton&&this.downButton.destroy(t),this.slider&&this.slider.destroy(t),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null}},{key:"createChildren",value:function(){this.addChild(this.slider=new k.a),this.addChild(this.upButton=new x.a),this.addChild(this.downButton=new x.a)}},{key:"initialize",value:function(){this.slider.showLabel=!1,this.slider.tick=0,this.slider.on(C.a.CHANGE,this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on(C.a.MOUSE_DOWN,this,this.onButtonMouseDown),this.downButton.on(C.a.MOUSE_DOWN,this,this.onButtonMouseDown)}},{key:"onSliderChange",value:function(){this._value!=this.slider.value&&(this.value=this.slider.value)}},{key:"onButtonMouseDown",value:function(t){var e=t.currentTarget===this.upButton;this.slide(e),R.a.timer.once(b.a.scrollBarDelayTime,this,this.startLoop,[e]),R.a.stage.once(C.a.MOUSE_UP,this,this.onStageMouseUp)}},{key:"startLoop",value:function(t){R.a.timer.frameLoop(1,this,this.slide,[t])}},{key:"slide",value:function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize}},{key:"onStageMouseUp",value:function(t){R.a.timer.clear(this,this.startLoop),R.a.timer.clear(this,this.slide)}},{key:"_skinLoaded",value:function(){this.slider.skin=this._skin,this.callLater(this.changeScrollBar),this._sizeChanged(),this.event(C.a.LOADED)}},{key:"changeScrollBar",value:function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()}},{key:"_sizeChanged",value:function(){f()(g()(i.prototype),"_sizeChanged",this).call(this),this.repaint(),this.resetPositions(),this.event(C.a.CHANGE),this.changeHandler&&this.changeHandler.runWith(this.value)}},{key:"resetPositions",value:function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()}},{key:"resetButtonPosition",value:function(){this.slider.isVertical?this.downButton.y=this.slider._y+this.slider.height:this.downButton.x=this.slider._x+this.slider.width}},{key:"measureWidth",value:function(){return this.slider.isVertical?this.slider.width:100}},{key:"measureHeight",value:function(){return this.slider.isVertical?100:this.slider.height}},{key:"setScroll",value:function(t,e,i){this.runCallLater(this._sizeChanged),this.slider.setSlider(t,e,i),this.slider.bar.visible=e>0,!this._hide&&this.autoHide&&(this.visible=!1)}},{key:"onTargetMouseWheel",value:function(t){this.value-=t.delta*this._scrollSize,this.target=this._target}},{key:"onTargetMouseDown",value:function(t){this.isLockedFun&&!this.isLockedFun(t)||(this.event(C.a.END),this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new w.a),this._lastPoint.setTo(R.a.stage.mouseX,R.a.stage.mouseY),R.a.timer.clear(this,this.tweenMove),M.a.clearTween(this),R.a.stage.once(C.a.MOUSE_UP,this,this.onStageMouseUp2),R.a.stage.once(C.a.MOUSE_OUT,this,this.onStageMouseUp2),R.a.timer.frameLoop(1,this,this.loop))}},{key:"startDragForce",value:function(){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new w.a),this._lastPoint.setTo(R.a.stage.mouseX,R.a.stage.mouseY),R.a.timer.clear(this,this.tweenMove),M.a.clearTween(this),R.a.stage.once(C.a.MOUSE_UP,this,this.onStageMouseUp2),R.a.stage.once(C.a.MOUSE_OUT,this,this.onStageMouseUp2),R.a.timer.frameLoop(1,this,this.loop)}},{key:"cancelDragOp",value:function(){R.a.stage.off(C.a.MOUSE_UP,this,this.onStageMouseUp2),R.a.stage.off(C.a.MOUSE_OUT,this,this.onStageMouseUp2),R.a.timer.clear(this,this.tweenMove),R.a.timer.clear(this,this.loop),this._target.mouseEnabled=!0}},{key:"checkTriggers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.value>=0&&this.value-this._lastOffset<=0&&this.triggerDownDragLimit&&this.triggerDownDragLimit(t)?(this.cancelDragOp(),this.value=0,!0):!!(this.value<=this.max&&this.value-this._lastOffset>=this.max&&this.triggerUpDragLimit&&this.triggerUpDragLimit(t))&&(this.cancelDragOp(),this.value=this.max,!0)}},{key:"startTweenMoveForce",value:function(t){this._lastOffset=t,R.a.timer.frameLoop(1,this,this.tweenMove,[200])}},{key:"loop",value:function(){var t=R.a.stage.mouseY,e=R.a.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:e-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?R.a.stage._canvasTransform.getScaleY():R.a.stage._canvasTransform.getScaleX()))>1))return;if(this._clickOnly=!1,this.checkTriggers())return;this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event(C.a.START)}else if(this.checkTriggers())return;this._offsets.push(this._lastOffset),this._lastPoint.x=e,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this._lastOffset>0?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value>=this.min&&(this._checkElastic=!1)):this._value>=this.max&&(this._lastOffset<0?this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value<=this.max&&(this._checkElastic=!1))):this.value-=this._lastOffset)}},{key:"onStageMouseUp2",value:function(t){if(R.a.stage.off(C.a.MOUSE_UP,this,this.onStageMouseUp2),R.a.stage.off(C.a.MOUSE_OUT,this,this.onStageMouseUp2),R.a.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?M.a.to(this,{value:this.min},this.elasticBackTime,E.a.sineOut,A.a.create(this,this.elasticOver)):this._value>this.max&&M.a.to(this,{value:this.max},this.elasticBackTime,E.a.sineOut,A.a.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?R.a.stage.mouseY-this._lastPoint.y:R.a.stage.mouseX-this._lastPoint.x);for(var e=0,i=Math.min(this._offsets.length,3),n=0;n<i;n++)e+=this._offsets[this._offsets.length-1-n];if(this._lastOffset=e/i,(e=Math.abs(this._lastOffset))<2)return void this.event(C.a.END);e>250&&(this._lastOffset=this._lastOffset>0?250:-250);var r=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/150)));R.a.timer.frameLoop(1,this,this.tweenMove,[r])}}},{key:"elasticOver",value:function(){this._isElastic=!1,!this.hide&&this.autoHide&&M.a.to(this,{alpha:0},500),this.event(C.a.END)}},{key:"tweenMove",value:function(t){var e;if((this._lastOffset*=this.rollRatio,!this.checkTriggers(!0))&&(t>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,e=.5*-(this.min-t-this.value),this._lastOffset>e&&(this._lastOffset=e)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,e=.5*-(this.max+t-this.value),this._lastOffset<e&&(this._lastOffset=e))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<.1)){if(R.a.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?M.a.to(this,{value:this.min},this.elasticBackTime,E.a.sineOut,A.a.create(this,this.elasticOver)):this._value>this.max?M.a.to(this,{value:this.max},this.elasticBackTime,E.a.sineOut,A.a.create(this,this.elasticOver)):this.elasticOver());this.event(C.a.END),!this.hide&&this.autoHide&&M.a.to(this,{alpha:0},500)}}},{key:"stopScroll",value:function(){this.onStageMouseUp2(null),R.a.timer.clear(this,this.tweenMove),M.a.clearTween(this)}},{key:"skin",get:function(){return this._skin},set:function(t){" "!=t&&this._skin!=t&&(this._skin=t,this._skin&&!S.a.getRes(this._skin)?R.a.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],A.a.create(this,this._skinLoaded)):this._skinLoaded())}},{key:"max",get:function(){return this.slider.max},set:function(t){this.slider.max=t}},{key:"min",get:function(){return this.slider.min},set:function(t){this.slider.min=t}},{key:"value",get:function(){return this._value},set:function(t){t!==this._value&&(this._value=t,this._isElastic||(this.slider._value!=t&&(this.slider._value=t,this.slider.changeValue()),this._value=this.slider._value),this.event(C.a.CHANGE),this.changeHandler&&this.changeHandler.runWith(this._value))}},{key:"isVertical",get:function(){return this.slider.isVertical},set:function(t){this.slider.isVertical=t}},{key:"sizeGrid",get:function(){return this.slider.sizeGrid},set:function(t){this.slider.sizeGrid=t}},{key:"scrollSize",get:function(){return this._scrollSize},set:function(t){this._scrollSize=t}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):u()(g()(i.prototype),"dataSource",t,this,!0)},get:function(){return f()(g()(i.prototype),"dataSource",this)}},{key:"thumbPercent",get:function(){return this._thumbPercent},set:function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this._sizeChanged),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,b.a.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,b.a.scrollBarMinNum))}},{key:"target",get:function(){return this._target},set:function(t){this._target&&(this._target.off(C.a.MOUSE_WHEEL,this,this.onTargetMouseWheel),this._target.off(C.a.MOUSE_DOWN,this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on(C.a.MOUSE_WHEEL,this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on(C.a.MOUSE_DOWN,this,this.onTargetMouseDown))}},{key:"hide",get:function(){return this._hide},set:function(t){this._hide=t,this.visible=!t}},{key:"showButtons",get:function(){return this._showButtons},set:function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}},{key:"touchScrollEnable",get:function(){return this._touchScrollEnable},set:function(t){this._touchScrollEnable=t,this.target=this._target}},{key:"mouseWheelEnable",get:function(){return this._mouseWheelEnable},set:function(t){this._mouseWheelEnable=t,this.target=this._target}},{key:"lastOffset",get:function(){return this._lastOffset}},{key:"tick",get:function(){return this.slider.tick},set:function(t){this.slider.tick=t}}]),i}(m.a);R.a.regClass(P),I.a.regClass("laya.ui.ScrollBar",P),I.a.regClass("Laya.ScrollBar",P)},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(367),r=i.n(n),a=i(14),s=i.n(a),o=i(26),h=i(19);function l(t,e){var i=this;return new s.a((function(n,a){var s;e&&(s=new h.a(null,(function(t){e(t)}),null,!1));var l=new h.a(i,(function(){r()(n)}));o.b.load(t,l,s)}))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t),this.reset()}return s()(t,[{key:"reset",value:function(){return this.scaleX=this.scaleY=1,this.skewX=this.skewY=0,this.pivotX=this.pivotY=this.rotation=0,this.alpha=1,this.scrollRect&&this.scrollRect.recover(),this.scrollRect=null,this.viewport&&this.viewport.recover(),this.viewport=null,this.hitArea=null,this.dragging=null,this.blendMode=null,this}},{key:"recover",value:function(){this!==t.EMPTY&&o.a.recover("SpriteStyle",this.reset())}}],[{key:"create",value:function(){return o.a.getItemByClass("SpriteStyle",t)}}]),t}();h.EMPTY=new h},function(t,e,i){t.exports=i(684)},,,,,,,,function(t,e,i){t.exports=i(571)},,,,function(t,e){t.exports={}},function(t,e,i){var n=i(119),r=i(141),a=i(282),s=i(403),o=a("IE_PROTO"),h=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?h:null}},function(t,e,i){var n,r=i(131),a=i(517),s=i(343),o=i(241),h=i(406),l=i(338),u=i(282),c=u("IE_PROTO"),f=function(){},_=function(t){return"<script>"+t+"<\/script>"},d=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=n?function(t){t.write(_("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=l("iframe")).style.display="none",h.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(_("document.F=Object")),t.close(),t.F);for(var i=s.length;i--;)delete d.prototype[s[i]];return d()};o[c]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(f.prototype=r(t),i=new f,f.prototype=null,i[c]=t):i=d(),void 0===e?i:a(i,e)}},function(t,e,i){var n=i(154);t.exports=function(t,e,i,r){r&&r.enumerable?t[e]=i:n(t,e,i)}},function(t,e,i){var n=i(83),r=i(87),a=i(349),s=r("species");t.exports=function(t){return a>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return O}));var n=i(38),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(291),u=i(292),c=i(293),f=i(253),_=i(294),d=i(295),v=i(296),p=i(297),y=i(298),g=i(299),m=i(254),x=i(255),k=i(300),T=i(301),b=i(302),C=i(303),w=i(304),S=i(223),E=i(305),A=i(18),M=i(42),R=i(32),I=i(47),D=i(13),P=i(34),L=i(309),B=i(310),O=function(){function t(){s()(this,t),this._cacheBoundsType=!1}return h()(t,[{key:"destroy",value:function(){this._graphics=null,this._cacheBoundsType=!1,this._temp&&(this._temp.length=0),this._rstBoundPoints&&(this._rstBoundPoints.length=0),this._bounds&&this._bounds.recover(),this._bounds=null,D.a.recover("GraphicsBounds",this)}},{key:"reset",value:function(){this._temp&&(this._temp.length=0)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=R.a._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds}},{key:"getBoundPoints",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=P.a.copyArray(this._rstBoundPoints,this._temp)}},{key:"_getCmdPoints",value:function(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(I.a._context,this._graphics.cmds);if((e=this._temp||(this._temp=[])).length=0,n||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),n=t._tempCmds),!n)return e;var a=t._tempMatrixArrays;a.length=0;var s=t._initMatrix;s.identity();for(var o,h,A=t._tempMatrix,M=0,D=n.length;M<D;M++)switch((o=n[M]).cmdID){case l.a.ID:a.push(s),s=s.clone();break;case k.a.ID:s=a.pop();break;case b.a.ID:A.identity(),A.translate(-o.pivotX,-o.pivotY),A.scale(o.scaleX,o.scaleY),A.translate(o.pivotX,o.pivotY),this._switchMatrix(s,A);break;case T.a.ID:A.identity(),A.translate(-o.pivotX,-o.pivotY),A.rotate(o.angle),A.translate(o.pivotX,o.pivotY),this._switchMatrix(s,A);break;case w.a.ID:A.identity(),A.translate(o.tx,o.ty),this._switchMatrix(s,A);break;case C.a.ID:A.identity(),A.translate(-o.pivotX,-o.pivotY),r()(A).call(A,o.matrix),A.translate(o.pivotX,o.pivotY),this._switchMatrix(s,A);break;case f.a.ID:case x.a.ID:t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,o.width,o.height),s);break;case m.a.ID:s.copyTo(A),o.matrix&&r()(A).call(A,o.matrix),t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,o.width,o.height),A);break;case f.a.ID:if(h=o.texture,i)o.width&&o.height?t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,o.width,o.height),s):t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,h.width,h.height),s);else{var O=(o.width||h.sourceWidth)/h.width,F=(o.height||h.sourceHeight)/h.height,N=O*h.sourceWidth,U=F*h.sourceHeight,G=h.offsetX>0?h.offsetX:0,Y=h.offsetY>0?h.offsetY:0;G*=O,Y*=F,t._addPointArrToRst(e,R.a._getBoundPointS(o.x-G,o.y-Y,N,U),s)}break;case x.a.ID:o.width&&o.height?t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,o.width,o.height),s):(h=o.texture,t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,h.width,h.height),s));break;case m.a.ID:var W;o.matrix?(s.copyTo(A),r()(A).call(A,o.matrix),W=A):W=s,i?o.width&&o.height?t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,o.width,o.height),W):(h=o.texture,t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,h.width,h.height),W)):(h=o.texture,O=(o.width||h.sourceWidth)/h.width,F=(o.height||h.sourceHeight)/h.height,N=O*h.sourceWidth,U=F*h.sourceHeight,G=h.offsetX>0?h.offsetX:0,Y=h.offsetY>0?h.offsetY:0,G*=O,Y*=F,t._addPointArrToRst(e,R.a._getBoundPointS(o.x-G,o.y-Y,N,U),W));break;case g.a.ID:t._addPointArrToRst(e,R.a._getBoundPointS(o.x,o.y,o.width,o.height),s);break;case u.a.ID:t._addPointArrToRst(e,R.a._getBoundPointS(o.x-o.radius,o.y-o.radius,o.radius+o.radius,o.radius+o.radius),s);break;case _.a.ID:var V;t._tempPoints.length=0,V=.5*o.lineWidth,o.fromX==o.toX?t._tempPoints.push(o.fromX+V,o.fromY,o.toX+V,o.toY,o.fromX-V,o.fromY,o.toX-V,o.toY):o.fromY==o.toY?t._tempPoints.push(o.fromX,o.fromY+V,o.toX,o.toY+V,o.fromX,o.fromY-V,o.toX,o.toY-V):t._tempPoints.push(o.fromX,o.fromY,o.toX,o.toY),t._addPointArrToRst(e,t._tempPoints,s);break;case c.a.ID:t._addPointArrToRst(e,S.a.I.getBezierPoints(o.points),s,o.x,o.y);break;case d.a.ID:case y.a.ID:t._addPointArrToRst(e,o.points,s,o.x,o.y);break;case v.a.ID:t._addPointArrToRst(e,this._getPathPoints(o.paths),s,o.x,o.y);break;case p.a.ID:t._addPointArrToRst(e,this._getPiePoints(o.x,o.y,o.radius,o.startAngle,o.endAngle),s);break;case L.a.ID:t._addPointArrToRst(e,this._getTriAngBBXPoints(o.vertices),s);break;case B.a.ID:t._addPointArrToRst(e,this._getDraw9GridBBXPoints(o),s)}return e.length>200?e=P.a.copyArray(e,R.a._getWrapRec(e)._getBoundPoints()):e.length>8&&(e=E.a.scanPList(e)),e}},{key:"_switchMatrix",value:function(t,e){r()(e).call(e,t),e.copyTo(t)}},{key:"_getPiePoints",value:function(e,i,n,r,a){var s=t._tempPoints;t._tempPoints.length=0;var o=Math.PI/180,h=a-r;if(h>=360||h<=-360)return s.push(e-n,i-n),s.push(e+n,i-n),s.push(e+n,i+n),s.push(e-n,i+n),s;s.push(e,i);var l=h%360;l<0&&(l+=360);var u=r+l,c=r*o,f=u*o;s.push(e+n*Math.cos(c),i+n*Math.sin(c)),s.push(e+n*Math.cos(f),i+n*Math.sin(f));for(var _=90*Math.ceil(r/90),d=90*Math.floor(u/90),v=_;v<=d;v+=90){var p=v*o;s.push(e+n*Math.cos(p),i+n*Math.sin(p))}return s}},{key:"_getTriAngBBXPoints",value:function(t){var e=t.length;if(e<2)return[];for(var i=t[0],n=t[1],r=i,a=n,s=2;s<e;){var o=t[s++],h=t[s++];i>o&&(i=o),n>h&&(n=h),r<o&&(r=o),a<h&&(a=h)}return[i,n,r,n,r,a,i,a]}},{key:"_getDraw9GridBBXPoints",value:function(t){var e=t.width,i=t.height;return[0,0,e,0,e,i,0,i]}},{key:"_getPathPoints",value:function(e){var i,n,r,a=t._tempPoints;for(a.length=0,n=e.length,i=0;i<n;i++)(r=e[i]).length>1&&(a.push(r[1],r[2]),r.length>3&&a.push(r[3],r[4]));return a}}],[{key:"create",value:function(){return D.a.getItemByClass("GraphicsBounds",t)}},{key:"_addPointArrToRst",value:function(e,i,n){var r,a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(a=i.length,r=0;r<a;r+=2)t._addPointToRst(e,i[r]+s,i[r+1]+o,n)}},{key:"_addPointToRst",value:function(t,e,i,n){var r=M.a.TEMP;r.setTo(e||0,i||0),n.transformPoint(r),t.push(r.x,r.y)}}]),t}();O._tempMatrix=new A.a,O._initMatrix=new A.a,O._tempPoints=[],O._tempMatrixArrays=[],O._tempCmds=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(22),p=i(68),y=i(138),g=i(17),m=i(41);function x(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var k=function(t){u()(i,t);var e=x(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.a.TYPE_2D;return s()(this,i),e.call(this,t)}return h()(i,[{key:"renderSubmit",value:function(){if(0===this._numEle||!this._mesh||0==this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t._getSource();if(!e)return 1;this.shaderValue.texture=e}var i=g.a.mainContext;return this._mesh.useMesh(i),this.shaderValue.upload(),p.a.activeBlendFunction!==this._blendFn&&(g.a.setBlend(i,!0),this._blendFn(i),p.a.activeBlendFunction=this._blendFn),i.drawElements(i.TRIANGLES,this._numEle,i.UNSIGNED_SHORT,this._startIdx),v.a.renderBatches++,v.a.trianglesFaces+=this._numEle/3,1}},{key:"releaseRender",value:function(){m.a.RENDERBASE!=this&&--this._ref<1&&(i.POOL[i._poolSize++]=this,this.shaderValue.release(),this.shaderValue=null,this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))}}],[{key:"create",value:function(t,e,n){var r=i._poolSize?i.POOL[--i._poolSize]:new i;r._ref=1,r._mesh=e,r._key.clear(),r._startIdx=e.indexNum*y.a.BYTES_PIDX,r._numEle=0;var a=t._nBlendType;r._blendFn=t._targets?p.a.targetFns[a]:p.a.fns[a],r.shaderValue=n,r.shaderValue.setValue(t._shader2D);var s=t._shader2D.filters;return s&&r.shaderValue.setFilters(s),r}},{key:"createShape",value:function(t,e,n,r){var a=i._poolSize?i.POOL[--i._poolSize]:new i;a._mesh=e,a._numEle=n,a._startIdx=2*e.indexNum,a._ref=1,a.shaderValue=r,a.shaderValue.setValue(t._shader2D);var s=t._nBlendType;return a._key.blendShader=s,a._blendFn=t._targets?p.a.targetFns[s]:p.a.fns[s],a}}]),i}(m.a);k._poolSize=0,k.POOL=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(39),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(0),u=function(){function t(){s()(this,t)}return h()(t,null,[{key:"regCacheByFunction",value:function(e,i){var n;t.unRegCacheByFunction(e,i),n={tryDispose:e,getCacheList:i},t._cacheList.push(n)}},{key:"unRegCacheByFunction",value:function(e,i){var n,a;for(a=t._cacheList.length,n=0;n<a;n++){var s;if(t._cacheList[n].tryDispose==e&&t._cacheList[n].getCacheList==i)return void r()(s=t._cacheList).call(s,n,1)}}},{key:"forceDispose",value:function(){var e,i=t._cacheList.length;for(e=0;e<i;e++)t._cacheList[e].tryDispose(!0)}},{key:"beginCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;l.a.systemTimer.loop(e,null,t._checkLoop)}},{key:"stopCheck",value:function(){l.a.systemTimer.clear(null,t._checkLoop)}},{key:"_checkLoop",value:function(){var e=t._cacheList;if(!(e.length<1)){var i,n,r=l.a.Browser.now();for(n=i=e.length;i>0&&(t._index++,t._index=t._index%n,e[t._index].tryDispose(!1),!(l.a.Browser.now()-r>t.loopTimeLimit));)i--}}}]),t}();u.loopTimeLimit=2,u._cacheList=[],u._index=0},function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(0),p=i(5),y=i(66),g=i(40),m=i(98),x=i(57),k=i(19),T=i(34),b=i(225),C=i(21);function w(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var S=function(t){u()(i,t);var e=w(i);function i(){var t;s()(this,i),(t=e.call(this)).retryNum=1,t.retryDelay=0,t.maxLoader=5,t._loaders=[],t._loaderCount=0,t._resInfos=[],t._infoPool=[],t._maxPriority=5,t._failRes={},t._statInfo={count:1,loaded:1};for(var n=0;n<t._maxPriority;n++)t._resInfos[n]=[];return t}return h()(i,[{key:"getProgress",value:function(){return this._statInfo.loaded/this._statInfo.count}},{key:"resetProgress",value:function(){this._statInfo.count=this._statInfo.loaded=1}},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];this._create(t,!0,e,i,n,r,a,s,o)}},{key:"_create",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(t instanceof Array){var l=!0,u=t,c=u.length,f=0;if(n)var _=k.a.create(n.caller,n?n.method:null,n.args,!1);for(var d=0;d<c;d++){var v=u[d];"string"==typeof v&&(v=u[d]={url:v}),v.progress=0}for(d=0;d<c;d++){v=u[d];var p=n?k.a.create(null,(function(t,e){t.progress=e;for(var i=0,n=0;n<c;n++){i+=u[n].progress}var r=i/c;_.runWith(r)}),[v],!1):null,y=n||i?k.a.create(null,(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f++,t.progress=1,e||(l=!1),f===c&&i&&i.runWith(l)}),[v]):null;this._createOne(v.url,e,y,p,v.type||r,v.constructParams||a,v.propertyParams||s,v.priority||o,h)}}else this._createOne(t,e,i,n,r,a,s,o,h)}},{key:"_createOne",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],u=this.getRes(t);if(u)!e&&u instanceof m.a&&u._addReference(),r&&r.runWith(1),n&&n.runWith(u);else{var c=T.a.getFileExtension(t);if(a||(a=i.createMap[c]?i.createMap[c][0]:null),!a)return void this.load(t,n,r,a,h,l);var f=C.a.parserMap;if(!f[a])return void this.load(t,n,r,a,h,l);this._createLoad(t,k.a.create(null,(function(i){i&&(!e&&i instanceof m.a&&i._addReference(),i._setCreateURL(t)),n&&n.runWith(i),v.a.loader.event(t)})),r,a,s,o,h,l,!0)}}},{key:"load",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:v.a.WorkerLoader.enable;if(t instanceof Array)return this._loadAssets(t,n,r,a,s,o,h);if(e=a===C.a.IMAGE?C.a.textureMap[g.a.formatURL(t)]:C.a.loadedMap[g.a.formatURL(t)],l||null==e){var c;c=t,(t=b.a.getFileLoadPath(t))!=c&&"nativeimage"!==a?a=C.a.ATLAS:c=null;var f=i._resMap[t];f?(n&&(c?n&&f._createListener(p.a.COMPLETE,this,this._resInfoLoaded,[c,n],!1,!1):n&&f._createListener(p.a.COMPLETE,n.caller,n.method,n.args,!1,!1)),r&&f._createListener(p.a.PROGRESS,r.caller,r.method,r.args,!1,!1)):((f=this._infoPool.length?this._infoPool.pop():new E).url=t,f.type=a,f.cache=o,f.group=h,f.ignoreCache=l,f.useWorkerLoader=u,f.originalUrl=c,n&&f.on(p.a.COMPLETE,n.caller,n.method,n.args),r&&f.on(p.a.PROGRESS,r.caller,r.method,r.args),i._resMap[t]=f,s=s<this._maxPriority?s:this._maxPriority-1,this._resInfos[s].push(f),this._statInfo.count++,this.event(p.a.PROGRESS,this.getProgress()),this._next())}else v.a.systemTimer.frameOnce(1,this,(function(){r&&r.runWith(1),n&&n.runWith(e instanceof Array?[e]:e),this._loaderCount||this.event(p.a.COMPLETE)}));return this}},{key:"_resInfoLoaded",value:function(t,e){e.runWith(C.a.getRes(t))}},{key:"_createLoad",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(t instanceof Array)return this._loadAssets(t,e,n,r,o,h);var u=C.a.getRes(t);if(null!=u)v.a.systemTimer.frameOnce(1,this,(function(){n&&n.runWith(1),e&&e.runWith(u),this._loaderCount||this.event(p.a.COMPLETE)}));else{var c=i._resMap[t];c?(e&&c._createListener(p.a.COMPLETE,e.caller,e.method,e.args,!1,!1),n&&c._createListener(p.a.PROGRESS,n.caller,n.method,n.args,!1,!1)):((c=this._infoPool.length?this._infoPool.pop():new E).url=t,c.type=r,c.cache=!1,c.ignoreCache=l,c.originalUrl=null,c.group=null,c.createCache=h,c.createConstructParams=a,c.createPropertyParams=s,e&&c.on(p.a.COMPLETE,e.caller,e.method,e.args),n&&c.on(p.a.PROGRESS,n.caller,n.method,n.args),i._resMap[t]=c,o=o<this._maxPriority?o:this._maxPriority-1,this._resInfos[o].push(c),this._statInfo.count++,this.event(p.a.PROGRESS,this.getProgress()),this._next())}return this}},{key:"_next",value:function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++)for(var e=this._resInfos[t];e.length>0;){var i=e.shift();if(i)return this._doLoad(i)}this._loaderCount||this.event(p.a.COMPLETE)}}},{key:"_doLoad",value:function(t){this._loaderCount++;var e=this._loaders.length?this._loaders.pop():new C.a;e.on(p.a.COMPLETE,null,n),e.on(p.a.PROGRESS,null,(function(e){t.event(p.a.PROGRESS,e)})),e.on(p.a.ERROR,null,(function(t){n(null)}));var i=this;function n(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.offAll(),e._data=null,e._customParse=!1,i._loaders.push(e),i._endLoad(t,n instanceof Array?[n]:n),i._loaderCount--,i._next()}e._constructParams=t.createConstructParams,e._propertyParams=t.createPropertyParams,e._createCache=t.createCache,e.load(t.url,t.type,t.cache,t.group,t.ignoreCache,t.useWorkerLoader)}},{key:"_endLoad",value:function(t,e){var n=t.url;if(null==e){var r=this._failRes[n]||0;if(r<this.retryNum)return console.warn("[warn]Retry to load:",n),this._failRes[n]=r+1,void v.a.systemTimer.once(this.retryDelay,this,this._addReTry,[t],!1);C.a.clearRes(n),console.warn("[error]Failed to load:",n),this.event(p.a.ERROR,n)}this._failRes[n]&&(this._failRes[n]=0),delete i._resMap[n],t.originalUrl&&(e=C.a.getRes(t.originalUrl)),t.event(p.a.COMPLETE,e),t.offAll(),this._infoPool.push(t),this._statInfo.loaded++,this.event(p.a.PROGRESS,this.getProgress())}},{key:"_addReTry",value:function(t){this._resInfos[this._maxPriority-1].push(t),this._next()}},{key:"clearRes",value:function(t){C.a.clearRes(t)}},{key:"clearTextureRes",value:function(t){C.a.clearTextureRes(t)}},{key:"getRes",value:function(t){return C.a.getRes(t)}},{key:"cacheRes",value:function(t,e){C.a.cacheRes(t,e)}},{key:"setGroup",value:function(t,e){C.a.setGroup(t,e)}},{key:"clearResByGroup",value:function(t){C.a.clearResByGroup(t)}},{key:"clearUnLoaded",value:function(){for(var t=0;t<this._maxPriority;t++){for(var e=this._resInfos[t],n=e.length-1;n>-1;n--){var r=e[n];r&&(r.offAll(),this._infoPool.push(r))}e.length=0}this._loaderCount=0,i._resMap={}}},{key:"cancelLoadByUrls",value:function(t){if(t)for(var e=0,i=t.length;e<i;e++)this.cancelLoadByUrl(t[e])}},{key:"cancelLoadByUrl",value:function(t){for(var e=0;e<this._maxPriority;e++)for(var n=this._resInfos[e],r=n.length-1;r>-1;r--){var a=n[r];a&&a.url===t&&(n[r]=null,a.offAll(),this._infoPool.push(a))}i._resMap[t]&&delete i._resMap[t]}},{key:"_loadAssets",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=t.length,h=0,l=0,u=[],c=!0,f=0;f<o;f++){var _=t[f],d=void 0;(d="string"==typeof _?{url:_,type:n,size:1,priority:r}:_).size||(d.size=1),d.progress=0,l+=d.size,u.push(d);var v=i?k.a.create(null,g,[d],!1):null,p=e||i?k.a.create(null,y,[d]):null;this.load(d.url,p,v,d.type,d.priority||1,a,d.group||s,!1,d.useWorkerLoader)}function y(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;h++,t.progress=1,i||(c=!1),h===o&&e&&e.runWith(c)}function g(t,e){if(null!=i){t.progress=e;for(var n=0,r=0;r<u.length;r++){var a=u[r];if(a){var s=null==a.progress?0:a.progress;n+=null==a.size?0:a.size*s}}var o=n/l;i.runWith(o)}}return this}},{key:"decodeBitmaps",value:function(t){var e,i,n=t.length;for(i=v.a.Render._context,e=0;e<n;e++){var r,a;if(r=C.a.getAtlas(t[e]))this._decodeTexture(r[0],i);else(a=this.getRes(t[e]))&&a instanceof x.a&&this._decodeTexture(a,i)}}},{key:"_decodeTexture",value:function(t,e){var i=t.bitmap;if(t&&i){var n=i.source||i.image;if(n&&n instanceof HTMLImageElement){e.drawImage(n,0,0,1,1);e.getImageData(0,0,1,1)}}}}],[{key:"cacheRes",value:function(t,e){C.a.cacheRes(t,e)}}]),i}(y.a);S._resMap={},S.createMap={atlas:[null,C.a.ATLAS]};var E=function(t){u()(i,t);var e=w(i);function i(){return s()(this,i),e.apply(this,arguments)}return i}(y.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(1),r=i.n(n),a=i(133),s=function t(){r()(this,t)};s.createShaderCondition=function(t){var e="(function() {return "+t+";})";return window.Laya._runScript(e)},s.changeWebGLSize=function(t,e){a.a.onStageResize(t,e)}},function(t,e,i){"use strict";function n(t){return(""+t.replace(/[^\x00-\xff]/gi,"ox")).length}i.d(e,"a",(function(){return n}))},function(t,e,i){t.exports=i(588)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.texture&&this.texture._removeReference(),this.texture=null,o.a.recover("DrawImageCmd",this)}},{key:"run",value:function(t,e,i){this.texture&&t.drawTexture(this.texture,this.x+e,this.y+i,this.width,this.height)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a){var s=o.a.getItemByClass("DrawImageCmd",t);return s.texture=e,e._addReference(),s.x=i,s.y=n,s.width=r,s.height=a,s}}]),t}();h.ID="DrawImage"},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(146),h=i(13),l=function(){function t(){r()(this,t),this.colorFlt=null,this.uv=null}return s()(t,[{key:"recover",value:function(){this.texture&&this.texture._removeReference(),this.texture=null,this.matrix=null,h.a.recover("DrawTextureCmd",this)}},{key:"run",value:function(t,e,i){this.texture&&t.drawTextureWithTransform(this.texture,this.x,this.y,this.width,this.height,this.matrix,e,i,this.alpha,this.blendMode,this.colorFlt,this.uv)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,l,u,c,f){var _=h.a.getItemByClass("DrawTextureCmd",t);return _.texture=e,e._addReference(),_.x=i,_.y=n,_.width=r,_.height=a,_.matrix=s,_.alpha=l,_.color=u,_.blendMode=c,_.uv=null==f?null:f,u&&(_.colorFlt=new o.a,_.colorFlt.setColor(u)),_}}]),t}();l.ID="DrawTexture"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.texture=null,this.offset=null,this.other=null,o.a.recover("FillTextureCmd",this)}},{key:"run",value:function(t,e,i){t.fillTexture(this.texture,this.x+e,this.y+i,this.width,this.height,this.type,this.offset,this.other)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,h,l){var u=o.a.getItemByClass("FillTextureCmd",t);return u.texture=e,u.x=i,u.y=n,u.width=r,u.height=a,u.type=s,u.offset=h,u.other=l,u}}]),t}();h.ID="FillTexture"},function(t,e,i){t.exports=i(643)},function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(49),h=i(186),l=i(121),u=i(443),c=i.n(u),f=i(444),_=i.n(f),d=i(445),v=i.n(d),p=i(446),y=i.n(p),g=i(447),m=i.n(g),x=i(448),k=i.n(x),T=function(){function t(){r()(this,t),this.ALPHA=1,this.defines=new o.a,this.shaderType=0,this.fillStyle=h.a.DEFAULT,this.strokeStyle=h.a.DEFAULT}return s()(t,[{key:"destroy",value:function(){this.defines=null,this.filters=null}}],[{key:"__init__",value:function(){l.a.preCompile2D(0,o.a.TEXTURE2D,c.a,_.a,null),l.a.preCompile2D(0,o.a.PRIMITIVE,v.a,y.a,null),l.a.preCompile2D(0,o.a.SKINMESH,m.a,k.a,null)}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i(3),r=i.n(n),a=i(199),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(40),g=i(5),m=i(66),x=i(34),k=i(12);function T(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var b=function(t){f()(i,t);var e=T(i);function i(){var t;return h()(this,i),(t=e.apply(this,arguments))._http=new XMLHttpRequest,t}return u()(i,[{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._responseType=r,this._data=null,(k.a.onVVMiniGame||k.a.onQGMiniGame||k.a.onQQMiniGame||k.a.onAlipayMiniGame||k.a.onBLMiniGame)&&(t=i._urlEncode(t)),this._url=t;var o=this,h=this._http;t=y.a.getAdptedFilePath(t),h.open(n,t,!0);var l=!1;if(a)for(var u=0;u<a.length;u++)h.setRequestHeader(a[u++],a[u]);else window.conch||(e&&"string"!=typeof e?(h.setRequestHeader("Content-Type","application/json"),l=!0):h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));var c="arraybuffer"!==r?"text":"arraybuffer";h.responseType=c,h.dataType&&(h.dataType=c),h.onerror=function(t){o._onError(t)},h.onabort=function(t){o._onAbort(t)},h.onprogress=function(t){o._onProgress(t)},h.onload=function(t){o._onLoad(t)},k.a.onBLMiniGame&&k.a.onAndroid&&!e&&(e={}),h.send(l?s()(e):e)}},{key:"_onProgress",value:function(t){t&&t.lengthComputable&&this.event(g.a.PROGRESS,t.loaded/t.total)}},{key:"_onAbort",value:function(t){this.error("Request was aborted by user")}},{key:"_onError",value:function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)}},{key:"_onLoad",value:function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)}},{key:"error",value:function(t){this.clear(),console.warn(this.url,t),this.event(g.a.ERROR,t)}},{key:"complete",value:function(){this.clear();var t=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=x.a.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e){t=!1,this.error(e.message)}t&&this.event(g.a.COMPLETE,this._data instanceof Array?[this._data]:this._data)}},{key:"clear",value:function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null}},{key:"url",get:function(){return this._url}},{key:"data",get:function(){return this._data}},{key:"http",get:function(){return this._http}}]),i}(m.a);b._urlEncode=encodeURI},,,function(t,e,i){t.exports=i(670)},,,,function(t,e,i){"use strict";var n=i(83);t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},function(t,e){t.exports=function(){}},,function(t,e,i){t.exports=i(701)},,function(t,e,i){t.exports=i(669)},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(199),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=function(){function t(){s()(this,t)}return h()(t,null,[{key:"__init__",value:function(){return t._baseClass||(t._baseClass=u,u.init()),t.items=t._baseClass.items,t.support=t._baseClass.support,t.support}},{key:"setItem",value:function(e,i){t._baseClass.setItem(e,i)}},{key:"getItem",value:function(e){return t._baseClass.getItem(e)}},{key:"setJSON",value:function(e,i){t._baseClass.setJSON(e,i)}},{key:"getJSON",value:function(e){return t._baseClass.getJSON(e)}},{key:"removeItem",value:function(e){t._baseClass.removeItem(e)}},{key:"clear",value:function(){t._baseClass.clear()}}]),t}();l.support=!1;var u=function(){function t(){s()(this,t)}return h()(t,null,[{key:"init",value:function(){try{t.support=!0,t.items=window.localStorage,t.setItem("laya","1"),t.removeItem("laya")}catch(e){t.support=!1}t.support||console.log("LocalStorage is not supprot or browser is private mode.")}},{key:"setItem",value:function(e,i){try{t.support&&t.items.setItem(e,i)}catch(t){console.warn("set localStorage failed",t)}}},{key:"getItem",value:function(e){return t.support?t.items.getItem(e):null}},{key:"setJSON",value:function(e,i){try{t.support&&t.items.setItem(e,r()(i))}catch(t){console.warn("set localStorage failed",t)}}},{key:"getJSON",value:function(e){try{return JSON.parse(t.support?t.items.getItem(e):null)}catch(i){return t.items.getItem(e)}}},{key:"removeItem",value:function(e){t.support&&t.items.removeItem(e)}},{key:"clear",value:function(){t.support&&t.items.clear()}}]),t}();u.support=!1},function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(60),p=i(49);function y(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var g=function(t){u()(i,t);var e=y(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s()(this,i),(t=e.call(this,p.a.TEXTURE2D,n)).strength=0,t.blurInfo=null,t.colorMat=null,t.colorAlpha=null,t._attribLocation=["posuv",0,"attribColor",1,"attribFlags",2],t}return h()(i,[{key:"clear",value:function(){this.texture=null,this.shader=null,this.defines._value=this.subID}}]),i}(v.a)},,function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var n=i(37),r=i.n(n),a=i(261),s=i.n(a),o=i(11),h=i.n(o),l=i(82),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(16),p=i(121),y=i(0),g=function(){function t(e){f()(this,t),this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=e;for(var i,n,r=0;!((r=h()(e).call(e,"#begin",r))<0);){for(n=r+5;!((n=h()(e).call(e,"#end",n))<0)&&"i"===e.charAt(n+4);)n+=5;if(n<0)throw"add include err,no #end:"+e;i=h()(e).call(e,"\n",r);var a=y.a.ShaderCompile.splitToWords(e.substr(r,i-r),null);"code"==a[1]?this.codes[a[2]]=e.substr(i+1,n-i-1):"function"==a[1]&&(i=h()(e).call(e,"function",r),i+="function".length,this.funs[a[3]]=e.substr(i+1,n-i-1),this.funnames+=a[3]+";"),r=n+1}}return d()(t,[{key:"getWith",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t?this.codes[t]:this.script;if(!e)throw"get with error:"+t;return e}},{key:"getFunsScript",value:function(t){var e="";for(var i in this.funs)h()(t).call(t,i+";")>=0&&(e+=this.funs[i]);return e}}]),t}(),m=i(88),x=i.n(m),k=function(){function t(e){f()(this,t),this.childs=[],this.text="",this.useFuns="",this.z=0,this.includefiles=e}return d()(t,[{key:"setParent",value:function(t){t.childs.push(this),this.z=t.z+1,this.parent=t}},{key:"setCondition",value:function(t,e){t&&(this.conditionType=e,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t]},this.condition.__condition=t)}},{key:"toscript",value:function(e,i){return this._toscript(e,i,++t.__id)}},{key:"_toscript",value:function(t,e,i){var n;if(this.childs.length<1&&!this.text)return e;e.length;if(this.condition){var r=!!this.condition.call(t);if(this.conditionType===y.a.ShaderCompile.IFDEF_ELSE&&(r=!r),!r)return e}if(this.text&&e.push(this.text),this.childs.length>0&&x()(n=this.childs).call(n,(function(n,r,a){n._toscript(t,e,i)})),this.includefiles.length>0&&this.useFuns.length>0)for(var a,s=0,o=this.includefiles.length;s<o;s++)this.includefiles[s].curUseID!=i&&(a=this.includefiles[s].file.getFunsScript(this.useFuns)).length>0&&(this.includefiles[s].curUseID=i,e[0]=a+e[0]);return e}}]),t}();k.__id=1;var T=function(){function t(e,i,n){f()(this,t),this.defs={};var r=this;function a(e){e=e.replace(t._clearCR,"");var i=[],n=new k(i);return r._compileToTree(n,e.split("\n"),0,i,r.defs),n}var s=u()();this._VS=a(e),this._PS=a(i),this._nameMap=n,u()()-s>2&&console.log("ShaderCompile use time:"+(u()()-s)+"  size:"+e.length+"/"+i.length)}return d()(t,[{key:"_compileToTree",value:function(e,i,n,r,a){var o,l,u,c,f,_,d,v,p,y,g,m;for(y=n;y<i.length;y++)if(!((c=i[y]).length<1)&&0!==(d=h()(c).call(c,"//"))){if(d>=0&&(c=c.substr(0,d)),l=p||new k(r),p=null,l.text=c,l.noCompile=!0,(d=h()(c).call(c,"#"))>=0){for(f="#",m=d+1,g=c.length;m<g;m++){var x=c.charAt(m);if(" "===x||"\t"===x||"?"===x)break;f+=x}switch(l.name=f,f){case"#ifdef":case"#ifndef":if(l.src=c,l.noCompile=null!=c.match(/[!&|()=<>]/),l.noCompile?console.log("function():Boolean{return "+c.substr(d+l.name.length)+"}"):(v=c.replace(/^\s*/,"").split(/\s+/),l.setCondition(v[1],"#ifdef"===f?t.IFDEF_YES:t.IFDEF_ELSE),l.text="//"+l.text),l.setParent(e),e=l,a)for(v=c.substr(m).split(t._splitToWordExps3),m=0;m<v.length;m++)(c=v[m]).length&&(a[c]=!0);continue;case"#if":if(l.src=c,l.noCompile=!0,l.setParent(e),e=l,a)for(v=c.substr(m).split(t._splitToWordExps3),m=0;m<v.length;m++)(c=v[m]).length&&"defined"!=c&&(a[c]=!0);continue;case"#else":l.src=c,u=(e=e.parent).childs[e.childs.length-1],l.noCompile=u.noCompile,l.noCompile||(l.condition=u.condition,l.conditionType=u.conditionType==t.IFDEF_YES?t.IFDEF_ELSE:t.IFDEF_YES,l.text="//"+l.text+" "+u.text+" "+l.conditionType),l.setParent(e),e=l;continue;case"#endif":u=(e=e.parent).childs[e.childs.length-1],l.noCompile=u.noCompile,l.noCompile||(l.text="//"+l.text),l.setParent(e);continue;case"#include":v=t.splitToWords(c,null);var T=s()(t)[v[1]];if(!T)throw"ShaderCompile error no this include file:"+v[1];if((d=h()(o=v[0]).call(o,"?"))<0){l.setParent(e),c=T.getWith("with"==v[2]?v[3]:null),this._compileToTree(l,c.split("\n"),0,r,a),l.text="";continue}l.setCondition(v[0].substr(d+1),t.IFDEF_YES),l.text=T.getWith("with"==v[2]?v[3]:null);break;case"#import":_=(v=t.splitToWords(c,null))[1],r.push({node:l,file:s()(t)[_],ofs:l.text.length});continue}}else{if((u=e.childs[e.childs.length-1])&&!u.name){r.length>0&&t.splitToWords(c,u),p=l,u.text+="\n"+c;continue}r.length>0&&t.splitToWords(c,l)}l.setParent(e)}}},{key:"createShader",value:function(t,e,i,n){var r={},a="";if(t)for(var s in t)a+="#define "+s+"\n",r[s]=!0;var o=this._VS.toscript(r,[]),h=this._PS.toscript(r,[]);return(i||p.a.create)(a+o.join("\n"),a+h.join("\n"),e,this._nameMap,n)}}],[{key:"__init__",value:function(){var e=v.a.instance;t.shaderParamsMap={float:e.FLOAT,int:e.INT,bool:e.BOOL,vec2:e.FLOAT_VEC2,vec3:e.FLOAT_VEC3,vec4:e.FLOAT_VEC4,ivec2:e.INT_VEC2,ivec3:e.INT_VEC3,ivec4:e.INT_VEC4,bvec2:e.BOOL_VEC2,bvec3:e.BOOL_VEC3,bvec4:e.BOOL_VEC4,mat2:e.FLOAT_MAT2,mat3:e.FLOAT_MAT3,mat4:e.FLOAT_MAT4,sampler2D:e.SAMPLER_2D,samplerCube:e.SAMPLER_CUBE}}},{key:"_parseOne",value:function(e,i,n,a,s,o){var h={type:t.shaderParamsMap[n[a+1]],name:n[a+2],size:isNaN(r()(n[a+3]))?1:r()(n[a+3])};return o&&("attribute"==s?e.push(h):i.push(h)),":"==n[a+3]&&(h.type=n[a+4],a+=2),a+=2}},{key:"addInclude",value:function(e,i){if(!i||0===i.length)throw new Error("add shader include file err:"+e);if(s()(t)[e])throw new Error("add shader include file err, has add:"+e);s()(t)[e]=new g(i)}},{key:"preGetParams",value:function(e,i){var n,r,a=[e,i],s={},o=[],h=[],l={},u=[];s.attributes=o,s.uniforms=h,s.defines=l;for(var c=0;c<2;c++){a[c]=a[c].replace(t._removeAnnotation,"");var f,_=a[c].match(t._reg);for(n=0,r=_.length;n<r;n++){var d=_[n];if("attribute"==d||"uniform"==d)n=t._parseOne(o,h,_,n,d,!0);else{if("#define"==d){u[d=_[++n]]=1;continue}if("#ifdef"==d){l[f=_[++n]]=l[f]||[];for(n++;n<r;n++)if("attribute"==(d=_[n])||"uniform"==d)n=t._parseOne(o,h,_,n,d,u[f]);else if("#else"==d)for(n++;n<r;n++)if("attribute"==(d=_[n])||"uniform"==d)n=t._parseOne(o,h,_,n,d,!u[f]);else if("#endif"==d)break}}}}return s}},{key:"splitToWords",value:function(t,e){for(var i,n,r=[],a=-1,s=0,o=t.length;s<o;s++){var l;if(i=t.charAt(s),h()(l=" \t=+-*/&%!<>()'\",;").call(l,i)>=0){if(a>=0&&s-a>1&&(n=t.substr(a,s-a),r.push(n)),'"'==i||"'"==i){var u=h()(t).call(t,i,s+1);if(u<0)throw"Sharder err:"+t;r.push(t.substr(s+1,u-s-1)),s=u,a=-1;continue}var c;"("==i&&e&&r.length>0&&(n=r[r.length-1]+";",h()(c="vec4;main;").call(c,n)<0&&(e.useFuns+=n)),a=-1}else a<0&&(a=s)}return a<o&&o-a>1&&(n=t.substr(a,o-a),r.push(n)),r}}]),t}();T.IFDEF_NO=0,T.IFDEF_YES=1,T.IFDEF_ELSE=2,T.IFDEF_PARENT=3,T._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),T._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),T._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),T.includes={},T._clearCR=new RegExp("\r","g"),T._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")},,,,,function(t,e,i){var n=i(104);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(218),r=Math.max,a=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):a(i,e)}},function(t,e){},function(t,e,i){var n=i(340),r=i(283),a=n("keys");t.exports=function(t){return a[t]||(a[t]=r(t))}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++i+n).toString(36)}},function(t,e,i){var n=i(405),r=i(343);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(131),r=i(411),a=i(158),s=i(217),o=i(286),h=i(412),l=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,i,u,c){var f,_,d,v,p,y,g,m=s(e,i,u?2:1);if(c)f=t;else{if("function"!=typeof(_=o(t)))throw TypeError("Target is not iterable");if(r(_)){for(d=0,v=a(t.length);v>d;d++)if((p=u?m(n(g=t[d])[0],g[1]):m(t[d]))&&p instanceof l)return p;return new l(!1)}f=_.call(t)}for(y=f.next;!(g=y.call(f)).done;)if("object"==typeof(p=h(f,m,g.value,u))&&p&&p instanceof l)return p;return new l(!1)}).stop=function(t){return new l(!0,t)}},function(t,e,i){var n=i(191),r=i(197),a=i(87)("iterator");t.exports=function(t){if(null!=t)return t[a]||t["@@iterator"]||r[n(t)]}},function(t,e,i){"use strict";var n=i(279),r=i(136),a=i(215);t.exports=function(t,e,i){var s=n(e);s in t?r.f(t,s,a(0,i)):t[s]=i}},,,function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=i(34),l=function(){function t(){r()(this,t),this._id=h.a.getGID(),this._resetComp()}return s()(t,[{key:"_isScript",value:function(){return!1}},{key:"_resetComp",value:function(){this._indexInList=-1,this._enabled=!0,this._awaked=!1,this.owner=null}},{key:"_getIndexInList",value:function(){return this._indexInList}},{key:"_setIndexInList",value:function(t){this._indexInList=t}},{key:"_onAdded",value:function(){}},{key:"_onAwake",value:function(){}},{key:"_onEnable",value:function(){}},{key:"_onDisable",value:function(){}},{key:"_onDestroy",value:function(){}},{key:"onReset",value:function(){}},{key:"_parse",value:function(t){}},{key:"_cloneTo",value:function(t){}},{key:"_setActive",value:function(t){t?(this._awaked||(this._awaked=!0,this._onAwake()),this._enabled&&this._onEnable()):this._enabled&&this._onDisable()}},{key:"destroy",value:function(){this.owner&&this.owner._destroyComponent(this)}},{key:"_destroy",value:function(){this.owner.activeInHierarchy&&this._enabled&&this._setActive(!1),this._onDestroy(),this._destroyed=!0,this.onReset!==t.prototype.onReset?(this.onReset(),this._resetComp(),o.a.recoverByClass(this)):this._resetComp()}},{key:"id",get:function(){return this._id}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled!=t&&(this._enabled=t,this.owner&&(t?this.owner.activeInHierarchy&&this._onEnable():this.owner.activeInHierarchy&&this._onDisable()))}},{key:"isSingleton",get:function(){return!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){o.a.recover("AlphaCmd",this)}},{key:"run",value:function(t,e,i){t.alpha(this.alpha)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e){var i=o.a.getItemByClass("AlphaCmd",t);return i.alpha=e,i}}]),t}();h.ID="Alpha"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.fillColor=null,this.lineColor=null,o.a.recover("DrawCircleCmd",this)}},{key:"run",value:function(t,e,i){t._drawCircle(this.x+e,this.y+i,this.radius,this.fillColor,this.lineColor,this.lineWidth,this.vid)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,h){var l=o.a.getItemByClass("DrawCircleCmd",t);return l.x=e,l.y=i,l.radius=n,l.fillColor=r,l.lineColor=a,l.lineWidth=s,l.vid=h,l}}]),t}();h.ID="DrawCircle"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.points=null,this.lineColor=null,o.a.recover("DrawCurvesCmd",this)}},{key:"run",value:function(t,e,i){this.points&&t.drawCurves(this.x+e,this.y+i,this.points,this.lineColor,this.lineWidth)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a){var s=o.a.getItemByClass("DrawCurvesCmd",t);return s.x=e,s.y=i,s.points=n,s.lineColor=r,s.lineWidth=a,s}}]),t}();h.ID="DrawCurves"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){o.a.recover("DrawLineCmd",this)}},{key:"run",value:function(t,e,i){t._drawLine(e,i,this.fromX,this.fromY,this.toX,this.toY,this.lineColor,this.lineWidth,this.vid)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,h){var l=o.a.getItemByClass("DrawLineCmd",t);return l.fromX=e,l.fromY=i,l.toX=n,l.toY=r,l.lineColor=a,l.lineWidth=s,l.vid=h,l}}]),t}();h.ID="DrawLine"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.points=null,this.lineColor=null,o.a.recover("DrawLinesCmd",this)}},{key:"run",value:function(t,e,i){this.points&&t._drawLines(this.x+e,this.y+i,this.points,this.lineColor,this.lineWidth,this.vid)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s){var h=o.a.getItemByClass("DrawLinesCmd",t);return h.x=e,h.y=i,h.points=n,h.lineColor=r,h.lineWidth=a,h.vid=s,h}}]),t}();h.ID="DrawLines"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.paths=null,this.brush=null,this.pen=null,o.a.recover("DrawPathCmd",this)}},{key:"run",value:function(t,e,i){this.paths&&t._drawPath(this.x+e,this.y+i,this.paths,this.brush,this.pen)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a){var s=o.a.getItemByClass("DrawPathCmd",t);return s.x=e,s.y=i,s.paths=n,s.brush=r,s.pen=a,s}}]),t}();h.ID="DrawPath"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.fillColor=null,this.lineColor=null,o.a.recover("DrawPieCmd",this)}},{key:"run",value:function(t,e,i){t._drawPie(this.x+e,this.y+i,this.radius,this._startAngle,this._endAngle,this.fillColor,this.lineColor,this.lineWidth,this.vid)}},{key:"cmdID",get:function(){return t.ID}},{key:"startAngle",get:function(){return 180*this._startAngle/Math.PI},set:function(t){this._startAngle=t*Math.PI/180}},{key:"endAngle",get:function(){return 180*this._endAngle/Math.PI},set:function(t){this._endAngle=t*Math.PI/180}}],[{key:"create",value:function(e,i,n,r,a,s,h,l,u){var c=o.a.getItemByClass("DrawPieCmd",t);return c.x=e,c.y=i,c.radius=n,c._startAngle=r,c._endAngle=a,c.fillColor=s,c.lineColor=h,c.lineWidth=l,c.vid=u,c}}]),t}();h.ID="DrawPie"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.points=null,this.fillColor=null,this.lineColor=null,o.a.recover("DrawPolyCmd",this)}},{key:"run",value:function(t,e,i){this.points&&t._drawPoly(this.x+e,this.y+i,this.points,this.fillColor,this.lineColor,this.lineWidth,this.isConvexPolygon,this.vid)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,h,l){var u=o.a.getItemByClass("DrawPolyCmd",t);return u.x=e,u.y=i,u.points=n,u.fillColor=r,u.lineColor=a,u.lineWidth=s,u.isConvexPolygon=h,u.vid=l,u}}]),t}();h.ID="DrawPoly"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.fillColor=null,this.lineColor=null,o.a.recover("DrawRectCmd",this)}},{key:"run",value:function(t,e,i){t.drawRect(this.x+e,this.y+i,this.width,this.height,this.fillColor,this.lineColor,this.lineWidth)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,h){var l=o.a.getItemByClass("DrawRectCmd",t);return l.x=e,l.y=i,l.width=n,l.height=r,l.fillColor=a,l.lineColor=s,l.lineWidth=h,l}}]),t}();h.ID="DrawRect"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){o.a.recover("RestoreCmd",this)}},{key:"run",value:function(t,e,i){t.restore()}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(){return o.a.getItemByClass("RestoreCmd",t)}}]),t}();h.ID="Restore"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){o.a.recover("RotateCmd",this)}},{key:"run",value:function(t,e,i){t._rotate(this.angle,this.pivotX+e,this.pivotY+i)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n){var r=o.a.getItemByClass("RotateCmd",t);return r.angle=e,r.pivotX=i,r.pivotY=n,r}}]),t}();h.ID="Rotate"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){o.a.recover("ScaleCmd",this)}},{key:"run",value:function(t,e,i){t._scale(this.scaleX,this.scaleY,this.pivotX+e,this.pivotY+i)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r){var a=o.a.getItemByClass("ScaleCmd",t);return a.scaleX=e,a.scaleY=i,a.pivotX=n,a.pivotY=r,a}}]),t}();h.ID="Scale"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.matrix=null,o.a.recover("TransformCmd",this)}},{key:"run",value:function(t,e,i){t._transform(this.matrix,this.pivotX+e,this.pivotY+i)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n){var r=o.a.getItemByClass("TransformCmd",t);return r.matrix=e,r.pivotX=i,r.pivotY=n,r}}]),t}();h.ID="Transform"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){o.a.recover("TranslateCmd",this)}},{key:"run",value:function(t,e,i){t.translate(this.tx,this.ty)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i){var n=o.a.getItemByClass("TranslateCmd",t);return n.tx=e,n.ty=i,n}}]),t}();h.ID="Translate"},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(42),h=i(34),l=function(){function t(){r()(this,t)}return s()(t,null,[{key:"multiply",value:function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)}},{key:"dis",value:function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)}},{key:"_getPoints",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new o.a);return n||(n=[]),n.length=0,i?t.getFrom(n,t._mPointList,e):t.getFromR(n,t._mPointList,e),n}},{key:"getFrom",value:function(t,e,i){var n;for(n=0;n<i;n++)t.push(e[n]);return t}},{key:"getFromR",value:function(t,e,i){var n;for(n=0;n<i;n++)t.push(e.pop());return t}},{key:"pListToPointList",value:function(e){var i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.length/2,a=t._getPoints(r,n,t._tempPointList);for(i=0;i<r;i++)a[i].setTo(e[i+i],e[i+i+1]);return a}},{key:"pointListToPlist",value:function(e){var i,n,r=e.length,a=t._temPList;for(a.length=0,i=0;i<r;i++)n=e[i],a.push(n.x,n.y);return a}},{key:"scanPList",value:function(e){return h.a.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))}},{key:"scan",value:function(e){var i,n,r,a,s,o=0,l=e.length,u={};for((a=t._temArr).length=0,i=(l=e.length)-1;i>=0;i--)(s=(r=e[i]).x+"_"+r.y)in u||(u[s]=!0,a.push(r));for(l=a.length,h.a.copyArray(e,a),i=1;i<l;i++)(e[i].y<e[o].y||e[i].y==e[o].y&&e[i].x<e[o].x)&&(o=i);for(r=e[0],e[0]=e[o],e[o]=r,i=1;i<l-1;i++){for(o=i,n=i+1;n<l;n++)(t.multiply(e[n],e[o],e[0])>0||0==t.multiply(e[n],e[o],e[0])&&t.dis(e[0],e[n])<t.dis(e[0],e[o]))&&(o=n);r=e[i],e[i]=e[o],e[o]=r}if((a=t._temArr).length=0,e.length<3)return h.a.copyArray(a,e);for(a.push(e[0],e[1],e[2]),i=3;i<l;i++){for(;a.length>=2&&t.multiply(e[i],a[a.length-1],a[a.length-2])>=0;)a.pop();e[i]&&a.push(e[i])}return a}}]),t}();l._tempPointList=[],l._temPList=[],l._temArr=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i(88),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(18),u=i(41),c=i(134),f=i(164),_=i(156),d=function(){function t(e,i){s()(this,t),this.submitStartPos=0,this.submitEndPos=0,this.context=null,this.touches=[],this.submits=[],this.sprite=null,this.meshlist=[],this.cachedClipInfo=new l.a,this.oldTx=0,this.oldTy=0,this.invMat=new l.a,this.context=e,this.sprite=i,e._globalClipMatrix.copyTo(this.cachedClipInfo)}return h()(t,[{key:"startRec",value:function(){this.context._charSubmitCache._enable&&(this.context._charSubmitCache.enable(!1,this.context),this.context._charSubmitCache.enable(!0,this.context)),this.context._incache=!0,this.touches.length=0,this.context.touches=this.touches,this.context._globalClipMatrix.copyTo(this.cachedClipInfo),this.submits.length=0,this.submitStartPos=this.context._submits._length;for(var t=0,e=this.meshlist.length;t<e;t++){var i=this.meshlist[t];i.canReuse?i.releaseMesh():i.destroy()}this.meshlist.length=0,this._mesh=c.a.getAMesh(!1),this._pathMesh=_.a.getAMesh(!1),this._triangleMesh=f.a.getAMesh(!1),this.meshlist.push(this._mesh),this.meshlist.push(this._pathMesh),this.meshlist.push(this._triangleMesh),this.context._curSubmit=u.a.RENDERBASE,this._oldMesh=this.context._mesh,this._oldPathMesh=this.context._pathMesh,this._oldTriMesh=this.context._triangleMesh,this._oldMeshList=this.context.meshlist,this.context._mesh=this._mesh,this.context._pathMesh=this._pathMesh,this.context._triangleMesh=this._triangleMesh,this.context.meshlist=this.meshlist,this.oldTx=this.context._curMat.tx,this.oldTy=this.context._curMat.ty,this.context._curMat.tx=0,this.context._curMat.ty=0,this.context._curMat.copyTo(this.invMat),this.invMat.invert()}},{key:"endRec",value:function(){this.context._charSubmitCache._enable&&(this.context._charSubmitCache.enable(!1,this.context),this.context._charSubmitCache.enable(!0,this.context));var t=this.context._submits;this.submitEndPos=t._length;for(var e=this.submitEndPos-this.submitStartPos,i=0;i<e;i++)this.submits.push(t[this.submitStartPos+i]);t._length-=e,this.context._mesh=this._oldMesh,this.context._pathMesh=this._oldPathMesh,this.context._triangleMesh=this._oldTriMesh,this.context.meshlist=this._oldMeshList,this.context._curSubmit=u.a.RENDERBASE,this.context._curMat.tx=this.oldTx,this.context._curMat.ty=this.oldTy,this.context.touches=null,this.context._incache=!1}},{key:"isCacheValid",value:function(){var t=this.context._globalClipMatrix;return t.a==this.cachedClipInfo.a&&t.b==this.cachedClipInfo.b&&t.c==this.cachedClipInfo.c&&t.d==this.cachedClipInfo.d&&t.tx==this.cachedClipInfo.tx&&t.ty==this.cachedClipInfo.ty}},{key:"flushsubmit",value:function(){var t,e=u.a.RENDERBASE;r()(t=this.submits).call(t,(function(t){t!=u.a.RENDERBASE&&(u.a.preRender=e,e=t,t.renderSubmit())}))}},{key:"releaseMem",value:function(){}}]),t}();d.matI=new l.a},function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(16),p=i(140);function y(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var g=function(t){u()(i,t);var e=y(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:35044;return s()(this,i),(t=e.call(this))._bufferUsage=n,t._bufferType=v.a.instance.ELEMENT_ARRAY_BUFFER,t._buffer=new ArrayBuffer(8),t}return h()(i,[{key:"_checkArrayUse",value:function(){this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))}},{key:"getUint16Array",value:function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))}},{key:"_bindForVAO",value:function(){var t=v.a.instance;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._glBuffer)}},{key:"bind",value:function(){if(p.a._bindedIndexBuffer!==this._glBuffer){var t=v.a.instance;return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._glBuffer),p.a._bindedIndexBuffer=this._glBuffer,!0}return!1}},{key:"destory",value:function(){this._uint16Array=null,this._buffer=null}},{key:"disposeResource",value:function(){this._disposeResource()}}]),i}(i(224).a);g.create=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:35044;return new g(t)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(7),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(224),g=i(16),m=i(140);function x(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var k=function(t){f()(i,t);var e=x(i);function i(t,n){var r;return s()(this,i),(r=e.call(this))._vertexStride=t,r._bufferUsage=n,r._bufferType=g.a.instance.ARRAY_BUFFER,r._buffer=new ArrayBuffer(8),r._floatArray32=new Float32Array(r._buffer),r._uint32Array=new Uint32Array(r._buffer),r}return h()(i,[{key:"getFloat32Array",value:function(){return this._floatArray32}},{key:"appendArray",value:function(t){var e=this._byteLength>>2;this.setByteLength(this._byteLength+4*t.length),this.getFloat32Array().set(t,e),this._upload=!0}},{key:"_checkArrayUse",value:function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer)),this._uint32Array&&(this._uint32Array=new Uint32Array(this._buffer))}},{key:"deleteBuffer",value:function(){u()(p()(i.prototype),"_disposeResource",this).call(this)}},{key:"_bindForVAO",value:function(){var t=g.a.instance;t.bindBuffer(t.ARRAY_BUFFER,this._glBuffer)}},{key:"bind",value:function(){if(m.a._bindedVertexBuffer!==this._glBuffer){var t=g.a.instance;return t.bindBuffer(t.ARRAY_BUFFER,this._glBuffer),m.a._bindedVertexBuffer=this._glBuffer,!0}return!1}},{key:"destroy",value:function(){u()(p()(i.prototype),"destroy",this).call(this),this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null}},{key:"vertexStride",get:function(){return this._vertexStride}}]),i}(y.a);k.create=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35048;return new k(t,e)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(146),h=i(81),l=i(13),u=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.texture=null,this.vertices=null,this.uvs=null,this.indices=null,this.matrix=null,l.a.recover("DrawTrianglesCmd",this)}},{key:"run",value:function(t,e,i){t.drawTriangles(this.texture,this.x+e,this.y+i,this.vertices,this.uvs,this.indices,this.matrix,this.alpha,this.color,this.blendMode,this.colorNum)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s,u,c,f,_,d){var v=l.a.getItemByClass("DrawTrianglesCmd",t);if(v.texture=e,v.x=i,v.y=n,v.vertices=r,v.uvs=a,v.indices=s,v.matrix=u,v.alpha=c,f){v.color=new o.a;var p=h.a.create(f).arrColor;v.color.color(255*p[0],255*p[1],255*p[2],255*p[3])}return v.blendMode=_,v.colorNum=d,v}}]),t}();u.ID="DrawTriangles"},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(13),h=function(){function t(){r()(this,t)}return s()(t,[{key:"recover",value:function(){this.texture._removeReference(),o.a.recover("Draw9GridTexture",this)}},{key:"run",value:function(t,e,i){t.drawTextureWithSizeGrid(this.texture,this.x,this.y,this.width,this.height,this.sizeGrid,e,i)}},{key:"cmdID",get:function(){return t.ID}}],[{key:"create",value:function(e,i,n,r,a,s){var h=o.a.getItemByClass("Draw9GridTexture",t);return h.texture=e,e._addReference(),h.x=i,h.y=n,h.width=r,h.height=a,h.sizeGrid=s,h}}]),t}();h.ID="Draw9GridTexture"},function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i(3),r=i.n(n),a=i(39),s=i.n(a),o=i(11),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(7),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(44),T=i(99),b=i(33),C=i(5),w=i(10);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var E=function(t){p()(i,t);var e=S(i);function i(){var t;return u()(this,i),(t=e.call(this)).wrapMode=0,t._interval=T.a.animationInterval,t._isReverse=!1,t._frameRateChanged=!1,t._setBitUp(b.a.DISPLAY),t}return f()(i,[{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._isPlaying=!0,this._actionName=n,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._isReverse=this.wrapMode===i.WRAP_REVERSE,0==this.index&&this._isReverse&&(this.index=this.count-1),this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)}},{key:"_getFrameByLabel",value:function(t){for(var e=0;e<this._count;e++){var i=this._labels[e];if(i&&h()(i).call(i,t)>-1)return e}return 0}},{key:"_frameLoop",value:function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event(C.a.COMPLETE);this.wrapMode==i.WRAP_PINGPONG?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event(C.a.COMPLETE)}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event(C.a.COMPLETE);this.wrapMode==i.WRAP_PINGPONG?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event(C.a.COMPLETE)}this.index=this._index}},{key:"_setControlNode",value:function(t){this._controlNode&&(this._controlNode.off(C.a.DISPLAY,this,this._resumePlay),this._controlNode.off(C.a.UNDISPLAY,this,this._resumePlay)),this._controlNode=t,t&&t!=this&&(t.on(C.a.DISPLAY,this,this._resumePlay),t.on(C.a.UNDISPLAY,this,this._resumePlay))}},{key:"_setDisplay",value:function(t){d()(x()(i.prototype),"_setDisplay",this).call(this,t),this._resumePlay()}},{key:"_resumePlay",value:function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))}},{key:"stop",value:function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)}},{key:"addLabel",value:function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t)}},{key:"removeLabel",value:function(t){if(t){if(this._labels)for(var e in this._labels)this._removeLabelFromList(this._labels[e],t)}else this._labels=null}},{key:"_removeLabelFromList",value:function(t,e){if(t)for(var i=t.length-1;i>=0;i--)t[i]==e&&s()(t).call(t,i,1)}},{key:"gotoAndStop",value:function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()}},{key:"_displayToIndex",value:function(t){}},{key:"clear",value:function(){return this.stop(),this._labels=null,this}},{key:"interval",get:function(){return this._interval},set:function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0,!0))}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"index",get:function(){return this._index},set:function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],i=0,n=e.length;i<n;i++)this.event(C.a.LABEL,e[i])}},{key:"count",get:function(){return this._count}}]),i}(k.a);E.WRAP_POSITIVE=0,E.WRAP_REVERSE=1,E.WRAP_PINGPONG=2,w.a.regClass("laya.display.AnimationBase",E),w.a.regClass("Laya.AnimationBase",E)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(0),h=function(){function t(){r()(this,t)}return s()(t,[{key:"create",value:function(){return this.json?o.a.SceneUtils.createByData(null,this.json):null}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(37),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(32),f=i(57),_=i(19),d=i(0),v=i(10),p=function(){function t(){h()(this,t),this._fontCharDic={},this._fontWidthMap={},this._maxWidth=0,this._spaceWidth=10,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}return u()(t,[{key:"loadFont",value:function(t,e){this._path=t,this._complete=e,t&&-1!==s()(t).call(t,".fnt")?d.a.loader.load([{url:t,type:d.a.Loader.XML},{url:t.replace(".fnt",".png"),type:d.a.Loader.IMAGE}],_.a.create(this,this._onLoaded)):console.error('Bitmap font configuration information must be a ".fnt" file')}},{key:"_onLoaded",value:function(){this.parseFont(d.a.Loader.getRes(this._path),d.a.Loader.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()}},{key:"parseFont",value:function(t,e){if(null!=t&&null!=e){this._texture=e;var i=t.getElementsByTagName("info");if(!i[0].getAttributeNode)return this.parseFont2(t,e);this.fontSize=r()(i[0].getAttributeNode("size").nodeValue);var n=i[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[r()(n[0]),r()(n[1]),r()(n[2]),r()(n[3])];var a=t.getElementsByTagName("char"),s=0;for(s=0;s<a.length;s++){var o=a[s],h=r()(o.getAttributeNode("id").nodeValue),l=r()(o.getAttributeNode("xoffset").nodeValue)/1,u=r()(o.getAttributeNode("yoffset").nodeValue)/1,_=r()(o.getAttributeNode("xadvance").nodeValue)/1,d=new c.a;d.x=r()(o.getAttributeNode("x").nodeValue),d.y=r()(o.getAttributeNode("y").nodeValue),d.width=r()(o.getAttributeNode("width").nodeValue),d.height=r()(o.getAttributeNode("height").nodeValue);var v=f.a.create(e,d.x,d.y,d.width,d.height,l,u);this._maxWidth=Math.max(this._maxWidth,_+this.letterSpacing),this._fontCharDic[h]=v,this._fontWidthMap[h]=_}}}},{key:"parseFont2",value:function(t,e){if(null!=t&&null!=e){this._texture=e;var i=t.getElementsByTagName("info");this.fontSize=r()(i[0].attributes.size.nodeValue);var n=i[0].attributes.padding.nodeValue.split(",");this._padding=[r()(n[0]),r()(n[1]),r()(n[2]),r()(n[3])];var a=t.getElementsByTagName("char"),s=0;for(s=0;s<a.length;s++){var o=a[s].attributes,h=r()(o.id.nodeValue),l=r()(o.xoffset.nodeValue)/1,u=r()(o.yoffset.nodeValue)/1,_=r()(o.xadvance.nodeValue)/1,d=new c.a;d.x=r()(o.x.nodeValue),d.y=r()(o.y.nodeValue),d.width=r()(o.width.nodeValue),d.height=r()(o.height.nodeValue);var v=f.a.create(e,d.x,d.y,d.width,d.height,l,u);this._maxWidth=Math.max(this._maxWidth,_+this.letterSpacing),this._fontCharDic[h]=v,this._fontWidthMap[h]=_}}}},{key:"getCharTexture",value:function(t){return this._fontCharDic[t.charCodeAt(0)]}},{key:"destroy",value:function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null,this._complete=null,this._padding=null}}},{key:"setSpaceWidth",value:function(t){this._spaceWidth=t}},{key:"getCharWidth",value:function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "===t?this._spaceWidth+this.letterSpacing:0}},{key:"getTextWidth",value:function(t){for(var e=0,i=0,n=t.length;i<n;i++)e+=this.getCharWidth(t.charAt(i));return e}},{key:"getMaxWidth",value:function(){return this._maxWidth}},{key:"getMaxHeight",value:function(){return this.fontSize}},{key:"_drawText",value:function(t,e,i,n,r,a){var s,o=this.getTextWidth(t),h=0;"center"===r&&(h=(a-o)/2),"right"===r&&(h=a-o);for(var l=0,u=0,c=t.length;u<c;u++)(s=this.getCharTexture(t.charAt(u)))&&(e.graphics.drawImage(s,i+l+h,n),l+=this.getCharWidth(t.charAt(u)))}}]),t}();v.a.regClass("laya.display.BitmapFont",p),v.a.regClass("Laya.BitmapFont",p)},function(t,e,i){"use strict";i.d(e,"a",(function(){return A}));var n=i(3),r=i.n(n),a=i(137),s=i.n(a),o=i(11),h=i.n(o),l=i(189),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(7),p=i.n(v),y=i(6),g=i.n(y),m=i(8),x=i.n(m),k=i(2),T=i.n(k),b=i(311),C=i(315),w=i(78),S=i(10);function E(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T()(t);if(e){var a=T()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}var A=function(t){g()(i,t);var e=E(i);function i(){var t;return f()(this,i),t=e.call(this),void 0===i._sortIndexFun&&(i._sortIndexFun=C.a.sortByKey("index",!1,!0)),t}return d()(i,[{key:"_setUp",value:function(t,e){this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._usedFrames=e.animationNewFrames):(this._usedFrames=[],this._calculateDatas(),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._usedFrames)}},{key:"clear",value:function(){return p()(T()(i.prototype),"clear",this).call(this),this._targetDic=null,this._animationData=null,this}},{key:"_displayToIndex",value:function(t){if(this._animationData){t<0&&(t=0),t>this._count&&(t=this._count);var e,i=this._animationData.nodes,n=i.length;for(e=0;e<n;e++)this._displayNodeToFrame(i[e],t)}}},{key:"_displayNodeToFrame",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i||(i=this._targetDic);var n=i[t.target];if(n){var r,a,s,o,h=t.frames,l=u()(t),c=l.length;for(o=0;o<c;o++)s=(a=h[r=l[o]]).length>e?a[e]:a[a.length-1],n[r]=s;var f,_=t.funkeys;if(0!=(c=_.length))for(o=0;o<c;o++)void 0!==(f=h[r=_[o]])[e]&&n[r]&&n[r].apply(n,f[e])}}},{key:"_calculateDatas",value:function(){if(this._animationData){var t,e,i=this._animationData.nodes,n=i.length;for(this._count=0,t=0;t<n;t++)e=i[t],this._calculateKeyFrames(e);this._count+=1}}},{key:"_calculateKeyFrames",value:function(t){var e,n,r=t.keyframes,a=t.target;for(e in t.frames||(t.frames={}),u()(t)?u()(t).length=0:t.keys=[],t.funkeys?t.funkeys.length=0:t.funkeys=[],t.initValues||(t.initValues={}),r){var o=-1!=h()(e).call(e,"()");if(n=r[e],o&&(e=e.substr(0,e.length-2)),t.frames[e]||(t.frames[e]=[]),o){t.funkeys.push(e);for(var l=t.frames[e],c=0;c<n.length;c++){var f=n[c];l[f.index]=f.value,f.index>this._count&&(this._count=f.index)}}else this._targetDic&&this._targetDic[a]&&(t.initValues[e]=this._targetDic[a][e]),s()(n).call(n,i._sortIndexFun),u()(t).push(e),this._calculateNodePropFrames(n,t.frames[e],e,a)}}},{key:"resetNodes",value:function(){if(this._targetDic&&this._animationData){var t,e,i,n=this._animationData.nodes,r=n.length;for(t=0;t<r;t++)if(i=(e=n[t]).initValues){var a,s=this._targetDic[e.target];if(s)for(a in i)s[a]=i[a]}}}},{key:"_calculateNodePropFrames",value:function(t,e,i,n){var r,a=t.length-1;for(e.length=t[a].index+1,r=0;r<a;r++)this._dealKeyFrame(t[r]),this._calculateFrameValues(t[r],t[r+1],e);0==a&&(e[0]=t[0].value,this._usedFrames&&(this._usedFrames[t[0].index]=!0)),this._dealKeyFrame(t[r])}},{key:"_dealKeyFrame",value:function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)}},{key:"_calculateFrameValues",value:function(t,e,i){var n,r,a=t.index,s=e.index,o=t.value,h=e.value-t.value,l=s-a,u=this._usedFrames;if(s>this._count&&(this._count=s),t.tween)for(null==(r=w.a[t.tweenMethod])&&(r=w.a.linearNone),n=a;n<s;n++)i[n]=r(n-a,o,h,l),u&&(u[n]=!0);else for(n=a;n<s;n++)i[n]=o;u&&(u[t.index]=!0,u[e.index]=!0),i[e.index]=e.value}}],[{key:"_sortIndexFun",value:function(t,e){return t.index-e.index}}]),i}(b.a);S.a.regClass("laya.display.FrameAnimation",A),S.a.regClass("Laya.FrameAnimation",A)},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(79),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=function(){function t(){s()(this,t)}return h()(t,null,[{key:"subtractVector3",value:function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]}},{key:"lerp",value:function(t,e,i){return t*(1-i)+e*i}},{key:"scaleVector3",value:function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e}},{key:"lerpVector3",value:function(t,e,i,n){var r=t[0],a=t[1],s=t[2];n[0]=r+i*(e[0]-r),n[1]=a+i*(e[1]-a),n[2]=s+i*(e[2]-s)}},{key:"lerpVector4",value:function(t,e,i,n){var r=t[0],a=t[1],s=t[2],o=t[3];n[0]=r+i*(e[0]-r),n[1]=a+i*(e[1]-a),n[2]=s+i*(e[2]-s),n[3]=o+i*(e[3]-o)}},{key:"slerpQuaternionArray",value:function(t,e,i,n,r,a,s){var o,h,l,u,c,f=t[e+0],_=t[e+1],d=t[e+2],v=t[e+3],p=i[n+0],y=i[n+1],g=i[n+2],m=i[n+3];return(h=f*p+_*y+d*g+v*m)<0&&(h=-h,p=-p,y=-y,g=-g,m=-m),1-h>1e-6?(o=Math.acos(h),l=Math.sin(o),u=Math.sin((1-r)*o)/l,c=Math.sin(r*o)/l):(u=1-r,c=r),a[s+0]=u*f+c*p,a[s+1]=u*_+c*y,a[s+2]=u*d+c*g,a[s+3]=u*v+c*m,a}},{key:"getRotation",value:function(t,e,i,n){return Math.atan2(n-e,i-t)/Math.PI*180}},{key:"sortBigFirst",value:function(t,e){return t==e?0:e>t?1:-1}},{key:"sortSmallFirst",value:function(t,e){return t==e?0:e>t?-1:1}},{key:"sortNumBigFirst",value:function(t,e){return r()(e)-r()(t)}},{key:"sortNumSmallFirst",value:function(t,e){return r()(t)-r()(e)}},{key:"sortByKey",value:function(e){var i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i=n?r?t.sortNumBigFirst:t.sortBigFirst:r?t.sortNumSmallFirst:t.sortSmallFirst,function(t,n){return i(t[e],n[e])}}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return R}));var n=i(3),r=i.n(n),a=i(37),s=i.n(a),o=i(11),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(35),d=i.n(_),v=i(7),p=i.n(v),y=i(6),g=i.n(y),m=i(8),x=i.n(m),k=i(2),T=i.n(k),b=i(54),C=i(5),w=i(21),S=i(19),E=i(0),A=i(10);function M(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T()(t);if(e){var a=T()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}var R=function(t){g()(i,t);var e=M(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u()(this,i),(t=e.call(this))._selectedIndex=-1,t._direction="horizontal",t._space=0,t.skin=r,t.labels=n,t}return f()(i,[{key:"preinitialize",value:function(){this.mouseEnabled=!0}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];p()(T()(i.prototype),"destroy",this).call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null}},{key:"addItem",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t,n=this._items.length;if(i.name="item"+n,this.addChild(i),this.initItems(),e&&n>0){var r=this._items[n-1];"horizontal"==this._direction?i.x=r._x+r.width+this._space:i.y=r._y+r.height+this._space}else e&&(i.x=0,i.y=0);return n}},{key:"delItem",value:function(t){var e,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=h()(e=this._items).call(e,t);if(-1!=n){var r,a=t;this.removeChild(a);for(var s=n+1,o=this._items.length;s<o;s++){var l=this._items[s];l.name="item"+(s-1),i&&("horizontal"==this._direction?l.x-=a.width+this._space:l.y-=a.height+this._space)}if(this.initItems(),this._selectedIndex>-1)r=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=r}}},{key:"_afterInited",value:function(){this.initItems()}},{key:"initItems",value:function(){this._items||(this._items=[]),this._items.length=0;for(var t=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.selected=t===this._selectedIndex,e.clickHandler=S.a.create(this,this.itemClick,[t],!1)}}},{key:"itemClick",value:function(t){this.selectedIndex=t}},{key:"setSelect",value:function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=e)}},{key:"_skinLoaded",value:function(){this._setLabelChanged(),this.event(C.a.LOADED)}},{key:"createItem",value:function(t,e){return null}},{key:"changeLabels",value:function(){if(this._labelChanged=!1,this._items)for(var t=0,e=0,i=this._items.length;e<i;e++){var n=this._items[e];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),this._labelFont&&(n.labelFont=this._labelFont),"horizontal"===this._direction?(n.y=0,n.x=t,t+=n.width+this._space):(n.x=0,n.y=t,t+=n.height+this._space)}this._sizeChanged()}},{key:"commitMeasure",value:function(){this.runCallLater(this.changeLabels)}},{key:"_setLabelChanged",value:function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event(C.a.CHANGE),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._skin&&!w.a.getRes(this._skin)?E.a.loader.load(this._skin,S.a.create(this,this._skinLoaded),null,w.a.IMAGE,1):this._skinLoaded())}},{key:"labels",get:function(){return this._labels},set:function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e=this._labels.split(","),i=0,n=e.length;i<n;i++){var r=this.createItem(this._skin,e[i]);r.name="item"+i,this.addChild(r)}this.initItems()}}},{key:"labelColors",get:function(){return this._labelColors},set:function(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}},{key:"labelStroke",get:function(){return this._labelStroke},set:function(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}},{key:"labelStrokeColor",get:function(){return this._labelStrokeColor},set:function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}},{key:"strokeColors",get:function(){return this._strokeColors},set:function(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}},{key:"labelSize",get:function(){return this._labelSize},set:function(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}},{key:"stateNum",get:function(){return this._stateNum},set:function(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}},{key:"labelBold",get:function(){return this._labelBold},set:function(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}},{key:"labelFont",get:function(){return this._labelFont},set:function(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}},{key:"labelPadding",get:function(){return this._labelPadding},set:function(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t,this._setLabelChanged()}},{key:"space",get:function(){return this._space},set:function(t){this._space=t,this._setLabelChanged()}},{key:"items",get:function(){return this._items}},{key:"selection",get:function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},set:function(t){var e;this.selectedIndex=h()(e=this._items).call(e,t)}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.selectedIndex=s()(t):t instanceof Array?this.labels=t.join(","):d()(T()(i.prototype),"dataSource",t,this,!0)},get:function(){return p()(T()(i.prototype),"dataSource",this)}}]),i}(b.a);E.a.regClass(R),A.a.regClass("laya.ui.UIGroup",R),A.a.regClass("Laya.UIGroup",R)},function(t,e,i){"use strict";i.d(e,"a",(function(){return L}));var n=i(3),r=i.n(n),a=i(11),s=i.n(a),o=i(1),h=i.n(o),l=i(4),u=i.n(l),c=i(43),f=i.n(c),_=i(7),d=i.n(_),v=i(6),p=i.n(v),y=i(8),g=i.n(y),m=i(2),x=i.n(m),k=i(311),T=i(110),b=i(21),C=i(314),w=i(18);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var E=function(t){p()(i,t);var e=S(i);function i(){var t;return h()(this,i),(t=e.apply(this,arguments))._nodeIDAniDic={},t}return u()(i,[{key:"_parseNodeList",value:function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var i,n=e.length;for(i=0;i<n;i++)this._parseNodeList(e[i])}}},{key:"_calGraphicData",value:function(t){var e;if(this._setUp(null,t),this._createGraphicData(),this._nodeIDAniDic)for(e in this._nodeIDAniDic)this._nodeIDAniDic[e]=null}},{key:"_createGraphicData",value:function(){var t,e,i=[],n=this.count,r=this._usedFrames;for(r||(r=[]),t=0;t<n;t++)!r[t]&&e||(e=this._createFrameGraphic(t)),i.push(e);this._gList=i}},{key:"_createFrameGraphic",value:function(t){var e=new T.a;return i._rootMatrix||(i._rootMatrix=new w.a),this._updateNodeGraphic(this._rootNode,t,i._rootMatrix,e),e}},{key:"_updateNodeGraphic",value:function(t,e,i,n){var r,a,s,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;(r=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId])).resultTransform||(r.resultTransform=new w.a),a=r.resultTransform,w.a.mul(r.transform,i,a);var h=r.alpha*o;if(!(h<.01)){r.skin&&(s=this._getTextureByUrl(r.skin))&&(a._checkTransform()?(n.drawTexture(s,0,0,r.width,r.height,a,h),r.resultTransform=null):n.drawTexture(s,a.tx,a.ty,r.width,r.height,null,h));var l,u,c=t.child;if(c)for(u=c.length,l=0;l<u;l++)this._updateNodeGraphic(c[l],e,a,n,h)}}},{key:"_updateNoChilds",value:function(t,e){if(t.skin){var i=this._getTextureByUrl(t.skin);if(i){var n=t.transform;n._checkTransform(),!n._bTransform?e.drawTexture(i,n.tx,n.ty,t.width,t.height,null,t.alpha):e.drawTexture(i,0,0,t.width,t.height,n.clone(),t.alpha)}}}},{key:"_updateNodeGraphic2",value:function(t,e,i){var n;if(n=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),t.child){var r,a,s,o=n.transform;o._checkTransform(),a=(r=!o._bTransform)&&(0!=o.tx||0!=o.ty),(s=o._bTransform||1!=n.alpha)&&i.save(),1!=n.alpha&&i.alpha(n.alpha),r?a&&i.translate(o.tx,o.ty):i.transform(o.clone());var h,l,u,c=t.child;if(n.skin&&(h=this._getTextureByUrl(n.skin))&&i.drawImage(h,0,0,n.width,n.height),c)for(u=c.length,l=0;l<u;l++)this._updateNodeGraphic2(c[l],e,i);s?i.restore():r?a&&i.translate(-o.tx,-o.ty):i.transform(o.clone().invert())}else this._updateNoChilds(n,i)}},{key:"_calculateKeyFrames",value:function(t){d()(x()(i.prototype),"_calculateKeyFrames",this).call(this,t),this._nodeIDAniDic[t.target]=t}},{key:"getNodeDataByID",value:function(t){return this._nodeIDAniDic[t]}},{key:"_getParams",value:function(t,e,n,r){var a=i._temParam;a.length=e.length;var s,o=e.length;for(s=0;s<o;s++)a[s]=this._getObjVar(t,e[s][0],n,e[s][1],r);return a}},{key:"_getObjVar",value:function(t,e,i,n,r){if(e in t){var a=t[e];return i>=a.length&&(i=a.length-1),t[e][i]}return e in r?r[e]:n}},{key:"_getNodeGraphicData",value:function(t,e,n){n||(n=new A),n.transform?n.transform.identity():n.transform=new w.a;var r=this.getNodeDataByID(t);if(!r)return n;var a,s,o,h=r.frames,l=this._getParams(h,i._drawTextureCmd,e,this._nodeDefaultProps[t]),u=l[0],c=l[5],f=l[6],_=l[13],d=l[14],v=l[7],p=l[8],y=l[9],g=l[11],m=l[12];a=l[3],s=l[4],0!=a&&0!=s||(u=null),-1==a&&(a=0),-1==s&&(s=0),n.skin=u,n.width=a,n.height=s,u&&((o=this._getTextureByUrl(u))?(a||(a=o.sourceWidth),s||(s=o.sourceHeight)):console.warn("lost skin:",u,",you may load pics first")),n.alpha=l[10];var x=n.transform;0!=_&&(c=_*a),0!=d&&(f=d*s),0==c&&0==f||x.translate(-c,-f);var k=null;if(y||1!==v||1!==p||g||m){(k=i._tempMt).identity(),k._bTransform=!0;var T=.0174532922222222*(y-g),b=.0174532922222222*(y+m),C=Math.cos(b),S=Math.sin(b),E=Math.sin(T),M=Math.cos(T);k.a=v*C,k.b=v*S,k.c=-p*E,k.d=p*M,k.tx=k.ty=0}return k&&(x=w.a.mul(x,k,x)),x.translate(l[1],l[2]),n}},{key:"_getTextureByUrl",value:function(t){return b.a.getRes(t)}},{key:"setAniData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var n,r,a={},s=[],o=t.animations,h=o.length;for(n=0;n<h;n++)if(r=o[n],this._labels=null,(!e||e==r.name)&&r){try{this._calGraphicData(r)}catch(t){console.warn("parse animation fail:"+r.name+",empty animation created"),this._gList=[]}var l={};l.interval=1e3/r.frameRate,l.frames=this._gList,l.labels=this._labels,l.name=r.name,s.push(l),a[r.name]=l}this.animationList=s,this.animationDic=a}i._temParam.length=0}},{key:"parseByData",value:function(t){var e,i;e=t.nodeRoot,i=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(i)}catch(t){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var n=t;return n.interval=1e3/i.frameRate,n.frames=this._gList,n.labels=this._labels,n.name=i.name,n}},{key:"setUpAniData",value:function(t){if(t.animations){var e,i,n={},r=[],a=t.animations,s=a.length;for(e=0;e<s;e++)if(i=a[e]){var o={};o.name=i.name,o.aniO=i,o.nodeRoot=t,r.push(o),n[i.name]=o}this.animationList=r,this.animationDic=n}}},{key:"_clear",value:function(){this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic=null}}],[{key:"parseAnimationByData",value:function(t){var e;return i._I||(i._I=new i),e=i._I.parseByData(t),i._I._clear(),e}},{key:"parseAnimationData",value:function(t){var e;return i._I||(i._I=new i),i._I.setUpAniData(t),(e={}).animationList=i._I.animationList,e.animationDic=i._I.animationDic,i._I._clear(),e}}]),i}(C.a);E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],E._temParam=[],E._tempMt=new w.a;var A=function t(){h()(this,t),this.alpha=1},M=i(19),R=i(34),I=i(0),D=i(10);function P(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var a=x()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var L=function(t){p()(i,t);var e=P(i);function i(){var t;return h()(this,i),(t=e.call(this))._setControlNode(f()(t)),t}return u()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stop(),d()(x()(i.prototype),"destroy",this).call(this,t),this._frames=null,this._labels=null}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n&&this._setFramesFromCache(n,!0),d()(x()(i.prototype),"play",this).call(this,t,e,n)}},{key:"_setFramesFromCache",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._url&&(t=this._url+"#"+t),t&&i.framesMap[t]){var n=i.framesMap[t];return n instanceof Array?(this._frames=i.framesMap[t],this._count=this._frames.length):(n.nodeRoot&&(i.framesMap[t]=E.parseAnimationByData(n),n=i.framesMap[t]),this._frames=n.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n.interval),this._labels=this._copyLabels(n.labels)),!0}return e&&console.log("ani not found:",t),!1}},{key:"_copyLabels",value:function(t){if(!t)return null;var e,i;for(i in e={},t)e[i]=R.a.copyArray([],t[i]);return e}},{key:"_frameLoop",value:function(){this._visible&&this._style.alpha>.01&&this._frames&&d()(x()(i.prototype),"_frameLoop",this).call(this)}},{key:"_displayToIndex",value:function(t){this._frames&&(this.graphics=this._frames[t])}},{key:"clear",value:function(){return d()(x()(i.prototype),"clear",this).call(this),this.stop(),this.graphics=null,this._frames=null,this._labels=null,this}},{key:"loadImages",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._url="",this._setFramesFromCache(e)||(this.frames=i.framesMap[e]?i.framesMap[e]:i.createFrames(t,e)),this}},{key:"loadAtlas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._url="";var r=this;if(!r._setFramesFromCache(n)){var a=function(a){t===a&&(r.frames=i.framesMap[n]?i.framesMap[n]:i.createFrames(t,n),e&&e.run())};b.a.getAtlas(t)?a(t):I.a.loader.load(t,M.a.create(null,a,[t]),null,b.a.ATLAS)}return this}},{key:"loadAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._url=t;var n=this;return this._actionName||(this._actionName=""),n._setFramesFromCache(this._actionName)?(n._setFramesFromCache(this._actionName,!0),this.index=0,e&&e.run()):!i||b.a.getAtlas(i)?this._loadAnimationData(t,e,i):I.a.loader.load(i,M.a.create(this,this._loadAnimationData,[t,e,i]),null,b.a.ATLAS),this}},{key:"_loadAnimationData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n||b.a.getAtlas(n)){var r=this;b.a.getRes(t)?a(t):I.a.loader.load(t,M.a.create(null,a,[t]),null,b.a.JSON)}else console.warn("atlas load fail:"+n);function a(n){if(b.a.getRes(n)){if(t===n){var a;if(i.framesMap[t+"#"])r._setFramesFromCache(r._actionName,!0),r.index=0,r._resumePlay();else{var s=E.parseAnimationData(b.a.getRes(t));if(!s)return;var o,h,l=s.animationList,u=l.length;for(o=0;o<u;o++)a=l[o],i.framesMap[t+"#"+a.name]=a,h||(h=a);h&&(i.framesMap[t+"#"]=h,r._setFramesFromCache(r._actionName,!0),r.index=0),r._resumePlay()}e&&e.run()}b.a.clearRes(t)}else i.framesMap[t+"#"]&&(r._setFramesFromCache(r._actionName,!0),r.index=0,r._resumePlay(),e&&e.run())}}},{key:"frames",get:function(){return this._frames},set:function(t){this._frames=t,t&&(this._count=t.length,this._actionName&&this._setFramesFromCache(this._actionName,!0),this.index=this._index)}},{key:"source",set:function(t){s()(t).call(t,".ani")>-1?this.loadAnimation(t):s()(t).call(t,".json")>-1||s()(t).call(t,"als")>-1||s()(t).call(t,"atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","))}},{key:"autoAnimation",set:function(t){this.play(0,!0,t)}},{key:"autoPlay",set:function(t){t?this.play():this.stop()}}],[{key:"createFrames",value:function(t,e){var n;if("string"==typeof t){var r=b.a.getAtlas(t);if(r&&r.length){n=[];for(var a=0,s=r.length;a<s;a++){var o=new T.a;o.drawImage(b.a.getRes(r[a]),0,0),n.push(o)}}}else if(t instanceof Array)for(n=[],a=0,s=t.length;a<s;a++)(o=new T.a).loadImage(t[a],0,0),n.push(o);return e&&(i.framesMap[e]=n),n}},{key:"clearCache",value:function(t){var e,n=i.framesMap,r=t+"#";for(e in n)e!==t&&0!==s()(e).call(e,r)||delete i.framesMap[e]}}]),i}(k.a);L.framesMap={},I.a.regClass(L),D.a.regClass("laya.display.Animation",L),D.a.regClass("Laya.Animation",L)},function(t,e,i){t.exports=i(635)},function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(35),u=i.n(l),c=i(7),f=i.n(c),_=i(6),d=i.n(_),v=i(8),p=i.n(v),y=i(2),g=i.n(y),m=i(5),x=i(21),k=i(84),T=i(69),b=i(19),C=i(0),w=i(10);function S(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var a=g()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var E=function(t){d()(i,t);var e=S(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s()(this,i),(t=e.call(this))._value=.5,t.skin=n,t}return h()(i,[{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f()(g()(i.prototype),"destroy",this).call(this,t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._bg=this._bar=null,this.changeHandler=null}},{key:"createChildren",value:function(){this.addChild(this._bg=new T.a),this.addChild(this._bar=new T.a),this._bar._bitmap.autoCacheCmd=!1}},{key:"_skinLoaded",value:function(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue),this._sizeChanged(),this.event(m.a.LOADED)}},{key:"measureWidth",value:function(){return this._bg.width}},{key:"measureHeight",value:function(){return this._bg.height}},{key:"changeValue",value:function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[3]),i=Number(t[1]),n=(this.width-e-i)*this._value;this._bar.width=e+i+n,this._bar.visible=this._bar.width>e+i}else this._bar.width=this.width*this._value}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._skin&&!x.a.getRes(this._skin)?C.a.loader.load(this._skin,b.a.create(this,this._skinLoaded),null,x.a.IMAGE,1):this._skinLoaded())}},{key:"value",get:function(){return this._value},set:function(t){this._value!=t&&(t=t>1?1:t<0?0:t,this._value=t,this.callLater(this.changeValue),this.event(m.a.CHANGE),this.changeHandler&&this.changeHandler.runWith(t))}},{key:"bar",get:function(){return this._bar}},{key:"bg",get:function(){return this._bg}},{key:"sizeGrid",get:function(){return this._bg.sizeGrid},set:function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}},{key:"width",set:function(t){u()(g()(i.prototype),"width",t,this,!0),this._bg.width=this._width,this.callLater(this.changeValue)},get:function(){return f()(g()(i.prototype),"width",this)}},{key:"height",set:function(t){u()(g()(i.prototype),"height",t,this,!0),this._bg.height=this._height,this._bar.height=this._height},get:function(){return f()(g()(i.prototype),"height",this)}},{key:"dataSource",set:function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):u()(g()(i.prototype),"dataSource",t,this,!0)},get:function(){return f()(g()(i.prototype),"dataSource",this)}}]),i}(k.a);C.a.regClass(E),w.a.regClass("laya.ui.ProgressBar",E),w.a.regClass("Laya.ProgressBar",E)},function(t,e,i){"use strict";i.d(e,"a",(function(){return lt}));var n=i(3),r=i.n(n),a=i(11),s=i.n(a),o=i(148),h=i.n(o),l=i(15),u=i.n(l),c=i(1),f=i.n(c),_=i(4),d=i.n(_),v=i(7),p=i.n(v),y=i(6),g=i.n(y),m=i(8),x=i.n(m),k=i(2),T=i.n(k),b=i(18),C=function(){function t(){f()(this,t),this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0}return d()(t,[{key:"initData",value:function(t){null!=t.x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.skX&&(this.skX=t.skX),null!=t.skY&&(this.skY=t.skY),null!=t.scX&&(this.scX=t.scX),null!=t.scY&&(this.scY=t.scY)}},{key:"getMatrix",value:function(){var t;return(t=this.mMatrix?this.mMatrix:this.mMatrix=new b.a).identity(),t.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(t,this.skewX*Math.PI/180,this.skewY*Math.PI/180),t.rotate(this.skX*Math.PI/180),t.translate(this.x,this.y),t}},{key:"skew",value:function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=Math.sin(e),s=Math.cos(e);return t.setTo(t.a*s-t.b*n,t.a*a+t.b*r,t.c*s-t.d*n,t.c*a+t.d*r,t.tx*s-t.ty*n,t.tx*a+t.ty*r),t}}]),t}(),w=i(44),S=i(0),E=function(){function t(){f()(this,t),this.length=10,this.resultTransform=new C,this.resultMatrix=new b.a,this.inheritScale=!0,this.inheritRotation=!0,this.d=-1,this._children=[]}return d()(t,[{key:"setTempMatrix",value:function(t){this._tempMatrix=t;var e,i=0;for(i=0,e=this._children.length;i<e;i++)this._children[i].setTempMatrix(this._tempMatrix)}},{key:"update",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.rotation=this.transform.skX,e)t=this.resultTransform.getMatrix(),b.a.mul(t,e,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)t=this.resultTransform.getMatrix(),b.a.mul(t,this.parentBone.resultMatrix,this.resultMatrix);else{var i,n,r,a=this.parentBone,s=this.parentBone.resultMatrix;t=this.resultTransform.getMatrix();var o=s.a*t.tx+s.c*t.ty+s.tx,h=s.b*t.tx+s.d*t.ty+s.ty,l=new b.a;this.inheritRotation?(i=Math.atan2(a.resultMatrix.b,a.resultMatrix.a),n=Math.cos(i),r=Math.sin(i),l.setTo(n,r,-r,n,0,0),b.a.mul(this._tempMatrix,l,b.a.TEMP),b.a.TEMP.copyTo(l),t=this.resultTransform.getMatrix(),b.a.mul(t,l,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI),this.resultMatrix.tx=o,this.resultMatrix.ty=h):(this.inheritScale,t=this.resultTransform.getMatrix(),b.a.TEMP.identity(),b.a.TEMP.d=this.d,b.a.mul(t,b.a.TEMP,this.resultMatrix),this.resultMatrix.tx=o,this.resultMatrix.ty=h)}else(t=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var u=0,c=0;for(u=0,c=this._children.length;u<c;u++)this._children[u].update()}},{key:"updateChild",value:function(){var t,e=0;for(e=0,t=this._children.length;e<t;e++)this._children[e].update()}},{key:"setRotation",value:function(t){this._sprite&&(this._sprite.rotation=180*t/Math.PI)}},{key:"updateDraw",value:function(e,i){t.ShowBones&&!t.ShowBones[this.name]||(this._sprite?(this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=i+this.resultMatrix.ty):(this._sprite=new w.a,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),S.a.stage.addChild(this._sprite),this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=i+this.resultMatrix.ty));var n,r=0;for(r=0,n=this._children.length;r<n;r++)this._children[r].updateDraw(e,i)}},{key:"addChild",value:function(t){this._children.push(t),t.parentBone=this}},{key:"findBone",value:function(t){if(this.name==t)return this;var e,i,n;for(e=0,i=this._children.length;e<i;e++)if(n=this._children[e].findBone(t))return n;return null}},{key:"localToWorld",value:function(t){var e=t[0],i=t[1];t[0]=e*this.resultMatrix.a+i*this.resultMatrix.c+this.resultMatrix.tx,t[1]=e*this.resultMatrix.b+i*this.resultMatrix.d+this.resultMatrix.ty}}]),t}();E.ShowBones={};var A=function t(){f()(this,t),this.boneIndexs=[]},M=function t(){f()(this,t),this.bones=[]},R=function t(){f()(this,t),this.deformSlotDataList=[]},I=function t(){f()(this,t),this.deformSlotDisplayList=[]},D=function(){function t(){f()(this,t),this.slotIndex=-1,this.timeList=[],this.vectices=[],this.tweenKeyList=[],this.frameIndex=0}return d()(t,[{key:"binarySearch1",value:function(t,e){var i=0,n=t.length-2;if(0==n)return 1;for(var r=n>>>1;;){if(t[Math.floor(r+1)]<=e?i=r+1:n=r,i==n)return i+1;r=i+n>>>1}return 0}},{key:"apply",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t+=.05,!(this.timeList.length<=0)){var n=0,r=this.timeList[0];if(!(t<r)){var a=this.vectices[0].length,s=[],o=this.binarySearch1(this.timeList,t);if(this.frameIndex=o,t>=this.timeList[this.timeList.length-1]){var h=this.vectices[this.vectices.length-1];if(i<1)for(n=0;n<a;n++)s[n]+=(h[n]-s[n])*i;else for(n=0;n<a;n++)s[n]=h[n];this.deformData=s}else{var l,u=this.vectices[this.frameIndex-1],c=this.vectices[this.frameIndex],f=this.timeList[this.frameIndex-1],_=this.timeList[this.frameIndex];for(i=this.tweenKeyList[o-1]?(t-f)/(_-f):0,n=0;n<a;n++)l=u[n],s[n]=l+(c[n]-l)*i;this.deformData=s}}}}}]),t}(),P=function t(){f()(this,t),this.drawOrder=[]},L=function t(){f()(this,t)},B=function t(){f()(this,t)},O=function t(){f()(this,t)},F=function t(){f()(this,t)},N=i(111),U=i(139),G=function(){function t(){f()(this,t)}return d()(t,null,[{key:"parse",value:function(t,e){var i,n,r,a,s,o,h,l=e.__getBuffer(),c=e.readUTFString();t._aniClassName=c;var f,_=e.readUTFString().split("\n"),d=e.getUint8(),v=e.getUint32(),p=e.getUint32();v>0&&(f=u()(l).call(l,v,p));var y=new U.a(f);for(p>0&&(t._publicExtData=u()(l).call(l,p,l.byteLength)),t._useParent=!!e.getUint8(),t._anis.length=d,i=0;i<d;i++){var g=t._anis[i]=new B;g.nodes=[];var m=g.name=_[e.getUint16()];t._aniMap[m]=i,g.bone3DMap={},g.playTime=e.getFloat32();var x=g.nodes.length=e.getUint8();for(g.totalKeyframeDatasLength=0,n=0;n<x;n++){var k=g.nodes[n]=new O;k.childs=[];var T=e.getInt16();T>=0&&(k.name=_[T],g.bone3DMap[k.name]=n),k.keyFrame=[],k.parentIndex=e.getInt16(),-1==k.parentIndex?k.parent=null:k.parent=g.nodes[k.parentIndex],k.lerpType=e.getUint8();var b=e.getUint32();y.pos=b;var C=k.keyframeWidth=y.getUint16();if(g.totalKeyframeDatasLength+=C,0===k.lerpType||1===k.lerpType)for(k.interpolationMethod=[],k.interpolationMethod.length=C,r=0;r<C;r++)k.interpolationMethod[r]=N.a.AnimationTemplet.interpolation[y.getUint8()];null!=k.parent&&k.parent.childs.push(k);var w=e.getUint16();w>0&&(k.extenData=u()(l).call(l,e.pos,e.pos+w),e.pos+=w);var S=e.getUint16();k.keyFrame.length=S;var E,A=0;for(r=0,a=S;r<a;r++){if((E=k.keyFrame[r]=new F).duration=e.getFloat32(),E.startTime=A,2===k.lerpType){E.interpolationData=[];var M,R=e.getUint8();switch(M=e.getFloat32()){case 254:for(E.interpolationData.length=C,h=0;h<C;h++)E.interpolationData[h]=0;break;case 255:for(E.interpolationData.length=C,h=0;h<C;h++)E.interpolationData[h]=5;break;default:for(E.interpolationData.push(M),o=1;o<R;o++)E.interpolationData.push(e.getFloat32())}}for(E.data=new Float32Array(C),E.dData=new Float32Array(C),E.nextData=new Float32Array(C),s=0;s<C;s++)E.data[s]=e.getFloat32(),E.data[s]>-1e-8&&E.data[s]<1e-8&&(E.data[s]=0);A+=E.duration}E.startTime=g.playTime,k.playTime=g.playTime,t._calculateKeyFrame(k,S,C)}}}}]),t}(),Y=function(){function t(){f()(this,t)}return d()(t,null,[{key:"READ_DATA",value:function(){t._DATA.offset=t._reader.getUint32(),t._DATA.size=t._reader.getUint32()}},{key:"READ_BLOCK",value:function(){for(var e=t._BLOCK.count=t._reader.getUint16(),i=t._BLOCK.blockStarts=[],n=t._BLOCK.blockLengths=[],r=0;r<e;r++)i.push(t._reader.getUint32()),n.push(t._reader.getUint32())}},{key:"READ_STRINGS",value:function(){var e=t._reader.getUint32(),i=t._reader.getUint16(),n=t._reader.pos;t._reader.pos=e+t._DATA.offset;for(var r=0;r<i;r++)t._strings[r]=t._reader.readUTFString();t._reader.pos=n}},{key:"parse",value:function(e,i){t._templet=e,t._reader=i;i.__getBuffer();t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var n=0,r=t._BLOCK.count;n<r;n++){var a=i.getUint16(),s=t._strings[a],o=t["READ_"+s];if(null==o)throw new Error("model file err,no this function:"+a+" "+s);o.call(null)}}},{key:"READ_ANIMATIONS",value:function(){var e,i,n,r,a=t._reader,s=a.__getBuffer(),o=a.getUint16(),h=[];for(h.length=o,e=0;e<o;e++)h[e]=N.a.AnimationTemplet.interpolation[a.getByte()];var l=a.getUint8();for(t._templet._anis.length=l,e=0;e<l;e++){var c=t._templet._anis[e]=new B;c.nodes=[];var f=c.name=t._strings[a.getUint16()];t._templet._aniMap[f]=e,c.bone3DMap={},c.playTime=a.getFloat32();var _=c.nodes.length=a.getInt16();for(c.totalKeyframeDatasLength=0,i=0;i<_;i++){var d=c.nodes[i]=new O;d.keyframeWidth=o,d.childs=[];var v=a.getUint16();v>=0&&(d.name=t._strings[v],c.bone3DMap[d.name]=i),d.keyFrame=[],d.parentIndex=a.getInt16(),-1==d.parentIndex?d.parent=null:d.parent=c.nodes[d.parentIndex],c.totalKeyframeDatasLength+=o,d.interpolationMethod=h,null!=d.parent&&d.parent.childs.push(d);var p=a.getUint16();d.keyFrame.length=p;var y=null,g=null;for(n=0,r=p;n<r;n++){(y=d.keyFrame[n]=new F).startTime=a.getFloat32(),g&&(g.duration=y.startTime-g.startTime),y.dData=new Float32Array(o),y.nextData=new Float32Array(o);var m=t._DATA.offset,x=a.getUint32(),k=4*o,T=u()(s).call(s,m+x,m+x+k);y.data=new Float32Array(T),g=y}y.duration=0,d.playTime=c.playTime,t._templet._calculateKeyFrame(d,p,o)}}}}]),t}();Y._strings=[],Y._BLOCK={count:0},Y._DATA={offset:0,size:0};var W=i(98),V=i(315),X=i(223),H=function(){function t(){f()(this,t)}return d()(t,null,[{key:"getBezierRate",value:function(e,i,n,r,a){var s=t._getBezierParamKey(i,n,r,a),o=100*s+e;if(t._bezierResultCache[o])return t._bezierResultCache[o];var h,l,u=t._getBezierPoints(i,n,r,a,s);for(l=u.length,h=0;h<l;h+=2)if(e<=u[h])return t._bezierResultCache[o]=u[h+1],u[h+1];return t._bezierResultCache[o]=1,1}},{key:"_getBezierParamKey",value:function(t,e,i,n){return 100*(100*(100*(100*t+e)+i)+n)}},{key:"_getBezierPoints",value:function(e,i,n,r,a){return t._bezierPointsCache[a]?t._bezierPointsCache[a]:(s=[0,0,e,i,n,r,1,1],o=(new X.a).getBezierPoints(s,100,3),t._bezierPointsCache[a]=o,o);var s,o}}]),t}();function z(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T()(t);if(e){var a=T()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}H._bezierResultCache={},H._bezierPointsCache={};var j=function(t){g()(i,t);var e=z(i);function i(){var t;return f()(this,i),(t=e.call(this))._anis=[],t._aniMap={},t.unfixedLastAniIndex=-1,t._fullFrames=null,t._boneCurKeyFrm=[],t}return d()(i,[{key:"parse",value:function(t){var e=new U.a(t);this._aniVersion=e.readUTFString(),G.parse(this,e)}},{key:"_calculateKeyFrame",value:function(t,e,i){var n=t.keyFrame;n[e]=n[0];for(var r=0;r<e;r++)for(var a=n[r],s=0;s<i;s++)a.dData[s]=0===a.duration?0:(n[r+1].data[s]-a.data[s])/a.duration,a.nextData[s]=n[r+1].data[s];n.length--}},{key:"_onAsynLoaded",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=new U.a(t);switch(this._aniVersion=e.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":Y.parse(this,e);break;default:G.parse(this,e)}}},{key:"getAnimationCount",value:function(){return this._anis.length}},{key:"getAnimation",value:function(t){return this._anis[t]}},{key:"getAniDuration",value:function(t){return this._anis[t].playTime}},{key:"getNodes",value:function(t){return this._anis[t].nodes}},{key:"getNodeIndexWithName",value:function(t,e){return this._anis[t].bone3DMap[e]}},{key:"getNodeCount",value:function(t){return this._anis[t].nodes.length}},{key:"getTotalkeyframesLength",value:function(t){return this._anis[t].totalKeyframeDatasLength}},{key:"getPublicExtData",value:function(){return this._publicExtData}},{key:"getAnimationDataWithCache",value:function(t,e,i,n){var r=e[i];if(r){var a=r[t];return a?a[n]:null}return null}},{key:"setAnimationDataWithCache",value:function(t,e,i,n,r){var a=e[i]||(e[i]={});(a[t]||(a[t]=[]))[n]=r}},{key:"getNodeKeyFrame",value:function(t,e,i){var n=this._boneCurKeyFrm[e],r=t.length;(null==n||n>=r)&&(n=this._boneCurKeyFrm[e]=0);var a=t[n],s=i-a.startTime;if(0==s||s>0&&a.duration>s)return n;var o=0;if(s>0){for(i+=.01,o=n+1;o<r;o++)if((a=t[o]).startTime<=i&&a.startTime+a.duration>i)return this._boneCurKeyFrm[e]=o,o;return r-1}for(o=0;o<n;o++)if((a=t[o]).startTime<=i&&a.startTime+a.duration>i)return this._boneCurKeyFrm[e]=o,o;return n}},{key:"getOriginalData",value:function(t,e,n,r,a){var s=this._anis[t].nodes,o=this._boneCurKeyFrm;o.length<s.length&&(o.length=s.length);for(var h=0,l=0,u=s.length,c=0;l<u;l++){var f,_=s[l],d=_.keyFrame;f=d[this.getNodeKeyFrame(d,l,a)],_.dataOffset=c;var v=a-f.startTime,p=_.lerpType;if(p)switch(p){case 0:case 1:for(h=0;h<_.keyframeWidth;)h+=_.interpolationMethod[h](_,h,e,c+h,f.data,v,f.dData,f.duration,f.nextData);break;case 2:var y=f.interpolationData,g=y.length,m=0;for(h=0;h<g;){var x=y[h];switch(x){case 6:case 7:h+=i.interpolation[x](_,m,e,c+m,f.data,v,f.dData,f.duration,f.nextData,y,h+1);break;default:h+=i.interpolation[x](_,m,e,c+m,f.data,v,f.dData,f.duration,f.nextData)}m++}}else for(h=0;h<_.keyframeWidth;)h+=_.interpolationMethod[h](_,h,e,c+h,f.data,v,f.dData,f.duration,f.nextData);c+=_.keyframeWidth}}},{key:"getNodesCurrentFrameIndex",value:function(t,e){var i=this._anis[t].nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(i.length),this.unfixedCurrentTimes=new Float32Array(i.length),this.unfixedLastAniIndex=t);for(var n=0,r=i.length;n<r;n++){var a=i[n];for(e<this.unfixedCurrentTimes[n]&&(this.unfixedCurrentFrameIndexes[n]=0),this.unfixedCurrentTimes[n]=e;this.unfixedCurrentFrameIndexes[n]<a.keyFrame.length&&!(a.keyFrame[this.unfixedCurrentFrameIndexes[n]].startTime>this.unfixedCurrentTimes[n]);)this.unfixedCurrentFrameIndexes[n]++;this.unfixedCurrentFrameIndexes[n]--}return this.unfixedCurrentFrameIndexes}},{key:"getOriginalDataUnfixedRate",value:function(t,e,n){var r=this._anis[t].nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(r.length),this.unfixedCurrentTimes=new Float32Array(r.length),this.unfixedKeyframes=[],this.unfixedLastAniIndex=t);for(var a=0,s=0,o=r.length,h=0;s<o;s++){var l=r[s];for(n<this.unfixedCurrentTimes[s]&&(this.unfixedCurrentFrameIndexes[s]=0),this.unfixedCurrentTimes[s]=n;this.unfixedCurrentFrameIndexes[s]<l.keyFrame.length&&!(l.keyFrame[this.unfixedCurrentFrameIndexes[s]].startTime>this.unfixedCurrentTimes[s]);)this.unfixedKeyframes[s]=l.keyFrame[this.unfixedCurrentFrameIndexes[s]],this.unfixedCurrentFrameIndexes[s]++;var u=this.unfixedKeyframes[s];l.dataOffset=h;var c=n-u.startTime;if(l.lerpType)switch(l.lerpType){case 0:case 1:for(a=0;a<l.keyframeWidth;)a+=l.interpolationMethod[a](l,a,e,h+a,u.data,c,u.dData,u.duration,u.nextData);break;case 2:var f=u.interpolationData,_=f.length,d=0;for(a=0;a<_;){var v=f[a];switch(v){case 6:case 7:a+=i.interpolation[v](l,d,e,h+d,u.data,c,u.dData,u.duration,u.nextData,f,a+1);break;default:a+=i.interpolation[v](l,d,e,h+d,u.data,c,u.dData,u.duration,u.nextData)}d++}}else for(a=0;a<l.keyframeWidth;)a+=l.interpolationMethod[a](l,a,e,h+a,u.data,c,u.dData,u.duration,u.nextData);h+=l.keyframeWidth}}}],[{key:"_LinearInterpolation_0",value:function(t,e,i,n,r,a,s,o,h){arguments.length>9&&void 0!==arguments[9]&&arguments[9];return i[n]=r[e]+a*s[e],1}},{key:"_QuaternionInterpolation_1",value:function(t,e,i,n,r,a,s,o,h){arguments.length>9&&void 0!==arguments[9]&&arguments[9];var l=0===o?0:a/o;return V.a.slerpQuaternionArray(r,e,h,e,l,i,n),4}},{key:"_AngleInterpolation_2",value:function(t,e,i,n,r,a,s,o,h){arguments.length>9&&void 0!==arguments[9]&&arguments[9];return 0}},{key:"_RadiansInterpolation_3",value:function(t,e,i,n,r,a,s,o,h){arguments.length>9&&void 0!==arguments[9]&&arguments[9];return 0}},{key:"_Matrix4x4Interpolation_4",value:function(t,e,i,n,r,a,s,o,h){arguments.length>9&&void 0!==arguments[9]&&arguments[9];for(var l=0;l<16;l++,e++)i[n+l]=r[e]+a*s[e];return 16}},{key:"_NoInterpolation_5",value:function(t,e,i,n,r,a,s,o,h){arguments.length>9&&void 0!==arguments[9]&&arguments[9];return i[n]=r[e],1}},{key:"_BezierInterpolation_6",value:function(t,e,i,n,r,a,s,o,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;return i[n]=r[e]+(h[e]-r[e])*H.getBezierRate(a/o,l[u],l[u+1],l[u+2],l[u+3]),5}},{key:"_BezierInterpolation_7",value:function(t,e,i,n,r,a,s,o,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;return i[n]=l[u+4]+l[u+5]*H.getBezierRate((.001*a+l[u+6])/l[u+7],l[u],l[u+1],l[u+2],l[u+3]),9}}]),i}(W.a);j.interpolation=[j._LinearInterpolation_0,j._QuaternionInterpolation_1,j._AngleInterpolation_2,j._RadiansInterpolation_3,j._Matrix4x4Interpolation_4,j._NoInterpolation_5,j._BezierInterpolation_6,j._BezierInterpolation_7],N.a.AnimationTemplet=j;var K=i(34),q=function(){function t(){f()(this,t)}return d()(t,null,[{key:"getRelativeUV",value:function(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t[0],s=t[2]-t[0],o=t[1],h=t[5]-t[1];r||(r=[]),r.length=e.length,n=r.length;var l=1/s,u=1/h;for(i=0;i<n;i+=2)r[i]=(e[i]-a)*l,r[i+1]=(e[i+1]-o)*u;return r}},{key:"getAbsoluteUV",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0==t[0]&&0==t[1]&&1==t[4]&&1==t[5])return i?(K.a.copyArray(i,e),i):e;var n,r,a=t[0],s=t[2]-t[0],o=t[1],h=t[5]-t[1];for(i||(i=[]),i.length=e.length,r=i.length,n=0;n<r;n+=2)i[n]=e[n]*s+a,i[n+1]=e[n+1]*h+o;return i}}]),t}(),Z=i(32);function Q(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T()(t);if(e){var a=T()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}var $=function(t){g()(i,t);var e=Q(i);function i(){return f()(this,i),e.call(this)}return d()(i,[{key:"init2",value:function(t,e,i,n){this.transform&&(this.transform=null);var r=e||[0,1,3,3,1,2];this.texture=t,this.indexes=new Uint16Array(r),this.vertices=new Float32Array(i),this.uvs=new Float32Array(n)}}]),i}(function(){function t(){f()(this,t),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=new Float32Array([0,0,100,0,100,100,0,100]),this.indexes=new Uint16Array([0,1,3,3,1,2]),this.useUvTransform=!1,this.canvasPadding=1}return d()(t,[{key:"getBounds",value:function(){return Z.a._getWrapRec(this.vertices)}}]),t}()),J=function(){function t(){f()(this,t),this.srcDisplayIndex=-1,this.type="src",this.displayIndex=-1,this.originalIndex=-1,this._replaceDic={}}return d()(t,[{key:"showSlotData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currSlotData=t,e&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null}},{key:"showDisplayByName",value:function(t){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(t))}},{key:"replaceDisplayByName",value:function(t,e){var i,n;this.currSlotData&&(i=this.currSlotData.getDisplayByName(t),n=this.currSlotData.getDisplayByName(e),this.replaceDisplayByIndex(i,n))}},{key:"replaceDisplayByIndex",value:function(t,e){this.currSlotData&&(this._replaceDic[t]=e,this.originalIndex==t&&this.showDisplayByIndex(t))}},{key:"showDisplayByIndex",value:function(t){if(this.originalIndex=t,null!=this._replaceDic[t]&&(t=this._replaceDic[t]),this.currSlotData&&t>-1&&t<this.currSlotData.displayArr.length){if(this.displayIndex=t,this.currDisplayData=this.currSlotData.displayArr[t],this.currDisplayData){var e=this.currDisplayData.name;this.currTexture=this.templet.getTexture(e),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null}},{key:"replaceSkin",value:function(t){this._diyTexture=t,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)}},{key:"setParentMatrix",value:function(t){this._parentMatrix=t}},{key:"getSaveVerticle",value:function(e){return t.useSameMatrixAndVerticle&&this._preGraphicVerticle&&t.isSameArr(e,this._preGraphicVerticle)?e=this._preGraphicVerticle:(e=S.a.Utils.copyArray([],e),this._preGraphicVerticle=e),e}},{key:"getSaveMatrix",value:function(e){if(t.useSameMatrixAndVerticle&&this._preGraphicMatrix&&t.isSameMatrix(e,this._preGraphicMatrix))e=this._preGraphicMatrix;else{var i=e.clone();e=i,this._preGraphicMatrix=e}return e}},{key:"draw",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if((null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var a,s=this.currTexture;switch(this._diyTexture&&(s=this._diyTexture),this.currDisplayData.type){case 0:if(e){var o=this.getDisplayMatrix();if(this._parentMatrix){var h=!1;if(o){var l;if(b.a.mul(o,this._parentMatrix,b.a.TEMP),n?(null==this._resultMatrix&&(this._resultMatrix=new b.a),l=this._resultMatrix):l=t._tempResultMatrix,this._diyTexture&&this.currDisplayData.uvs){var u=t._tempMatrix;u.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(u.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(h=!0,u.rotate(-Math.PI/2)),b.a.mul(u,b.a.TEMP,l)}else b.a.TEMP.copyTo(l);n||(l=this.getSaveMatrix(l)),l._checkTransform(),h?e.drawTexture(s,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,l,r):e.drawTexture(s,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,l,r)}}}break;case 1:if(n?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),a=this._skinSprite):a=t.createSkinMesh(),null==a)return;var c;if(null==this.currDisplayData.bones){var f,_=this.currDisplayData.weights;this.deformData&&(_=this.deformData),this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=q.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=q.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),f=this._curDiyUV):f=this.currDisplayData.uvs,this._mVerticleArr=_;this.currDisplayData.triangles.length;c=this.currDisplayData.triangles,this.deformData&&(n||(this._mVerticleArr=this.getSaveVerticle(this._mVerticleArr))),a.init2(s,c,this._mVerticleArr,f);var d,v=this.getDisplayMatrix();if(this._parentMatrix)if(v)b.a.mul(v,this._parentMatrix,b.a.TEMP),n?(null==this._resultMatrix&&(this._resultMatrix=new b.a),d=this._resultMatrix):d=t._tempResultMatrix,b.a.TEMP.copyTo(d),n||(d=this.getSaveMatrix(d)),a.transform=d}else this.skinMesh(i,a);e.drawSkin(a,r);break;case 2:if(n?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),a=this._skinSprite):a=t.createSkinMesh(),null==a)return;this.skinMesh(i,a),e.drawSkin(a,r)}}}},{key:"skinMesh",value:function(e,i){var n,r=this.currTexture,a=this.currDisplayData.bones;this._diyTexture?(r=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=q.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=q.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),n=this._curDiyUV):n=this.currDisplayData.uvs;var s,o,h,l,u,c=this.currDisplayData.weights,f=this.currDisplayData.triangles,_=0,d=0,v=0,p=0,y=0,g=0,m=0;if(t._tempVerticleArr.length=0,u=t._tempVerticleArr,this.deformData&&this.deformData.length>0){var x=0;for(g=0,m=a.length;g<m;){for(v=a[g++]+g,_=0,d=0;g<v;g++)o=e[a[g]],h=c[p]+this.deformData[x++],l=c[p+1]+this.deformData[x++],y=c[p+2],_+=(h*o.a+l*o.c+o.tx)*y,d+=(h*o.b+l*o.d+o.ty)*y,p+=3;u.push(_,d)}}else for(g=0,m=a.length;g<m;){for(v=a[g++]+g,_=0,d=0;g<v;g++)o=e[a[g]],h=c[p],l=c[p+1],y=c[p+2],_+=(h*o.a+l*o.c+o.tx)*y,d+=(h*o.b+l*o.d+o.ty)*y,p+=3;u.push(_,d)}this._mVerticleArr=u,s=f,this._mVerticleArr=this.getSaveVerticle(this._mVerticleArr),i.init2(r,s,this._mVerticleArr,n)}},{key:"drawBonePoint",value:function(t){t&&this._parentMatrix&&t.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")}},{key:"getDisplayMatrix",value:function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null}},{key:"getMatrix",value:function(){return this._resultMatrix}},{key:"copy",value:function(){var e=new t;return e.type="copy",e.name=this.name,e.attachmentName=this.attachmentName,e.srcDisplayIndex=this.srcDisplayIndex,e.parent=this.parent,e.displayIndex=this.displayIndex,e.templet=this.templet,e.currSlotData=this.currSlotData,e.currTexture=this.currTexture,e.currDisplayData=this.currDisplayData,e}}],[{key:"createSkinMesh",value:function(){return new $}},{key:"isSameArr",value:function(t,e){if(t.length!=e.length)return!1;var i,n;for(n=t.length,i=0;i<n;i++)if(t[i]!=e[i])return!1;return!0}},{key:"isSameMatrix",value:function(t,e){return t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&Math.abs(t.tx-e.tx)<1e-5&&Math.abs(t.ty-e.ty)<1e-5}}]),t}();J._tempMatrix=new b.a,J._tempResultMatrix=new b.a,J.useSameMatrixAndVerticle=!0,J._tempVerticleArr=[];var tt=function t(){f()(this,t),this.slotArr=[]},et=i(57),it=function(){function t(){f()(this,t)}return d()(t,[{key:"createTexture",value:function(t){return this.texture||(this.texture=new et.a(t.bitmap,this.uvs),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=t.height,this.texture.height=t.width,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceHeight,this.texture.sourceHeight=t.sourceWidth):(this.texture.width=t.width,this.texture.height=t.height,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceWidth,this.texture.sourceHeight=t.sourceHeight)),this.texture}},{key:"destory",value:function(){this.texture&&this.texture.destroy()}}]),t}(),nt=function(){function t(){f()(this,t),this.displayArr=[]}return d()(t,[{key:"getDisplayByName",value:function(t){for(var e=0,i=this.displayArr.length;e<i;e++)if(this.displayArr[e].attachmentName==t)return e;return-1}}]),t}(),rt=function t(){f()(this,t),this.boneNames=[],this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneIndexs=[]},at=i(19),st=i(5),ot=i(207);function ht(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T()(t);if(e){var a=T()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}var lt=function(t){g()(i,t);var e=ht(i);function i(){var t;return f()(this,i),(t=e.apply(this,arguments))._graphicsCache=[],t.srcBoneMatrixArr=[],t.ikArr=[],t.tfArr=[],t.pathArr=[],t.boneSlotDic={},t.bindBoneBoneSlotDic={},t.boneSlotArray=[],t.skinDataArray=[],t.skinDic={},t.subTextureDic={},t.isParseFail=!1,t.drawOrderAniArr=[],t.eventAniArr=[],t.attachmentNames=null,t.deformAniArr=[],t.skinSlotDisplayDataArr=[],t._isParseAudio=!1,t._isDestroyed=!1,t._rate=30,t.isParserComplete=!1,t.aniSectionDic={},t._textureDic={},t.mBoneArr=[],t}return d()(i,[{key:"loadAni",value:function(t){this._skBufferUrl=t,S.a.loader.load(t,at.a.create(this,this.onComplete),null,S.a.Loader.BUFFER)}},{key:"onComplete",value:function(){var t,e;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._isDestroyed)this.destroy();else{var i=S.a.Loader.getRes(this._skBufferUrl);i?(this._path=u()(t=this._skBufferUrl).call(t,0,h()(e=this._skBufferUrl).call(e,"/"))+"/",this.parseData(null,i)):this.event(st.a.ERROR,"load failed:"+this._skBufferUrl)}}},{key:"parseData",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(!this._path){var n=this._relativeUrl||this.url;if(n){var r=h()(n).call(n,"/");this._path=r>0?u()(n).call(n,0,r)+"/":""}}this._mainTexture=t,this._rate=i,this.parse(e)}},{key:"buildArmature",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ot.a(this,t)}},{key:"parse",value:function(t){p()(T()(i.prototype),"parse",this).call(this,t),this.event(st.a.LOADED,this),this._aniVersion===i.LAYA_ANIMATION_VISION?this._isParseAudio=!0:this._aniVersion!=i.LAYA_ANIMATION_160_VISION&&console.log("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+i.LAYA_ANIMATION_VISION),this._mainTexture?this._parsePublicExtData():this._parseTexturePath()}},{key:"_parseTexturePath",value:function(){if(this._isDestroyed)this.destroy();else{var t=0;this._loadList=[];var e,i=new U.a(this.getPublicExtData()),n=0,r=0,a=0,o=i.getInt32(),h=i.readUTFString(),l=h.split("\n");for(t=0;t<o;t++){var u;e=this._path+l[2*t],h=l[2*t+1],i.getFloat32(),i.getFloat32(),n=i.getFloat32(),r=i.getFloat32(),a=i.getFloat32(),isNaN(a)?0:a,a=i.getFloat32(),isNaN(a)?0:a,a=i.getFloat32(),isNaN(a)?n:a,a=i.getFloat32(),isNaN(a)?r:a,-1==s()(u=this._loadList).call(u,e)&&this._loadList.push(e)}S.a.loader.load(this._loadList,at.a.create(this,this._textureComplete))}}},{key:"_textureComplete",value:function(){for(var t,e=0,i=this._loadList.length;e<i;e++)t=this._loadList[e],this._textureDic[t]=S.a.Loader.getRes(t);this._parsePublicExtData()}},{key:"_parsePublicExtData",value:function(){var t,e=0,i=0,n=0,r=0,a=0;for(e=0,a=this.getAnimationCount();e<a;e++)this._graphicsCache.push([]);t="Dragon"!=this._aniClassName;var s,o,h=new U.a(this.getPublicExtData()),l=0,u=0,c=0,f=0,_=0,d=0,v=0,p=0,y=0,g=h.getInt32(),m=h.readUTFString(),x=m.split("\n");for(e=0;e<g;e++){if(s=this._mainTexture,o=this._path+x[2*e],m=x[2*e+1],null==this._mainTexture&&(s=this._textureDic[o]),!s)return this.event(st.a.ERROR,this),void(this.isParseFail=!0);l=h.getFloat32(),u=h.getFloat32(),c=h.getFloat32(),f=h.getFloat32(),y=h.getFloat32(),_=isNaN(y)?0:y,y=h.getFloat32(),d=isNaN(y)?0:y,y=h.getFloat32(),v=isNaN(y)?c:y,y=h.getFloat32(),p=isNaN(y)?f:y,this.subTextureDic[m]=et.a.create(s,l,u,c,f,-_,-d,v,p)}this._mainTexture=s;var k,T,w,S,B,O=h.getUint16();for(e=0;e<O;e++)(k=[]).push(h.getUint16()),k.push(h.getUint16()),k.push(h.getUint16()),k.push(h.getUint16()),this.aniSectionDic[e]=k;var F,N=h.getInt16(),G={};for(e=0;e<N;e++)T=new E,0==e?F=T:T.root=F,T.d=t?-1:1,S=h.readUTFString(),B=h.readUTFString(),T.length=h.getFloat32(),1==h.getByte()&&(T.inheritRotation=!1),1==h.getByte()&&(T.inheritScale=!1),T.name=S,B&&((w=G[B])?w.addChild(T):this.mRootBone=T),G[S]=T,this.mBoneArr.push(T);this.tMatrixDataLen=h.getUint16();var Y,W,V=h.getUint16(),X=Math.floor(V/this.tMatrixDataLen),H=this.srcBoneMatrixArr;for(e=0;e<X;e++)(Y=new C).scX=h.getFloat32(),Y.skX=h.getFloat32(),Y.skY=h.getFloat32(),Y.scY=h.getFloat32(),Y.x=h.getFloat32(),Y.y=h.getFloat32(),8===this.tMatrixDataLen&&(Y.skewX=h.getFloat32(),Y.skewY=h.getFloat32()),H.push(Y),(T=this.mBoneArr[e]).transform=Y;var z,j,K=h.getUint16();for(e=0;e<K;e++){for(W=new rt,z=h.getUint16(),i=0;i<z;i++)W.boneNames.push(h.readUTFString()),W.boneIndexs.push(h.getInt16());W.name=h.readUTFString(),W.targetBoneName=h.readUTFString(),W.targetBoneIndex=h.getInt16(),W.bendDirection=h.getFloat32(),W.mix=h.getFloat32(),W.isSpine=t,this.ikArr.push(W)}var q,Z,Q=h.getUint16();for(e=0;e<Q;e++){for(j=new A,q=h.getUint16(),i=0;i<q;i++)j.boneIndexs.push(h.getInt16());j.name=h.getUTFString(),j.targetIndex=h.getInt16(),j.rotateMix=h.getFloat32(),j.translateMix=h.getFloat32(),j.scaleMix=h.getFloat32(),j.shearMix=h.getFloat32(),j.offsetRotation=h.getFloat32(),j.offsetX=h.getFloat32(),j.offsetY=h.getFloat32(),j.offsetScaleX=h.getFloat32(),j.offsetScaleY=h.getFloat32(),j.offsetShearY=h.getFloat32(),this.tfArr.push(j)}var $,at,ot,ht,lt,ut,ct,ft,_t,dt,vt=h.getUint16();for(e=0;e<vt;e++){for((Z=new M).name=h.readUTFString(),$=h.getUint16(),i=0;i<$;i++)Z.bones.push(h.getInt16());Z.target=h.readUTFString(),Z.positionMode=h.readUTFString(),Z.spacingMode=h.readUTFString(),Z.rotateMode=h.readUTFString(),Z.offsetRotation=h.getFloat32(),Z.position=h.getFloat32(),Z.spacing=h.getFloat32(),Z.rotateMix=h.getFloat32(),Z.translateMix=h.getFloat32(),this.pathArr.push(Z)}var pt,yt=h.getInt16();for(e=0;e<yt;e++){var gt=h.getUint8(),mt={};this.deformAniArr.push(mt);for(var xt=0;xt<gt;xt++)for((ct=new R).skinName=h.getUTFString(),mt[ct.skinName]=ct,at=h.getInt16(),i=0;i<at;i++)for(ft=new I,ct.deformSlotDataList.push(ft),ot=h.getInt16(),n=0;n<ot;n++)for(_t=new D,ft.deformSlotDisplayList.push(_t),_t.slotIndex=h.getInt16(),_t.attachment=h.getUTFString(),ht=h.getInt16(),r=0;r<ht;r++)for(1==h.getByte()?_t.tweenKeyList.push(!0):_t.tweenKeyList.push(!1),lt=h.getFloat32(),_t.timeList.push(lt),dt=[],_t.vectices.push(dt),ut=h.getInt16(),a=0;a<ut;a++)dt.push(h.getFloat32())}var kt,Tt,bt,Ct,wt=h.getInt16();for(e=0;e<wt;e++){for(kt=h.getInt16(),pt=[],i=0;i<kt;i++){for((Tt=new P).time=h.getFloat32(),bt=h.getInt16(),n=0;n<bt;n++)Tt.drawOrder.push(h.getInt16());pt.push(Tt)}this.drawOrderAniArr.push(pt)}var St,Et,At=h.getInt16();for(e=0;e<At;e++){for(St=h.getInt16(),Ct=[],i=0;i<St;i++)(Et=new L).name=h.getUTFString(),this._isParseAudio&&(Et.audioValue=h.getUTFString()),Et.intValue=h.getInt32(),Et.floatValue=h.getFloat32(),Et.stringValue=h.getUTFString(),Et.time=h.getFloat32(),Ct.push(Et);this.eventAniArr.push(Ct)}var Mt=h.getInt16();if(Mt>0)for(this.attachmentNames=[],e=0;e<Mt;e++)this.attachmentNames.push(h.getUTFString());var Rt,It,Dt=h.getInt16();for(e=0;e<Dt;e++)(Rt=new J).name=h.readUTFString(),Rt.parent=h.readUTFString(),Rt.attachmentName=h.readUTFString(),Rt.srcDisplayIndex=Rt.displayIndex=h.getInt16(),Rt.templet=this,this.boneSlotDic[Rt.name]=Rt,null==(It=this.bindBoneBoneSlotDic[Rt.parent])&&(this.bindBoneBoneSlotDic[Rt.parent]=It=[]),It.push(Rt),this.boneSlotArray.push(Rt);var Pt,Lt,Bt,Ot,Ft,Nt,Ut,Gt,Yt,Wt,Vt=h.readUTFString().split("\n"),Xt=0,Ht=h.getUint8();for(e=0;e<Ht;e++){for((Pt=new tt).name=Vt[Xt++],Ot=h.getUint8(),i=0;i<Ot;i++){for((Lt=new nt).name=Vt[Xt++],Rt=this.boneSlotDic[Lt.name],Ft=h.getUint8(),n=0;n<Ft;n++){if(Bt=new it,this.skinSlotDisplayDataArr.push(Bt),Bt.name=Vt[Xt++],Bt.attachmentName=Vt[Xt++],Bt.transform=new C,Bt.transform.scX=h.getFloat32(),Bt.transform.skX=h.getFloat32(),Bt.transform.skY=h.getFloat32(),Bt.transform.scY=h.getFloat32(),Bt.transform.x=h.getFloat32(),Bt.transform.y=h.getFloat32(),Lt.displayArr.push(Bt),Bt.width=h.getFloat32(),Bt.height=h.getFloat32(),Bt.type=h.getUint8(),Bt.verLen=h.getUint16(),(N=h.getUint16())>0)for(Bt.bones=[],r=0;r<N;r++){var zt=h.getUint16();Bt.bones.push(zt)}if((Nt=h.getUint16())>0)for(Bt.uvs=[],r=0;r<Nt;r++)Bt.uvs.push(h.getFloat32());if((Ut=h.getUint16())>0)for(Bt.weights=[],r=0;r<Ut;r++)Bt.weights.push(h.getFloat32());if((Gt=h.getUint16())>0)for(Bt.triangles=[],r=0;r<Gt;r++)Bt.triangles.push(h.getUint16());if((Yt=h.getUint16())>0)for(Bt.vertices=[],r=0;r<Yt;r++)Bt.vertices.push(h.getFloat32());if((Wt=h.getUint16())>0)for(Bt.lengths=[],r=0;r<Wt;r++)Bt.lengths.push(h.getFloat32())}Pt.slotArr.push(Lt)}this.skinDic[Pt.name]=Pt,this.skinDataArray.push(Pt)}1==h.getUint8()?(this.yReverseMatrix=new b.a(1,0,0,-1,0,0),F&&F.setTempMatrix(this.yReverseMatrix)):F&&F.setTempMatrix(new b.a),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event(st.a.COMPLETE,this)}},{key:"getTexture",value:function(t){var e=this.subTextureDic[t];return e||(e=this.subTextureDic[t.substr(0,t.length-1)]),null==e?this._mainTexture:e}},{key:"showSkinByIndex",value:function(t,e){var i,n,r,a,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e<0&&e>=this.skinDataArray.length)return!1;var o=this.skinDataArray[e];if(o){for(i=0,n=o.slotArr.length;i<n;i++)(a=o.slotArr[i])&&(r=t[a.name])&&(r.showSlotData(a,s),s&&"undefined"!=r.attachmentName&&"null"!=r.attachmentName?r.showDisplayByName(r.attachmentName):r.showDisplayByIndex(r.displayIndex));return!0}return!1}},{key:"getSkinIndexByName",value:function(t){for(var e=0,i=this.skinDataArray.length;e<i;e++)if(this.skinDataArray[e].name==t)return e;return-1}},{key:"getGrahicsDataWithCache",value:function(t,e){return this._graphicsCache[t]&&this._graphicsCache[t][e]?this._graphicsCache[t][e]:null}},{key:"_setCreateURL",value:function(t){this._skBufferUrl=this._relativeUrl=t,p()(T()(i.prototype),"_setCreateURL",this).call(this,t)}},{key:"setGrahicsDataWithCache",value:function(t,e,i){this._graphicsCache[t][e]=i}},{key:"deleteAniData",value:function(t){if(this._anis[t]){var e=this._anis[t];e.bone3DMap=null,e.nodes=null}}},{key:"destroy",value:function(){var t;for(t in this._isDestroyed=!0,this.subTextureDic)t&&this.subTextureDic[t].destroy();for(t in this._textureDic)t&&this._textureDic[t].destroy();for(var e=0,n=this.skinSlotDisplayDataArr.length;e<n;e++)this.skinSlotDisplayDataArr[e].destory();this.skinSlotDisplayDataArr.length=0,this._relativeUrl&&delete i.TEMPLET_DICTIONARY[this._relativeUrl],p()(T()(i.prototype),"destroy",this).call(this),S.a.loader.clearRes(this._skBufferUrl)}},{key:"getAniNameByIndex",value:function(t){var e=this.getAnimation(t);return e?e.name:null}},{key:"rate",get:function(){return this._rate},set:function(t){this._rate=t}}]),i}(j);lt.LAYA_ANIMATION_160_VISION="LAYAANIMATION:1.6.0",lt.LAYA_ANIMATION_VISION="LAYAANIMATION:1.7.0",N.a.Templet=lt},,,,function(t,e,i){var n=i(83),r=i(195),a="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?a.call(t,""):Object(t)}:Object},function(t,e,i){"use strict";var n=i(161),r=i(266),a=i(197),s=i(219),o=i(341),h=s.set,l=s.getterFor("Array Iterator");t.exports=o(Array,"Array",(function(t,e){h(this,{type:"Array Iterator",target:n(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},,function(t,e,i){"use strict";i.d(e,"a",(function(){return A}));var n=i(3),r=i.n(n),a=i(37),s=i.n(a),o=i(11),h=i.n(o),l=i(1),u=i.n(l),c=i(4),f=i.n(c),_=i(43),d=i.n(_),v=i(7),p=i.n(v),y=i(6),g=i.n(y),m=i(8),x=i.n(m),k=i(2),T=i.n(k),b=i(54),C=i(19),w=i(0),S=i(10);function E(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T()(t);if(e){var a=T()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return x()(this,i)}}var A=function(t){g()(i,t);var e=E(i);function i(){var t;return u()(this,i),(t=e.apply(this,arguments))._setIndexHandler=C.a.create(d()(t),t.setIndex,null,!1),t}return f()(i,[{key:"setItems",value:function(t){this.removeChildren();for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r&&(r.name="item"+e,this.addChild(r),e++)}this.initItems()}},{key:"addItem",value:function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()}},{key:"_afterInited",value:function(){this.initItems()}},{key:"initItems",value:function(){this._items=[];for(var t=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}}},{key:"setSelect",value:function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=e)}},{key:"setIndex",value:function(t){this.selectedIndex=t}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}},{key:"selection",get:function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},set:function(t){var e;this.selectedIndex=h()(e=this._items).call(e,t)}},{key:"setIndexHandler",get:function(){return this._setIndexHandler},set:function(t){this._setIndexHandler=t}},{key:"items",get:function(){return this._items}},{key:"dataSource",set:function(t){if(this._dataSource=t,"number"==typeof t||"string"==typeof t)this.selectedIndex=s()(t);else for(var e in this._dataSource)e in this&&(this[e]=this._dataSource[e])},get:function(){return p()(T()(i.prototype),"dataSource",this)}}]),i}(b.a);w.a.regClass(A),S.a.regClass("laya.ui.ViewStack",A),S.a.regClass("Laya.ViewStack",A)},function(t,e,i){"use strict";i.d(e,"b",(function(){return S})),i.d(e,"a",(function(){return E}));var n=i(24),r=i.n(n),a=i(27),s=i.n(a),o=i(28),h=i.n(o),l=i(29),u=i.n(l),c=i(30),f=i.n(c),_=i(15),d=i.n(_),v=i(77),p=i.n(v),y=i(39),g=i.n(y),m=i(82),x=i.n(m),k=i(26);function T(t){if(void 0===u.a||null==h()(t)){if(s()(t)||(t=function(t,e){var i;if(!t)return;if("string"==typeof t)return b(t,e);var n=d()(i=Object.prototype.toString.call(t)).call(i,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return f()(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=r()(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var C=function t(e,i){return i?t(i,e%i):e},w=[];function S(t,e,i,n){var r=function(){E(t,i)};return w.push({caller:i,delay:e,fun:t,off:r,once:n,then:x()()}),A(),r}function E(t,e){for(var i=w.length-1;i>=0;i--){var n=w[i],r=n.fun;if(n.caller===e&&r===t)return g()(w).call(w,i,1),void A()}}function A(){k.c.clear(this,M);var t=p()(w).call(w,(function(t){return t.delay}));if(t.length){var e=function(t){var e,i,n=T(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;e=C(r,e)}}catch(t){n.e(t)}finally{n.f()}return e}(t);k.c.loop(e,this,M)}}function M(){var t=w.length;if(t)for(var e=x()(),i=t-1;i>=0;i--){var n=w[i],r=n.fun,a=n.then,s=n.delay,o=n.once,h=n.off,l=e-a||0;if(!(l<s)){var u=Math.floor(l/s),c=e-(l-u*s);"function"==typeof r&&r(u),o?h():n.then=c}}}},,,,,,,,,function(t,e,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);e.f=a?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},function(t,e,i){var n=i(86),r=i(104),a=n.document,s=r(a)&&r(a.createElement);t.exports=function(t){return s?a.createElement(t):{}}},function(t,e,i){var n=i(161),r=i(158),a=i(280),s=function(t){return function(e,i,s){var o,h=n(e),l=r(h.length),u=a(s,l);if(t&&i!=i){for(;l>u;)if((o=h[u++])!=o)return!0}else for(;l>u;u++)if((t||u in h)&&h[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,i){var n=i(220),r=i(401);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){"use strict";var n=i(51),r=i(516),a=i(242),s=i(407),o=i(196),h=i(154),l=i(244),u=i(87),c=i(220),f=i(197),_=i(402),d=_.IteratorPrototype,v=_.BUGGY_SAFARI_ITERATORS,p=u("iterator"),y=function(){return this};t.exports=function(t,e,i,u,_,g,m){r(i,e,u);var x,k,T,b=function(t){if(t===_&&A)return A;if(!v&&t in S)return S[t];switch(t){case"keys":case"values":case"entries":return function(){return new i(this,t)}}return function(){return new i(this)}},C=e+" Iterator",w=!1,S=t.prototype,E=S[p]||S["@@iterator"]||_&&S[_],A=!v&&E||b(_),M="Array"==e&&S.entries||E;if(M&&(x=a(M.call(new t)),d!==Object.prototype&&x.next&&(c||a(x)===d||(s?s(x,d):"function"!=typeof x[p]&&h(x,p,y)),o(x,C,!0,!0),c&&(f[C]=y))),"values"==_&&E&&"values"!==E.name&&(w=!0,A=function(){return E.call(this)}),c&&!m||S[p]===A||h(S,p,A),f[e]=A,_)if(k={values:b("values"),keys:g?A:b("keys"),entries:b("entries")},m)for(T in k)(v||w||!(T in S))&&l(S,T,k[T]);else n({target:e,proto:!0,forced:v||w},k);return k}},function(t,e,i){var n=i(83);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,i){var n={};n[i(87)("toStringTag")]="z",t.exports="[object z]"===String(n)},function(t,e){t.exports=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t}},function(t,e,i){var n,r,a,s=i(86),o=i(83),h=i(195),l=i(217),u=i(406),c=i(338),f=i(415),_=s.location,d=s.setImmediate,v=s.clearImmediate,p=s.process,y=s.MessageChannel,g=s.Dispatch,m=0,x={},k=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},T=function(t){return function(){k(t)}},b=function(t){k(t.data)},C=function(t){s.postMessage(t+"",_.protocol+"//"+_.host)};d&&v||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return x[++m]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},n(m),m},v=function(t){delete x[t]},"process"==h(p)?n=function(t){p.nextTick(T(t))}:g&&g.now?n=function(t){g.now(T(t))}:y&&!f?(a=(r=new y).port2,r.port1.onmessage=b,n=l(a.postMessage,a,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||o(C)||"file:"===_.protocol?n="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),k(t)}}:function(t){setTimeout(T(t),0)}:(n=C,s.addEventListener("message",b,!1))),t.exports={set:d,clear:v}},function(t,e,i){var n=i(176);t.exports=n("navigator","userAgent")||""},function(t,e,i){"use strict";var n=i(167),r=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new r(t)}},function(t,e,i){var n,r,a=i(86),s=i(347),o=a.process,h=o&&o.versions,l=h&&h.v8;l?r=(n=l.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(r=n[1]),t.exports=r&&+r},function(t,e,i){var n=i(104),r=i(221),a=i(87)("species");t.exports=function(t,e){var i;return r(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!r(i.prototype)?n(i)&&null===(i=i[a])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},function(t,e,i){var n=i(87);e.f=n},function(t,e,i){t.exports=i(583)},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},,,function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(42),h=i(32),l=i(0),u=function(){function t(){r()(this,t)}return s()(t,[{key:"contains",value:function(e,i){return!!t._isHitGraphic(e,i,this.hit)&&!t._isHitGraphic(e,i,this.unHit)}},{key:"hit",get:function(){return this._hit||(this._hit=new l.a.Graphics),this._hit},set:function(t){this._hit=t}},{key:"unHit",get:function(){return this._unHit||(this._unHit=new l.a.Graphics),this._unHit},set:function(t){this._unHit=t}}],[{key:"_isHitGraphic",value:function(e,i,n){if(!n)return!1;var r,a,s,o=n.cmds;if(!o&&n._one&&((o=t._cmds).length=1,o[0]=n._one),!o)return!1;for(a=o.length,r=0;r<a;r++)if(s=o[r]){switch(s.cmdID){case"Translate":e-=s.tx,i-=s.ty}if(t._isHitCmd(e,i,s))return!0}return!1}},{key:"_isHitCmd",value:function(e,i,n){if(!n)return!1;var r=!1;switch(n.cmdID){case"DrawRect":t._rect.setTo(n.x,n.y,n.width,n.height),r=t._rect.contains(e,i);break;case"DrawCircle":r=(e-=n.x)*e+(i-=n.y)*i<n.radius*n.radius;break;case"DrawPoly":e-=n.x,i-=n.y,r=t._ptInPolygon(e,i,n.points)}return r}},{key:"_ptInPolygon",value:function(e,i,n){var r=t._ptPoint;r.setTo(e,i);var a,s,o,h,l,u=0;l=n.length;for(var c=0;c<l;c+=2){if(a=n[c],s=n[c+1],o=n[(c+2)%l],s!=(h=n[(c+3)%l]))if(!(r.y<Math.min(s,h)))if(!(r.y>=Math.max(s,h)))(r.y-s)*(o-a)/(h-s)+a>r.x&&u++}return u%2==1}}]),t}();u._cmds=[],u._rect=new h.a,u._ptPoint=new o.a},function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(63),p=i(316),y=i(0),g=i(10);function m(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var x=function(t){u()(i,t);var e=m(i);function i(){return s()(this,i),e.apply(this,arguments)}return h()(i,[{key:"createItem",value:function(t,e){return new v.a(t,e)}}]),i}(p.a);y.a.regClass(x),g.a.regClass("laya.ui.Tab",x),g.a.regClass("Laya.Tab",x)},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(5),h=i(0),l=function(){function t(){r()(this,t)}return s()(t,null,[{key:"__init__",value:function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")}},{key:"_addEvent",value:function(e){h.a.Browser.document.addEventListener(e,(function(i){t._dispatch(i,e)}),!0)}},{key:"_dispatch",value:function(e,i){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===i?t._pressKeys[t._event.keyCode]=!0:"keyup"===i&&(t._pressKeys[t._event.keyCode]=null);for(var n=h.a.stage.focus&&null!=h.a.stage.focus.event&&h.a.stage.focus.displayedInStage?h.a.stage.focus:h.a.stage,r=n;r;)r.event(i,t._event.setTo(i,r,n)),r=r.parent}}},{key:"hasKeyDown",value:function(e){return t._pressKeys[e]}}]),t}();l._pressKeys={},l.enabled=!0,l._event=new o.a},function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(0),h=i(5),l=i(12),u=i(258),c=i(21),f=function(){function t(){r()(this,t)}return s()(t,[{key:"load",value:function(t){this._url=t;var e=t.split(".ttf")[0].split("/");this.fontName=e[e.length-1],o.a.Render.isConchApp?this._loadConch():window.FontFace?this._loadWithFontFace():this._loadWithCSS()}},{key:"_loadConch",value:function(){this._http=new u.a,this._http.on(h.a.ERROR,this,this._onErr),this._http.on(h.a.COMPLETE,this,this._onHttpLoaded),this._http.send(this._url,null,"get",c.a.BUFFER)}},{key:"_onHttpLoaded",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.conchTextCanvas.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete()}},{key:"_clearHttp",value:function(){this._http&&(this._http.off(h.a.ERROR,this,this._onErr),this._http.off(h.a.COMPLETE,this,this._onHttpLoaded),this._http=null)}},{key:"_onErr",value:function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)}},{key:"_complete",value:function(){o.a.systemTimer.clear(this,this._complete),o.a.systemTimer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)}},{key:"_checkComplete",value:function(){o.a.Browser.measureText(t._testString,this._fontTxt).width!=this._txtWidth&&this._complete()}},{key:"_loadWithFontFace",value:function(){var t=new window.FontFace(this.fontName,"url('"+this._url+"')");document.fonts.add(t);var e=this;t.loaded.then((function(){e._complete()})),t.load()}},{key:"_createDiv",value:function(){this._div=l.a.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",document.body.appendChild(this._div)}},{key:"_loadWithCSS",value:function(){var e=l.a.createElement("style");e.type="text/css",document.body.appendChild(e),e.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=l.a.measureText(t._testString,this._fontTxt).width;var i=this;e.onload=function(){o.a.systemTimer.once(1e4,i,this._complete)},o.a.systemTimer.loop(20,this,this._checkComplete),this._createDiv()}}]),t}();f._testString="LayaTTFFont"},function(t,e,i){"use strict";i.d(e,"a",(function(){return _}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=i(5),h=i(144),l=i(0),u=i(78),c=i(19),f=i(72),_=function(){function t(){r()(this,t),this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}return s()(t,[{key:"start",value:function(t,e,i,n,r,a,s){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.92;this.clearTimer(),this.target=t,this.area=e,this.hasInertia=i,this.elasticDistance=e?n:0,this.elasticBackTime=r,this.data=a,this._disableMouseEvent=s,this.ratio=h,this._parent=t.parent,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,l.a.stage.on(o.a.MOUSE_UP,this,this.onStageMouseUp),l.a.stage.on(o.a.MOUSE_OUT,this,this.onStageMouseUp),l.a.systemTimer.frameLoop(1,this,this.loop)}},{key:"clearTimer",value:function(){l.a.systemTimer.clear(this,this.loop),l.a.systemTimer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)}},{key:"stop",value:function(){this._dragging&&(h.a.instance.disableMouseEvent=!1,l.a.stage.off(o.a.MOUSE_UP,this,this.onStageMouseUp),l.a.stage.off(o.a.MOUSE_OUT,this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())}},{key:"loop",value:function(){var t=this._parent.getMousePoint(),e=t.x,i=t.y,n=e-this._lastX,r=i-this._lastY;if(this._clickOnly){if(!(Math.abs(n*l.a.stage._canvasTransform.getScaleX())>1||Math.abs(r*l.a.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event(o.a.DRAG_START,this.data),h.a.instance.disableMouseEvent=this._disableMouseEvent}else this._offsets.push(n,r);0===n&&0===r||(this._lastX=e,this._lastY=i,this.target.x+=n*this._elasticRateX,this.target.y+=r*this._elasticRateY,this.area&&this.checkArea(),this.target.event(o.a.DRAG_MOVE,this.data))}},{key:"checkArea",value:function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target._x<this.area.x)var t=this.area.x-this.target._x;else t=this.target._x>this.area.x+this.area.width?this.target._x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target._y<this.area.y)var e=this.area.y-this.target.y;else e=this.target._y>this.area.y+this.area.height?this.target._y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}}},{key:"backToArea",value:function(){this.target.x=Math.min(Math.max(this.target._x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target._y,this.area.y),this.area.y+this.area.height)}},{key:"onStageMouseUp",value:function(t){if(h.a.instance.disableMouseEvent=!1,l.a.stage.off(o.a.MOUSE_UP,this,this.onStageMouseUp),l.a.stage.off(o.a.MOUSE_OUT,this,this.onStageMouseUp),l.a.systemTimer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,i=Math.min(e,6),n=this._offsets.length-i,r=e-1;r>n;r--)this._offsetY+=this._offsets[r--],this._offsetX+=this._offsets[r];this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),l.a.systemTimer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()}},{key:"checkElastic",value:function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target._x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target._y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=f.a.to(this.target,i,this.elasticBackTime,u.a.sineOut,c.a.create(this,this.clear),0,!1,!1)}}},{key:"tweenMove",value:function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event(o.a.DRAG_MOVE,this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(l.a.systemTimer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())}},{key:"clear",value:function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event(o.a.DRAG_END,this.data)}}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(6),h=i.n(o),l=i(8),u=i.n(l),c=i(2),f=i.n(c),_=i(49),d=i(60),v=i(138),p=i(17);function y(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f()(t);if(e){var a=f()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var g=function(t){h()(i,t);var e=y(i);function i(t){var n;s()(this,i),(n=e.call(this,_.a.SKINMESH,0)).offsetX=300,n.offsetY=0;var r=p.a.mainContext,a=8*v.a.BYTES_PE;return n.position=[2,r.FLOAT,!1,a,0],n.texcoord=[2,r.FLOAT,!1,a,2*v.a.BYTES_PE],n.color=[4,r.FLOAT,!1,a,4*v.a.BYTES_PE],n}return i}(d.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(6),h=i.n(o),l=i(8),u=i.n(l),c=i(2),f=i.n(c),_=i(60),d=i(49);function v(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f()(t);if(e){var a=f()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var p=function(t){h()(i,t);var e=v(i);function i(t){var n;return s()(this,i),(n=e.call(this,d.a.PRIMITIVE,0))._attribLocation=["position",0,"attribColor",1],n}return i}(_.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(43),u=i.n(l),c=i(6),f=i.n(c),_=i(8),d=i.n(_),v=i(2),p=i.n(v),y=i(21),g=i(40),m=i(66),x=i(107);function k(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var a=p()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var T=function(t){f()(i,t);var e=k(i);function i(){var t;s()(this,i),(t=e.call(this)).worker=new Worker(i.workerPath);var n=u()(t);return t.worker.onmessage=function(t){n.workerMessage(t.data)},t}return h()(i,[{key:"workerMessage",value:function(t){if(t)switch(t.type){case"Image":this.imageLoaded(t);break;case"Disable":i.enable=!1}}},{key:"imageLoaded",value:function(t){if(t.dataType&&"imageBitmap"==t.dataType){var e=t.imageBitmap;console.log("load:",t.url),this.event(t.url,e)}else this.event(t.url,null)}},{key:"loadImage",value:function(t){this.worker.postMessage(t)}},{key:"_loadImage",value:function(t){var e=this,n=e.type;if(this._useWorkerLoader&&i._enable){t=g.a.formatURL(t);var r=function(r){if(a(),r){var s=r;"nativeimage"!==n&&(s=new x.a).loadImageSource(r),e.onLoaded(s)}else i._preLoadFun.call(e,t)};i.I.on(t,e,r),i.I.loadImage(t)}else i._preLoadFun.call(e,t);function a(){i.I.off(t,e,r)}}}],[{key:"__init__",value:function(){return null==i._preLoadFun&&(!!Worker&&(i._preLoadFun=y.a.prototype._loadImage,y.a.prototype._loadImage=i.prototype._loadImage,i.I||(i.I=new i),!0))}},{key:"workerSupported",value:function(){return!!Worker}},{key:"enableWorkerLoader",value:function(){i._tryEnabled||(i.enable=!0,i._tryEnabled=!0)}},{key:"enable",set:function(t){i._enable!=t&&(i._enable=t,t&&null==i._preLoadFun&&(i._enable=i.__init__()))},get:function(){return i._enable}}]),i}(m.a);T.workerPath="libs/workerloader.js",T._enable=!1,T._tryEnabled=!1},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),r=i.n(n),a=i(4),s=i.n(a),o=function(){function t(){r()(this,t)}return s()(t,null,[{key:"__init__",value:function(){}},{key:"hide",value:function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none")}},{key:"show",value:function(){"none"==t.cursor&&(t._preCursor?t.cursor=t._preCursor:t.cursor="auto")}},{key:"cursor",set:function(e){t._style.cursor=e},get:function(){return t._style.cursor}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=i(182),p=i(16);function y(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var g=function(t){u()(i,t);var e=y(i);function i(t){var n;return s()(this,i),(n=e.call(this,i.const_stride,4*t*i.const_stride,4)).canReuse=!0,n.setAttributes(i._fixattriInfo),n.createQuadIB(t),n._quadNum=t,n}return h()(i,[{key:"setMaxParticleNum",value:function(t){this._vb._resizeBuffer(4*t*i.const_stride,!1),this.createQuadIB(t)}},{key:"releaseMesh",value:function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,i._POOL.push(this)}},{key:"destroy",value:function(){this._ib.destroy(),this._vb.destroy(),this._vb.deleteBuffer()}}],[{key:"__init__",value:function(){var t=p.a.instance;i._fixattriInfo=[t.FLOAT,4,0,t.FLOAT,3,16,t.FLOAT,3,28,t.FLOAT,4,40,t.FLOAT,4,56,t.FLOAT,3,72,t.FLOAT,2,84,t.FLOAT,4,92,t.FLOAT,1,108,t.FLOAT,1,112]}},{key:"getAMesh",value:function(t){if(i._POOL.length){var e=i._POOL.pop();return e.setMaxParticleNum(t),e}return new i(t)}}]),i}(v.a);g.const_stride=116,g._POOL=[]},function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(6),h=i.n(o),l=i(8),u=i.n(l),c=i(2),f=i.n(c),_=i(222),d=i(107),v=i(114);function p(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f()(t);if(e){var a=f()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var y=function(t){h()(i,t);var e=p(i);function i(){return s()(this,i),e.apply(this,arguments)}return i}(_.a);y.create=function(t,e,i){var n=new d.a(t,e,i,!1,!1);return n.wrapModeU=v.a.Clamp,n.wrapModeV=v.a.Clamp,n}},function(t,e,i){t.exports=i(682)},function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var n=i(3),r=i.n(n),a=i(1),s=i.n(a),o=i(4),h=i.n(o),l=i(6),u=i.n(l),c=i(8),f=i.n(c),_=i(2),d=i.n(_),v=function(){function t(){s()(this,t)}return h()(t,[{key:"show",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"enable",value:function(){}},{key:"hide",value:function(){}},{key:"set_onclick",value:function(t){}},{key:"isCanvasRender",value:function(){return!0}},{key:"renderNotCanvas",value:function(t,e,i){}}]),t}(),p=i(12),y=i(44),g=i(75),m=i(47),x=i(125),k=i(98),T=i(22),b=i(0);function C(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var a=d()(this).constructor;i=r()(n,arguments,a)}else i=n.apply(this,arguments);return f()(this,i)}}var w=function(t){u()(i,t);var e=C(i);function i(){var t;return s()(this,i),(t=e.apply(this,arguments))._show=!1,t._useCanvas=!1,t._height=100,t._view=[],t}return h()(i,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;T.a;p.a.onMiniGame||b.a.Render.isConchApp||p.a.onBDMiniGame||p.a.onKGMiniGame||p.a.onQGMiniGame||p.a.onQQMiniGame||p.a.onAlipayMiniGame||p.a.onBLMiniGame||(this._useCanvas=!0),this._show=!0,T.a._fpsData.length=60,this._view[0]={title:"FPS(WebGL)",value:"_fpsStr",color:"yellow",units:"int"},this._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},this._view[2]={title:"RenderBatches",value:"renderBatches",color:"white",units:"int"},this._view[3]={title:"SavedRenderBatches",value:"savedRenderBatches",color:"white",units:"int"},this._view[4]={title:"CPUMemory",value:"cpuMemory",color:"yellow",units:"M"},this._view[5]={title:"GPUMemory",value:"gpuMemory",color:"yellow",units:"M"},this._view[6]={title:"Shader",value:"shaderCall",color:"white",units:"int"},this._view[7]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},m.a.is3DMode&&(this._view[0].title="FPS(3D)",this._view[8]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},this._view[9]={title:"FrustumCulling",value:"frustumCulling",color:"white",units:"int"},this._view[10]={title:"OctreeNodeCulling",value:"octreeNodeCulling",color:"white",units:"int"}),this._useCanvas?this.createUIPre(t,e):this.createUI(t,e),this.enable()}},{key:"createUIPre",value:function(t,e){var n=p.a.pixelRatio;this._width=180*n,this._vx=120*n,this._height=n*(12*this._view.length+3*n)+4,i._fontSize=12*n;for(var r=0;r<this._view.length;r++)this._view[r].x=4,this._view[r].y=r*i._fontSize+2*n;this._canvas||(this._canvas=new x.a(!0),this._canvas.size(this._width,this._height),this._ctx=this._canvas.getContext("2d"),this._ctx.textBaseline="top",this._ctx.font=i._fontSize+"px Arial",this._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+t+"px;top:"+e+"px;width:"+this._width/n+"px;height:"+this._height/n+"px;"),p.a.onKGMiniGame||p.a.container.appendChild(this._canvas.source),this._first=!0,this.loop(),this._first=!1}},{key:"createUI",value:function(t,e){var n=this._sp,r=p.a.pixelRatio;n||(n=new y.a,this._leftText=new g.a,this._leftText.pos(5,5),this._leftText.color="#ffffff",n.addChild(this._leftText),this._txt=new g.a,this._txt.pos(130*r,5),this._txt.color="#ffffff",n.addChild(this._txt),this._sp=n),n.pos(t,e);for(var a="",s=0;s<this._view.length;s++){a+=this._view[s].title+"\n"}this._leftText.text=a;var o=138*r,h=r*(12*this._view.length+3*r)+4;this._txt.fontSize=i._fontSize*r,this._leftText.fontSize=i._fontSize*r,n.size(o,h),n.graphics.clear(),n.graphics.alpha(.5),n.graphics.drawRect(0,0,o+110,h+30,"#999999"),n.graphics.alpha(2),this.loop()}},{key:"enable",value:function(){b.a.systemTimer.frameLoop(1,this,this.loop)}},{key:"hide",value:function(){this._show=!1,b.a.systemTimer.clear(this,this.loop),this._canvas&&p.a.removeElement(this._canvas.source)}},{key:"set_onclick",value:function(t){this._sp&&this._sp.on("click",this._sp,t),this._canvas&&(this._canvas.source.onclick=t,this._canvas.source.style.pointerEvents="")}},{key:"loop",value:function(){T.a._count++;var t=p.a.now();if(!(t-T.a._timer<1e3)){var e=T.a._count;if(T.a.FPS=Math.round(1e3*e/(t-T.a._timer)),this._show){T.a.trianglesFaces=Math.round(T.a.trianglesFaces/e),this._useCanvas?T.a.renderBatches=Math.round(T.a.renderBatches/e):T.a.renderBatches=Math.round(T.a.renderBatches/e)-1,T.a.savedRenderBatches=Math.round(T.a.savedRenderBatches/e),T.a.shaderCall=Math.round(T.a.shaderCall/e),T.a.spriteRenderUseCacheCount=Math.round(T.a.spriteRenderUseCacheCount/e),T.a.canvasNormal=Math.round(T.a.canvasNormal/e),T.a.canvasBitmap=Math.round(T.a.canvasBitmap/e),T.a.canvasReCache=Math.ceil(T.a.canvasReCache/e),T.a.frustumCulling=Math.round(T.a.frustumCulling/e),T.a.octreeNodeCulling=Math.round(T.a.octreeNodeCulling/e);var i=T.a.FPS>0?Math.floor(1e3/T.a.FPS).toString():" ";T.a._fpsStr=T.a.FPS+(T.a.renderSlow?" slow":"")+" "+i,T.a._spriteStr=T.a.spriteCount+(T.a.spriteRenderUseCacheCount?"/"+T.a.spriteRenderUseCacheCount:""),T.a._canvasStr=T.a.canvasReCache+"/"+T.a.canvasNormal+"/"+T.a.canvasBitmap,T.a.cpuMemory=k.a.cpuMemory,T.a.gpuMemory=k.a.gpuMemory,this._useCanvas?this.renderInfoPre():this.renderInfo(),T.a.clear()}T.a._count=0,T.a._timer=t}}},{key:"renderInfoPre",value:function(){var t,e,i=0;if(this._canvas){var n=this._ctx;for(n.clearRect(this._first?0:this._vx,0,this._width,this._height),i=0;i<this._view.length;i++)t=this._view[i],this._first&&(n.fillStyle="white",n.fillText(t.title,t.x,t.y)),n.fillStyle=t.color,e=T.a[t.value],"M"==t.units&&(e=Math.floor(e/1048576*100)/100+" M"),n.fillText(e+"",t.x+this._vx,t.y)}}},{key:"renderInfo",value:function(){for(var t="",e=0;e<this._view.length;e++){var i=this._view[e],n=T.a[i.value];"M"==i.units&&(n=Math.floor(n/1048576*100)/100+" M"),"K"==i.units&&(n=Math.floor(n/1024*100)/100+" K"),t+=n+"\n"}this._txt.text=t}},{key:"isCanvasRender",value:function(){return this._useCanvas}},{key:"renderNotCanvas",value:function(t,e,i){this._show&&this._sp&&this._sp.render(t,0,0)}}]),i}(v);w._fontSize=12},,,,,,,function(t,e,i){t.exports=i(557)},,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n=i(118),r=i(83),a=i(338);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(83),r=/#|\.prototype\./,a=function(t,e){var i=o[s(t)];return i==l||i!=h&&("function"==typeof e?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(r,".").toLowerCase()},o=a.data={},h=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},function(t,e,i){var n=i(401),r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return r.call(t)}),t.exports=n.inspectSource},function(t,e,i){var n=i(86),r=i(515),a=n["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=a},function(t,e,i){"use strict";var n,r,a,s=i(242),o=i(154),h=i(119),l=i(87),u=i(220),c=l("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(r=s(s(a)))!==Object.prototype&&(n=r):f=!0),null==n&&(n={}),u||h(n,c)||o(n,c,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},function(t,e,i){var n=i(83);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,i){var n=i(342);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,i){var n=i(119),r=i(161),a=i(339).indexOf,s=i(241);t.exports=function(t,e){var i,o=r(t),h=0,l=[];for(i in o)!n(s,i)&&n(o,i)&&l.push(i);for(;e.length>h;)n(o,i=e[h++])&&(~a(l,i)||l.push(i));return l}},function(t,e,i){var n=i(176);t.exports=n("document","documentElement")},function(t,e,i){var n=i(131),r=i(519);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,a){return n(i),r(a),e?t.call(i,a):i.__proto__=a,i}}():void 0)},function(t,e,i){var n=i(86);t.exports=n.Promise},function(t,e,i){var n=i(244);t.exports=function(t,e,i){for(var r in e)i&&i.unsafe&&t[r]?t[r]=e[r]:n(t,r,e[r],i);return t}},function(t,e,i){"use strict";var n=i(176),r=i(136),a=i(87),s=i(118),o=a("species");t.exports=function(t){var e=n(t),i=r.f;s&&e&&!e[o]&&i(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(87),r=i(197),a=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[a]===t)}},function(t,e,i){var n=i(131);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},function(t,e,i){var n=i(87)("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var a={};a[n]=function(){return{next:function(){return{done:i=!0}}}},t(a)}catch(t){}return i}},function(t,e,i){var n=i(131),r=i(167),a=i(87)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[a])?e:r(i)}},function(t,e,i){var n=i(347);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(t,e,i){var n=i(131),r=i(104),a=i(348);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=a.f(t);return(0,i.resolve)(e),i.promise}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,i){i(529);var n=i(65);t.exports=n.Array.isArray},function(t,e,i){i(420),i(281),i(459),i(533),i(534),i(535),i(536),i(423),i(537),i(538),i(539),i(540),i(541),i(542),i(543),i(544),i(545),i(546),i(547);var n=i(65);t.exports=n.Symbol},function(t,e,i){"use strict";var n=i(51),r=i(83),a=i(221),s=i(104),o=i(141),h=i(158),l=i(287),u=i(350),c=i(245),f=i(87),_=i(349),d=f("isConcatSpreadable"),v=_>=51||!r((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),p=c("concat"),y=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:a(t)};n({target:"Array",proto:!0,forced:!v||!p},{concat:function(t){var e,i,n,r,a,s=o(this),c=u(s,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?s:arguments[e],y(a)){if(f+(r=h(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<r;i++,f++)i in a&&l(c,f,a[i])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(c,f++,a)}return c.length=f,c}})},function(t,e,i){var n=i(405),r=i(343).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){i(96)("iterator")},function(t,e,i){i(175),i(549);var n=i(65);t.exports=n.Array.from},function(t,e,i){var n=i(552),r=Array.prototype;t.exports=function(t){var e=t.slice;return t===r||t instanceof Array&&e===r.slice?n:e}},function(t,e,i){"use strict";var n=i(167),r=i(104),a=[].slice,s={},o=function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("C,a","return new C("+n.join(",")+")")}return s[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=a.call(arguments,1),s=function(){var n=i.concat(a.call(arguments));return this instanceof s?o(e,n.length,n):e.apply(t,n)};return r(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,i){"use strict";var n=i(51),r=i(86),a=i(428),s=i(83),o=i(154),h=i(285),l=i(345),u=i(104),c=i(196),f=i(136).f,_=i(209).forEach,d=i(118),v=i(219),p=v.set,y=v.getterFor;t.exports=function(t,e,i){var v,g=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),x=g?"set":"add",k=r[t],T=k&&k.prototype,b={};if(d&&"function"==typeof k&&(m||T.forEach&&!s((function(){(new k).entries().next()})))){v=e((function(e,i){p(l(e,v,t),{type:t,collection:new k}),null!=i&&h(i,e[x],e,g)}));var C=y(t);_(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"==t||"set"==t;!(t in T)||m&&"clear"==t||o(v.prototype,t,(function(i,n){var r=C(this).collection;if(!e&&m&&!u(i))return"get"==t&&void 0;var a=r[t](0===i?0:i,n);return e?this:a}))})),m||f(v.prototype,"size",{configurable:!0,get:function(){return C(this).collection.size}})}else v=i.getConstructor(e,t,g,x),a.REQUIRED=!0;return c(v,t,!1,!0),b[t]=v,n({global:!0,forced:!0},b),m||i.setStrong(v,t,g),v}},function(t,e,i){var n=i(241),r=i(104),a=i(119),s=i(136).f,o=i(283),h=i(582),l=o("meta"),u=0,c=Object.isExtensible||function(){return!0},f=function(t){s(t,l,{value:{objectID:"O"+ ++u,weakData:{}}})},_=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,l)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[l].objectID},getWeakData:function(t,e){if(!a(t,l)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[l].weakData},onFreeze:function(t){return h&&_.REQUIRED&&c(t)&&!a(t,l)&&f(t),t}};n[l]=!0},function(t,e,i){"use strict";var n=i(136).f,r=i(243),a=i(409),s=i(217),o=i(345),h=i(285),l=i(341),u=i(410),c=i(118),f=i(428).fastKey,_=i(219),d=_.set,v=_.getterFor;t.exports={getConstructor:function(t,e,i,l){var u=t((function(t,n){o(t,u,e),d(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),c||(t.size=0),null!=n&&h(n,t[l],t,i)})),_=v(e),p=function(t,e,i){var n,r,a=_(t),s=y(t,e);return s?s.value=i:(a.last=s={index:r=f(e,!0),key:e,value:i,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=s),n&&(n.next=s),c?a.size++:t.size++,"F"!==r&&(a.index[r]=s)),t},y=function(t,e){var i,n=_(t),r=f(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return a(u.prototype,{clear:function(){for(var t=_(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,c?t.size=0:this.size=0},delete:function(t){var e=_(this),i=y(this,t);if(i){var n=i.next,r=i.previous;delete e.index[i.index],i.removed=!0,r&&(r.next=n),n&&(n.previous=r),e.first==i&&(e.first=n),e.last==i&&(e.last=r),c?e.size--:this.size--}return!!i},forEach:function(t){for(var e,i=_(this),n=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!y(this,t)}}),a(u.prototype,i?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return p(this,0===t?0:t,e)}}:{add:function(t){return p(this,t=0===t?0:t,t)}}),c&&n(u.prototype,"size",{get:function(){return _(this).size}}),u},setStrong:function(t,e,i){var n=e+" Iterator",r=v(e),a=v(n);l(t,e,(function(t,e){d(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=a(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),u(e)}}},function(t,e,i){i(584);var n=i(65).Object,r=t.exports=function(t,e,i){return n.defineProperty(t,e,i)};n.defineProperty.sham&&(r.sham=!0)},function(t,e,i){var n=i(216),r="["+i(353)+"]",a=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),o=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(a,"")),2&t&&(i=i.replace(s,"")),i}};t.exports={start:o(1),end:o(2),trim:o(3)}},function(t,e,i){t.exports=i(608)},function(t,e,i){var n=i(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e,i){t.exports=i(619)},,,,,,,,,function(t,e){t.exports="/*\r\n\ttexture和fillrect使用的。\r\n*/\r\nattribute vec4 posuv;\r\nattribute vec4 attribColor;\r\nattribute vec4 attribFlags;\r\n//attribute vec4 clipDir;\r\n//attribute vec2 clipRect;\r\nuniform vec4 clipMatDir;\r\nuniform vec2 clipMatPos;\t\t// 这个是全局的，不用再应用矩阵了。\r\nvarying vec2 cliped;\r\nuniform vec2 size;\r\nuniform vec2 clipOff;\t\t\t// 使用要把clip偏移。cacheas normal用. 只用了[0]\r\n#ifdef WORLDMAT\r\n\tuniform mat4 mmat;\r\n#endif\r\n#ifdef MVP3D\r\n\tuniform mat4 u_MvpMatrix;\r\n#endif\r\nvarying vec4 v_texcoordAlpha;\r\nvarying vec4 v_color;\r\nvarying float v_useTex;\r\n\r\nvoid main() {\r\n\r\n\tvec4 pos = vec4(posuv.xy,0.,1.);\r\n#ifdef WORLDMAT\r\n\tpos=mmat*pos;\r\n#endif\r\n\tvec4 pos1  =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\r\n#ifdef MVP3D\r\n\tgl_Position=u_MvpMatrix*pos1;\r\n#else\r\n\tgl_Position=pos1;\r\n#endif\r\n\tv_texcoordAlpha.xy = posuv.zw;\r\n\t//v_texcoordAlpha.z = attribColor.a/255.0;\r\n\tv_color = attribColor/255.0;\r\n\tv_color.xyz*=v_color.w;//反正后面也要预乘\r\n\t\r\n\tv_useTex = attribFlags.r/255.0;\r\n\tfloat clipw = length(clipMatDir.xy);\r\n\tfloat cliph = length(clipMatDir.zw);\r\n\t\r\n\tvec2 clpos = clipMatPos.xy;\r\n\t#ifdef WORLDMAT\r\n\t\t// 如果有mmat，需要修改clipMatPos,因为 这是cacheas normal （如果不是就错了）， clipMatPos被去掉了偏移\r\n\t\tif(clipOff[0]>0.0){\r\n\t\t\tclpos.x+=mmat[3].x;\t//tx\t最简单处理\r\n\t\t\tclpos.y+=mmat[3].y;\t//ty\r\n\t\t}\r\n\t#endif\r\n\tvec2 clippos = pos.xy - clpos;\t//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\r\n\tif(clipw>20000. && cliph>20000.)\r\n\t\tcliped = vec2(0.5,0.5);\r\n\telse {\r\n\t\t//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\r\n\t\tcliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\r\n\t}\r\n\r\n}"},function(t,e){t.exports="/*\r\n\ttexture和fillrect使用的。\r\n*/\r\n#ifdef GL_FRAGMENT_PRECISION_HIGH\r\nprecision highp float;\r\n#else\r\nprecision mediump float;\r\n#endif\r\n\r\nvarying vec4 v_texcoordAlpha;\r\nvarying vec4 v_color;\r\nvarying float v_useTex;\r\nuniform sampler2D texture;\r\nvarying vec2 cliped;\r\n\r\n#ifdef BLUR_FILTER\r\nuniform vec4 strength_sig2_2sig2_gauss1;\r\nuniform vec2 blurInfo;\r\n\r\n#define PI 3.141593\r\n\r\nfloat getGaussian(float x, float y){\r\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\r\n}\r\n\r\nvec4 blur(){\r\n    const float blurw = 9.0;\r\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\r\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \r\n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\r\n    vec2 ctexcoord = startpos;\r\n    vec2 step = 1.0/blurInfo;  //每个像素      \r\n    \r\n    for(float y = 0.0;y<=blurw; ++y){\r\n        ctexcoord.x=startpos.x;\r\n        for(float x = 0.0;x<=blurw; ++x){\r\n            //TODO 纹理坐标的固定偏移应该在vs中处理\r\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\r\n            ctexcoord.x+=step.x;\r\n        }\r\n        ctexcoord.y+=step.y;\r\n    }\r\n    return vec4Color;\r\n}\r\n#endif\r\n\r\n#ifdef COLOR_FILTER\r\nuniform vec4 colorAlpha;\r\nuniform mat4 colorMat;\r\n#endif\r\n\r\n#ifdef GLOW_FILTER\r\nuniform vec4 u_color;\r\nuniform vec4 u_blurInfo1;\r\nuniform vec4 u_blurInfo2;\r\n#endif\r\n\r\n#ifdef COLOR_ADD\r\nuniform vec4 colorAdd;\r\n#endif\r\n\r\n#ifdef FILLTEXTURE\t\r\nuniform vec4 u_TexRange;//startu,startv,urange, vrange\r\n#endif\r\nvoid main() {\r\n\tif(cliped.x<0.) discard;\r\n\tif(cliped.x>1.) discard;\r\n\tif(cliped.y<0.) discard;\r\n\tif(cliped.y>1.) discard;\r\n\t\r\n#ifdef FILLTEXTURE\t\r\n   vec4 color= texture2D(texture, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\r\n#else\r\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\r\n#endif\r\n\r\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\r\n   color.a*=v_color.w;\r\n   //color.rgb*=v_color.w;\r\n   color.rgb*=v_color.rgb;\r\n   gl_FragColor=color;\r\n   \r\n   #ifdef COLOR_ADD\r\n\tgl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\r\n\tgl_FragColor.xyz *= colorAdd.a;\r\n   #endif\r\n   \r\n   #ifdef BLUR_FILTER\r\n\tgl_FragColor =   blur();\r\n\tgl_FragColor.w*=v_color.w;   \r\n   #endif\r\n   \r\n   #ifdef COLOR_FILTER\r\n\tmat4 alphaMat =colorMat;\r\n\r\n\talphaMat[0][3] *= gl_FragColor.a;\r\n\talphaMat[1][3] *= gl_FragColor.a;\r\n\talphaMat[2][3] *= gl_FragColor.a;\r\n\r\n\tgl_FragColor = gl_FragColor * alphaMat;\r\n\tgl_FragColor += colorAlpha/255.0*gl_FragColor.a;\r\n   #endif\r\n   \r\n   #ifdef GLOW_FILTER\r\n\tconst float c_IterationTime = 10.0;\r\n\tfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\r\n\tvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\r\n\tvec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\r\n\tvec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\r\n\tfloat maxNum = u_blurInfo1.x * u_blurInfo1.y;\r\n\tvec2 vec2Off = vec2(0.0,0.0);\r\n\tfloat floatOff = c_IterationTime/2.0;\r\n\tfor(float i = 0.0;i<=c_IterationTime; ++i){\r\n\t\tfor(float j = 0.0;j<=c_IterationTime; ++j){\r\n\t\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\r\n\t\t\tvec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\r\n\t\t}\r\n\t}\r\n\tgl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\r\n\tgl_FragColor.rgb *= gl_FragColor.a;   \r\n   #endif\r\n   \r\n}"},function(t,e){t.exports="attribute vec4 position;\r\nattribute vec4 attribColor;\r\n//attribute vec4 clipDir;\r\n//attribute vec2 clipRect;\r\nuniform vec4 clipMatDir;\r\nuniform vec2 clipMatPos;\r\n#ifdef WORLDMAT\r\n\tuniform mat4 mmat;\r\n#endif\r\nuniform mat4 u_mmat2;\r\n//uniform vec2 u_pos;\r\nuniform vec2 size;\r\nvarying vec4 color;\r\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\r\n//vec4 clip=vec4(100.,30.,300.,600.);\r\nvarying vec2 cliped;\r\nvoid main(){\r\n\t\r\n#ifdef WORLDMAT\r\n\tvec4 pos=mmat*vec4(position.xy,0.,1.);\r\n\tgl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\r\n#else\r\n\tgl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\r\n#endif\t\r\n\tfloat clipw = length(clipMatDir.xy);\r\n\tfloat cliph = length(clipMatDir.zw);\r\n\tvec2 clippos = position.xy - clipMatPos.xy;\t//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\r\n\tif(clipw>20000. && cliph>20000.)\r\n\t\tcliped = vec2(0.5,0.5);\r\n\telse {\r\n\t\t//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\r\n\t\tcliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\r\n\t}\r\n  //pos2d.x = dot(clippos,dirx);\r\n  color=attribColor/255.;\r\n}"},function(t,e){t.exports="precision mediump float;\r\n//precision mediump float;\r\nvarying vec4 color;\r\n//uniform float alpha;\r\nvarying vec2 cliped;\r\nvoid main(){\r\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\r\n\t//a.a*=alpha;\r\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\r\n\tgl_FragColor.rgb*=color.a;\r\n\tif(cliped.x<0.) discard;\r\n\tif(cliped.x>1.) discard;\r\n\tif(cliped.y<0.) discard;\r\n\tif(cliped.y>1.) discard;\r\n}"},function(t,e){t.exports="attribute vec2 position;\r\nattribute vec2 texcoord;\r\nattribute vec4 color;\r\nuniform vec2 size;\r\nuniform float offsetX;\r\nuniform float offsetY;\r\nuniform mat4 mmat;\r\nuniform mat4 u_mmat2;\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\r\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\r\n  v_color = color;\r\n  v_color.rgb *= v_color.a;\r\n  v_texcoord = texcoord;  \r\n}"},function(t,e){t.exports="precision mediump float;\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_color;\r\nuniform sampler2D texture;\r\nuniform float alpha;\r\nvoid main() {\r\n\tvec4 t_color = texture2D(texture, v_texcoord);\r\n\tgl_FragColor = t_color.rgba * v_color;\r\n\tgl_FragColor *= alpha;\r\n}"},function(t,e,i){t.exports=i(660)},,,,,,,,,,function(t,e,i){"use strict";var n=i(51),r=i(86),a=i(176),s=i(220),o=i(118),h=i(342),l=i(404),u=i(83),c=i(119),f=i(221),_=i(104),d=i(131),v=i(141),p=i(161),y=i(279),g=i(215),m=i(243),x=i(284),k=i(421),T=i(532),b=i(422),C=i(214),w=i(136),S=i(337),E=i(154),A=i(244),M=i(340),R=i(282),I=i(241),D=i(283),P=i(87),L=i(351),B=i(96),O=i(196),F=i(219),N=i(209).forEach,U=R("hidden"),G=P("toPrimitive"),Y=F.set,W=F.getterFor("Symbol"),V=Object.prototype,X=r.Symbol,H=a("JSON","stringify"),z=C.f,j=w.f,K=T.f,q=S.f,Z=M("symbols"),Q=M("op-symbols"),$=M("string-to-symbol-registry"),J=M("symbol-to-string-registry"),tt=M("wks"),et=r.QObject,it=!et||!et.prototype||!et.prototype.findChild,nt=o&&u((function(){return 7!=m(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=z(V,e);n&&delete V[e],j(t,e,i),n&&t!==V&&j(V,e,n)}:j,rt=function(t,e){var i=Z[t]=m(X.prototype);return Y(i,{type:"Symbol",tag:t,description:e}),o||(i.description=e),i},at=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof X},st=function(t,e,i){t===V&&st(Q,e,i),d(t);var n=y(e,!0);return d(i),c(Z,n)?(i.enumerable?(c(t,U)&&t[U][n]&&(t[U][n]=!1),i=m(i,{enumerable:g(0,!1)})):(c(t,U)||j(t,U,g(1,{})),t[U][n]=!0),nt(t,n,i)):j(t,n,i)},ot=function(t,e){d(t);var i=p(e),n=x(i).concat(ct(i));return N(n,(function(e){o&&!ht.call(i,e)||st(t,e,i[e])})),t},ht=function(t){var e=y(t,!0),i=q.call(this,e);return!(this===V&&c(Z,e)&&!c(Q,e))&&(!(i||!c(this,e)||!c(Z,e)||c(this,U)&&this[U][e])||i)},lt=function(t,e){var i=p(t),n=y(e,!0);if(i!==V||!c(Z,n)||c(Q,n)){var r=z(i,n);return!r||!c(Z,n)||c(i,U)&&i[U][n]||(r.enumerable=!0),r}},ut=function(t){var e=K(p(t)),i=[];return N(e,(function(t){c(Z,t)||c(I,t)||i.push(t)})),i},ct=function(t){var e=t===V,i=K(e?Q:p(t)),n=[];return N(i,(function(t){!c(Z,t)||e&&!c(V,t)||n.push(Z[t])})),n};(h||(A((X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),i=function(t){this===V&&i.call(Q,t),c(this,U)&&c(this[U],e)&&(this[U][e]=!1),nt(this,e,g(1,t))};return o&&it&&nt(V,e,{configurable:!0,set:i}),rt(e,t)}).prototype,"toString",(function(){return W(this).tag})),A(X,"withoutSetter",(function(t){return rt(D(t),t)})),S.f=ht,w.f=st,C.f=lt,k.f=T.f=ut,b.f=ct,L.f=function(t){return rt(P(t),t)},o&&(j(X.prototype,"description",{configurable:!0,get:function(){return W(this).description}}),s||A(V,"propertyIsEnumerable",ht,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:X}),N(x(tt),(function(t){B(t)})),n({target:"Symbol",stat:!0,forced:!h},{for:function(t){var e=String(t);if(c($,e))return $[e];var i=X(e);return $[e]=i,J[i]=e,i},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(c(J,t))return J[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),n({target:"Object",stat:!0,forced:!h,sham:!o},{create:function(t,e){return void 0===e?m(t):ot(m(t),e)},defineProperty:st,defineProperties:ot,getOwnPropertyDescriptor:lt}),n({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:ut,getOwnPropertySymbols:ct}),n({target:"Object",stat:!0,forced:u((function(){b.f(1)}))},{getOwnPropertySymbols:function(t){return b.f(v(t))}}),H)&&n({target:"JSON",stat:!0,forced:!h||u((function(){var t=X();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}))},{stringify:function(t,e,i){for(var n,r=[t],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=e,(_(e)||void 0!==t)&&!at(t))return f(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!at(e))return e}),r[1]=e,H.apply(null,r)}});X.prototype[G]||E(X.prototype,G,X.prototype.valueOf),O(X,"Symbol"),I[U]=!0},function(t,e,i){var n=i(51),r=i(86),a=i(347),s=[].slice,o=function(t){return function(e,i){var n=arguments.length>2,r=n?s.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:o(r.setTimeout),setInterval:o(r.setInterval)})},function(t,e,i){t.exports=i(693)},function(t,e,i){t.exports=i(695)},function(t,e,i){var n=i(464),r=i(698),a=i(465);t.exports=function(t,e){var i;if(t){if("string"==typeof t)return a(t,e);var s=r(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?n(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?a(t,e):void 0}}},function(t,e,i){t.exports=i(697)},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n=function(t){"use strict";var e=Object.prototype,i=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(t,e,i,n){var r=e&&e.prototype instanceof u?e:u,a=Object.create(r.prototype),s=new T(n||[]);return a._invoke=function(t,e,i){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return C()}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var o=m(s,i);if(o){if(o===l)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var u=h(t,e,i);if("normal"===u.type){if(n=i.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n="completed",i.method="throw",i.arg=u.arg)}}}(t,i,s),a}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=o;var l={};function u(){}function c(){}function f(){}var _={};_[r]=function(){return this};var d=Object.getPrototypeOf,v=d&&d(d(b([])));v&&v!==e&&i.call(v,r)&&(_=v);var p=f.prototype=u.prototype=Object.create(_);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t,e){var n;this._invoke=function(r,a){function s(){return new e((function(n,s){!function n(r,a,s,o){var l=h(t[r],t,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,o)}))}o(l.arg)}(r,a,n,s)}))}return n=n?n.then(s,s):s()}}function m(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,m(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=h(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function b(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return c.prototype=p.constructor=f,f.constructor=c,f[s]=c.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(p),t},t.awrap=function(t){return{__await:t}},y(g.prototype),g.prototype[a]=function(){return this},t.AsyncIterator=g,t.async=function(e,i,n,r,a){void 0===a&&(a=Promise);var s=new g(o(e,i,n,r),a);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(p),p[s]="Generator",p[r]=function(){return this},p.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=b,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(i,n){return s.type="throw",s.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),h=i.call(a,"finallyLoc");if(o&&h){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;k(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:b(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,i){var n=i(508);t.exports=n},function(t,e,i){var n=i(509),r=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===r||t instanceof Array&&e===r.indexOf?n:e}},function(t,e,i){i(510);var n=i(93);t.exports=n("Array").indexOf},function(t,e,i){"use strict";var n=i(51),r=i(339).indexOf,a=i(265),s=i(155),o=[].indexOf,h=!!o&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:h||!l||!u},{indexOf:function(t){return h?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(512);t.exports=n},function(t,e,i){i(281),i(175),i(149),i(521),i(524),i(525);var n=i(65);t.exports=n.Promise},function(t,e,i){var n=i(218),r=i(216),a=function(t){return function(e,i){var a,s,o=String(r(e)),h=n(i),l=o.length;return h<0||h>=l?t?"":void 0:(a=o.charCodeAt(h))<55296||a>56319||h+1===l||(s=o.charCodeAt(h+1))<56320||s>57343?t?o.charAt(h):a:t?o.slice(h,h+2):s-56320+(a-55296<<10)+65536}};t.exports={codeAt:a(!1),charAt:a(!0)}},function(t,e,i){var n=i(86),r=i(400),a=n.WeakMap;t.exports="function"==typeof a&&/native code/.test(r(a))},function(t,e,i){var n=i(86),r=i(154);t.exports=function(t,e){try{r(n,t,e)}catch(i){n[t]=e}return e}},function(t,e,i){"use strict";var n=i(402).IteratorPrototype,r=i(243),a=i(215),s=i(196),o=i(197),h=function(){return this};t.exports=function(t,e,i){var l=e+" Iterator";return t.prototype=r(n,{next:a(1,i)}),s(t,l,!1,!0),o[l]=h,t}},function(t,e,i){var n=i(118),r=i(136),a=i(131),s=i(284);t.exports=n?Object.defineProperties:function(t,e){a(t);for(var i,n=s(e),o=n.length,h=0;o>h;)r.f(t,i=n[h++],e[i]);return t}},function(t,e,i){"use strict";var n=i(344),r=i(191);t.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},function(t,e,i){var n=i(104);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,i){"use strict";var n,r,a,s,o=i(51),h=i(220),l=i(86),u=i(176),c=i(408),f=i(244),_=i(409),d=i(196),v=i(410),p=i(104),y=i(167),g=i(345),m=i(195),x=i(400),k=i(285),T=i(413),b=i(414),C=i(346).set,w=i(522),S=i(416),E=i(523),A=i(348),M=i(417),R=i(219),I=i(399),D=i(87),P=i(349),L=D("species"),B="Promise",O=R.get,F=R.set,N=R.getterFor(B),U=c,G=l.TypeError,Y=l.document,W=l.process,V=u("fetch"),X=A.f,H=X,z="process"==m(W),j=!!(Y&&Y.createEvent&&l.dispatchEvent),K=I(B,(function(){if(!(x(U)!==String(U))){if(66===P)return!0;if(!z&&"function"!=typeof PromiseRejectionEvent)return!0}if(h&&!U.prototype.finally)return!0;if(P>=51&&/native code/.test(U))return!1;var t=U.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[L]=e,!(t.then((function(){}))instanceof e)})),q=K||!T((function(t){U.all(t).catch((function(){}))})),Z=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},Q=function(t,e,i){if(!e.notified){e.notified=!0;var n=e.reactions;w((function(){for(var r=e.value,a=1==e.state,s=0;n.length>s;){var o,h,l,u=n[s++],c=a?u.ok:u.fail,f=u.resolve,_=u.reject,d=u.domain;try{c?(a||(2===e.rejection&&et(t,e),e.rejection=1),!0===c?o=r:(d&&d.enter(),o=c(r),d&&(d.exit(),l=!0)),o===u.promise?_(G("Promise-chain cycle")):(h=Z(o))?h.call(o,f,_):f(o)):_(r)}catch(t){d&&!l&&d.exit(),_(t)}}e.reactions=[],e.notified=!1,i&&!e.rejection&&J(t,e)}))}},$=function(t,e,i){var n,r;j?((n=Y.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,!1,!0),l.dispatchEvent(n)):n={promise:e,reason:i},(r=l["on"+t])?r(n):"unhandledrejection"===t&&E("Unhandled promise rejection",i)},J=function(t,e){C.call(l,(function(){var i,n=e.value;if(tt(e)&&(i=M((function(){z?W.emit("unhandledRejection",n,t):$("unhandledrejection",t,n)})),e.rejection=z||tt(e)?2:1,i.error))throw i.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){C.call(l,(function(){z?W.emit("rejectionHandled",t):$("rejectionhandled",t,e.value)}))},it=function(t,e,i,n){return function(r){t(e,i,r,n)}},nt=function(t,e,i,n){e.done||(e.done=!0,n&&(e=n),e.value=i,e.state=2,Q(t,e,!0))},rt=function(t,e,i,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===i)throw G("Promise can't be resolved itself");var r=Z(i);r?w((function(){var n={done:!1};try{r.call(i,it(rt,t,n,e),it(nt,t,n,e))}catch(i){nt(t,n,i,e)}})):(e.value=i,e.state=1,Q(t,e,!1))}catch(i){nt(t,{done:!1},i,e)}}};K&&(U=function(t){g(this,U,B),y(t),n.call(this);var e=O(this);try{t(it(rt,this,e),it(nt,this,e))}catch(t){nt(this,e,t)}},(n=function(t){F(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(U.prototype,{then:function(t,e){var i=N(this),n=X(b(this,U));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=z?W.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&Q(this,i,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n,e=O(t);this.promise=t,this.resolve=it(rt,t,e),this.reject=it(nt,t,e)},A.f=X=function(t){return t===U||t===a?new r(t):H(t)},h||"function"!=typeof c||(s=c.prototype.then,f(c.prototype,"then",(function(t,e){var i=this;return new U((function(t,e){s.call(i,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof V&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return S(U,V.apply(l,arguments))}}))),o({global:!0,wrap:!0,forced:K},{Promise:U}),d(U,B,!1,!0),v(B),a=u(B),o({target:B,stat:!0,forced:K},{reject:function(t){var e=X(this);return e.reject.call(void 0,t),e.promise}}),o({target:B,stat:!0,forced:h||K},{resolve:function(t){return S(h&&this===a?U:this,t)}}),o({target:B,stat:!0,forced:q},{all:function(t){var e=this,i=X(e),n=i.resolve,r=i.reject,a=M((function(){var i=y(e.resolve),a=[],s=0,o=1;k(t,(function(t){var h=s++,l=!1;a.push(void 0),o++,i.call(e,t).then((function(t){l||(l=!0,a[h]=t,--o||n(a))}),r)})),--o||n(a)}));return a.error&&r(a.value),i.promise},race:function(t){var e=this,i=X(e),n=i.reject,r=M((function(){var r=y(e.resolve);k(t,(function(t){r.call(e,t).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}})},function(t,e,i){var n,r,a,s,o,h,l,u,c=i(86),f=i(214).f,_=i(195),d=i(346).set,v=i(415),p=c.MutationObserver||c.WebKitMutationObserver,y=c.process,g=c.Promise,m="process"==_(y),x=f(c,"queueMicrotask"),k=x&&x.value;k||(n=function(){var t,e;for(m&&(t=y.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():a=void 0,t}}a=void 0,t&&t.enter()},m?s=function(){y.nextTick(n)}:p&&!v?(o=!0,h=document.createTextNode(""),new p(n).observe(h,{characterData:!0}),s=function(){h.data=o=!o}):g&&g.resolve?(l=g.resolve(void 0),u=l.then,s=function(){u.call(l,n)}):s=function(){d.call(c,n)}),t.exports=k||function(t){var e={fn:t,next:void 0};a&&(a.next=e),r||(r=e,s()),a=e}},function(t,e,i){var n=i(86);t.exports=function(t,e){var i=n.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}},function(t,e,i){"use strict";var n=i(51),r=i(167),a=i(348),s=i(417),o=i(285);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,i=a.f(e),n=i.resolve,h=i.reject,l=s((function(){var i=r(e.resolve),a=[],s=0,h=1;o(t,(function(t){var r=s++,o=!1;a.push(void 0),h++,i.call(e,t).then((function(t){o||(o=!0,a[r]={status:"fulfilled",value:t},--h||n(a))}),(function(t){o||(o=!0,a[r]={status:"rejected",reason:t},--h||n(a))}))})),--h||n(a)}));return l.error&&h(l.value),i.promise}})},function(t,e,i){"use strict";var n=i(51),r=i(220),a=i(408),s=i(83),o=i(176),h=i(414),l=i(416),u=i(244);n({target:"Promise",proto:!0,real:!0,forced:!!a&&s((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=h(this,o("Promise")),i="function"==typeof t;return this.then(i?function(i){return l(e,t()).then((function(){return i}))}:t,i?function(i){return l(e,t()).then((function(){throw i}))}:t)}}),r||"function"!=typeof a||a.prototype.finally||u(a.prototype,"finally",o("Promise").prototype.finally)},function(t,e,i){i(149),i(175);var n=i(527);t.exports=n},function(t,e,i){var n=i(131),r=i(286);t.exports=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},function(t,e,i){var n=i(418);t.exports=n},function(t,e,i){i(51)({target:"Array",stat:!0},{isArray:i(221)})},function(t,e,i){i(149),i(175);var n=i(286);t.exports=n},function(t,e,i){var n=i(419);t.exports=n},function(t,e,i){var n=i(161),r=i(421).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},function(t,e,i){i(96)("asyncIterator")},function(t,e){},function(t,e,i){i(96)("hasInstance")},function(t,e,i){i(96)("isConcatSpreadable")},function(t,e,i){i(96)("match")},function(t,e,i){i(96)("matchAll")},function(t,e,i){i(96)("replace")},function(t,e,i){i(96)("search")},function(t,e,i){i(96)("species")},function(t,e,i){i(96)("split")},function(t,e,i){i(96)("toPrimitive")},function(t,e,i){i(96)("toStringTag")},function(t,e,i){i(96)("unscopables")},function(t,e,i){i(196)(Math,"Math",!0)},function(t,e,i){var n=i(86);i(196)(n.JSON,"JSON",!0)},function(t,e,i){var n=i(424);t.exports=n},function(t,e,i){var n=i(51),r=i(550);n({target:"Array",stat:!0,forced:!i(413)((function(t){Array.from(t)}))},{from:r})},function(t,e,i){"use strict";var n=i(217),r=i(141),a=i(412),s=i(411),o=i(158),h=i(287),l=i(286);t.exports=function(t){var e,i,u,c,f,_,d=r(t),v="function"==typeof this?this:Array,p=arguments.length,y=p>1?arguments[1]:void 0,g=void 0!==y,m=l(d),x=0;if(g&&(y=n(y,p>2?arguments[2]:void 0,2)),null==m||v==Array&&s(m))for(i=new v(e=o(d.length));e>x;x++)_=g?y(d[x],x):d[x],h(i,x,_);else for(f=(c=m.call(d)).next,i=new v;!(u=f.call(c)).done;x++)_=g?a(c,y,[u.value,x],!0):u.value,h(i,x,_);return i.length=x,i}},function(t,e,i){var n=i(425);t.exports=n},function(t,e,i){i(553);var n=i(93);t.exports=n("Array").slice},function(t,e,i){"use strict";var n=i(51),r=i(104),a=i(221),s=i(280),o=i(158),h=i(161),l=i(287),u=i(87),c=i(245),f=i(155),_=c("slice"),d=f("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),p=[].slice,y=Math.max;n({target:"Array",proto:!0,forced:!_||!d},{slice:function(t,e){var i,n,u,c=h(this),f=o(c.length),_=s(t,f),d=s(void 0===e?f:e,f);if(a(c)&&("function"!=typeof(i=c.constructor)||i!==Array&&!a(i.prototype)?r(i)&&null===(i=i[v])&&(i=void 0):i=void 0,i===Array||void 0===i))return p.call(c,_,d);for(n=new(void 0===i?Array:i)(y(d-_,0)),u=0;_<d;_++,u++)_ in c&&l(n,u,c[_]);return n.length=u,n}})},function(t,e,i){t.exports=i(555)},function(t,e,i){var n=i(556);t.exports=n},function(t,e,i){i(423),i(175),i(149);var n=i(351);t.exports=n.f("iterator")},function(t,e,i){var n=i(419);i(558),i(559),i(560),i(561),i(562),t.exports=n},function(t,e,i){i(96)("asyncDispose")},function(t,e,i){i(96)("dispose")},function(t,e,i){i(96)("observable")},function(t,e,i){i(96)("patternMatch")},function(t,e,i){i(96)("replaceAll")},function(t,e,i){var n=i(564);t.exports=n},function(t,e,i){i(565);var n=i(65);t.exports=n.Object.assign},function(t,e,i){var n=i(51),r=i(566);n({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(t,e,i){"use strict";var n=i(118),r=i(83),a=i(284),s=i(422),o=i(337),h=i(141),l=i(324),u=Object.assign,c=Object.defineProperty;t.exports=!u||r((function(){if(n&&1!==u({b:1},u(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||"abcdefghijklmnopqrst"!=a(u({},e)).join("")}))?function(t,e){for(var i=h(t),r=arguments.length,u=1,c=s.f,f=o.f;r>u;)for(var _,d=l(arguments[u++]),v=c?a(d).concat(c(d)):a(d),p=v.length,y=0;p>y;)_=v[y++],n&&!f.call(d,_)||(i[_]=d[_]);return i}:u},function(t,e,i){var n=i(568);t.exports=n},function(t,e,i){var n=i(569),r=Array.prototype;t.exports=function(t){var e=t.splice;return t===r||t instanceof Array&&e===r.splice?n:e}},function(t,e,i){i(570);var n=i(93);t.exports=n("Array").splice},function(t,e,i){"use strict";var n=i(51),r=i(280),a=i(218),s=i(158),o=i(141),h=i(350),l=i(287),u=i(245),c=i(155),f=u("splice"),_=c("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,v=Math.min;n({target:"Array",proto:!0,forced:!f||!_},{splice:function(t,e){var i,n,u,c,f,_,p=o(this),y=s(p.length),g=r(t,y),m=arguments.length;if(0===m?i=n=0:1===m?(i=0,n=y-g):(i=m-2,n=v(d(a(e),0),y-g)),y+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=h(p,n),c=0;c<n;c++)(f=g+c)in p&&l(u,c,p[f]);if(u.length=n,i<n){for(c=g;c<y-n;c++)_=c+i,(f=c+n)in p?p[_]=p[f]:delete p[_];for(c=y;c>y-n+i;c--)delete p[c-1]}else if(i>n)for(c=y-n;c>g;c--)_=c+i-1,(f=c+n-1)in p?p[_]=p[f]:delete p[_];for(c=0;c<i;c++)p[c+g]=arguments[c+2];return p.length=y-n+i,u}})},function(t,e,i){var n=i(572);t.exports=n},function(t,e,i){var n=i(573),r=Array.prototype;t.exports=function(t){var e=t.find;return t===r||t instanceof Array&&e===r.find?n:e}},function(t,e,i){i(574);var n=i(93);t.exports=n("Array").find},function(t,e,i){"use strict";var n=i(51),r=i(209).find,a=i(266),s=i(155),o=!0,h=s("find");"find"in[]&&Array(1).find((function(){o=!1})),n({target:"Array",proto:!0,forced:o||!h},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("find")},function(t,e,i){var n=i(576);t.exports=n},function(t,e,i){var n=i(577),r=Function.prototype;t.exports=function(t){var e=t.bind;return t===r||t instanceof Function&&e===r.bind?n:e}},function(t,e,i){i(578);var n=i(93);t.exports=n("Function").bind},function(t,e,i){i(51)({target:"Function",proto:!0},{bind:i(426)})},function(t,e,i){var n=i(580);t.exports=n},function(t,e,i){i(581),i(281),i(175),i(149);var n=i(65);t.exports=n.Map},function(t,e,i){"use strict";var n=i(427),r=i(429);t.exports=n("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},function(t,e,i){var n=i(83);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,i){var n=i(430);t.exports=n},function(t,e,i){var n=i(51),r=i(118);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:i(136).f})},function(t,e,i){var n=i(586);t.exports=n},function(t,e,i){var n=i(587),r=Array.prototype;t.exports=function(t){var e=t.concat;return t===r||t instanceof Array&&e===r.concat?n:e}},function(t,e,i){i(420);var n=i(93);t.exports=n("Array").concat},function(t,e,i){var n=i(589);t.exports=n},function(t,e,i){var n=i(590),r=String.prototype;t.exports=function(t){var e=t.repeat;return"string"==typeof t||t===r||t instanceof String&&e===r.repeat?n:e}},function(t,e,i){i(591);var n=i(93);t.exports=n("String").repeat},function(t,e,i){i(51)({target:"String",proto:!0},{repeat:i(592)})},function(t,e,i){"use strict";var n=i(218),r=i(216);t.exports="".repeat||function(t){var e=String(r(this)),i="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(i+=e);return i}},function(t,e,i){var n=i(594);t.exports=n},function(t,e,i){i(595);var n=i(65);t.exports=n.Date.now},function(t,e,i){i(51)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,i){var n=i(597);t.exports=n},function(t,e,i){var n=i(598),r=Array.prototype;t.exports=function(t){var e=t.lastIndexOf;return t===r||t instanceof Array&&e===r.lastIndexOf?n:e}},function(t,e,i){i(599);var n=i(93);t.exports=n("Array").lastIndexOf},function(t,e,i){var n=i(51),r=i(600);n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},function(t,e,i){"use strict";var n=i(161),r=i(218),a=i(158),s=i(265),o=i(155),h=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,c=s("lastIndexOf"),f=o("indexOf",{ACCESSORS:!0,1:0}),_=u||!c||!f;t.exports=_?function(t){if(u)return l.apply(this,arguments)||0;var e=n(this),i=a(e.length),s=i-1;for(arguments.length>1&&(s=h(s,r(arguments[1]))),s<0&&(s=i+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:l},function(t,e,i){var n=i(602);t.exports=n},function(t,e,i){i(603);var n=i(65);t.exports=n.parseInt},function(t,e,i){var n=i(51),r=i(604);n({global:!0,forced:parseInt!=r},{parseInt:r})},function(t,e,i){var n=i(86),r=i(431).trim,a=i(353),s=n.parseInt,o=/^[+-]?0[Xx]/,h=8!==s(a+"08")||22!==s(a+"0x16");t.exports=h?function(t,e){var i=r(String(t));return s(i,e>>>0||(o.test(i)?16:10))}:s},function(t,e,i){var n=i(606);t.exports=n},function(t,e,i){i(607);var n=i(65);t.exports=n.Reflect.construct},function(t,e,i){var n=i(51),r=i(176),a=i(167),s=i(131),o=i(104),h=i(243),l=i(426),u=i(83),c=r("Reflect","construct"),f=u((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),_=!u((function(){c((function(){}))})),d=f||_;n({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){a(t),s(e);var i=arguments.length<3?t:a(arguments[2]);if(_&&!f)return c(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(l.apply(t,n))}var r=i.prototype,u=h(o(r)?r:Object.prototype),d=Function.apply.call(t,u,e);return o(d)?d:u}})},function(t,e,i){var n=i(609);t.exports=n},function(t,e,i){i(610);var n=i(65).Object,r=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(r.sham=!0)},function(t,e,i){var n=i(51),r=i(83),a=i(161),s=i(214).f,o=i(118),h=r((function(){s(1)}));n({target:"Object",stat:!0,forced:!o||h,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(a(t),e)}})},function(t,e,i){t.exports=i(612)},function(t,e,i){var n=i(613);t.exports=n},function(t,e,i){i(614);var n=i(65);t.exports=n.Reflect.set},function(t,e,i){var n=i(51),r=i(131),a=i(104),s=i(119),o=i(83),h=i(136),l=i(214),u=i(242),c=i(215);n({target:"Reflect",stat:!0,forced:o((function(){var t=h.f({},"a",{configurable:!0});return!1!==Reflect.set(u(t),"a",1,t)}))},{set:function t(e,i,n){var o,f,_=arguments.length<4?e:arguments[3],d=l.f(r(e),i);if(!d){if(a(f=u(e)))return t(f,i,n,_);d=c(0)}if(s(d,"value")){if(!1===d.writable||!a(_))return!1;if(o=l.f(_,i)){if(o.get||o.set||!1===o.writable)return!1;o.value=n,h.f(_,i,o)}else h.f(_,i,c(0,n));return!0}return void 0!==d.set&&(d.set.call(_,n),!0)}})},function(t,e,i){t.exports=i(616)},function(t,e,i){var n=i(617);t.exports=n},function(t,e,i){i(618);var n=i(65);t.exports=n.Object.getPrototypeOf},function(t,e,i){var n=i(51),r=i(83),a=i(141),s=i(242),o=i(403);n({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!o},{getPrototypeOf:function(t){return s(a(t))}})},function(t,e,i){var n=i(620);t.exports=n},function(t,e,i){i(621);var n=i(65);t.exports=n.Object.setPrototypeOf},function(t,e,i){i(51)({target:"Object",stat:!0},{setPrototypeOf:i(407)})},function(t,e,i){t.exports=i(623)},function(t,e,i){var n=i(624);t.exports=n},function(t,e,i){i(625);var n=i(65);t.exports=n.Reflect.get},function(t,e,i){var n=i(51),r=i(104),a=i(131),s=i(119),o=i(214),h=i(242);n({target:"Reflect",stat:!0},{get:function t(e,i){var n,l,u=arguments.length<3?e:arguments[2];return a(e)===u?e[i]:(n=o.f(e,i))?s(n,"value")?n.value:void 0===n.get?void 0:n.get.call(u):r(l=h(e))?t(l,i,u):void 0}})},function(t,e,i){t.exports=i(627)},function(t,e,i){var n=i(628);t.exports=n},function(t,e,i){i(629);var n=i(65).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){i(51)({target:"Object",stat:!0,sham:!i(118)},{create:i(243)})},function(t,e,i){var n=i(434);function r(e,i){return t.exports=r=n||function(t,e){return t.__proto__=e,t},r(e,i)}t.exports=r},function(t,e,i){var n=i(632);t.exports=n},function(t,e,i){i(633);var n=i(65);t.exports=n.parseFloat},function(t,e,i){var n=i(51),r=i(634);n({global:!0,forced:parseFloat!=r},{parseFloat:r})},function(t,e,i){var n=i(86),r=i(431).trim,a=i(353),s=n.parseFloat,o=1/s(a+"-0")!=-1/0;t.exports=o?function(t){var e=r(String(t)),i=s(e);return 0===i&&"-"==e.charAt(0)?-0:i}:s},function(t,e,i){var n=i(636);t.exports=n},function(t,e,i){i(637);var n=i(65);t.exports=n.Math.log2},function(t,e,i){var n=i(51),r=Math.log,a=Math.LN2;n({target:"Math",stat:!0},{log2:function(t){return r(t)/a}})},function(t,e,i){i(149);var n=i(639),r=i(191),a=Array.prototype,s={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===a||t instanceof Array&&e===a.forEach||s.hasOwnProperty(r(t))?n:e}},function(t,e,i){var n=i(640);t.exports=n},function(t,e,i){i(641);var n=i(93);t.exports=n("Array").forEach},function(t,e,i){"use strict";var n=i(51),r=i(642);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(t,e,i){"use strict";var n=i(209).forEach,r=i(265),a=i(155),s=r("forEach"),o=a("forEach");t.exports=s&&o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,i){var n=i(644);t.exports=n},function(t,e,i){var n=i(645),r=Array.prototype;t.exports=function(t){var e=t.fill;return t===r||t instanceof Array&&e===r.fill?n:e}},function(t,e,i){i(646);var n=i(93);t.exports=n("Array").fill},function(t,e,i){var n=i(51),r=i(647),a=i(266);n({target:"Array",proto:!0},{fill:r}),a("fill")},function(t,e,i){"use strict";var n=i(141),r=i(280),a=i(158);t.exports=function(t){for(var e=n(this),i=a(e.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,i),h=s>2?arguments[2]:void 0,l=void 0===h?i:r(h,i);l>o;)e[o++]=t;return e}},function(t,e,i){var n=i(649);t.exports=n},function(t,e,i){var n=i(650),r=Array.prototype;t.exports=function(t){var e=t.sort;return t===r||t instanceof Array&&e===r.sort?n:e}},function(t,e,i){i(651);var n=i(93);t.exports=n("Array").sort},function(t,e,i){"use strict";var n=i(51),r=i(167),a=i(141),s=i(83),o=i(265),h=[],l=h.sort,u=s((function(){h.sort(void 0)})),c=s((function(){h.sort(null)})),f=o("sort");n({target:"Array",proto:!0,forced:u||!c||!f},{sort:function(t){return void 0===t?l.call(a(this)):l.call(a(this),r(t))}})},function(t,e,i){var n=i(653);t.exports=n},function(t,e,i){var n=i(654),r=Array.prototype;t.exports=function(t){var e=t.map;return t===r||t instanceof Array&&e===r.map?n:e}},function(t,e,i){i(655);var n=i(93);t.exports=n("Array").map},function(t,e,i){"use strict";var n=i(51),r=i(209).map,a=i(245),s=i(155),o=a("map"),h=s("map");n({target:"Array",proto:!0,forced:!o||!h},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(657);t.exports=n},function(t,e,i){var n=i(658),r=Array.prototype;t.exports=function(t){var e=t.reverse;return t===r||t instanceof Array&&e===r.reverse?n:e}},function(t,e,i){i(659);var n=i(93);t.exports=n("Array").reverse},function(t,e,i){"use strict";var n=i(51),r=i(221),a=[].reverse,s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),a.call(this)}})},function(t,e,i){var n=i(661);t.exports=n},function(t,e,i){i(662);var n=i(65);t.exports=n.Number.isNaN},function(t,e,i){i(51)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(664);t.exports=n},function(t,e,i){i(665);var n=i(65);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(t,e,i){return n.JSON.stringify.apply(null,arguments)}},function(t,e,i){var n=i(51),r=i(176),a=i(83),s=r("JSON","stringify"),o=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(t,e,i){var n=i.charAt(e-1),r=i.charAt(e+1);return h.test(t)&&!l.test(r)||l.test(t)&&!h.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},c=a((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:c},{stringify:function(t,e,i){var n=s.apply(null,arguments);return"string"==typeof n?n.replace(o,u):n}})},function(t,e,i){i(149);var n=i(667),r=i(191),a=Array.prototype,s={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===a||t instanceof Array&&e===a.keys||s.hasOwnProperty(r(t))?n:e}},function(t,e,i){var n=i(668);t.exports=n},function(t,e,i){i(325);var n=i(93);t.exports=n("Array").keys},function(t,e,i){var n=i(430);t.exports=n},function(t,e,i){var n=i(671);t.exports=n},function(t,e,i){var n=i(672),r=i(674),a=Array.prototype,s=String.prototype;t.exports=function(t){var e=t.includes;return t===a||t instanceof Array&&e===a.includes?n:"string"==typeof t||t===s||t instanceof String&&e===s.includes?r:e}},function(t,e,i){i(673);var n=i(93);t.exports=n("Array").includes},function(t,e,i){"use strict";var n=i(51),r=i(339).includes,a=i(266);n({target:"Array",proto:!0,forced:!i(155)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(t,e,i){i(675);var n=i(93);t.exports=n("String").includes},function(t,e,i){"use strict";var n=i(51),r=i(676),a=i(216);n({target:"String",proto:!0,forced:!i(678)("includes")},{includes:function(t){return!!~String(a(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(677);t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,i){var n=i(104),r=i(195),a=i(87)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(87)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,i){var n=i(680);t.exports=n},function(t,e,i){i(681),i(281),i(175),i(149);var n=i(65);t.exports=n.Set},function(t,e,i){"use strict";var n=i(427),r=i(429);t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},function(t,e,i){i(683);var n=i(65);t.exports=n.setImmediate},function(t,e,i){var n=i(51),r=i(86),a=i(346);n({global:!0,bind:!0,enumerable:!0,forced:!r.setImmediate||!r.clearImmediate},{setImmediate:a.set,clearImmediate:a.clear})},function(t,e,i){var n=i(685);t.exports=n},function(t,e,i){i(686);var n=i(65);t.exports=n.Object.keys},function(t,e,i){var n=i(51),r=i(141),a=i(284);n({target:"Object",stat:!0,forced:i(83)((function(){a(1)}))},{keys:function(t){return a(r(t))}})},function(t,e,i){i(460);var n=i(65);t.exports=n.setTimeout},function(t,e,i){var n=i(689);t.exports=n},function(t,e,i){var n=i(690),r=Array.prototype;t.exports=function(t){var e=t.filter;return t===r||t instanceof Array&&e===r.filter?n:e}},function(t,e,i){i(691);var n=i(93);t.exports=n("Array").filter},function(t,e,i){"use strict";var n=i(51),r=i(209).filter,a=i(245),s=i(155),o=a("filter"),h=s("filter");n({target:"Array",proto:!0,forced:!o||!h},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(461);t.exports=function(t){if(n(t))return t}},function(t,e,i){var n=i(418);t.exports=n},function(t,e,i){var n=i(24),r=i(462),a=i(375);t.exports=function(t,e){if(void 0!==a&&r(Object(t))){var i=[],s=!0,o=!1,h=void 0;try{for(var l,u=n(t);!(s=(l=u.next()).done)&&(i.push(l.value),!e||i.length!==e);s=!0);}catch(t){o=!0,h=t}finally{try{s||null==u.return||u.return()}finally{if(o)throw h}}return i}}},function(t,e,i){i(149),i(175);var n=i(696);t.exports=n},function(t,e,i){var n=i(191),r=i(87),a=i(197),s=r("iterator");t.exports=function(t){var e=Object(t);return void 0!==e[s]||"@@iterator"in e||a.hasOwnProperty(n(e))}},function(t,e,i){var n=i(424);t.exports=n},function(t,e,i){t.exports=i(699)},function(t,e,i){var n=i(425);t.exports=n},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,i){i(149);var n=i(702),r=i(191),a=Array.prototype,s={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.entries;return t===a||t instanceof Array&&e===a.entries||s.hasOwnProperty(r(t))?n:e}},function(t,e,i){var n=i(703);t.exports=n},function(t,e,i){i(325);var n=i(93);t.exports=n("Array").entries},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){i(949),t.exports=i(61)},function(t,e,i){"use strict";i.r(e),i.d(e,"Laya",(function(){return St})),i.d(e,"__init",(function(){return Ut})),i.d(e,"init",(function(){return Gt})),i.d(e,"stage",(function(){return Rt})),i.d(e,"systemTimer",(function(){return It})),i.d(e,"startTimer",(function(){return Dt})),i.d(e,"physicsTimer",(function(){return Pt})),i.d(e,"updateTimer",(function(){return Lt})),i.d(e,"lateTimer",(function(){return Bt})),i.d(e,"timer",(function(){return Ot})),i.d(e,"loader",(function(){return Ft})),i.d(e,"version",(function(){return Yt})),i.d(e,"render",(function(){return Nt})),i.d(e,"isWXOpenDataContext",(function(){})),i.d(e,"isWXPosMsg",(function(){})),i.d(e,"alertGlobalError",(function(){return Wt})),i.d(e,"enableDebugPanel",(function(){return Vt})),i.d(e,"_static",(function(){return Xt}));var n=i(53),r=i.n(n),a=i(137),s=i.n(a),o=i(270),h=i.n(o),l=i(15),u=i.n(l),c=i(88),f=i.n(c),_=i(1),d=i.n(_),v=i(4),p=i.n(v),y=i(0),g=i(110),m=i(246),x=i(103),k=i(163),T=i(44),b=i(160),C=i(75),w=i(358),S=i(144),E=i(16),A=i(185),M=i(117),R=i(157),I=i(21),D=i(249),P=i(271),L=i(359),B=i(40),O=i(47),F=i(173),N=i(105),U=i(125),G=i(116),Y=i(98),W=i(12),V=i(248),X=i(10),H=i(81),z=i(360),j=i(13),K=i(168),q=i(22),Z=i(368),Q=i(130),$=i(34),J=i(132),tt=i(49),et=i(361),it=i(362),nt=i(272),rt=i(60),at=i(121),st=i(247),ot=i(172),ht=i(36),lt=i(274),ut=i(133),ct=i(17),ft=i(363),_t=i(364),dt=i(156),vt=i(365),pt=i(134),yt=i(164),gt=i(198),mt=i(66),xt=i(19),kt=i(250),Tt=i(18),bt=i(366),Ct=i(5),wt=i(99),St=function(){function t(){d()(this,t)}return p()(t,null,[{key:"__init",value:function(t){f()(t).call(t,(function(t){t.__init$&&t.__init$()}))}},{key:"init",value:function(e,i){if(!t._isinit){t._isinit=!0,u()(ArrayBuffer.prototype)||(ArrayBuffer.prototype.slice=t._arrayBufferSlice),W.a.__init__();var n=W.a.mainCanvas=new U.a(!0),r=n.source.style;r.position="absolute",r.top=r.left="0px",r.background="#000000",W.a.onKGMiniGame||W.a.onAlipayMiniGame||W.a.container.appendChild(n.source),W.a.canvas=new U.a(!0),W.a.context=W.a.canvas.getContext("2d"),W.a.supportWebAudio=M.a.__init__(),W.a.supportLocalStorage=P.a.__init__(),t.systemTimer=new Q.a(!1),It=Q.a.gSysTimer=t.systemTimer,t.startTimer=new Q.a(!1),t.physicsTimer=new Q.a(!1),t.updateTimer=new Q.a(!1),t.lateTimer=new Q.a(!1),t.timer=new Q.a(!1),Dt=y.a.startTimer=t.startTimer,Bt=y.a.lateTimer=t.lateTimer,Lt=y.a.updateTimer=t.updateTimer,y.a.systemTimer=t.systemTimer,Ot=y.a.timer=t.timer,Pt=y.a.physicsTimer=t.physicsTimer,t.loader=new D.a,y.a.Laya=t,Ft=y.a.loader=t.loader,J.a.__init__(),K.a.__init(),_t.a.__init__(),ut.a.inner_enable();for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];if(s)for(var h=0,l=s.length;h<l;h++)s[h]&&s[h].enable&&s[h].enable();return y.a.Render.isConchApp&&t.enableNative(),t.enableWebGLPlus(),V.a.beginCheck(),Rt=t.stage=new b.a,y.a.stage=t.stage,$.a.gStage=t.stage,B.a.rootPath=B.a._basePath=t._getUrlPath(),pt.a.__int__(),dt.a.__init__(),yt.a.__init__(),t.render=new O.a(0,0,W.a.mainCanvas),Nt=t.render,t.stage.size(e,i),window.stage=t.stage,ct.a.__init__(),vt.a.__init__(),lt.a.__init__(),F.a.__init__(),w.a.__init__(),S.a.instance.__init__(t.stage,O.a.canvas),x.a.__init__(),M.a.autoStopMusic=!0,q.a._StatRender=new Z.a,rt.a._initone(tt.a.TEXTURE2D,nt.a),rt.a._initone(tt.a.TEXTURE2D|tt.a.FILTERGLOW,nt.a),rt.a._initone(tt.a.PRIMITIVE,it.a),rt.a._initone(tt.a.SKINMESH,et.a),O.a.canvas}}},{key:"_getUrlPath",value:function(){var t=W.a.window.location,e=t.pathname;return e=":"==e.charAt(2)?e.substring(1):e,B.a.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname)}},{key:"_arrayBufferSlice",value:function(t,e){var i=new Uint8Array(this,t,e-t),n=new Uint8Array(i.length);return n.set(i),n.buffer}},{key:"alertGlobalError",value:function(t){var e=0;W.a.window.onerror=t?function(t,i,n,r,a){e++<5&&a&&this.alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+a.stack)}:null}},{key:"_runScript",value:function(e){return W.a.window[t._evcode](e)}},{key:"enableDebugPanel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"libs/laya.debugtool.js";if(window.Laya.DebugPanel)window.Laya.DebugPanel.enable();else{var e=W.a.createElement("script");e.onload=function(){window.Laya.DebugPanel.enable()},e.src=t,W.a.document.body.appendChild(e)}}},{key:"enableWebGLPlus",value:function(){ct.a.__init_native()}},{key:"enableNative",value:function(){t.isNativeRender_enable||(t.isNativeRender_enable=!0,O.a.supportWebGLPlusRendering&&(at.a.prototype.uploadTexture2D=function(t){var e=E.a.instance;e.bindTexture(e.TEXTURE_2D,t)}),ht.a.width=W.a.window.innerWidth,ht.a.height=W.a.window.innerHeight,W.a.measureText=function(t,e){return window.conchTextCanvas.font=e,window.conchTextCanvas.measureText(t)},b.a.clear=function(t){N.a.set2DRenderConfig();var e=H.a.create(t).arrColor,i=E.a.instance;e&&i.clearColor(e[0],e[1],e[2],e[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT),ht.a.clear()},T.a.drawToCanvas=T.a.drawToTexture=function(t,e,i,n,r,a){r-=t.x,a-=t.y,r|=0,a|=0,i|=0,n|=0;var s=new U.a(!1),o=s.getContext("2d");return s.size(i,n),o.asBitmap=!0,o._targets.start(),F.a.renders[e]._fun(t,o,r,a),o.flush(),o._targets.end(),o._targets.restore(),s},h()(G.a.prototype,"uv",{get:function(){return this._uv},set:function(t){this._uv=t}}),U.a.prototype.getTexture=function(){return this._texture||(this._texture=this.context._targets,this._texture.uv=G.a.flipyuv,this._texture.bitmap=this._texture),this._texture})}}]),t}();St.stage=null,St.systemTimer=null,St.startTimer=null,St.physicsTimer=null,St.updateTimer=null,St.lateTimer=null,St.timer=null,St.loader=null,St.version="2.6.0",St._isinit=!1,St.isWXOpenDataContext=!1,St.isWXPosMsg=!1,St.__classmap=null,St.Config=wt.a,St.TextRender=ot.a,St.EventDispatcher=mt.a,St.SoundChannel=gt.a,St.Stage=b.a,St.Render=O.a,St.Browser=W.a,St.Sprite=T.a,St.Node=k.a,St.Context=N.a,St.WebGL=ut.a,St.Handler=xt.a,St.RunDriver=kt.a,St.Utils=$.a,St.Input=x.a,St.Loader=I.a,St.LocalStorage=P.a,St.SoundManager=M.a,St.URL=B.a,St.Event=Ct.a,St.Matrix=Tt.a,St.HTMLImage=bt.a,St.Laya=St,St._evcode="eval",St.isNativeRender_enable=!1,St.__classmap=y.a.__classMap,y.a.Timer=Q.a,y.a.Dragging=z.a,y.a.GraphicsBounds=m.a,y.a.Sprite=T.a,y.a.TextRender=ot.a,y.a.Loader=I.a,y.a.TTFLoader=L.a,y.a.WebAudioSound=R.a,y.a.SoundManager=M.a,y.a.ShaderCompile=lt.a,y.a.ClassUtils=X.a,y.a.SceneUtils=K.a,y.a.Context=N.a,y.a.Render=O.a,y.a.MouseManager=S.a,y.a.Text=C.a,y.a.Browser=W.a,y.a.WebGL=ut.a,y.a.AudioSound=A.a,y.a.Pool=j.a,y.a.Utils=$.a,y.a.Graphics=g.a,y.a.Submit=st.a,y.a.Stage=b.a,y.a.Resource=Y.a,y.a.WorkerLoader=ft.a;var Et=window._layalibs;if(Et){s()(Et).call(Et,(function(t,e){return t.i-e.i}));for(var At=0;At<Et.length;At++)Et[At].f(window,window.document,St)}var Mt=window;Mt.Laya?(Mt.Laya.Laya=St,r()(Mt.Laya,St)):Mt.Laya=St;var Rt,It,Dt,Pt,Lt,Bt,Ot,Ft,Nt,Ut=St.__init,Gt=St.init,Yt=St.version,Wt=St.alertGlobalError,Vt=St.enableDebugPanel;function Xt(t,e){for(var i=0,n=e.length;i<n;i+=2)if("length"==e[i])t.length=e[i+1].call(t);else{!function(){var n=e[i],r=e[i+1];h()(t,n,{get:function(){return delete this[n],this[n]=r.call(this)},set:function(t){delete this[n],this[n]=t},enumerable:!0,configurable:!0})}()}}}]);